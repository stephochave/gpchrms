function uy(e,n){for(var s=0;s<n.length;s++){const c=n[s];if(typeof c!="string"&&!Array.isArray(c)){for(const f in c)if(f!=="default"&&!(f in e)){const m=Object.getOwnPropertyDescriptor(c,f);m&&Object.defineProperty(e,f,m.get?m:{enumerable:!0,get:()=>c[f]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const v of m.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function s(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(f){if(f.ep)return;f.ep=!0;const m=s(f);fetch(f.href,m)}})();var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qh={exports:{}},pc={},Qh={exports:{}},Vt={};var tg;function tC(){if(tg)return Vt;tg=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function O(X){return X===null||typeof X!="object"?null:(X=I&&X[I]||X["@@iterator"],typeof X=="function"?X:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,R={};function P(X,ie,je){this.props=X,this.context=ie,this.refs=R,this.updater=je||_}P.prototype.isReactComponent={},P.prototype.setState=function(X,ie){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ie,"setState")},P.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function H(){}H.prototype=P.prototype;function z(X,ie,je){this.props=X,this.context=ie,this.refs=R,this.updater=je||_}var F=z.prototype=new H;F.constructor=z,k(F,P.prototype),F.isPureReactComponent=!0;var Z=Array.isArray,W=Object.prototype.hasOwnProperty,te={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function J(X,ie,je){var Ie,We={},_e=null,Ae=null;if(ie!=null)for(Ie in ie.ref!==void 0&&(Ae=ie.ref),ie.key!==void 0&&(_e=""+ie.key),ie)W.call(ie,Ie)&&!G.hasOwnProperty(Ie)&&(We[Ie]=ie[Ie]);var Ue=arguments.length-2;if(Ue===1)We.children=je;else if(1<Ue){for(var qe=Array(Ue),st=0;st<Ue;st++)qe[st]=arguments[st+2];We.children=qe}if(X&&X.defaultProps)for(Ie in Ue=X.defaultProps,Ue)We[Ie]===void 0&&(We[Ie]=Ue[Ie]);return{$$typeof:e,type:X,key:_e,ref:Ae,props:We,_owner:te.current}}function se(X,ie){return{$$typeof:e,type:X.type,key:ie,ref:X.ref,props:X.props,_owner:X._owner}}function fe(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function Ee(X){var ie={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(je){return ie[je]})}var ue=/\/+/g;function ge(X,ie){return typeof X=="object"&&X!==null&&X.key!=null?Ee(""+X.key):ie.toString(36)}function re(X,ie,je,Ie,We){var _e=typeof X;(_e==="undefined"||_e==="boolean")&&(X=null);var Ae=!1;if(X===null)Ae=!0;else switch(_e){case"string":case"number":Ae=!0;break;case"object":switch(X.$$typeof){case e:case n:Ae=!0}}if(Ae)return Ae=X,We=We(Ae),X=Ie===""?"."+ge(Ae,0):Ie,Z(We)?(je="",X!=null&&(je=X.replace(ue,"$&/")+"/"),re(We,ie,je,"",function(st){return st})):We!=null&&(fe(We)&&(We=se(We,je+(!We.key||Ae&&Ae.key===We.key?"":(""+We.key).replace(ue,"$&/")+"/")+X)),ie.push(We)),1;if(Ae=0,Ie=Ie===""?".":Ie+":",Z(X))for(var Ue=0;Ue<X.length;Ue++){_e=X[Ue];var qe=Ie+ge(_e,Ue);Ae+=re(_e,ie,je,qe,We)}else if(qe=O(X),typeof qe=="function")for(X=qe.call(X),Ue=0;!(_e=X.next()).done;)_e=_e.value,qe=Ie+ge(_e,Ue++),Ae+=re(_e,ie,je,qe,We);else if(_e==="object")throw ie=String(X),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Ae}function q(X,ie,je){if(X==null)return X;var Ie=[],We=0;return re(X,Ie,"","",function(_e){return ie.call(je,_e,We++)}),Ie}function U(X){if(X._status===-1){var ie=X._result;ie=ie(),ie.then(function(je){(X._status===0||X._status===-1)&&(X._status=1,X._result=je)},function(je){(X._status===0||X._status===-1)&&(X._status=2,X._result=je)}),X._status===-1&&(X._status=0,X._result=ie)}if(X._status===1)return X._result.default;throw X._result}var K={current:null},ne={transition:null},oe={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:ne,ReactCurrentOwner:te};function we(){throw Error("act(...) is not supported in production builds of React.")}return Vt.Children={map:q,forEach:function(X,ie,je){q(X,function(){ie.apply(this,arguments)},je)},count:function(X){var ie=0;return q(X,function(){ie++}),ie},toArray:function(X){return q(X,function(ie){return ie})||[]},only:function(X){if(!fe(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Vt.Component=P,Vt.Fragment=s,Vt.Profiler=f,Vt.PureComponent=z,Vt.StrictMode=c,Vt.Suspense=w,Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Vt.act=we,Vt.cloneElement=function(X,ie,je){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Ie=k({},X.props),We=X.key,_e=X.ref,Ae=X._owner;if(ie!=null){if(ie.ref!==void 0&&(_e=ie.ref,Ae=te.current),ie.key!==void 0&&(We=""+ie.key),X.type&&X.type.defaultProps)var Ue=X.type.defaultProps;for(qe in ie)W.call(ie,qe)&&!G.hasOwnProperty(qe)&&(Ie[qe]=ie[qe]===void 0&&Ue!==void 0?Ue[qe]:ie[qe])}var qe=arguments.length-2;if(qe===1)Ie.children=je;else if(1<qe){Ue=Array(qe);for(var st=0;st<qe;st++)Ue[st]=arguments[st+2];Ie.children=Ue}return{$$typeof:e,type:X.type,key:We,ref:_e,props:Ie,_owner:Ae}},Vt.createContext=function(X){return X={$$typeof:v,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:m,_context:X},X.Consumer=X},Vt.createElement=J,Vt.createFactory=function(X){var ie=J.bind(null,X);return ie.type=X,ie},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(X){return{$$typeof:N,render:X}},Vt.isValidElement=fe,Vt.lazy=function(X){return{$$typeof:E,_payload:{_status:-1,_result:X},_init:U}},Vt.memo=function(X,ie){return{$$typeof:y,type:X,compare:ie===void 0?null:ie}},Vt.startTransition=function(X){var ie=ne.transition;ne.transition={};try{X()}finally{ne.transition=ie}},Vt.unstable_act=we,Vt.useCallback=function(X,ie){return K.current.useCallback(X,ie)},Vt.useContext=function(X){return K.current.useContext(X)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(X){return K.current.useDeferredValue(X)},Vt.useEffect=function(X,ie){return K.current.useEffect(X,ie)},Vt.useId=function(){return K.current.useId()},Vt.useImperativeHandle=function(X,ie,je){return K.current.useImperativeHandle(X,ie,je)},Vt.useInsertionEffect=function(X,ie){return K.current.useInsertionEffect(X,ie)},Vt.useLayoutEffect=function(X,ie){return K.current.useLayoutEffect(X,ie)},Vt.useMemo=function(X,ie){return K.current.useMemo(X,ie)},Vt.useReducer=function(X,ie,je){return K.current.useReducer(X,ie,je)},Vt.useRef=function(X){return K.current.useRef(X)},Vt.useState=function(X){return K.current.useState(X)},Vt.useSyncExternalStore=function(X,ie,je){return K.current.useSyncExternalStore(X,ie,je)},Vt.useTransition=function(){return K.current.useTransition()},Vt.version="18.3.1",Vt}var ng;function rf(){return ng||(ng=1,Qh.exports=tC()),Qh.exports}var rg;function nC(){if(rg)return pc;rg=1;var e=rf(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function v(N,w,y){var E,I={},O=null,_=null;y!==void 0&&(O=""+y),w.key!==void 0&&(O=""+w.key),w.ref!==void 0&&(_=w.ref);for(E in w)c.call(w,E)&&!m.hasOwnProperty(E)&&(I[E]=w[E]);if(N&&N.defaultProps)for(E in w=N.defaultProps,w)I[E]===void 0&&(I[E]=w[E]);return{$$typeof:n,type:N,key:O,ref:_,props:I,_owner:f.current}}return pc.Fragment=s,pc.jsx=v,pc.jsxs=v,pc}var sg;function rC(){return sg||(sg=1,qh.exports=nC()),qh.exports}var r=rC(),hu={},Kh={exports:{}},as={},Jh={exports:{}},em={};var ag;function sC(){return ag||(ag=1,(function(e){function n(ne,oe){var we=ne.length;ne.push(oe);e:for(;0<we;){var X=we-1>>>1,ie=ne[X];if(0<f(ie,oe))ne[X]=oe,ne[we]=ie,we=X;else break e}}function s(ne){return ne.length===0?null:ne[0]}function c(ne){if(ne.length===0)return null;var oe=ne[0],we=ne.pop();if(we!==oe){ne[0]=we;e:for(var X=0,ie=ne.length,je=ie>>>1;X<je;){var Ie=2*(X+1)-1,We=ne[Ie],_e=Ie+1,Ae=ne[_e];if(0>f(We,we))_e<ie&&0>f(Ae,We)?(ne[X]=Ae,ne[_e]=we,X=_e):(ne[X]=We,ne[Ie]=we,X=Ie);else if(_e<ie&&0>f(Ae,we))ne[X]=Ae,ne[_e]=we,X=_e;else break e}}return oe}function f(ne,oe){var we=ne.sortIndex-oe.sortIndex;return we!==0?we:ne.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var v=Date,N=v.now();e.unstable_now=function(){return v.now()-N}}var w=[],y=[],E=1,I=null,O=3,_=!1,k=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(ne){for(var oe=s(y);oe!==null;){if(oe.callback===null)c(y);else if(oe.startTime<=ne)c(y),oe.sortIndex=oe.expirationTime,n(w,oe);else break;oe=s(y)}}function Z(ne){if(R=!1,F(ne),!k)if(s(w)!==null)k=!0,U(W);else{var oe=s(y);oe!==null&&K(Z,oe.startTime-ne)}}function W(ne,oe){k=!1,R&&(R=!1,H(J),J=-1),_=!0;var we=O;try{for(F(oe),I=s(w);I!==null&&(!(I.expirationTime>oe)||ne&&!Ee());){var X=I.callback;if(typeof X=="function"){I.callback=null,O=I.priorityLevel;var ie=X(I.expirationTime<=oe);oe=e.unstable_now(),typeof ie=="function"?I.callback=ie:I===s(w)&&c(w),F(oe)}else c(w);I=s(w)}if(I!==null)var je=!0;else{var Ie=s(y);Ie!==null&&K(Z,Ie.startTime-oe),je=!1}return je}finally{I=null,O=we,_=!1}}var te=!1,G=null,J=-1,se=5,fe=-1;function Ee(){return!(e.unstable_now()-fe<se)}function ue(){if(G!==null){var ne=e.unstable_now();fe=ne;var oe=!0;try{oe=G(!0,ne)}finally{oe?ge():(te=!1,G=null)}}else te=!1}var ge;if(typeof z=="function")ge=function(){z(ue)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,q=re.port2;re.port1.onmessage=ue,ge=function(){q.postMessage(null)}}else ge=function(){P(ue,0)};function U(ne){G=ne,te||(te=!0,ge())}function K(ne,oe){J=P(function(){ne(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){k||_||(k=!0,U(W))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return s(w)},e.unstable_next=function(ne){switch(O){case 1:case 2:case 3:var oe=3;break;default:oe=O}var we=O;O=oe;try{return ne()}finally{O=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,oe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=O;O=ne;try{return oe()}finally{O=we}},e.unstable_scheduleCallback=function(ne,oe,we){var X=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?X+we:X):we=X,ne){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=we+ie,ne={id:E++,callback:oe,priorityLevel:ne,startTime:we,expirationTime:ie,sortIndex:-1},we>X?(ne.sortIndex=we,n(y,ne),s(w)===null&&ne===s(y)&&(R?(H(J),J=-1):R=!0,K(Z,we-X))):(ne.sortIndex=ie,n(w,ne),k||_||(k=!0,U(W))),ne},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(ne){var oe=O;return function(){var we=O;O=oe;try{return ne.apply(this,arguments)}finally{O=we}}}})(em)),em}var ig;function aC(){return ig||(ig=1,Jh.exports=sC()),Jh.exports}var og;function iC(){if(og)return as;og=1;var e=rf(),n=aC();function s(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,f={};function m(a,l){v(a,l),v(a+"Capture",l)}function v(a,l){for(f[a]=l,a=0;a<l.length;a++)c.add(l[a])}var N=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function O(a){return w.call(I,a)?!0:w.call(E,a)?!1:y.test(a)?I[a]=!0:(E[a]=!0,!1)}function _(a,l,p,x){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return x?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function k(a,l,p,x){if(l===null||typeof l>"u"||_(a,l,p,x))return!0;if(x)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function R(a,l,p,x,A,j,B){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=x,this.attributeNamespace=A,this.mustUseProperty=p,this.propertyName=a,this.type=l,this.sanitizeURL=j,this.removeEmptyString=B}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){P[a]=new R(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];P[l]=new R(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){P[a]=new R(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){P[a]=new R(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){P[a]=new R(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){P[a]=new R(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){P[a]=new R(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){P[a]=new R(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){P[a]=new R(a,5,!1,a.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(H,z);P[l]=new R(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(H,z);P[l]=new R(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(H,z);P[l]=new R(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){P[a]=new R(a,1,!1,a.toLowerCase(),null,!1,!1)}),P.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){P[a]=new R(a,1,!1,a.toLowerCase(),null,!0,!0)});function F(a,l,p,x){var A=P.hasOwnProperty(l)?P[l]:null;(A!==null?A.type!==0:x||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,p,A,x)&&(p=null),x||A===null?O(l)&&(p===null?a.removeAttribute(l):a.setAttribute(l,""+p)):A.mustUseProperty?a[A.propertyName]=p===null?A.type===3?!1:"":p:(l=A.attributeName,x=A.attributeNamespace,p===null?a.removeAttribute(l):(A=A.type,p=A===3||A===4&&p===!0?"":""+p,x?a.setAttributeNS(x,l,p):a.setAttribute(l,p))))}var Z=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),te=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),ne=Symbol.iterator;function oe(a){return a===null||typeof a!="object"?null:(a=ne&&a[ne]||a["@@iterator"],typeof a=="function"?a:null)}var we=Object.assign,X;function ie(a){if(X===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+a}var je=!1;function Ie(a,l){if(!a||je)return"";je=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Ce){var x=Ce}Reflect.construct(a,[],l)}else{try{l.call()}catch(Ce){x=Ce}a.call(l.prototype)}else{try{throw Error()}catch(Ce){x=Ce}a()}}catch(Ce){if(Ce&&x&&typeof Ce.stack=="string"){for(var A=Ce.stack.split(`
`),j=x.stack.split(`
`),B=A.length-1,Q=j.length-1;1<=B&&0<=Q&&A[B]!==j[Q];)Q--;for(;1<=B&&0<=Q;B--,Q--)if(A[B]!==j[Q]){if(B!==1||Q!==1)do if(B--,Q--,0>Q||A[B]!==j[Q]){var le=`
`+A[B].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=B&&0<=Q);break}}}finally{je=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?ie(a):""}function We(a){switch(a.tag){case 5:return ie(a.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return a=Ie(a.type,!1),a;case 11:return a=Ie(a.type.render,!1),a;case 1:return a=Ie(a.type,!0),a;default:return""}}function _e(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case G:return"Fragment";case te:return"Portal";case se:return"Profiler";case J:return"StrictMode";case ge:return"Suspense";case re:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ee:return(a.displayName||"Context")+".Consumer";case fe:return(a._context.displayName||"Context")+".Provider";case ue:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return l=a.displayName||null,l!==null?l:_e(a.type)||"Memo";case U:l=a._payload,a=a._init;try{return _e(a(l))}catch{}}return null}function Ae(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(l);case 8:return l===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ue(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function qe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function st(a){var l=qe(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),x=""+a[l];if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,j=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return A.call(this)},set:function(B){x=""+B,j.call(this,B)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return x},setValue:function(B){x=""+B},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function me(a){a._valueTracker||(a._valueTracker=st(a))}function Ze(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),x="";return a&&(x=qe(a)?a.checked?"true":"false":a.value),a=x,a!==p?(l.setValue(a),!0):!1}function Xe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ct(a,l){var p=l.checked;return we({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function Yt(a,l){var p=l.defaultValue==null?"":l.defaultValue,x=l.checked!=null?l.checked:l.defaultChecked;p=Ue(l.value!=null?l.value:p),a._wrapperState={initialChecked:x,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function on(a,l){l=l.checked,l!=null&&F(a,"checked",l,!1)}function T(a,l){on(a,l);var p=Ue(l.value),x=l.type;if(p!=null)x==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(x==="submit"||x==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Be(a,l.type,p):l.hasOwnProperty("defaultValue")&&Be(a,l.type,Ue(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Re(a,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var x=l.type;if(!(x!=="submit"&&x!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,p||l===a.value||(a.value=l),a.defaultValue=l}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function Be(a,l,p){(l!=="number"||Xe(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var ee=Array.isArray;function pe(a,l,p,x){if(a=a.options,l){l={};for(var A=0;A<p.length;A++)l["$"+p[A]]=!0;for(p=0;p<a.length;p++)A=l.hasOwnProperty("$"+a[p].value),a[p].selected!==A&&(a[p].selected=A),A&&x&&(a[p].defaultSelected=!0)}else{for(p=""+Ue(p),l=null,A=0;A<a.length;A++){if(a[A].value===p){a[A].selected=!0,x&&(a[A].defaultSelected=!0);return}l!==null||a[A].disabled||(l=a[A])}l!==null&&(l.selected=!0)}}function at(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(s(91));return we({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function dt(a,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(s(92));if(ee(p)){if(1<p.length)throw Error(s(93));p=p[0]}l=p}l==null&&(l=""),p=l}a._wrapperState={initialValue:Ue(p)}}function Bt(a,l){var p=Ue(l.value),x=Ue(l.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),l.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),x!=null&&(a.defaultValue=""+x)}function Mn(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Pt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Pt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var vn,zn=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,x,A){MSApp.execUnsafeLocalFunction(function(){return a(l,p,x,A)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(vn=vn||document.createElement("div"),vn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=vn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function fr(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},As=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(a){As.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Ir[l]=Ir[a]})});function zt(a,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Ir.hasOwnProperty(a)&&Ir[a]?(""+l).trim():l+"px"}function ke(a,l){a=a.style;for(var p in l)if(l.hasOwnProperty(p)){var x=p.indexOf("--")===0,A=zt(p,l[p],x);p==="float"&&(p="cssFloat"),x?a.setProperty(p,A):a[p]=A}}var fn=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lt(a,l){if(l){if(fn[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(s(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(s(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(s(61))}if(l.style!=null&&typeof l.style!="object")throw Error(s(62))}}function nn(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ds=null;function aa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ca=null,Ft=null,br=null;function Qr(a){if(a=ec(a)){if(typeof Ca!="function")throw Error(s(280));var l=a.stateNode;l&&(l=Id(l),Ca(a.stateNode,a.type,l))}}function Bi(a){Ft?br?br.push(a):br=[a]:Ft=a}function ht(){if(Ft){var a=Ft,l=br;if(br=Ft=null,Qr(a),l)for(a=0;a<l.length;a++)Qr(l[a])}}function Zt(a,l){return a(l)}function Rt(){}var Gn=!1;function hr(a,l,p){if(Gn)return a(l,p);Gn=!0;try{return Zt(a,l,p)}finally{Gn=!1,(Ft!==null||br!==null)&&(Rt(),ht())}}function jn(a,l){var p=a.stateNode;if(p===null)return null;var x=Id(p);if(x===null)return null;p=x[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(s(231,l,typeof p));return p}var us=!1;if(N)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){us=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{us=!1}function Kr(a,l,p,x,A,j,B,Q,le){var Ce=Array.prototype.slice.call(arguments,3);try{l.apply(p,Ce)}catch(Fe){this.onError(Fe)}}var ir=!1,Is=null,jr=!1,Qe=null,$a={onError:function(a){ir=!0,Is=a}};function Ol(a,l,p,x,A,j,B,Q,le){ir=!1,Is=null,Kr.apply($a,arguments)}function kr(a,l,p,x,A,j,B,Q,le){if(Ol.apply(this,arguments),ir){if(ir){var Ce=Is;ir=!1,Is=null}else throw Error(s(198));jr||(jr=!0,Qe=Ce)}}function Jr(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function Ui(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function zi(a){if(Jr(a)!==a)throw Error(s(188))}function js(a){var l=a.alternate;if(!l){if(l=Jr(a),l===null)throw Error(s(188));return l!==a?null:a}for(var p=a,x=l;;){var A=p.return;if(A===null)break;var j=A.alternate;if(j===null){if(x=A.return,x!==null){p=x;continue}break}if(A.child===j.child){for(j=A.child;j;){if(j===p)return zi(A),a;if(j===x)return zi(A),l;j=j.sibling}throw Error(s(188))}if(p.return!==x.return)p=A,x=j;else{for(var B=!1,Q=A.child;Q;){if(Q===p){B=!0,p=A,x=j;break}if(Q===x){B=!0,x=A,p=j;break}Q=Q.sibling}if(!B){for(Q=j.child;Q;){if(Q===p){B=!0,p=j,x=A;break}if(Q===x){B=!0,x=j,p=A;break}Q=Q.sibling}if(!B)throw Error(s(189))}}if(p.alternate!==x)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?a:l}function id(a){return a=js(a),a!==null?od(a):null}function od(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=od(a);if(l!==null)return l;a=a.sibling}return null}var fs=n.unstable_scheduleCallback,Nr=n.unstable_cancelCallback,wn=n.unstable_shouldYield,ld=n.unstable_requestPaint,ln=n.unstable_now,kl=n.unstable_getCurrentPriorityLevel,De=n.unstable_ImmediatePriority,cd=n.unstable_UserBlockingPriority,mn=n.unstable_NormalPriority,Ga=n.unstable_LowPriority,dd=n.unstable_IdlePriority,qt=null,Ot=null;function Wt(a){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(qt,a,void 0,(a.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Jn,Pl=Math.log,Ml=Math.LN2;function Jn(a){return a>>>=0,a===0?32:31-(Pl(a)/Ml|0)|0}var hs=64,Io=4194304;function pn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function ms(a,l){var p=a.pendingLanes;if(p===0)return 0;var x=0,A=a.suspendedLanes,j=a.pingedLanes,B=p&268435455;if(B!==0){var Q=B&~A;Q!==0?x=pn(Q):(j&=B,j!==0&&(x=pn(j)))}else B=p&~A,B!==0?x=pn(B):j!==0&&(x=pn(j));if(x===0)return 0;if(l!==0&&l!==x&&(l&A)===0&&(A=x&-x,j=l&-l,A>=j||A===16&&(j&4194240)!==0))return l;if((x&4)!==0&&(x|=p&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=x;0<l;)p=31-Gr(l),A=1<<p,x|=a[p],l&=~A;return x}function Rf(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xa(a,l){for(var p=a.suspendedLanes,x=a.pingedLanes,A=a.expirationTimes,j=a.pendingLanes;0<j;){var B=31-Gr(j),Q=1<<B,le=A[B];le===-1?((Q&p)===0||(Q&x)!==0)&&(A[B]=Rf(Q,l)):le<=l&&(a.expiredLanes|=Q),j&=~Q}}function cn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function mr(){var a=hs;return hs<<=1,(hs&4194240)===0&&(hs=64),a}function xe(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function $(a,l,p){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Gr(l),a[l]=p}function mt(a,l){var p=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var x=a.eventTimes;for(a=a.expirationTimes;0<p;){var A=31-Gr(p),j=1<<A;l[A]=0,x[A]=-1,a[A]=-1,p&=~j}}function Xn(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var x=31-Gr(p),A=1<<x;A&l|a[x]&l&&(a[x]|=l),p&=~A}}var kt=0;function ud(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var jo,Pr,pt,bn,Ll,Fl=!1,Ya=[],ps=null,Ts=null,ia=null,Ln=new Map,Ws=new Map,Tr=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fd(a,l){switch(a){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":ia=null;break;case"pointerover":case"pointerout":Ln.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(l.pointerId)}}function At(a,l,p,x,A,j){return a===null||a.nativeEvent!==j?(a={blockedOn:l,domEventName:p,eventSystemFlags:x,nativeEvent:j,targetContainers:[A]},l!==null&&(l=ec(l),l!==null&&Pr(l)),a):(a.eventSystemFlags|=x,l=a.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),a)}function pr(a,l,p,x,A){switch(l){case"focusin":return ps=At(ps,a,l,p,x,A),!0;case"dragenter":return Ts=At(Ts,a,l,p,x,A),!0;case"mouseover":return ia=At(ia,a,l,p,x,A),!0;case"pointerover":var j=A.pointerId;return Ln.set(j,At(Ln.get(j)||null,a,l,p,x,A)),!0;case"gotpointercapture":return j=A.pointerId,Ws.set(j,At(Ws.get(j)||null,a,l,p,x,A)),!0}return!1}function hd(a){var l=Qi(a.target);if(l!==null){var p=Jr(l);if(p!==null){if(l=p.tag,l===13){if(l=Ui(p),l!==null){a.blockedOn=l,Ll(a.priority,function(){pt(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Za(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=To(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var x=new p.constructor(p.type,p);ds=x,p.target.dispatchEvent(x),ds=null}else return l=ec(p),l!==null&&Pr(l),a.blockedOn=p,!1;l.shift()}return!0}function Bl(a,l,p){Za(a)&&p.delete(l)}function Ea(){Fl=!1,ps!==null&&Za(ps)&&(ps=null),Ts!==null&&Za(Ts)&&(Ts=null),ia!==null&&Za(ia)&&(ia=null),Ln.forEach(Bl),Ws.forEach(Bl)}function Vi(a,l){a.blockedOn===l&&(a.blockedOn=null,Fl||(Fl=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ea)))}function $s(a){function l(A){return Vi(A,a)}if(0<Ya.length){Vi(Ya[0],a);for(var p=1;p<Ya.length;p++){var x=Ya[p];x.blockedOn===a&&(x.blockedOn=null)}}for(ps!==null&&Vi(ps,a),Ts!==null&&Vi(Ts,a),ia!==null&&Vi(ia,a),Ln.forEach(l),Ws.forEach(l),p=0;p<Tr.length;p++)x=Tr[p],x.blockedOn===a&&(x.blockedOn=null);for(;0<Tr.length&&(p=Tr[0],p.blockedOn===null);)hd(p),p.blockedOn===null&&Tr.shift()}var Rs=Z.ReactCurrentBatchConfig,oa=!0;function md(a,l,p,x){var A=kt,j=Rs.transition;Rs.transition=null;try{kt=1,Sa(a,l,p,x)}finally{kt=A,Rs.transition=j}}function Hi(a,l,p,x){var A=kt,j=Rs.transition;Rs.transition=null;try{kt=4,Sa(a,l,p,x)}finally{kt=A,Rs.transition=j}}function Sa(a,l,p,x){if(oa){var A=To(a,l,p,x);if(A===null)Uf(a,l,x,gr,p),fd(a,x);else if(pr(A,a,l,p,x))x.stopPropagation();else if(fd(a,x),l&4&&-1<Nt.indexOf(a)){for(;A!==null;){var j=ec(A);if(j!==null&&jo(j),j=To(a,l,p,x),j===null&&Uf(a,l,x,gr,p),j===A)break;A=j}A!==null&&x.stopPropagation()}else Uf(a,l,x,null,p)}}var gr=null;function To(a,l,p,x){if(gr=null,a=aa(x),a=Qi(a),a!==null)if(l=Jr(a),l===null)a=null;else if(p=l.tag,p===13){if(a=Ui(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return gr=a,null}function Ul(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kl()){case De:return 1;case cd:return 4;case mn:case Ga:return 16;case dd:return 536870912;default:return 16}default:return 16}}var Gs=null,zl=null,Ro=null;function pd(){if(Ro)return Ro;var a,l=zl,p=l.length,x,A="value"in Gs?Gs.value:Gs.textContent,j=A.length;for(a=0;a<p&&l[a]===A[a];a++);var B=p-a;for(x=1;x<=B&&l[p-x]===A[j-x];x++);return Ro=A.slice(a,1<x?1-x:void 0)}function Qt(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Wi(){return!0}function $i(){return!1}function Yn(a){function l(p,x,A,j,B){this._reactName=p,this._targetInst=A,this.type=x,this.nativeEvent=j,this.target=B,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(p=a[Q],this[Q]=p?p(j):j[Q]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Wi:$i,this.isPropagationStopped=$i,this}return we(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),l}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ne=Yn(qa),Tt=we({},qa,{view:0,detail:0}),xr=Yn(Tt),Qa,_o,Gi,Do=we({},Tt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Gi&&(Gi&&a.type==="mousemove"?(Qa=a.screenX-Gi.screenX,_o=a.screenY-Gi.screenY):_o=Qa=0,Gi=a),Qa)},movementY:function(a){return"movementY"in a?a.movementY:_o}}),gd=Yn(Do),Vl=we({},Do,{dataTransfer:0}),er=Yn(Vl),Hl=we({},Tt,{relatedTarget:0}),Nn=Yn(Hl),Oo=we({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Yn(Oo),dn=we({},qa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),xt=Yn(dn),_f=we({},qa,{data:0}),hn=Yn(_f),Ia={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ka={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Df={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _s(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Df[a])?!!l[a]:!1}function Xi(){return _s}var xd=we({},Tt,{key:function(a){if(a.key){var l=Ia[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Qt(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ka[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(a){return a.type==="keypress"?Qt(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Qt(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Wl=Yn(xd),yd=we({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$l=Yn(yd),Of=we({},Tt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),Ja=Yn(Of),Gl=we({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),kf=Yn(Gl),Yi=we({},Do,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Pf=Yn(Yi),la=[9,13,27,32],ei=N&&"CompositionEvent"in window,Cr=null;N&&"documentMode"in document&&(Cr=document.documentMode);var vd=N&&"TextEvent"in window&&!Cr,gs=N&&(!ei||Cr&&8<Cr&&11>=Cr),wd=" ",ko=!1;function bd(a,l){switch(a){case"keyup":return la.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Rr=!1;function Mf(a,l){switch(a){case"compositionend":return Xl(l);case"keypress":return l.which!==32?null:(ko=!0,wd);case"textInput":return a=l.data,a===wd&&ko?null:a;default:return null}}function Yl(a,l){if(Rr)return a==="compositionend"||!ei&&bd(a,l)?(a=pd(),Ro=zl=Gs=null,Rr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return gs&&l.locale!=="ko"?null:l.data;default:return null}}var Zi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Zi[a.type]:l==="textarea"}function qi(a,l,p,x){Bi(x),l=Ed(l,"onChange"),0<l.length&&(p=new Ne("onChange","change",null,p,x),a.push({event:p,listeners:l}))}var M=null,t=null;function i(a){x0(a,0)}function o(a){var l=Lo(a);if(Ze(l))return a}function d(a,l){if(a==="change")return l}var u=!1;if(N){var h;if(N){var g="oninput"in document;if(!g){var b=document.createElement("div");b.setAttribute("oninput","return;"),g=typeof b.oninput=="function"}h=g}else h=!1;u=h&&(!document.documentMode||9<document.documentMode)}function S(){M&&(M.detachEvent("onpropertychange",D),t=M=null)}function D(a){if(a.propertyName==="value"&&o(t)){var l=[];qi(l,t,a,aa(a)),hr(i,l)}}function L(a,l,p){a==="focusin"?(S(),M=l,t=p,M.attachEvent("onpropertychange",D)):a==="focusout"&&S()}function V(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return o(t)}function Y(a,l){if(a==="click")return o(l)}function ae(a,l){if(a==="input"||a==="change")return o(l)}function ce(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var he=typeof Object.is=="function"?Object.is:ce;function be(a,l){if(he(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),x=Object.keys(l);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var A=p[x];if(!w.call(l,A)||!he(a[A],l[A]))return!1}return!0}function Ve(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function He(a,l){var p=Ve(a);a=0;for(var x;p;){if(p.nodeType===3){if(x=a+p.textContent.length,a<=l&&x>=l)return{node:p,offset:l-a};a=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ve(p)}}function Le(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Le(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Ut(){for(var a=window,l=Xe();l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=Xe(a.document)}return l}function It(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Mr(a){var l=Ut(),p=a.focusedElem,x=a.selectionRange;if(l!==p&&p&&p.ownerDocument&&Le(p.ownerDocument.documentElement,p)){if(x!==null&&It(p)){if(l=x.start,a=x.end,a===void 0&&(a=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(a,p.value.length);else if(a=(l=p.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var A=p.textContent.length,j=Math.min(x.start,A);x=x.end===void 0?j:Math.min(x.end,A),!a.extend&&j>x&&(A=x,x=j,j=A),A=He(p,j);var B=He(p,x);A&&B&&(a.rangeCount!==1||a.anchorNode!==A.node||a.anchorOffset!==A.offset||a.focusNode!==B.node||a.focusOffset!==B.offset)&&(l=l.createRange(),l.setStart(A.node,A.offset),a.removeAllRanges(),j>x?(a.addRange(l),a.extend(B.node,B.offset)):(l.setEnd(B.node,B.offset),a.addRange(l)))}}for(l=[],a=p;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)a=l[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var xs=N&&"documentMode"in document&&11>=document.documentMode,tr=null,rn=null,Vn=null,_r=!1;function ja(a,l,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;_r||tr==null||tr!==Xe(x)||(x=tr,"selectionStart"in x&&It(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Vn&&be(Vn,x)||(Vn=x,x=Ed(rn,"onSelect"),0<x.length&&(l=new Ne("onSelect","select",null,l,p),a.push({event:l,listeners:x}),l.target=tr)))}function Xs(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var ti={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},Zl={},c0={};N&&(c0=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function Nd(a){if(Zl[a])return Zl[a];if(!ti[a])return a;var l=ti[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in c0)return Zl[a]=l[p];return a}var d0=Nd("animationend"),u0=Nd("animationiteration"),f0=Nd("animationstart"),h0=Nd("transitionend"),m0=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(a,l){m0.set(a,l),m(l,[a])}for(var Lf=0;Lf<p0.length;Lf++){var Ff=p0[Lf],dN=Ff.toLowerCase(),uN=Ff[0].toUpperCase()+Ff.slice(1);ni(dN,"on"+uN)}ni(d0,"onAnimationEnd"),ni(u0,"onAnimationIteration"),ni(f0,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(h0,"onTransitionEnd"),v("onMouseEnter",["mouseout","mouseover"]),v("onMouseLeave",["mouseout","mouseover"]),v("onPointerEnter",["pointerout","pointerover"]),v("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function g0(a,l,p){var x=a.type||"unknown-event";a.currentTarget=p,kr(x,l,void 0,a),a.currentTarget=null}function x0(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var x=a[p],A=x.event;x=x.listeners;e:{var j=void 0;if(l)for(var B=x.length-1;0<=B;B--){var Q=x[B],le=Q.instance,Ce=Q.currentTarget;if(Q=Q.listener,le!==j&&A.isPropagationStopped())break e;g0(A,Q,Ce),j=le}else for(B=0;B<x.length;B++){if(Q=x[B],le=Q.instance,Ce=Q.currentTarget,Q=Q.listener,le!==j&&A.isPropagationStopped())break e;g0(A,Q,Ce),j=le}}}if(jr)throw a=Qe,jr=!1,Qe=null,a}function Rn(a,l){var p=l[Gf];p===void 0&&(p=l[Gf]=new Set);var x=a+"__bubble";p.has(x)||(y0(l,a,2,!1),p.add(x))}function Bf(a,l,p){var x=0;l&&(x|=4),y0(p,a,x,l)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function Ql(a){if(!a[Cd]){a[Cd]=!0,c.forEach(function(p){p!=="selectionchange"&&(fN.has(p)||Bf(p,!1,a),Bf(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Cd]||(l[Cd]=!0,Bf("selectionchange",!1,l))}}function y0(a,l,p,x){switch(Ul(l)){case 1:var A=md;break;case 4:A=Hi;break;default:A=Sa}p=A.bind(null,l,p,a),A=void 0,!us||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),x?A!==void 0?a.addEventListener(l,p,{capture:!0,passive:A}):a.addEventListener(l,p,!0):A!==void 0?a.addEventListener(l,p,{passive:A}):a.addEventListener(l,p,!1)}function Uf(a,l,p,x,A){var j=x;if((l&1)===0&&(l&2)===0&&x!==null)e:for(;;){if(x===null)return;var B=x.tag;if(B===3||B===4){var Q=x.stateNode.containerInfo;if(Q===A||Q.nodeType===8&&Q.parentNode===A)break;if(B===4)for(B=x.return;B!==null;){var le=B.tag;if((le===3||le===4)&&(le=B.stateNode.containerInfo,le===A||le.nodeType===8&&le.parentNode===A))return;B=B.return}for(;Q!==null;){if(B=Qi(Q),B===null)return;if(le=B.tag,le===5||le===6){x=j=B;continue e}Q=Q.parentNode}}x=x.return}hr(function(){var Ce=j,Fe=aa(p),ze=[];e:{var Pe=m0.get(a);if(Pe!==void 0){var Ke=Ne,rt=a;switch(a){case"keypress":if(Qt(p)===0)break e;case"keydown":case"keyup":Ke=Wl;break;case"focusin":rt="focus",Ke=Nn;break;case"focusout":rt="blur",Ke=Nn;break;case"beforeblur":case"afterblur":Ke=Nn;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=Ja;break;case d0:case u0:case f0:Ke=Aa;break;case h0:Ke=kf;break;case"scroll":Ke=xr;break;case"wheel":Ke=Pf;break;case"copy":case"cut":case"paste":Ke=xt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=$l}var ot=(l&4)!==0,nr=!ot&&a==="scroll",ye=ot?Pe!==null?Pe+"Capture":null:Pe;ot=[];for(var de=Ce,ve;de!==null;){ve=de;var $e=ve.stateNode;if(ve.tag===5&&$e!==null&&(ve=$e,ye!==null&&($e=jn(de,ye),$e!=null&&ot.push(Kl(de,$e,ve)))),nr)break;de=de.return}0<ot.length&&(Pe=new Ke(Pe,rt,null,p,Fe),ze.push({event:Pe,listeners:ot}))}}if((l&7)===0){e:{if(Pe=a==="mouseover"||a==="pointerover",Ke=a==="mouseout"||a==="pointerout",Pe&&p!==ds&&(rt=p.relatedTarget||p.fromElement)&&(Qi(rt)||rt[Ta]))break e;if((Ke||Pe)&&(Pe=Fe.window===Fe?Fe:(Pe=Fe.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Ke?(rt=p.relatedTarget||p.toElement,Ke=Ce,rt=rt?Qi(rt):null,rt!==null&&(nr=Jr(rt),rt!==nr||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Ke=null,rt=Ce),Ke!==rt)){if(ot=gd,$e="onMouseLeave",ye="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(ot=$l,$e="onPointerLeave",ye="onPointerEnter",de="pointer"),nr=Ke==null?Pe:Lo(Ke),ve=rt==null?Pe:Lo(rt),Pe=new ot($e,de+"leave",Ke,p,Fe),Pe.target=nr,Pe.relatedTarget=ve,$e=null,Qi(Fe)===Ce&&(ot=new ot(ye,de+"enter",rt,p,Fe),ot.target=ve,ot.relatedTarget=nr,$e=ot),nr=$e,Ke&&rt)t:{for(ot=Ke,ye=rt,de=0,ve=ot;ve;ve=Po(ve))de++;for(ve=0,$e=ye;$e;$e=Po($e))ve++;for(;0<de-ve;)ot=Po(ot),de--;for(;0<ve-de;)ye=Po(ye),ve--;for(;de--;){if(ot===ye||ye!==null&&ot===ye.alternate)break t;ot=Po(ot),ye=Po(ye)}ot=null}else ot=null;Ke!==null&&v0(ze,Pe,Ke,ot,!1),rt!==null&&nr!==null&&v0(ze,nr,rt,ot,!0)}}e:{if(Pe=Ce?Lo(Ce):window,Ke=Pe.nodeName&&Pe.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Pe.type==="file")var ut=d;else if(Xt(Pe))if(u)ut=ae;else{ut=V;var vt=L}else(Ke=Pe.nodeName)&&Ke.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(ut=Y);if(ut&&(ut=ut(a,Ce))){qi(ze,ut,p,Fe);break e}vt&&vt(a,Pe,Ce),a==="focusout"&&(vt=Pe._wrapperState)&&vt.controlled&&Pe.type==="number"&&Be(Pe,"number",Pe.value)}switch(vt=Ce?Lo(Ce):window,a){case"focusin":(Xt(vt)||vt.contentEditable==="true")&&(tr=vt,rn=Ce,Vn=null);break;case"focusout":Vn=rn=tr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,ja(ze,p,Fe);break;case"selectionchange":if(xs)break;case"keydown":case"keyup":ja(ze,p,Fe)}var wt;if(ei)e:{switch(a){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Rr?bd(a,p)&&(Et="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Et="onCompositionStart");Et&&(gs&&p.locale!=="ko"&&(Rr||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Rr&&(wt=pd()):(Gs=Fe,zl="value"in Gs?Gs.value:Gs.textContent,Rr=!0)),vt=Ed(Ce,Et),0<vt.length&&(Et=new hn(Et,a,null,p,Fe),ze.push({event:Et,listeners:vt}),wt?Et.data=wt:(wt=Xl(p),wt!==null&&(Et.data=wt)))),(wt=vd?Mf(a,p):Yl(a,p))&&(Ce=Ed(Ce,"onBeforeInput"),0<Ce.length&&(Fe=new hn("onBeforeInput","beforeinput",null,p,Fe),ze.push({event:Fe,listeners:Ce}),Fe.data=wt))}x0(ze,l)})}function Kl(a,l,p){return{instance:a,listener:l,currentTarget:p}}function Ed(a,l){for(var p=l+"Capture",x=[];a!==null;){var A=a,j=A.stateNode;A.tag===5&&j!==null&&(A=j,j=jn(a,p),j!=null&&x.unshift(Kl(a,j,A)),j=jn(a,l),j!=null&&x.push(Kl(a,j,A))),a=a.return}return x}function Po(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function v0(a,l,p,x,A){for(var j=l._reactName,B=[];p!==null&&p!==x;){var Q=p,le=Q.alternate,Ce=Q.stateNode;if(le!==null&&le===x)break;Q.tag===5&&Ce!==null&&(Q=Ce,A?(le=jn(p,j),le!=null&&B.unshift(Kl(p,le,Q))):A||(le=jn(p,j),le!=null&&B.push(Kl(p,le,Q)))),p=p.return}B.length!==0&&a.push({event:l,listeners:B})}var hN=/\r\n?/g,mN=/\u0000|\uFFFD/g;function w0(a){return(typeof a=="string"?a:""+a).replace(hN,`
`).replace(mN,"")}function Sd(a,l,p){if(l=w0(l),w0(a)!==l&&p)throw Error(s(425))}function Ad(){}var zf=null,Vf=null;function Hf(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,b0=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof b0<"u"?function(a){return b0.resolve(null).then(a).catch(xN)}:Wf;function xN(a){setTimeout(function(){throw a})}function $f(a,l){var p=l,x=0;do{var A=p.nextSibling;if(a.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(x===0){a.removeChild(A),$s(l);return}x--}else p!=="$"&&p!=="$?"&&p!=="$!"||x++;p=A}while(p);$s(l)}function ri(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function N0(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return a;l--}else p==="/$"&&l++}a=a.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),ca="__reactFiber$"+Mo,Jl="__reactProps$"+Mo,Ta="__reactContainer$"+Mo,Gf="__reactEvents$"+Mo,yN="__reactListeners$"+Mo,vN="__reactHandles$"+Mo;function Qi(a){var l=a[ca];if(l)return l;for(var p=a.parentNode;p;){if(l=p[Ta]||p[ca]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=N0(a);a!==null;){if(p=a[ca])return p;a=N0(a)}return l}a=p,p=a.parentNode}return null}function ec(a){return a=a[ca]||a[Ta],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Lo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(s(33))}function Id(a){return a[Jl]||null}var Xf=[],Fo=-1;function si(a){return{current:a}}function _n(a){0>Fo||(a.current=Xf[Fo],Xf[Fo]=null,Fo--)}function Cn(a,l){Fo++,Xf[Fo]=a.current,a.current=l}var ai={},Lr=si(ai),es=si(!1),Ki=ai;function Bo(a,l){var p=a.type.contextTypes;if(!p)return ai;var x=a.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===l)return x.__reactInternalMemoizedMaskedChildContext;var A={},j;for(j in p)A[j]=l[j];return x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=A),A}function ts(a){return a=a.childContextTypes,a!=null}function jd(){_n(es),_n(Lr)}function C0(a,l,p){if(Lr.current!==ai)throw Error(s(168));Cn(Lr,l),Cn(es,p)}function E0(a,l,p){var x=a.stateNode;if(l=l.childContextTypes,typeof x.getChildContext!="function")return p;x=x.getChildContext();for(var A in x)if(!(A in l))throw Error(s(108,Ae(a)||"Unknown",A));return we({},p,x)}function Td(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ai,Ki=Lr.current,Cn(Lr,a),Cn(es,es.current),!0}function S0(a,l,p){var x=a.stateNode;if(!x)throw Error(s(169));p?(a=E0(a,l,Ki),x.__reactInternalMemoizedMergedChildContext=a,_n(es),_n(Lr),Cn(Lr,a)):_n(es),Cn(es,p)}var Ra=null,Rd=!1,Yf=!1;function A0(a){Ra===null?Ra=[a]:Ra.push(a)}function wN(a){Rd=!0,A0(a)}function ii(){if(!Yf&&Ra!==null){Yf=!0;var a=0,l=kt;try{var p=Ra;for(kt=1;a<p.length;a++){var x=p[a];do x=x(!0);while(x!==null)}Ra=null,Rd=!1}catch(A){throw Ra!==null&&(Ra=Ra.slice(a+1)),fs(De,ii),A}finally{kt=l,Yf=!1}}return null}var Uo=[],zo=0,_d=null,Dd=0,Ds=[],Os=0,Ji=null,_a=1,Da="";function eo(a,l){Uo[zo++]=Dd,Uo[zo++]=_d,_d=a,Dd=l}function I0(a,l,p){Ds[Os++]=_a,Ds[Os++]=Da,Ds[Os++]=Ji,Ji=a;var x=_a;a=Da;var A=32-Gr(x)-1;x&=~(1<<A),p+=1;var j=32-Gr(l)+A;if(30<j){var B=A-A%5;j=(x&(1<<B)-1).toString(32),x>>=B,A-=B,_a=1<<32-Gr(l)+A|p<<A|x,Da=j+a}else _a=1<<j|p<<A|x,Da=a}function Zf(a){a.return!==null&&(eo(a,1),I0(a,1,0))}function qf(a){for(;a===_d;)_d=Uo[--zo],Uo[zo]=null,Dd=Uo[--zo],Uo[zo]=null;for(;a===Ji;)Ji=Ds[--Os],Ds[Os]=null,Da=Ds[--Os],Ds[Os]=null,_a=Ds[--Os],Ds[Os]=null}var ys=null,vs=null,Fn=!1,Ys=null;function j0(a,l){var p=Ls(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=a,l=a.deletions,l===null?(a.deletions=[p],a.flags|=16):l.push(p)}function T0(a,l){switch(a.tag){case 5:var p=a.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,ys=a,vs=ri(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,ys=a,vs=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=Ji!==null?{id:_a,overflow:Da}:null,a.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Ls(18,null,null,0),p.stateNode=l,p.return=a,a.child=p,ys=a,vs=null,!0):!1;default:return!1}}function Qf(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Kf(a){if(Fn){var l=vs;if(l){var p=l;if(!T0(a,l)){if(Qf(a))throw Error(s(418));l=ri(p.nextSibling);var x=ys;l&&T0(a,l)?j0(x,p):(a.flags=a.flags&-4097|2,Fn=!1,ys=a)}}else{if(Qf(a))throw Error(s(418));a.flags=a.flags&-4097|2,Fn=!1,ys=a}}}function R0(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;ys=a}function Od(a){if(a!==ys)return!1;if(!Fn)return R0(a),Fn=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Hf(a.type,a.memoizedProps)),l&&(l=vs)){if(Qf(a))throw _0(),Error(s(418));for(;l;)j0(a,l),l=ri(l.nextSibling)}if(R0(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(l===0){vs=ri(a.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}a=a.nextSibling}vs=null}}else vs=ys?ri(a.stateNode.nextSibling):null;return!0}function _0(){for(var a=vs;a;)a=ri(a.nextSibling)}function Vo(){vs=ys=null,Fn=!1}function Jf(a){Ys===null?Ys=[a]:Ys.push(a)}var bN=Z.ReactCurrentBatchConfig;function tc(a,l,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(s(309));var x=p.stateNode}if(!x)throw Error(s(147,a));var A=x,j=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===j?l.ref:(l=function(B){var Q=A.refs;B===null?delete Q[j]:Q[j]=B},l._stringRef=j,l)}if(typeof a!="string")throw Error(s(284));if(!p._owner)throw Error(s(290,a))}return a}function kd(a,l){throw a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function D0(a){var l=a._init;return l(a._payload)}function O0(a){function l(ye,de){if(a){var ve=ye.deletions;ve===null?(ye.deletions=[de],ye.flags|=16):ve.push(de)}}function p(ye,de){if(!a)return null;for(;de!==null;)l(ye,de),de=de.sibling;return null}function x(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function A(ye,de){return ye=mi(ye,de),ye.index=0,ye.sibling=null,ye}function j(ye,de,ve){return ye.index=ve,a?(ve=ye.alternate,ve!==null?(ve=ve.index,ve<de?(ye.flags|=2,de):ve):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function B(ye){return a&&ye.alternate===null&&(ye.flags|=2),ye}function Q(ye,de,ve,$e){return de===null||de.tag!==6?(de=Wh(ve,ye.mode,$e),de.return=ye,de):(de=A(de,ve),de.return=ye,de)}function le(ye,de,ve,$e){var ut=ve.type;return ut===G?Fe(ye,de,ve.props.children,$e,ve.key):de!==null&&(de.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===U&&D0(ut)===de.type)?($e=A(de,ve.props),$e.ref=tc(ye,de,ve),$e.return=ye,$e):($e=su(ve.type,ve.key,ve.props,null,ye.mode,$e),$e.ref=tc(ye,de,ve),$e.return=ye,$e)}function Ce(ye,de,ve,$e){return de===null||de.tag!==4||de.stateNode.containerInfo!==ve.containerInfo||de.stateNode.implementation!==ve.implementation?(de=$h(ve,ye.mode,$e),de.return=ye,de):(de=A(de,ve.children||[]),de.return=ye,de)}function Fe(ye,de,ve,$e,ut){return de===null||de.tag!==7?(de=lo(ve,ye.mode,$e,ut),de.return=ye,de):(de=A(de,ve),de.return=ye,de)}function ze(ye,de,ve){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Wh(""+de,ye.mode,ve),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case W:return ve=su(de.type,de.key,de.props,null,ye.mode,ve),ve.ref=tc(ye,null,de),ve.return=ye,ve;case te:return de=$h(de,ye.mode,ve),de.return=ye,de;case U:var $e=de._init;return ze(ye,$e(de._payload),ve)}if(ee(de)||oe(de))return de=lo(de,ye.mode,ve,null),de.return=ye,de;kd(ye,de)}return null}function Pe(ye,de,ve,$e){var ut=de!==null?de.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ut!==null?null:Q(ye,de,""+ve,$e);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case W:return ve.key===ut?le(ye,de,ve,$e):null;case te:return ve.key===ut?Ce(ye,de,ve,$e):null;case U:return ut=ve._init,Pe(ye,de,ut(ve._payload),$e)}if(ee(ve)||oe(ve))return ut!==null?null:Fe(ye,de,ve,$e,null);kd(ye,ve)}return null}function Ke(ye,de,ve,$e,ut){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ye=ye.get(ve)||null,Q(de,ye,""+$e,ut);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case W:return ye=ye.get($e.key===null?ve:$e.key)||null,le(de,ye,$e,ut);case te:return ye=ye.get($e.key===null?ve:$e.key)||null,Ce(de,ye,$e,ut);case U:var vt=$e._init;return Ke(ye,de,ve,vt($e._payload),ut)}if(ee($e)||oe($e))return ye=ye.get(ve)||null,Fe(de,ye,$e,ut,null);kd(de,$e)}return null}function rt(ye,de,ve,$e){for(var ut=null,vt=null,wt=de,Et=de=0,Ar=null;wt!==null&&Et<ve.length;Et++){wt.index>Et?(Ar=wt,wt=null):Ar=wt.sibling;var en=Pe(ye,wt,ve[Et],$e);if(en===null){wt===null&&(wt=Ar);break}a&&wt&&en.alternate===null&&l(ye,wt),de=j(en,de,Et),vt===null?ut=en:vt.sibling=en,vt=en,wt=Ar}if(Et===ve.length)return p(ye,wt),Fn&&eo(ye,Et),ut;if(wt===null){for(;Et<ve.length;Et++)wt=ze(ye,ve[Et],$e),wt!==null&&(de=j(wt,de,Et),vt===null?ut=wt:vt.sibling=wt,vt=wt);return Fn&&eo(ye,Et),ut}for(wt=x(ye,wt);Et<ve.length;Et++)Ar=Ke(wt,ye,Et,ve[Et],$e),Ar!==null&&(a&&Ar.alternate!==null&&wt.delete(Ar.key===null?Et:Ar.key),de=j(Ar,de,Et),vt===null?ut=Ar:vt.sibling=Ar,vt=Ar);return a&&wt.forEach(function(pi){return l(ye,pi)}),Fn&&eo(ye,Et),ut}function ot(ye,de,ve,$e){var ut=oe(ve);if(typeof ut!="function")throw Error(s(150));if(ve=ut.call(ve),ve==null)throw Error(s(151));for(var vt=ut=null,wt=de,Et=de=0,Ar=null,en=ve.next();wt!==null&&!en.done;Et++,en=ve.next()){wt.index>Et?(Ar=wt,wt=null):Ar=wt.sibling;var pi=Pe(ye,wt,en.value,$e);if(pi===null){wt===null&&(wt=Ar);break}a&&wt&&pi.alternate===null&&l(ye,wt),de=j(pi,de,Et),vt===null?ut=pi:vt.sibling=pi,vt=pi,wt=Ar}if(en.done)return p(ye,wt),Fn&&eo(ye,Et),ut;if(wt===null){for(;!en.done;Et++,en=ve.next())en=ze(ye,en.value,$e),en!==null&&(de=j(en,de,Et),vt===null?ut=en:vt.sibling=en,vt=en);return Fn&&eo(ye,Et),ut}for(wt=x(ye,wt);!en.done;Et++,en=ve.next())en=Ke(wt,ye,Et,en.value,$e),en!==null&&(a&&en.alternate!==null&&wt.delete(en.key===null?Et:en.key),de=j(en,de,Et),vt===null?ut=en:vt.sibling=en,vt=en);return a&&wt.forEach(function(eC){return l(ye,eC)}),Fn&&eo(ye,Et),ut}function nr(ye,de,ve,$e){if(typeof ve=="object"&&ve!==null&&ve.type===G&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case W:e:{for(var ut=ve.key,vt=de;vt!==null;){if(vt.key===ut){if(ut=ve.type,ut===G){if(vt.tag===7){p(ye,vt.sibling),de=A(vt,ve.props.children),de.return=ye,ye=de;break e}}else if(vt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===U&&D0(ut)===vt.type){p(ye,vt.sibling),de=A(vt,ve.props),de.ref=tc(ye,vt,ve),de.return=ye,ye=de;break e}p(ye,vt);break}else l(ye,vt);vt=vt.sibling}ve.type===G?(de=lo(ve.props.children,ye.mode,$e,ve.key),de.return=ye,ye=de):($e=su(ve.type,ve.key,ve.props,null,ye.mode,$e),$e.ref=tc(ye,de,ve),$e.return=ye,ye=$e)}return B(ye);case te:e:{for(vt=ve.key;de!==null;){if(de.key===vt)if(de.tag===4&&de.stateNode.containerInfo===ve.containerInfo&&de.stateNode.implementation===ve.implementation){p(ye,de.sibling),de=A(de,ve.children||[]),de.return=ye,ye=de;break e}else{p(ye,de);break}else l(ye,de);de=de.sibling}de=$h(ve,ye.mode,$e),de.return=ye,ye=de}return B(ye);case U:return vt=ve._init,nr(ye,de,vt(ve._payload),$e)}if(ee(ve))return rt(ye,de,ve,$e);if(oe(ve))return ot(ye,de,ve,$e);kd(ye,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,de!==null&&de.tag===6?(p(ye,de.sibling),de=A(de,ve),de.return=ye,ye=de):(p(ye,de),de=Wh(ve,ye.mode,$e),de.return=ye,ye=de),B(ye)):p(ye,de)}return nr}var Ho=O0(!0),k0=O0(!1),Pd=si(null),Md=null,Wo=null,eh=null;function th(){eh=Wo=Md=null}function nh(a){var l=Pd.current;_n(Pd),a._currentValue=l}function rh(a,l,p){for(;a!==null;){var x=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,x!==null&&(x.childLanes|=l)):x!==null&&(x.childLanes&l)!==l&&(x.childLanes|=l),a===p)break;a=a.return}}function $o(a,l){Md=a,eh=Wo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(ns=!0),a.firstContext=null)}function ks(a){var l=a._currentValue;if(eh!==a)if(a={context:a,memoizedValue:l,next:null},Wo===null){if(Md===null)throw Error(s(308));Wo=a,Md.dependencies={lanes:0,firstContext:a}}else Wo=Wo.next=a;return l}var to=null;function sh(a){to===null?to=[a]:to.push(a)}function P0(a,l,p,x){var A=l.interleaved;return A===null?(p.next=p,sh(l)):(p.next=A.next,A.next=p),l.interleaved=p,Oa(a,x)}function Oa(a,l){a.lanes|=l;var p=a.alternate;for(p!==null&&(p.lanes|=l),p=a,a=a.return;a!==null;)a.childLanes|=l,p=a.alternate,p!==null&&(p.childLanes|=l),p=a,a=a.return;return p.tag===3?p.stateNode:null}var oi=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ka(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function li(a,l,p){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(Kt&2)!==0){var A=x.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),x.pending=l,Oa(a,p)}return A=x.interleaved,A===null?(l.next=l,sh(x)):(l.next=A.next,A.next=l),x.interleaved=l,Oa(a,p)}function Ld(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var x=l.lanes;x&=a.pendingLanes,p|=x,l.lanes=p,Xn(a,p)}}function L0(a,l){var p=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var A=null,j=null;if(p=p.firstBaseUpdate,p!==null){do{var B={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};j===null?A=j=B:j=j.next=B,p=p.next}while(p!==null);j===null?A=j=l:j=j.next=l}else A=j=l;p={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:j,shared:x.shared,effects:x.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}function Fd(a,l,p,x){var A=a.updateQueue;oi=!1;var j=A.firstBaseUpdate,B=A.lastBaseUpdate,Q=A.shared.pending;if(Q!==null){A.shared.pending=null;var le=Q,Ce=le.next;le.next=null,B===null?j=Ce:B.next=Ce,B=le;var Fe=a.alternate;Fe!==null&&(Fe=Fe.updateQueue,Q=Fe.lastBaseUpdate,Q!==B&&(Q===null?Fe.firstBaseUpdate=Ce:Q.next=Ce,Fe.lastBaseUpdate=le))}if(j!==null){var ze=A.baseState;B=0,Fe=Ce=le=null,Q=j;do{var Pe=Q.lane,Ke=Q.eventTime;if((x&Pe)===Pe){Fe!==null&&(Fe=Fe.next={eventTime:Ke,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var rt=a,ot=Q;switch(Pe=l,Ke=p,ot.tag){case 1:if(rt=ot.payload,typeof rt=="function"){ze=rt.call(Ke,ze,Pe);break e}ze=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=ot.payload,Pe=typeof rt=="function"?rt.call(Ke,ze,Pe):rt,Pe==null)break e;ze=we({},ze,Pe);break e;case 2:oi=!0}}Q.callback!==null&&Q.lane!==0&&(a.flags|=64,Pe=A.effects,Pe===null?A.effects=[Q]:Pe.push(Q))}else Ke={eventTime:Ke,lane:Pe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Fe===null?(Ce=Fe=Ke,le=ze):Fe=Fe.next=Ke,B|=Pe;if(Q=Q.next,Q===null){if(Q=A.shared.pending,Q===null)break;Pe=Q,Q=Pe.next,Pe.next=null,A.lastBaseUpdate=Pe,A.shared.pending=null}}while(!0);if(Fe===null&&(le=ze),A.baseState=le,A.firstBaseUpdate=Ce,A.lastBaseUpdate=Fe,l=A.shared.interleaved,l!==null){A=l;do B|=A.lane,A=A.next;while(A!==l)}else j===null&&(A.shared.lanes=0);so|=B,a.lanes=B,a.memoizedState=ze}}function F0(a,l,p){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var x=a[l],A=x.callback;if(A!==null){if(x.callback=null,x=p,typeof A!="function")throw Error(s(191,A));A.call(x)}}}var nc={},da=si(nc),rc=si(nc),sc=si(nc);function no(a){if(a===nc)throw Error(s(174));return a}function ih(a,l){switch(Cn(sc,l),Cn(rc,a),Cn(da,nc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:it(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=it(l,a)}_n(da),Cn(da,l)}function Go(){_n(da),_n(rc),_n(sc)}function B0(a){no(sc.current);var l=no(da.current),p=it(l,a.type);l!==p&&(Cn(rc,a),Cn(da,p))}function oh(a){rc.current===a&&(_n(da),_n(rc))}var Hn=si(0);function Bd(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var lh=[];function ch(){for(var a=0;a<lh.length;a++)lh[a]._workInProgressVersionPrimary=null;lh.length=0}var Ud=Z.ReactCurrentDispatcher,dh=Z.ReactCurrentBatchConfig,ro=0,Wn=null,yr=null,Er=null,zd=!1,ac=!1,ic=0,NN=0;function Fr(){throw Error(s(321))}function uh(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!he(a[p],l[p]))return!1;return!0}function fh(a,l,p,x,A,j){if(ro=j,Wn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ud.current=a===null||a.memoizedState===null?AN:IN,a=p(x,A),ac){j=0;do{if(ac=!1,ic=0,25<=j)throw Error(s(301));j+=1,Er=yr=null,l.updateQueue=null,Ud.current=jN,a=p(x,A)}while(ac)}if(Ud.current=Wd,l=yr!==null&&yr.next!==null,ro=0,Er=yr=Wn=null,zd=!1,l)throw Error(s(300));return a}function hh(){var a=ic!==0;return ic=0,a}function ua(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Wn.memoizedState=Er=a:Er=Er.next=a,Er}function Ps(){if(yr===null){var a=Wn.alternate;a=a!==null?a.memoizedState:null}else a=yr.next;var l=Er===null?Wn.memoizedState:Er.next;if(l!==null)Er=l,yr=a;else{if(a===null)throw Error(s(310));yr=a,a={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},Er===null?Wn.memoizedState=Er=a:Er=Er.next=a}return Er}function oc(a,l){return typeof l=="function"?l(a):l}function mh(a){var l=Ps(),p=l.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=a;var x=yr,A=x.baseQueue,j=p.pending;if(j!==null){if(A!==null){var B=A.next;A.next=j.next,j.next=B}x.baseQueue=A=j,p.pending=null}if(A!==null){j=A.next,x=x.baseState;var Q=B=null,le=null,Ce=j;do{var Fe=Ce.lane;if((ro&Fe)===Fe)le!==null&&(le=le.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),x=Ce.hasEagerState?Ce.eagerState:a(x,Ce.action);else{var ze={lane:Fe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};le===null?(Q=le=ze,B=x):le=le.next=ze,Wn.lanes|=Fe,so|=Fe}Ce=Ce.next}while(Ce!==null&&Ce!==j);le===null?B=x:le.next=Q,he(x,l.memoizedState)||(ns=!0),l.memoizedState=x,l.baseState=B,l.baseQueue=le,p.lastRenderedState=x}if(a=p.interleaved,a!==null){A=a;do j=A.lane,Wn.lanes|=j,so|=j,A=A.next;while(A!==a)}else A===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function ph(a){var l=Ps(),p=l.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=a;var x=p.dispatch,A=p.pending,j=l.memoizedState;if(A!==null){p.pending=null;var B=A=A.next;do j=a(j,B.action),B=B.next;while(B!==A);he(j,l.memoizedState)||(ns=!0),l.memoizedState=j,l.baseQueue===null&&(l.baseState=j),p.lastRenderedState=j}return[j,x]}function U0(){}function z0(a,l){var p=Wn,x=Ps(),A=l(),j=!he(x.memoizedState,A);if(j&&(x.memoizedState=A,ns=!0),x=x.queue,gh(W0.bind(null,p,x,a),[a]),x.getSnapshot!==l||j||Er!==null&&Er.memoizedState.tag&1){if(p.flags|=2048,lc(9,H0.bind(null,p,x,A,l),void 0,null),Sr===null)throw Error(s(349));(ro&30)!==0||V0(p,l,A)}return A}function V0(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Wn.updateQueue,l===null?(l={lastEffect:null,stores:null},Wn.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function H0(a,l,p,x){l.value=p,l.getSnapshot=x,$0(l)&&G0(a)}function W0(a,l,p){return p(function(){$0(l)&&G0(a)})}function $0(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!he(a,p)}catch{return!0}}function G0(a){var l=Oa(a,1);l!==null&&Ks(l,a,1,-1)}function X0(a){var l=ua();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:a},l.queue=a,a=a.dispatch=SN.bind(null,Wn,a),[l.memoizedState,a]}function lc(a,l,p,x){return a={tag:a,create:l,destroy:p,deps:x,next:null},l=Wn.updateQueue,l===null?(l={lastEffect:null,stores:null},Wn.updateQueue=l,l.lastEffect=a.next=a):(p=l.lastEffect,p===null?l.lastEffect=a.next=a:(x=p.next,p.next=a,a.next=x,l.lastEffect=a)),a}function Y0(){return Ps().memoizedState}function Vd(a,l,p,x){var A=ua();Wn.flags|=a,A.memoizedState=lc(1|l,p,void 0,x===void 0?null:x)}function Hd(a,l,p,x){var A=Ps();x=x===void 0?null:x;var j=void 0;if(yr!==null){var B=yr.memoizedState;if(j=B.destroy,x!==null&&uh(x,B.deps)){A.memoizedState=lc(l,p,j,x);return}}Wn.flags|=a,A.memoizedState=lc(1|l,p,j,x)}function Z0(a,l){return Vd(8390656,8,a,l)}function gh(a,l){return Hd(2048,8,a,l)}function q0(a,l){return Hd(4,2,a,l)}function Q0(a,l){return Hd(4,4,a,l)}function K0(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function J0(a,l,p){return p=p!=null?p.concat([a]):null,Hd(4,4,K0.bind(null,l,a),p)}function xh(){}function e1(a,l){var p=Ps();l=l===void 0?null:l;var x=p.memoizedState;return x!==null&&l!==null&&uh(l,x[1])?x[0]:(p.memoizedState=[a,l],a)}function t1(a,l){var p=Ps();l=l===void 0?null:l;var x=p.memoizedState;return x!==null&&l!==null&&uh(l,x[1])?x[0]:(a=a(),p.memoizedState=[a,l],a)}function n1(a,l,p){return(ro&21)===0?(a.baseState&&(a.baseState=!1,ns=!0),a.memoizedState=p):(he(p,l)||(p=mr(),Wn.lanes|=p,so|=p,a.baseState=!0),l)}function CN(a,l){var p=kt;kt=p!==0&&4>p?p:4,a(!0);var x=dh.transition;dh.transition={};try{a(!1),l()}finally{kt=p,dh.transition=x}}function r1(){return Ps().memoizedState}function EN(a,l,p){var x=fi(a);if(p={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null},s1(a))a1(l,p);else if(p=P0(a,l,p,x),p!==null){var A=Yr();Ks(p,a,x,A),i1(p,l,x)}}function SN(a,l,p){var x=fi(a),A={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null};if(s1(a))a1(l,A);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=l.lastRenderedReducer,j!==null))try{var B=l.lastRenderedState,Q=j(B,p);if(A.hasEagerState=!0,A.eagerState=Q,he(Q,B)){var le=l.interleaved;le===null?(A.next=A,sh(l)):(A.next=le.next,le.next=A),l.interleaved=A;return}}catch{}finally{}p=P0(a,l,A,x),p!==null&&(A=Yr(),Ks(p,a,x,A),i1(p,l,x))}}function s1(a){var l=a.alternate;return a===Wn||l!==null&&l===Wn}function a1(a,l){ac=zd=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function i1(a,l,p){if((p&4194240)!==0){var x=l.lanes;x&=a.pendingLanes,p|=x,l.lanes=p,Xn(a,p)}}var Wd={readContext:ks,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},AN={readContext:ks,useCallback:function(a,l){return ua().memoizedState=[a,l===void 0?null:l],a},useContext:ks,useEffect:Z0,useImperativeHandle:function(a,l,p){return p=p!=null?p.concat([a]):null,Vd(4194308,4,K0.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Vd(4194308,4,a,l)},useInsertionEffect:function(a,l){return Vd(4,2,a,l)},useMemo:function(a,l){var p=ua();return l=l===void 0?null:l,a=a(),p.memoizedState=[a,l],a},useReducer:function(a,l,p){var x=ua();return l=p!==void 0?p(l):l,x.memoizedState=x.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},x.queue=a,a=a.dispatch=EN.bind(null,Wn,a),[x.memoizedState,a]},useRef:function(a){var l=ua();return a={current:a},l.memoizedState=a},useState:X0,useDebugValue:xh,useDeferredValue:function(a){return ua().memoizedState=a},useTransition:function(){var a=X0(!1),l=a[0];return a=CN.bind(null,a[1]),ua().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,p){var x=Wn,A=ua();if(Fn){if(p===void 0)throw Error(s(407));p=p()}else{if(p=l(),Sr===null)throw Error(s(349));(ro&30)!==0||V0(x,l,p)}A.memoizedState=p;var j={value:p,getSnapshot:l};return A.queue=j,Z0(W0.bind(null,x,j,a),[a]),x.flags|=2048,lc(9,H0.bind(null,x,j,p,l),void 0,null),p},useId:function(){var a=ua(),l=Sr.identifierPrefix;if(Fn){var p=Da,x=_a;p=(x&~(1<<32-Gr(x)-1)).toString(32)+p,l=":"+l+"R"+p,p=ic++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=NN++,l=":"+l+"r"+p.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},IN={readContext:ks,useCallback:e1,useContext:ks,useEffect:gh,useImperativeHandle:J0,useInsertionEffect:q0,useLayoutEffect:Q0,useMemo:t1,useReducer:mh,useRef:Y0,useState:function(){return mh(oc)},useDebugValue:xh,useDeferredValue:function(a){var l=Ps();return n1(l,yr.memoizedState,a)},useTransition:function(){var a=mh(oc)[0],l=Ps().memoizedState;return[a,l]},useMutableSource:U0,useSyncExternalStore:z0,useId:r1,unstable_isNewReconciler:!1},jN={readContext:ks,useCallback:e1,useContext:ks,useEffect:gh,useImperativeHandle:J0,useInsertionEffect:q0,useLayoutEffect:Q0,useMemo:t1,useReducer:ph,useRef:Y0,useState:function(){return ph(oc)},useDebugValue:xh,useDeferredValue:function(a){var l=Ps();return yr===null?l.memoizedState=a:n1(l,yr.memoizedState,a)},useTransition:function(){var a=ph(oc)[0],l=Ps().memoizedState;return[a,l]},useMutableSource:U0,useSyncExternalStore:z0,useId:r1,unstable_isNewReconciler:!1};function Zs(a,l){if(a&&a.defaultProps){l=we({},l),a=a.defaultProps;for(var p in a)l[p]===void 0&&(l[p]=a[p]);return l}return l}function yh(a,l,p,x){l=a.memoizedState,p=p(x,l),p=p==null?l:we({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var $d={isMounted:function(a){return(a=a._reactInternals)?Jr(a)===a:!1},enqueueSetState:function(a,l,p){a=a._reactInternals;var x=Yr(),A=fi(a),j=ka(x,A);j.payload=l,p!=null&&(j.callback=p),l=li(a,j,A),l!==null&&(Ks(l,a,A,x),Ld(l,a,A))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var x=Yr(),A=fi(a),j=ka(x,A);j.tag=1,j.payload=l,p!=null&&(j.callback=p),l=li(a,j,A),l!==null&&(Ks(l,a,A,x),Ld(l,a,A))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=Yr(),x=fi(a),A=ka(p,x);A.tag=2,l!=null&&(A.callback=l),l=li(a,A,x),l!==null&&(Ks(l,a,x,p),Ld(l,a,x))}};function o1(a,l,p,x,A,j,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,j,B):l.prototype&&l.prototype.isPureReactComponent?!be(p,x)||!be(A,j):!0}function l1(a,l,p){var x=!1,A=ai,j=l.contextType;return typeof j=="object"&&j!==null?j=ks(j):(A=ts(l)?Ki:Lr.current,x=l.contextTypes,j=(x=x!=null)?Bo(a,A):ai),l=new l(p,j),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=$d,a.stateNode=l,l._reactInternals=a,x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=A,a.__reactInternalMemoizedMaskedChildContext=j),l}function c1(a,l,p,x){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,x),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,x),l.state!==a&&$d.enqueueReplaceState(l,l.state,null)}function vh(a,l,p,x){var A=a.stateNode;A.props=p,A.state=a.memoizedState,A.refs={},ah(a);var j=l.contextType;typeof j=="object"&&j!==null?A.context=ks(j):(j=ts(l)?Ki:Lr.current,A.context=Bo(a,j)),A.state=a.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(yh(a,l,j,p),A.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&$d.enqueueReplaceState(A,A.state,null),Fd(a,p,A,x),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308)}function Xo(a,l){try{var p="",x=l;do p+=We(x),x=x.return;while(x);var A=p}catch(j){A=`
Error generating stack: `+j.message+`
`+j.stack}return{value:a,source:l,stack:A,digest:null}}function wh(a,l,p){return{value:a,source:null,stack:p??null,digest:l??null}}function bh(a,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var TN=typeof WeakMap=="function"?WeakMap:Map;function d1(a,l,p){p=ka(-1,p),p.tag=3,p.payload={element:null};var x=l.value;return p.callback=function(){Kd||(Kd=!0,Mh=x),bh(a,l)},p}function u1(a,l,p){p=ka(-1,p),p.tag=3;var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var A=l.value;p.payload=function(){return x(A)},p.callback=function(){bh(a,l)}}var j=a.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(p.callback=function(){bh(a,l),typeof x!="function"&&(di===null?di=new Set([this]):di.add(this));var B=l.stack;this.componentDidCatch(l.value,{componentStack:B!==null?B:""})}),p}function f1(a,l,p){var x=a.pingCache;if(x===null){x=a.pingCache=new TN;var A=new Set;x.set(l,A)}else A=x.get(l),A===void 0&&(A=new Set,x.set(l,A));A.has(p)||(A.add(p),a=HN.bind(null,a,l,p),l.then(a,a))}function h1(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function m1(a,l,p,x,A){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=ka(-1,1),l.tag=2,li(p,l,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=A,a)}var RN=Z.ReactCurrentOwner,ns=!1;function Xr(a,l,p,x){l.child=a===null?k0(l,null,p,x):Ho(l,a.child,p,x)}function p1(a,l,p,x,A){p=p.render;var j=l.ref;return $o(l,A),x=fh(a,l,p,x,j,A),p=hh(),a!==null&&!ns?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~A,Pa(a,l,A)):(Fn&&p&&Zf(l),l.flags|=1,Xr(a,l,x,A),l.child)}function g1(a,l,p,x,A){if(a===null){var j=p.type;return typeof j=="function"&&!Hh(j)&&j.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=j,x1(a,l,j,x,A)):(a=su(p.type,null,x,l,l.mode,A),a.ref=l.ref,a.return=l,l.child=a)}if(j=a.child,(a.lanes&A)===0){var B=j.memoizedProps;if(p=p.compare,p=p!==null?p:be,p(B,x)&&a.ref===l.ref)return Pa(a,l,A)}return l.flags|=1,a=mi(j,x),a.ref=l.ref,a.return=l,l.child=a}function x1(a,l,p,x,A){if(a!==null){var j=a.memoizedProps;if(be(j,x)&&a.ref===l.ref)if(ns=!1,l.pendingProps=x=j,(a.lanes&A)!==0)(a.flags&131072)!==0&&(ns=!0);else return l.lanes=a.lanes,Pa(a,l,A)}return Nh(a,l,p,x,A)}function y1(a,l,p){var x=l.pendingProps,A=x.children,j=a!==null?a.memoizedState:null;if(x.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Zo,ws),ws|=p;else{if((p&1073741824)===0)return a=j!==null?j.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Cn(Zo,ws),ws|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=j!==null?j.baseLanes:p,Cn(Zo,ws),ws|=x}else j!==null?(x=j.baseLanes|p,l.memoizedState=null):x=p,Cn(Zo,ws),ws|=x;return Xr(a,l,A,p),l.child}function v1(a,l){var p=l.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function Nh(a,l,p,x,A){var j=ts(p)?Ki:Lr.current;return j=Bo(l,j),$o(l,A),p=fh(a,l,p,x,j,A),x=hh(),a!==null&&!ns?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~A,Pa(a,l,A)):(Fn&&x&&Zf(l),l.flags|=1,Xr(a,l,p,A),l.child)}function w1(a,l,p,x,A){if(ts(p)){var j=!0;Td(l)}else j=!1;if($o(l,A),l.stateNode===null)Xd(a,l),l1(l,p,x),vh(l,p,x,A),x=!0;else if(a===null){var B=l.stateNode,Q=l.memoizedProps;B.props=Q;var le=B.context,Ce=p.contextType;typeof Ce=="object"&&Ce!==null?Ce=ks(Ce):(Ce=ts(p)?Ki:Lr.current,Ce=Bo(l,Ce));var Fe=p.getDerivedStateFromProps,ze=typeof Fe=="function"||typeof B.getSnapshotBeforeUpdate=="function";ze||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==x||le!==Ce)&&c1(l,B,x,Ce),oi=!1;var Pe=l.memoizedState;B.state=Pe,Fd(l,x,B,A),le=l.memoizedState,Q!==x||Pe!==le||es.current||oi?(typeof Fe=="function"&&(yh(l,p,Fe,x),le=l.memoizedState),(Q=oi||o1(l,p,Q,x,Pe,le,Ce))?(ze||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(l.flags|=4194308)):(typeof B.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=x,l.memoizedState=le),B.props=x,B.state=le,B.context=Ce,x=Q):(typeof B.componentDidMount=="function"&&(l.flags|=4194308),x=!1)}else{B=l.stateNode,M0(a,l),Q=l.memoizedProps,Ce=l.type===l.elementType?Q:Zs(l.type,Q),B.props=Ce,ze=l.pendingProps,Pe=B.context,le=p.contextType,typeof le=="object"&&le!==null?le=ks(le):(le=ts(p)?Ki:Lr.current,le=Bo(l,le));var Ke=p.getDerivedStateFromProps;(Fe=typeof Ke=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==ze||Pe!==le)&&c1(l,B,x,le),oi=!1,Pe=l.memoizedState,B.state=Pe,Fd(l,x,B,A);var rt=l.memoizedState;Q!==ze||Pe!==rt||es.current||oi?(typeof Ke=="function"&&(yh(l,p,Ke,x),rt=l.memoizedState),(Ce=oi||o1(l,p,Ce,x,Pe,rt,le)||!1)?(Fe||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(x,rt,le),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(x,rt,le)),typeof B.componentDidUpdate=="function"&&(l.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof B.componentDidUpdate!="function"||Q===a.memoizedProps&&Pe===a.memoizedState||(l.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Pe===a.memoizedState||(l.flags|=1024),l.memoizedProps=x,l.memoizedState=rt),B.props=x,B.state=rt,B.context=le,x=Ce):(typeof B.componentDidUpdate!="function"||Q===a.memoizedProps&&Pe===a.memoizedState||(l.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Pe===a.memoizedState||(l.flags|=1024),x=!1)}return Ch(a,l,p,x,j,A)}function Ch(a,l,p,x,A,j){v1(a,l);var B=(l.flags&128)!==0;if(!x&&!B)return A&&S0(l,p,!1),Pa(a,l,j);x=l.stateNode,RN.current=l;var Q=B&&typeof p.getDerivedStateFromError!="function"?null:x.render();return l.flags|=1,a!==null&&B?(l.child=Ho(l,a.child,null,j),l.child=Ho(l,null,Q,j)):Xr(a,l,Q,j),l.memoizedState=x.state,A&&S0(l,p,!0),l.child}function b1(a){var l=a.stateNode;l.pendingContext?C0(a,l.pendingContext,l.pendingContext!==l.context):l.context&&C0(a,l.context,!1),ih(a,l.containerInfo)}function N1(a,l,p,x,A){return Vo(),Jf(A),l.flags|=256,Xr(a,l,p,x),l.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Sh(a){return{baseLanes:a,cachePool:null,transitions:null}}function C1(a,l,p){var x=l.pendingProps,A=Hn.current,j=!1,B=(l.flags&128)!==0,Q;if((Q=B)||(Q=a!==null&&a.memoizedState===null?!1:(A&2)!==0),Q?(j=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(A|=1),Cn(Hn,A&1),a===null)return Kf(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(B=x.children,a=x.fallback,j?(x=l.mode,j=l.child,B={mode:"hidden",children:B},(x&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=B):j=au(B,x,0,null),a=lo(a,x,p,null),j.return=l,a.return=l,j.sibling=a,l.child=j,l.child.memoizedState=Sh(p),l.memoizedState=Eh,a):Ah(l,B));if(A=a.memoizedState,A!==null&&(Q=A.dehydrated,Q!==null))return _N(a,l,B,x,Q,A,p);if(j){j=x.fallback,B=l.mode,A=a.child,Q=A.sibling;var le={mode:"hidden",children:x.children};return(B&1)===0&&l.child!==A?(x=l.child,x.childLanes=0,x.pendingProps=le,l.deletions=null):(x=mi(A,le),x.subtreeFlags=A.subtreeFlags&14680064),Q!==null?j=mi(Q,j):(j=lo(j,B,p,null),j.flags|=2),j.return=l,x.return=l,x.sibling=j,l.child=x,x=j,j=l.child,B=a.child.memoizedState,B=B===null?Sh(p):{baseLanes:B.baseLanes|p,cachePool:null,transitions:B.transitions},j.memoizedState=B,j.childLanes=a.childLanes&~p,l.memoizedState=Eh,x}return j=a.child,a=j.sibling,x=mi(j,{mode:"visible",children:x.children}),(l.mode&1)===0&&(x.lanes=p),x.return=l,x.sibling=null,a!==null&&(p=l.deletions,p===null?(l.deletions=[a],l.flags|=16):p.push(a)),l.child=x,l.memoizedState=null,x}function Ah(a,l){return l=au({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Gd(a,l,p,x){return x!==null&&Jf(x),Ho(l,a.child,null,p),a=Ah(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function _N(a,l,p,x,A,j,B){if(p)return l.flags&256?(l.flags&=-257,x=wh(Error(s(422))),Gd(a,l,B,x)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(j=x.fallback,A=l.mode,x=au({mode:"visible",children:x.children},A,0,null),j=lo(j,A,B,null),j.flags|=2,x.return=l,j.return=l,x.sibling=j,l.child=x,(l.mode&1)!==0&&Ho(l,a.child,null,B),l.child.memoizedState=Sh(B),l.memoizedState=Eh,j);if((l.mode&1)===0)return Gd(a,l,B,null);if(A.data==="$!"){if(x=A.nextSibling&&A.nextSibling.dataset,x)var Q=x.dgst;return x=Q,j=Error(s(419)),x=wh(j,x,void 0),Gd(a,l,B,x)}if(Q=(B&a.childLanes)!==0,ns||Q){if(x=Sr,x!==null){switch(B&-B){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(x.suspendedLanes|B))!==0?0:A,A!==0&&A!==j.retryLane&&(j.retryLane=A,Oa(a,A),Ks(x,a,A,-1))}return Vh(),x=wh(Error(s(421))),Gd(a,l,B,x)}return A.data==="$?"?(l.flags|=128,l.child=a.child,l=WN.bind(null,a),A._reactRetry=l,null):(a=j.treeContext,vs=ri(A.nextSibling),ys=l,Fn=!0,Ys=null,a!==null&&(Ds[Os++]=_a,Ds[Os++]=Da,Ds[Os++]=Ji,_a=a.id,Da=a.overflow,Ji=l),l=Ah(l,x.children),l.flags|=4096,l)}function E1(a,l,p){a.lanes|=l;var x=a.alternate;x!==null&&(x.lanes|=l),rh(a.return,l,p)}function Ih(a,l,p,x,A){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:A}:(j.isBackwards=l,j.rendering=null,j.renderingStartTime=0,j.last=x,j.tail=p,j.tailMode=A)}function S1(a,l,p){var x=l.pendingProps,A=x.revealOrder,j=x.tail;if(Xr(a,l,x.children,p),x=Hn.current,(x&2)!==0)x=x&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&E1(a,p,l);else if(a.tag===19)E1(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}if(Cn(Hn,x),(l.mode&1)===0)l.memoizedState=null;else switch(A){case"forwards":for(p=l.child,A=null;p!==null;)a=p.alternate,a!==null&&Bd(a)===null&&(A=p),p=p.sibling;p=A,p===null?(A=l.child,l.child=null):(A=p.sibling,p.sibling=null),Ih(l,!1,A,p,j);break;case"backwards":for(p=null,A=l.child,l.child=null;A!==null;){if(a=A.alternate,a!==null&&Bd(a)===null){l.child=A;break}a=A.sibling,A.sibling=p,p=A,A=a}Ih(l,!0,p,null,j);break;case"together":Ih(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Xd(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Pa(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),so|=l.lanes,(p&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,p=mi(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=mi(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function DN(a,l,p){switch(l.tag){case 3:b1(l),Vo();break;case 5:B0(l);break;case 1:ts(l.type)&&Td(l);break;case 4:ih(l,l.stateNode.containerInfo);break;case 10:var x=l.type._context,A=l.memoizedProps.value;Cn(Pd,x._currentValue),x._currentValue=A;break;case 13:if(x=l.memoizedState,x!==null)return x.dehydrated!==null?(Cn(Hn,Hn.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?C1(a,l,p):(Cn(Hn,Hn.current&1),a=Pa(a,l,p),a!==null?a.sibling:null);Cn(Hn,Hn.current&1);break;case 19:if(x=(p&l.childLanes)!==0,(a.flags&128)!==0){if(x)return S1(a,l,p);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Cn(Hn,Hn.current),x)break;return null;case 22:case 23:return l.lanes=0,y1(a,l,p)}return Pa(a,l,p)}var A1,jh,I1,j1;A1=function(a,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},jh=function(){},I1=function(a,l,p,x){var A=a.memoizedProps;if(A!==x){a=l.stateNode,no(da.current);var j=null;switch(p){case"input":A=ct(a,A),x=ct(a,x),j=[];break;case"select":A=we({},A,{value:void 0}),x=we({},x,{value:void 0}),j=[];break;case"textarea":A=at(a,A),x=at(a,x),j=[];break;default:typeof A.onClick!="function"&&typeof x.onClick=="function"&&(a.onclick=Ad)}Lt(p,x);var B;p=null;for(Ce in A)if(!x.hasOwnProperty(Ce)&&A.hasOwnProperty(Ce)&&A[Ce]!=null)if(Ce==="style"){var Q=A[Ce];for(B in Q)Q.hasOwnProperty(B)&&(p||(p={}),p[B]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(f.hasOwnProperty(Ce)?j||(j=[]):(j=j||[]).push(Ce,null));for(Ce in x){var le=x[Ce];if(Q=A?.[Ce],x.hasOwnProperty(Ce)&&le!==Q&&(le!=null||Q!=null))if(Ce==="style")if(Q){for(B in Q)!Q.hasOwnProperty(B)||le&&le.hasOwnProperty(B)||(p||(p={}),p[B]="");for(B in le)le.hasOwnProperty(B)&&Q[B]!==le[B]&&(p||(p={}),p[B]=le[B])}else p||(j||(j=[]),j.push(Ce,p)),p=le;else Ce==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,Q=Q?Q.__html:void 0,le!=null&&Q!==le&&(j=j||[]).push(Ce,le)):Ce==="children"?typeof le!="string"&&typeof le!="number"||(j=j||[]).push(Ce,""+le):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(f.hasOwnProperty(Ce)?(le!=null&&Ce==="onScroll"&&Rn("scroll",a),j||Q===le||(j=[])):(j=j||[]).push(Ce,le))}p&&(j=j||[]).push("style",p);var Ce=j;(l.updateQueue=Ce)&&(l.flags|=4)}},j1=function(a,l,p,x){p!==x&&(l.flags|=4)};function cc(a,l){if(!Fn)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function Br(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,x=0;if(l)for(var A=a.child;A!==null;)p|=A.lanes|A.childLanes,x|=A.subtreeFlags&14680064,x|=A.flags&14680064,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)p|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=x,a.childLanes=p,l}function ON(a,l,p){var x=l.pendingProps;switch(qf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(l),null;case 1:return ts(l.type)&&jd(),Br(l),null;case 3:return x=l.stateNode,Go(),_n(es),_n(Lr),ch(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(a===null||a.child===null)&&(Od(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ys!==null&&(Bh(Ys),Ys=null))),jh(a,l),Br(l),null;case 5:oh(l);var A=no(sc.current);if(p=l.type,a!==null&&l.stateNode!=null)I1(a,l,p,x,A),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!x){if(l.stateNode===null)throw Error(s(166));return Br(l),null}if(a=no(da.current),Od(l)){x=l.stateNode,p=l.type;var j=l.memoizedProps;switch(x[ca]=l,x[Jl]=j,a=(l.mode&1)!==0,p){case"dialog":Rn("cancel",x),Rn("close",x);break;case"iframe":case"object":case"embed":Rn("load",x);break;case"video":case"audio":for(A=0;A<ql.length;A++)Rn(ql[A],x);break;case"source":Rn("error",x);break;case"img":case"image":case"link":Rn("error",x),Rn("load",x);break;case"details":Rn("toggle",x);break;case"input":Yt(x,j),Rn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!j.multiple},Rn("invalid",x);break;case"textarea":dt(x,j),Rn("invalid",x)}Lt(p,j),A=null;for(var B in j)if(j.hasOwnProperty(B)){var Q=j[B];B==="children"?typeof Q=="string"?x.textContent!==Q&&(j.suppressHydrationWarning!==!0&&Sd(x.textContent,Q,a),A=["children",Q]):typeof Q=="number"&&x.textContent!==""+Q&&(j.suppressHydrationWarning!==!0&&Sd(x.textContent,Q,a),A=["children",""+Q]):f.hasOwnProperty(B)&&Q!=null&&B==="onScroll"&&Rn("scroll",x)}switch(p){case"input":me(x),Re(x,j,!0);break;case"textarea":me(x),Mn(x);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(x.onclick=Ad)}x=A,l.updateQueue=x,x!==null&&(l.flags|=4)}else{B=A.nodeType===9?A:A.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Pt(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=B.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof x.is=="string"?a=B.createElement(p,{is:x.is}):(a=B.createElement(p),p==="select"&&(B=a,x.multiple?B.multiple=!0:x.size&&(B.size=x.size))):a=B.createElementNS(a,p),a[ca]=l,a[Jl]=x,A1(a,l,!1,!1),l.stateNode=a;e:{switch(B=nn(p,x),p){case"dialog":Rn("cancel",a),Rn("close",a),A=x;break;case"iframe":case"object":case"embed":Rn("load",a),A=x;break;case"video":case"audio":for(A=0;A<ql.length;A++)Rn(ql[A],a);A=x;break;case"source":Rn("error",a),A=x;break;case"img":case"image":case"link":Rn("error",a),Rn("load",a),A=x;break;case"details":Rn("toggle",a),A=x;break;case"input":Yt(a,x),A=ct(a,x),Rn("invalid",a);break;case"option":A=x;break;case"select":a._wrapperState={wasMultiple:!!x.multiple},A=we({},x,{value:void 0}),Rn("invalid",a);break;case"textarea":dt(a,x),A=at(a,x),Rn("invalid",a);break;default:A=x}Lt(p,A),Q=A;for(j in Q)if(Q.hasOwnProperty(j)){var le=Q[j];j==="style"?ke(a,le):j==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&zn(a,le)):j==="children"?typeof le=="string"?(p!=="textarea"||le!=="")&&fr(a,le):typeof le=="number"&&fr(a,""+le):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(f.hasOwnProperty(j)?le!=null&&j==="onScroll"&&Rn("scroll",a):le!=null&&F(a,j,le,B))}switch(p){case"input":me(a),Re(a,x,!1);break;case"textarea":me(a),Mn(a);break;case"option":x.value!=null&&a.setAttribute("value",""+Ue(x.value));break;case"select":a.multiple=!!x.multiple,j=x.value,j!=null?pe(a,!!x.multiple,j,!1):x.defaultValue!=null&&pe(a,!!x.multiple,x.defaultValue,!0);break;default:typeof A.onClick=="function"&&(a.onclick=Ad)}switch(p){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Br(l),null;case 6:if(a&&l.stateNode!=null)j1(a,l,a.memoizedProps,x);else{if(typeof x!="string"&&l.stateNode===null)throw Error(s(166));if(p=no(sc.current),no(da.current),Od(l)){if(x=l.stateNode,p=l.memoizedProps,x[ca]=l,(j=x.nodeValue!==p)&&(a=ys,a!==null))switch(a.tag){case 3:Sd(x.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Sd(x.nodeValue,p,(a.mode&1)!==0)}j&&(l.flags|=4)}else x=(p.nodeType===9?p:p.ownerDocument).createTextNode(x),x[ca]=l,l.stateNode=x}return Br(l),null;case 13:if(_n(Hn),x=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Fn&&vs!==null&&(l.mode&1)!==0&&(l.flags&128)===0)_0(),Vo(),l.flags|=98560,j=!1;else if(j=Od(l),x!==null&&x.dehydrated!==null){if(a===null){if(!j)throw Error(s(318));if(j=l.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(s(317));j[ca]=l}else Vo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Br(l),j=!1}else Ys!==null&&(Bh(Ys),Ys=null),j=!0;if(!j)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(x=x!==null,x!==(a!==null&&a.memoizedState!==null)&&x&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Hn.current&1)!==0?vr===0&&(vr=3):Vh())),l.updateQueue!==null&&(l.flags|=4),Br(l),null);case 4:return Go(),jh(a,l),a===null&&Ql(l.stateNode.containerInfo),Br(l),null;case 10:return nh(l.type._context),Br(l),null;case 17:return ts(l.type)&&jd(),Br(l),null;case 19:if(_n(Hn),j=l.memoizedState,j===null)return Br(l),null;if(x=(l.flags&128)!==0,B=j.rendering,B===null)if(x)cc(j,!1);else{if(vr!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(B=Bd(a),B!==null){for(l.flags|=128,cc(j,!1),x=B.updateQueue,x!==null&&(l.updateQueue=x,l.flags|=4),l.subtreeFlags=0,x=p,p=l.child;p!==null;)j=p,a=x,j.flags&=14680066,B=j.alternate,B===null?(j.childLanes=0,j.lanes=a,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=B.childLanes,j.lanes=B.lanes,j.child=B.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=B.memoizedProps,j.memoizedState=B.memoizedState,j.updateQueue=B.updateQueue,j.type=B.type,a=B.dependencies,j.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return Cn(Hn,Hn.current&1|2),l.child}a=a.sibling}j.tail!==null&&ln()>qo&&(l.flags|=128,x=!0,cc(j,!1),l.lanes=4194304)}else{if(!x)if(a=Bd(B),a!==null){if(l.flags|=128,x=!0,p=a.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),cc(j,!0),j.tail===null&&j.tailMode==="hidden"&&!B.alternate&&!Fn)return Br(l),null}else 2*ln()-j.renderingStartTime>qo&&p!==1073741824&&(l.flags|=128,x=!0,cc(j,!1),l.lanes=4194304);j.isBackwards?(B.sibling=l.child,l.child=B):(p=j.last,p!==null?p.sibling=B:l.child=B,j.last=B)}return j.tail!==null?(l=j.tail,j.rendering=l,j.tail=l.sibling,j.renderingStartTime=ln(),l.sibling=null,p=Hn.current,Cn(Hn,x?p&1|2:p&1),l):(Br(l),null);case 22:case 23:return zh(),x=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==x&&(l.flags|=8192),x&&(l.mode&1)!==0?(ws&1073741824)!==0&&(Br(l),l.subtreeFlags&6&&(l.flags|=8192)):Br(l),null;case 24:return null;case 25:return null}throw Error(s(156,l.tag))}function kN(a,l){switch(qf(l),l.tag){case 1:return ts(l.type)&&jd(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Go(),_n(es),_n(Lr),ch(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return oh(l),null;case 13:if(_n(Hn),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));Vo()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return _n(Hn),null;case 4:return Go(),null;case 10:return nh(l.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var Yd=!1,Ur=!1,PN=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Yo(a,l){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(x){Zn(a,l,x)}else p.current=null}function Th(a,l,p){try{p()}catch(x){Zn(a,l,x)}}var T1=!1;function MN(a,l){if(zf=oa,a=Ut(),It(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var A=x.anchorOffset,j=x.focusNode;x=x.focusOffset;try{p.nodeType,j.nodeType}catch{p=null;break e}var B=0,Q=-1,le=-1,Ce=0,Fe=0,ze=a,Pe=null;t:for(;;){for(var Ke;ze!==p||A!==0&&ze.nodeType!==3||(Q=B+A),ze!==j||x!==0&&ze.nodeType!==3||(le=B+x),ze.nodeType===3&&(B+=ze.nodeValue.length),(Ke=ze.firstChild)!==null;)Pe=ze,ze=Ke;for(;;){if(ze===a)break t;if(Pe===p&&++Ce===A&&(Q=B),Pe===j&&++Fe===x&&(le=B),(Ke=ze.nextSibling)!==null)break;ze=Pe,Pe=ze.parentNode}ze=Ke}p=Q===-1||le===-1?null:{start:Q,end:le}}else p=null}p=p||{start:0,end:0}}else p=null;for(Vf={focusedElem:a,selectionRange:p},oa=!1,tt=l;tt!==null;)if(l=tt,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,tt=a;else for(;tt!==null;){l=tt;try{var rt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var ot=rt.memoizedProps,nr=rt.memoizedState,ye=l.stateNode,de=ye.getSnapshotBeforeUpdate(l.elementType===l.type?ot:Zs(l.type,ot),nr);ye.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ve=l.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch($e){Zn(l,l.return,$e)}if(a=l.sibling,a!==null){a.return=l.return,tt=a;break}tt=l.return}return rt=T1,T1=!1,rt}function dc(a,l,p){var x=l.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var A=x=x.next;do{if((A.tag&a)===a){var j=A.destroy;A.destroy=void 0,j!==void 0&&Th(l,p,j)}A=A.next}while(A!==x)}}function Zd(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&a)===a){var x=p.create;p.destroy=x()}p=p.next}while(p!==l)}}function Rh(a){var l=a.ref;if(l!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof l=="function"?l(a):l.current=a}}function R1(a){var l=a.alternate;l!==null&&(a.alternate=null,R1(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[ca],delete l[Jl],delete l[Gf],delete l[yN],delete l[vN])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function _1(a){return a.tag===5||a.tag===3||a.tag===4}function D1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function _h(a,l,p){var x=a.tag;if(x===5||x===6)a=a.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(a,l):p.insertBefore(a,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(a,p)):(l=p,l.appendChild(a)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Ad));else if(x!==4&&(a=a.child,a!==null))for(_h(a,l,p),a=a.sibling;a!==null;)_h(a,l,p),a=a.sibling}function Dh(a,l,p){var x=a.tag;if(x===5||x===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(x!==4&&(a=a.child,a!==null))for(Dh(a,l,p),a=a.sibling;a!==null;)Dh(a,l,p),a=a.sibling}var Dr=null,qs=!1;function ci(a,l,p){for(p=p.child;p!==null;)O1(a,l,p),p=p.sibling}function O1(a,l,p){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(qt,p)}catch{}switch(p.tag){case 5:Ur||Yo(p,l);case 6:var x=Dr,A=qs;Dr=null,ci(a,l,p),Dr=x,qs=A,Dr!==null&&(qs?(a=Dr,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):Dr.removeChild(p.stateNode));break;case 18:Dr!==null&&(qs?(a=Dr,p=p.stateNode,a.nodeType===8?$f(a.parentNode,p):a.nodeType===1&&$f(a,p),$s(a)):$f(Dr,p.stateNode));break;case 4:x=Dr,A=qs,Dr=p.stateNode.containerInfo,qs=!0,ci(a,l,p),Dr=x,qs=A;break;case 0:case 11:case 14:case 15:if(!Ur&&(x=p.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){A=x=x.next;do{var j=A,B=j.destroy;j=j.tag,B!==void 0&&((j&2)!==0||(j&4)!==0)&&Th(p,l,B),A=A.next}while(A!==x)}ci(a,l,p);break;case 1:if(!Ur&&(Yo(p,l),x=p.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=p.memoizedProps,x.state=p.memoizedState,x.componentWillUnmount()}catch(Q){Zn(p,l,Q)}ci(a,l,p);break;case 21:ci(a,l,p);break;case 22:p.mode&1?(Ur=(x=Ur)||p.memoizedState!==null,ci(a,l,p),Ur=x):ci(a,l,p);break;default:ci(a,l,p)}}function k1(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new PN),l.forEach(function(x){var A=$N.bind(null,a,x);p.has(x)||(p.add(x),x.then(A,A))})}}function Qs(a,l){var p=l.deletions;if(p!==null)for(var x=0;x<p.length;x++){var A=p[x];try{var j=a,B=l,Q=B;e:for(;Q!==null;){switch(Q.tag){case 5:Dr=Q.stateNode,qs=!1;break e;case 3:Dr=Q.stateNode.containerInfo,qs=!0;break e;case 4:Dr=Q.stateNode.containerInfo,qs=!0;break e}Q=Q.return}if(Dr===null)throw Error(s(160));O1(j,B,A),Dr=null,qs=!1;var le=A.alternate;le!==null&&(le.return=null),A.return=null}catch(Ce){Zn(A,l,Ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)P1(l,a),l=l.sibling}function P1(a,l){var p=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Qs(l,a),fa(a),x&4){try{dc(3,a,a.return),Zd(3,a)}catch(ot){Zn(a,a.return,ot)}try{dc(5,a,a.return)}catch(ot){Zn(a,a.return,ot)}}break;case 1:Qs(l,a),fa(a),x&512&&p!==null&&Yo(p,p.return);break;case 5:if(Qs(l,a),fa(a),x&512&&p!==null&&Yo(p,p.return),a.flags&32){var A=a.stateNode;try{fr(A,"")}catch(ot){Zn(a,a.return,ot)}}if(x&4&&(A=a.stateNode,A!=null)){var j=a.memoizedProps,B=p!==null?p.memoizedProps:j,Q=a.type,le=a.updateQueue;if(a.updateQueue=null,le!==null)try{Q==="input"&&j.type==="radio"&&j.name!=null&&on(A,j),nn(Q,B);var Ce=nn(Q,j);for(B=0;B<le.length;B+=2){var Fe=le[B],ze=le[B+1];Fe==="style"?ke(A,ze):Fe==="dangerouslySetInnerHTML"?zn(A,ze):Fe==="children"?fr(A,ze):F(A,Fe,ze,Ce)}switch(Q){case"input":T(A,j);break;case"textarea":Bt(A,j);break;case"select":var Pe=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!j.multiple;var Ke=j.value;Ke!=null?pe(A,!!j.multiple,Ke,!1):Pe!==!!j.multiple&&(j.defaultValue!=null?pe(A,!!j.multiple,j.defaultValue,!0):pe(A,!!j.multiple,j.multiple?[]:"",!1))}A[Jl]=j}catch(ot){Zn(a,a.return,ot)}}break;case 6:if(Qs(l,a),fa(a),x&4){if(a.stateNode===null)throw Error(s(162));A=a.stateNode,j=a.memoizedProps;try{A.nodeValue=j}catch(ot){Zn(a,a.return,ot)}}break;case 3:if(Qs(l,a),fa(a),x&4&&p!==null&&p.memoizedState.isDehydrated)try{$s(l.containerInfo)}catch(ot){Zn(a,a.return,ot)}break;case 4:Qs(l,a),fa(a);break;case 13:Qs(l,a),fa(a),A=a.child,A.flags&8192&&(j=A.memoizedState!==null,A.stateNode.isHidden=j,!j||A.alternate!==null&&A.alternate.memoizedState!==null||(Ph=ln())),x&4&&k1(a);break;case 22:if(Fe=p!==null&&p.memoizedState!==null,a.mode&1?(Ur=(Ce=Ur)||Fe,Qs(l,a),Ur=Ce):Qs(l,a),fa(a),x&8192){if(Ce=a.memoizedState!==null,(a.stateNode.isHidden=Ce)&&!Fe&&(a.mode&1)!==0)for(tt=a,Fe=a.child;Fe!==null;){for(ze=tt=Fe;tt!==null;){switch(Pe=tt,Ke=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:dc(4,Pe,Pe.return);break;case 1:Yo(Pe,Pe.return);var rt=Pe.stateNode;if(typeof rt.componentWillUnmount=="function"){x=Pe,p=Pe.return;try{l=x,rt.props=l.memoizedProps,rt.state=l.memoizedState,rt.componentWillUnmount()}catch(ot){Zn(x,p,ot)}}break;case 5:Yo(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){F1(ze);continue}}Ke!==null?(Ke.return=Pe,tt=Ke):F1(ze)}Fe=Fe.sibling}e:for(Fe=null,ze=a;;){if(ze.tag===5){if(Fe===null){Fe=ze;try{A=ze.stateNode,Ce?(j=A.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Q=ze.stateNode,le=ze.memoizedProps.style,B=le!=null&&le.hasOwnProperty("display")?le.display:null,Q.style.display=zt("display",B))}catch(ot){Zn(a,a.return,ot)}}}else if(ze.tag===6){if(Fe===null)try{ze.stateNode.nodeValue=Ce?"":ze.memoizedProps}catch(ot){Zn(a,a.return,ot)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===a)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===a)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===a)break e;Fe===ze&&(Fe=null),ze=ze.return}Fe===ze&&(Fe=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:Qs(l,a),fa(a),x&4&&k1(a);break;case 21:break;default:Qs(l,a),fa(a)}}function fa(a){var l=a.flags;if(l&2){try{e:{for(var p=a.return;p!==null;){if(_1(p)){var x=p;break e}p=p.return}throw Error(s(160))}switch(x.tag){case 5:var A=x.stateNode;x.flags&32&&(fr(A,""),x.flags&=-33);var j=D1(a);Dh(a,j,A);break;case 3:case 4:var B=x.stateNode.containerInfo,Q=D1(a);_h(a,Q,B);break;default:throw Error(s(161))}}catch(le){Zn(a,a.return,le)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function LN(a,l,p){tt=a,M1(a)}function M1(a,l,p){for(var x=(a.mode&1)!==0;tt!==null;){var A=tt,j=A.child;if(A.tag===22&&x){var B=A.memoizedState!==null||Yd;if(!B){var Q=A.alternate,le=Q!==null&&Q.memoizedState!==null||Ur;Q=Yd;var Ce=Ur;if(Yd=B,(Ur=le)&&!Ce)for(tt=A;tt!==null;)B=tt,le=B.child,B.tag===22&&B.memoizedState!==null?B1(A):le!==null?(le.return=B,tt=le):B1(A);for(;j!==null;)tt=j,M1(j),j=j.sibling;tt=A,Yd=Q,Ur=Ce}L1(a)}else(A.subtreeFlags&8772)!==0&&j!==null?(j.return=A,tt=j):L1(a)}}function L1(a){for(;tt!==null;){var l=tt;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ur||Zd(5,l);break;case 1:var x=l.stateNode;if(l.flags&4&&!Ur)if(p===null)x.componentDidMount();else{var A=l.elementType===l.type?p.memoizedProps:Zs(l.type,p.memoizedProps);x.componentDidUpdate(A,p.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var j=l.updateQueue;j!==null&&F0(l,j,x);break;case 3:var B=l.updateQueue;if(B!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}F0(l,B,p)}break;case 5:var Q=l.stateNode;if(p===null&&l.flags&4){p=Q;var le=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&p.focus();break;case"img":le.src&&(p.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Ce=l.alternate;if(Ce!==null){var Fe=Ce.memoizedState;if(Fe!==null){var ze=Fe.dehydrated;ze!==null&&$s(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ur||l.flags&512&&Rh(l)}catch(Pe){Zn(l,l.return,Pe)}}if(l===a){tt=null;break}if(p=l.sibling,p!==null){p.return=l.return,tt=p;break}tt=l.return}}function F1(a){for(;tt!==null;){var l=tt;if(l===a){tt=null;break}var p=l.sibling;if(p!==null){p.return=l.return,tt=p;break}tt=l.return}}function B1(a){for(;tt!==null;){var l=tt;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Zd(4,l)}catch(le){Zn(l,p,le)}break;case 1:var x=l.stateNode;if(typeof x.componentDidMount=="function"){var A=l.return;try{x.componentDidMount()}catch(le){Zn(l,A,le)}}var j=l.return;try{Rh(l)}catch(le){Zn(l,j,le)}break;case 5:var B=l.return;try{Rh(l)}catch(le){Zn(l,B,le)}}}catch(le){Zn(l,l.return,le)}if(l===a){tt=null;break}var Q=l.sibling;if(Q!==null){Q.return=l.return,tt=Q;break}tt=l.return}}var FN=Math.ceil,qd=Z.ReactCurrentDispatcher,Oh=Z.ReactCurrentOwner,Ms=Z.ReactCurrentBatchConfig,Kt=0,Sr=null,or=null,Or=0,ws=0,Zo=si(0),vr=0,uc=null,so=0,Qd=0,kh=0,fc=null,rs=null,Ph=0,qo=1/0,Ma=null,Kd=!1,Mh=null,di=null,Jd=!1,ui=null,eu=0,hc=0,Lh=null,tu=-1,nu=0;function Yr(){return(Kt&6)!==0?ln():tu!==-1?tu:tu=ln()}function fi(a){return(a.mode&1)===0?1:(Kt&2)!==0&&Or!==0?Or&-Or:bN.transition!==null?(nu===0&&(nu=mr()),nu):(a=kt,a!==0||(a=window.event,a=a===void 0?16:Ul(a.type)),a)}function Ks(a,l,p,x){if(50<hc)throw hc=0,Lh=null,Error(s(185));$(a,p,x),((Kt&2)===0||a!==Sr)&&(a===Sr&&((Kt&2)===0&&(Qd|=p),vr===4&&hi(a,Or)),ss(a,x),p===1&&Kt===0&&(l.mode&1)===0&&(qo=ln()+500,Rd&&ii()))}function ss(a,l){var p=a.callbackNode;Xa(a,l);var x=ms(a,a===Sr?Or:0);if(x===0)p!==null&&Nr(p),a.callbackNode=null,a.callbackPriority=0;else if(l=x&-x,a.callbackPriority!==l){if(p!=null&&Nr(p),l===1)a.tag===0?wN(z1.bind(null,a)):A0(z1.bind(null,a)),gN(function(){(Kt&6)===0&&ii()}),p=null;else{switch(ud(x)){case 1:p=De;break;case 4:p=cd;break;case 16:p=mn;break;case 536870912:p=dd;break;default:p=mn}p=Z1(p,U1.bind(null,a))}a.callbackPriority=l,a.callbackNode=p}}function U1(a,l){if(tu=-1,nu=0,(Kt&6)!==0)throw Error(s(327));var p=a.callbackNode;if(Qo()&&a.callbackNode!==p)return null;var x=ms(a,a===Sr?Or:0);if(x===0)return null;if((x&30)!==0||(x&a.expiredLanes)!==0||l)l=ru(a,x);else{l=x;var A=Kt;Kt|=2;var j=H1();(Sr!==a||Or!==l)&&(Ma=null,qo=ln()+500,io(a,l));do try{zN();break}catch(Q){V1(a,Q)}while(!0);th(),qd.current=j,Kt=A,or!==null?l=0:(Sr=null,Or=0,l=vr)}if(l!==0){if(l===2&&(A=cn(a),A!==0&&(x=A,l=Fh(a,A))),l===1)throw p=uc,io(a,0),hi(a,x),ss(a,ln()),p;if(l===6)hi(a,x);else{if(A=a.current.alternate,(x&30)===0&&!BN(A)&&(l=ru(a,x),l===2&&(j=cn(a),j!==0&&(x=j,l=Fh(a,j))),l===1))throw p=uc,io(a,0),hi(a,x),ss(a,ln()),p;switch(a.finishedWork=A,a.finishedLanes=x,l){case 0:case 1:throw Error(s(345));case 2:oo(a,rs,Ma);break;case 3:if(hi(a,x),(x&130023424)===x&&(l=Ph+500-ln(),10<l)){if(ms(a,0)!==0)break;if(A=a.suspendedLanes,(A&x)!==x){Yr(),a.pingedLanes|=a.suspendedLanes&A;break}a.timeoutHandle=Wf(oo.bind(null,a,rs,Ma),l);break}oo(a,rs,Ma);break;case 4:if(hi(a,x),(x&4194240)===x)break;for(l=a.eventTimes,A=-1;0<x;){var B=31-Gr(x);j=1<<B,B=l[B],B>A&&(A=B),x&=~j}if(x=A,x=ln()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*FN(x/1960))-x,10<x){a.timeoutHandle=Wf(oo.bind(null,a,rs,Ma),x);break}oo(a,rs,Ma);break;case 5:oo(a,rs,Ma);break;default:throw Error(s(329))}}}return ss(a,ln()),a.callbackNode===p?U1.bind(null,a):null}function Fh(a,l){var p=fc;return a.current.memoizedState.isDehydrated&&(io(a,l).flags|=256),a=ru(a,l),a!==2&&(l=rs,rs=p,l!==null&&Bh(l)),a}function Bh(a){rs===null?rs=a:rs.push.apply(rs,a)}function BN(a){for(var l=a;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var x=0;x<p.length;x++){var A=p[x],j=A.getSnapshot;A=A.value;try{if(!he(j(),A))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function hi(a,l){for(l&=~kh,l&=~Qd,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var p=31-Gr(l),x=1<<p;a[p]=-1,l&=~x}}function z1(a){if((Kt&6)!==0)throw Error(s(327));Qo();var l=ms(a,0);if((l&1)===0)return ss(a,ln()),null;var p=ru(a,l);if(a.tag!==0&&p===2){var x=cn(a);x!==0&&(l=x,p=Fh(a,x))}if(p===1)throw p=uc,io(a,0),hi(a,l),ss(a,ln()),p;if(p===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,oo(a,rs,Ma),ss(a,ln()),null}function Uh(a,l){var p=Kt;Kt|=1;try{return a(l)}finally{Kt=p,Kt===0&&(qo=ln()+500,Rd&&ii())}}function ao(a){ui!==null&&ui.tag===0&&(Kt&6)===0&&Qo();var l=Kt;Kt|=1;var p=Ms.transition,x=kt;try{if(Ms.transition=null,kt=1,a)return a()}finally{kt=x,Ms.transition=p,Kt=l,(Kt&6)===0&&ii()}}function zh(){ws=Zo.current,_n(Zo)}function io(a,l){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,pN(p)),or!==null)for(p=or.return;p!==null;){var x=p;switch(qf(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&jd();break;case 3:Go(),_n(es),_n(Lr),ch();break;case 5:oh(x);break;case 4:Go();break;case 13:_n(Hn);break;case 19:_n(Hn);break;case 10:nh(x.type._context);break;case 22:case 23:zh()}p=p.return}if(Sr=a,or=a=mi(a.current,null),Or=ws=l,vr=0,uc=null,kh=Qd=so=0,rs=fc=null,to!==null){for(l=0;l<to.length;l++)if(p=to[l],x=p.interleaved,x!==null){p.interleaved=null;var A=x.next,j=p.pending;if(j!==null){var B=j.next;j.next=A,x.next=B}p.pending=x}to=null}return a}function V1(a,l){do{var p=or;try{if(th(),Ud.current=Wd,zd){for(var x=Wn.memoizedState;x!==null;){var A=x.queue;A!==null&&(A.pending=null),x=x.next}zd=!1}if(ro=0,Er=yr=Wn=null,ac=!1,ic=0,Oh.current=null,p===null||p.return===null){vr=1,uc=l,or=null;break}e:{var j=a,B=p.return,Q=p,le=l;if(l=Or,Q.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var Ce=le,Fe=Q,ze=Fe.tag;if((Fe.mode&1)===0&&(ze===0||ze===11||ze===15)){var Pe=Fe.alternate;Pe?(Fe.updateQueue=Pe.updateQueue,Fe.memoizedState=Pe.memoizedState,Fe.lanes=Pe.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var Ke=h1(B);if(Ke!==null){Ke.flags&=-257,m1(Ke,B,Q,j,l),Ke.mode&1&&f1(j,Ce,l),l=Ke,le=Ce;var rt=l.updateQueue;if(rt===null){var ot=new Set;ot.add(le),l.updateQueue=ot}else rt.add(le);break e}else{if((l&1)===0){f1(j,Ce,l),Vh();break e}le=Error(s(426))}}else if(Fn&&Q.mode&1){var nr=h1(B);if(nr!==null){(nr.flags&65536)===0&&(nr.flags|=256),m1(nr,B,Q,j,l),Jf(Xo(le,Q));break e}}j=le=Xo(le,Q),vr!==4&&(vr=2),fc===null?fc=[j]:fc.push(j),j=B;do{switch(j.tag){case 3:j.flags|=65536,l&=-l,j.lanes|=l;var ye=d1(j,le,l);L0(j,ye);break e;case 1:Q=le;var de=j.type,ve=j.stateNode;if((j.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(di===null||!di.has(ve)))){j.flags|=65536,l&=-l,j.lanes|=l;var $e=u1(j,Q,l);L0(j,$e);break e}}j=j.return}while(j!==null)}$1(p)}catch(ut){l=ut,or===p&&p!==null&&(or=p=p.return);continue}break}while(!0)}function H1(){var a=qd.current;return qd.current=Wd,a===null?Wd:a}function Vh(){(vr===0||vr===3||vr===2)&&(vr=4),Sr===null||(so&268435455)===0&&(Qd&268435455)===0||hi(Sr,Or)}function ru(a,l){var p=Kt;Kt|=2;var x=H1();(Sr!==a||Or!==l)&&(Ma=null,io(a,l));do try{UN();break}catch(A){V1(a,A)}while(!0);if(th(),Kt=p,qd.current=x,or!==null)throw Error(s(261));return Sr=null,Or=0,vr}function UN(){for(;or!==null;)W1(or)}function zN(){for(;or!==null&&!wn();)W1(or)}function W1(a){var l=Y1(a.alternate,a,ws);a.memoizedProps=a.pendingProps,l===null?$1(a):or=l,Oh.current=null}function $1(a){var l=a;do{var p=l.alternate;if(a=l.return,(l.flags&32768)===0){if(p=ON(p,l,ws),p!==null){or=p;return}}else{if(p=kN(p,l),p!==null){p.flags&=32767,or=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{vr=6,or=null;return}}if(l=l.sibling,l!==null){or=l;return}or=l=a}while(l!==null);vr===0&&(vr=5)}function oo(a,l,p){var x=kt,A=Ms.transition;try{Ms.transition=null,kt=1,VN(a,l,p,x)}finally{Ms.transition=A,kt=x}return null}function VN(a,l,p,x){do Qo();while(ui!==null);if((Kt&6)!==0)throw Error(s(327));p=a.finishedWork;var A=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(s(177));a.callbackNode=null,a.callbackPriority=0;var j=p.lanes|p.childLanes;if(mt(a,j),a===Sr&&(or=Sr=null,Or=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Jd||(Jd=!0,Z1(mn,function(){return Qo(),null})),j=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||j){j=Ms.transition,Ms.transition=null;var B=kt;kt=1;var Q=Kt;Kt|=4,Oh.current=null,MN(a,p),P1(p,a),Mr(Vf),oa=!!zf,Vf=zf=null,a.current=p,LN(p),ld(),Kt=Q,kt=B,Ms.transition=j}else a.current=p;if(Jd&&(Jd=!1,ui=a,eu=A),j=a.pendingLanes,j===0&&(di=null),Wt(p.stateNode),ss(a,ln()),l!==null)for(x=a.onRecoverableError,p=0;p<l.length;p++)A=l[p],x(A.value,{componentStack:A.stack,digest:A.digest});if(Kd)throw Kd=!1,a=Mh,Mh=null,a;return(eu&1)!==0&&a.tag!==0&&Qo(),j=a.pendingLanes,(j&1)!==0?a===Lh?hc++:(hc=0,Lh=a):hc=0,ii(),null}function Qo(){if(ui!==null){var a=ud(eu),l=Ms.transition,p=kt;try{if(Ms.transition=null,kt=16>a?16:a,ui===null)var x=!1;else{if(a=ui,ui=null,eu=0,(Kt&6)!==0)throw Error(s(331));var A=Kt;for(Kt|=4,tt=a.current;tt!==null;){var j=tt,B=j.child;if((tt.flags&16)!==0){var Q=j.deletions;if(Q!==null){for(var le=0;le<Q.length;le++){var Ce=Q[le];for(tt=Ce;tt!==null;){var Fe=tt;switch(Fe.tag){case 0:case 11:case 15:dc(8,Fe,j)}var ze=Fe.child;if(ze!==null)ze.return=Fe,tt=ze;else for(;tt!==null;){Fe=tt;var Pe=Fe.sibling,Ke=Fe.return;if(R1(Fe),Fe===Ce){tt=null;break}if(Pe!==null){Pe.return=Ke,tt=Pe;break}tt=Ke}}}var rt=j.alternate;if(rt!==null){var ot=rt.child;if(ot!==null){rt.child=null;do{var nr=ot.sibling;ot.sibling=null,ot=nr}while(ot!==null)}}tt=j}}if((j.subtreeFlags&2064)!==0&&B!==null)B.return=j,tt=B;else e:for(;tt!==null;){if(j=tt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:dc(9,j,j.return)}var ye=j.sibling;if(ye!==null){ye.return=j.return,tt=ye;break e}tt=j.return}}var de=a.current;for(tt=de;tt!==null;){B=tt;var ve=B.child;if((B.subtreeFlags&2064)!==0&&ve!==null)ve.return=B,tt=ve;else e:for(B=de;tt!==null;){if(Q=tt,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Zd(9,Q)}}catch(ut){Zn(Q,Q.return,ut)}if(Q===B){tt=null;break e}var $e=Q.sibling;if($e!==null){$e.return=Q.return,tt=$e;break e}tt=Q.return}}if(Kt=A,ii(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(qt,a)}catch{}x=!0}return x}finally{kt=p,Ms.transition=l}}return!1}function G1(a,l,p){l=Xo(p,l),l=d1(a,l,1),a=li(a,l,1),l=Yr(),a!==null&&($(a,1,l),ss(a,l))}function Zn(a,l,p){if(a.tag===3)G1(a,a,p);else for(;l!==null;){if(l.tag===3){G1(l,a,p);break}else if(l.tag===1){var x=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(di===null||!di.has(x))){a=Xo(p,a),a=u1(l,a,1),l=li(l,a,1),a=Yr(),l!==null&&($(l,1,a),ss(l,a));break}}l=l.return}}function HN(a,l,p){var x=a.pingCache;x!==null&&x.delete(l),l=Yr(),a.pingedLanes|=a.suspendedLanes&p,Sr===a&&(Or&p)===p&&(vr===4||vr===3&&(Or&130023424)===Or&&500>ln()-Ph?io(a,0):kh|=p),ss(a,l)}function X1(a,l){l===0&&((a.mode&1)===0?l=1:(l=Io,Io<<=1,(Io&130023424)===0&&(Io=4194304)));var p=Yr();a=Oa(a,l),a!==null&&($(a,l,p),ss(a,p))}function WN(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),X1(a,p)}function $N(a,l){var p=0;switch(a.tag){case 13:var x=a.stateNode,A=a.memoizedState;A!==null&&(p=A.retryLane);break;case 19:x=a.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(l),X1(a,p)}var Y1;Y1=function(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps||es.current)ns=!0;else{if((a.lanes&p)===0&&(l.flags&128)===0)return ns=!1,DN(a,l,p);ns=(a.flags&131072)!==0}else ns=!1,Fn&&(l.flags&1048576)!==0&&I0(l,Dd,l.index);switch(l.lanes=0,l.tag){case 2:var x=l.type;Xd(a,l),a=l.pendingProps;var A=Bo(l,Lr.current);$o(l,p),A=fh(null,l,x,a,A,p);var j=hh();return l.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ts(x)?(j=!0,Td(l)):j=!1,l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,ah(l),A.updater=$d,l.stateNode=A,A._reactInternals=l,vh(l,x,a,p),l=Ch(null,l,x,!0,j,p)):(l.tag=0,Fn&&j&&Zf(l),Xr(null,l,A,p),l=l.child),l;case 16:x=l.elementType;e:{switch(Xd(a,l),a=l.pendingProps,A=x._init,x=A(x._payload),l.type=x,A=l.tag=XN(x),a=Zs(x,a),A){case 0:l=Nh(null,l,x,a,p);break e;case 1:l=w1(null,l,x,a,p);break e;case 11:l=p1(null,l,x,a,p);break e;case 14:l=g1(null,l,x,Zs(x.type,a),p);break e}throw Error(s(306,x,""))}return l;case 0:return x=l.type,A=l.pendingProps,A=l.elementType===x?A:Zs(x,A),Nh(a,l,x,A,p);case 1:return x=l.type,A=l.pendingProps,A=l.elementType===x?A:Zs(x,A),w1(a,l,x,A,p);case 3:e:{if(b1(l),a===null)throw Error(s(387));x=l.pendingProps,j=l.memoizedState,A=j.element,M0(a,l),Fd(l,x,null,p);var B=l.memoizedState;if(x=B.element,j.isDehydrated)if(j={element:x,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},l.updateQueue.baseState=j,l.memoizedState=j,l.flags&256){A=Xo(Error(s(423)),l),l=N1(a,l,x,p,A);break e}else if(x!==A){A=Xo(Error(s(424)),l),l=N1(a,l,x,p,A);break e}else for(vs=ri(l.stateNode.containerInfo.firstChild),ys=l,Fn=!0,Ys=null,p=k0(l,null,x,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Vo(),x===A){l=Pa(a,l,p);break e}Xr(a,l,x,p)}l=l.child}return l;case 5:return B0(l),a===null&&Kf(l),x=l.type,A=l.pendingProps,j=a!==null?a.memoizedProps:null,B=A.children,Hf(x,A)?B=null:j!==null&&Hf(x,j)&&(l.flags|=32),v1(a,l),Xr(a,l,B,p),l.child;case 6:return a===null&&Kf(l),null;case 13:return C1(a,l,p);case 4:return ih(l,l.stateNode.containerInfo),x=l.pendingProps,a===null?l.child=Ho(l,null,x,p):Xr(a,l,x,p),l.child;case 11:return x=l.type,A=l.pendingProps,A=l.elementType===x?A:Zs(x,A),p1(a,l,x,A,p);case 7:return Xr(a,l,l.pendingProps,p),l.child;case 8:return Xr(a,l,l.pendingProps.children,p),l.child;case 12:return Xr(a,l,l.pendingProps.children,p),l.child;case 10:e:{if(x=l.type._context,A=l.pendingProps,j=l.memoizedProps,B=A.value,Cn(Pd,x._currentValue),x._currentValue=B,j!==null)if(he(j.value,B)){if(j.children===A.children&&!es.current){l=Pa(a,l,p);break e}}else for(j=l.child,j!==null&&(j.return=l);j!==null;){var Q=j.dependencies;if(Q!==null){B=j.child;for(var le=Q.firstContext;le!==null;){if(le.context===x){if(j.tag===1){le=ka(-1,p&-p),le.tag=2;var Ce=j.updateQueue;if(Ce!==null){Ce=Ce.shared;var Fe=Ce.pending;Fe===null?le.next=le:(le.next=Fe.next,Fe.next=le),Ce.pending=le}}j.lanes|=p,le=j.alternate,le!==null&&(le.lanes|=p),rh(j.return,p,l),Q.lanes|=p;break}le=le.next}}else if(j.tag===10)B=j.type===l.type?null:j.child;else if(j.tag===18){if(B=j.return,B===null)throw Error(s(341));B.lanes|=p,Q=B.alternate,Q!==null&&(Q.lanes|=p),rh(B,p,l),B=j.sibling}else B=j.child;if(B!==null)B.return=j;else for(B=j;B!==null;){if(B===l){B=null;break}if(j=B.sibling,j!==null){j.return=B.return,B=j;break}B=B.return}j=B}Xr(a,l,A.children,p),l=l.child}return l;case 9:return A=l.type,x=l.pendingProps.children,$o(l,p),A=ks(A),x=x(A),l.flags|=1,Xr(a,l,x,p),l.child;case 14:return x=l.type,A=Zs(x,l.pendingProps),A=Zs(x.type,A),g1(a,l,x,A,p);case 15:return x1(a,l,l.type,l.pendingProps,p);case 17:return x=l.type,A=l.pendingProps,A=l.elementType===x?A:Zs(x,A),Xd(a,l),l.tag=1,ts(x)?(a=!0,Td(l)):a=!1,$o(l,p),l1(l,x,A),vh(l,x,A,p),Ch(null,l,x,!0,a,p);case 19:return S1(a,l,p);case 22:return y1(a,l,p)}throw Error(s(156,l.tag))};function Z1(a,l){return fs(a,l)}function GN(a,l,p,x){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(a,l,p,x){return new GN(a,l,p,x)}function Hh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function XN(a){if(typeof a=="function")return Hh(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ue)return 11;if(a===q)return 14}return 2}function mi(a,l){var p=a.alternate;return p===null?(p=Ls(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function su(a,l,p,x,A,j){var B=2;if(x=a,typeof a=="function")Hh(a)&&(B=1);else if(typeof a=="string")B=5;else e:switch(a){case G:return lo(p.children,A,j,l);case J:B=8,A|=8;break;case se:return a=Ls(12,p,l,A|2),a.elementType=se,a.lanes=j,a;case ge:return a=Ls(13,p,l,A),a.elementType=ge,a.lanes=j,a;case re:return a=Ls(19,p,l,A),a.elementType=re,a.lanes=j,a;case K:return au(p,A,j,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case fe:B=10;break e;case Ee:B=9;break e;case ue:B=11;break e;case q:B=14;break e;case U:B=16,x=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return l=Ls(B,p,l,A),l.elementType=a,l.type=x,l.lanes=j,l}function lo(a,l,p,x){return a=Ls(7,a,x,l),a.lanes=p,a}function au(a,l,p,x){return a=Ls(22,a,x,l),a.elementType=K,a.lanes=p,a.stateNode={isHidden:!1},a}function Wh(a,l,p){return a=Ls(6,a,null,l),a.lanes=p,a}function $h(a,l,p){return l=Ls(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function YN(a,l,p,x,A){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xe(0),this.expirationTimes=xe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.identifierPrefix=x,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Gh(a,l,p,x,A,j,B,Q,le){return a=new YN(a,l,p,Q,le),l===1?(l=1,j===!0&&(l|=8)):l=0,j=Ls(3,null,null,l),a.current=j,j.stateNode=a,j.memoizedState={element:x,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(j),a}function ZN(a,l,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:x==null?null:""+x,children:a,containerInfo:l,implementation:p}}function q1(a){if(!a)return ai;a=a._reactInternals;e:{if(Jr(a)!==a||a.tag!==1)throw Error(s(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ts(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(s(171))}if(a.tag===1){var p=a.type;if(ts(p))return E0(a,p,l)}return l}function Q1(a,l,p,x,A,j,B,Q,le){return a=Gh(p,x,!0,a,A,j,B,Q,le),a.context=q1(null),p=a.current,x=Yr(),A=fi(p),j=ka(x,A),j.callback=l??null,li(p,j,A),a.current.lanes=A,$(a,A,x),ss(a,x),a}function iu(a,l,p,x){var A=l.current,j=Yr(),B=fi(A);return p=q1(p),l.context===null?l.context=p:l.pendingContext=p,l=ka(j,B),l.payload={element:a},x=x===void 0?null:x,x!==null&&(l.callback=x),a=li(A,l,B),a!==null&&(Ks(a,A,B,j),Ld(a,A,B)),B}function ou(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function K1(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function Xh(a,l){K1(a,l),(a=a.alternate)&&K1(a,l)}function qN(){return null}var J1=typeof reportError=="function"?reportError:function(a){console.error(a)};function Yh(a){this._internalRoot=a}lu.prototype.render=Yh.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));iu(a,l,null,null)},lu.prototype.unmount=Yh.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;ao(function(){iu(null,a,null,null)}),l[Ta]=null}};function lu(a){this._internalRoot=a}lu.prototype.unstable_scheduleHydration=function(a){if(a){var l=bn();a={blockedOn:null,target:a,priority:l};for(var p=0;p<Tr.length&&l!==0&&l<Tr[p].priority;p++);Tr.splice(p,0,a),p===0&&hd(a)}};function Zh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function cu(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function eg(){}function QN(a,l,p,x,A){if(A){if(typeof x=="function"){var j=x;x=function(){var Ce=ou(B);j.call(Ce)}}var B=Q1(l,x,a,0,null,!1,!1,"",eg);return a._reactRootContainer=B,a[Ta]=B.current,Ql(a.nodeType===8?a.parentNode:a),ao(),B}for(;A=a.lastChild;)a.removeChild(A);if(typeof x=="function"){var Q=x;x=function(){var Ce=ou(le);Q.call(Ce)}}var le=Gh(a,0,!1,null,null,!1,!1,"",eg);return a._reactRootContainer=le,a[Ta]=le.current,Ql(a.nodeType===8?a.parentNode:a),ao(function(){iu(l,le,p,x)}),le}function du(a,l,p,x,A){var j=p._reactRootContainer;if(j){var B=j;if(typeof A=="function"){var Q=A;A=function(){var le=ou(B);Q.call(le)}}iu(l,B,a,A)}else B=QN(p,l,a,A,x);return ou(B)}jo=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var p=pn(l.pendingLanes);p!==0&&(Xn(l,p|1),ss(l,ln()),(Kt&6)===0&&(qo=ln()+500,ii()))}break;case 13:ao(function(){var x=Oa(a,1);if(x!==null){var A=Yr();Ks(x,a,1,A)}}),Xh(a,1)}},Pr=function(a){if(a.tag===13){var l=Oa(a,134217728);if(l!==null){var p=Yr();Ks(l,a,134217728,p)}Xh(a,134217728)}},pt=function(a){if(a.tag===13){var l=fi(a),p=Oa(a,l);if(p!==null){var x=Yr();Ks(p,a,l,x)}Xh(a,l)}},bn=function(){return kt},Ll=function(a,l){var p=kt;try{return kt=a,l()}finally{kt=p}},Ca=function(a,l,p){switch(l){case"input":if(T(a,p),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var x=p[l];if(x!==a&&x.form===a.form){var A=Id(x);if(!A)throw Error(s(90));Ze(x),T(x,A)}}}break;case"textarea":Bt(a,p);break;case"select":l=p.value,l!=null&&pe(a,!!p.multiple,l,!1)}},Zt=Uh,Rt=ao;var KN={usingClientEntryPoint:!1,Events:[ec,Lo,Id,Bi,ht,Uh]},mc={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JN={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=id(a),a===null?null:a.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||qN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{qt=uu.inject(JN),Ot=uu}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KN,as.createPortal=function(a,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(l))throw Error(s(200));return ZN(a,l,null,p)},as.createRoot=function(a,l){if(!Zh(a))throw Error(s(299));var p=!1,x="",A=J1;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=Gh(a,1,!1,null,null,p,!1,x,A),a[Ta]=l.current,Ql(a.nodeType===8?a.parentNode:a),new Yh(l)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=id(l),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return ao(a)},as.hydrate=function(a,l,p){if(!cu(l))throw Error(s(200));return du(null,a,l,!0,p)},as.hydrateRoot=function(a,l,p){if(!Zh(a))throw Error(s(405));var x=p!=null&&p.hydratedSources||null,A=!1,j="",B=J1;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(j=p.identifierPrefix),p.onRecoverableError!==void 0&&(B=p.onRecoverableError)),l=Q1(l,null,a,1,p??null,A,!1,j,B),a[Ta]=l.current,Ql(a),x)for(a=0;a<x.length;a++)p=x[a],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new lu(l)},as.render=function(a,l,p){if(!cu(l))throw Error(s(200));return du(null,a,l,!1,p)},as.unmountComponentAtNode=function(a){if(!cu(a))throw Error(s(40));return a._reactRootContainer?(ao(function(){du(null,null,a,!1,function(){a._reactRootContainer=null,a[Ta]=null})}),!0):!1},as.unstable_batchedUpdates=Uh,as.unstable_renderSubtreeIntoContainer=function(a,l,p,x){if(!cu(p))throw Error(s(200));if(a==null||a._reactInternals===void 0)throw Error(s(38));return du(a,l,p,!1,x)},as.version="18.3.1-next-f1338f8080-20240426",as}var lg;function fy(){if(lg)return Kh.exports;lg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Kh.exports=iC(),Kh.exports}var cg;function oC(){if(cg)return hu;cg=1;var e=fy();return hu.createRoot=e.createRoot,hu.hydrateRoot=e.hydrateRoot,hu}var lC=oC(),C=rf();const Oe=hp(C),mp=uy({__proto__:null,default:Oe},[C]),cC=1,dC=1e6;let tm=0;function uC(){return tm=(tm+1)%Number.MAX_SAFE_INTEGER,tm.toString()}const nm=new Map,dg=e=>{if(nm.has(e))return;const n=setTimeout(()=>{nm.delete(e),Pc({type:"REMOVE_TOAST",toastId:e})},dC);nm.set(e,n)},fC=(e,n)=>{switch(n.type){case"ADD_TOAST":return{...e,toasts:[n.toast,...e.toasts].slice(0,cC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===n.toast.id?{...s,...n.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=n;return s?dg(s):e.toasts.forEach(c=>{dg(c.id)}),{...e,toasts:e.toasts.map(c=>c.id===s||s===void 0?{...c,open:!1}:c)}}case"REMOVE_TOAST":return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==n.toastId)}}},ju=[];let Tu={toasts:[]};function Pc(e){Tu=fC(Tu,e),ju.forEach(n=>{n(Tu)})}function hC({...e}){const n=uC(),s=f=>Pc({type:"UPDATE_TOAST",toast:{...f,id:n}}),c=()=>Pc({type:"DISMISS_TOAST",toastId:n});return Pc({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:f=>{f||c()}}}),{id:n,dismiss:c,update:s}}function Un(){const[e,n]=C.useState(Tu);return C.useEffect(()=>(ju.push(n),()=>{const s=ju.indexOf(n);s>-1&&ju.splice(s,1)}),[e]),{...e,toast:hC,dismiss:s=>Pc({type:"DISMISS_TOAST",toastId:s})}}var Cl=fy();const hy=hp(Cl);function yt(e,n,{checkForDefaultPrevented:s=!0}={}){return function(f){if(e?.(f),s===!1||!f.defaultPrevented)return n?.(f)}}function ug(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function my(...e){return n=>{let s=!1;const c=e.map(f=>{const m=ug(f,n);return!s&&typeof m=="function"&&(s=!0),m});if(s)return()=>{for(let f=0;f<c.length;f++){const m=c[f];typeof m=="function"?m():ug(e[f],null)}}}}function an(...e){return C.useCallback(my(...e),e)}function mC(e,n){const s=C.createContext(n),c=m=>{const{children:v,...N}=m,w=C.useMemo(()=>N,Object.values(N));return r.jsx(s.Provider,{value:w,children:v})};c.displayName=e+"Provider";function f(m){const v=C.useContext(s);if(v)return v;if(n!==void 0)return n;throw new Error(`\`${m}\` must be used within \`${e}\``)}return[c,f]}function zs(e,n=[]){let s=[];function c(m,v){const N=C.createContext(v),w=s.length;s=[...s,v];const y=I=>{const{scope:O,children:_,...k}=I,R=O?.[e]?.[w]||N,P=C.useMemo(()=>k,Object.values(k));return r.jsx(R.Provider,{value:P,children:_})};y.displayName=m+"Provider";function E(I,O){const _=O?.[e]?.[w]||N,k=C.useContext(_);if(k)return k;if(v!==void 0)return v;throw new Error(`\`${I}\` must be used within \`${m}\``)}return[y,E]}const f=()=>{const m=s.map(v=>C.createContext(v));return function(N){const w=N?.[e]||m;return C.useMemo(()=>({[`__scope${e}`]:{...N,[e]:w}}),[N,w])}};return f.scopeName=e,[c,pC(f,...n)]}function pC(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const c=e.map(f=>({useScope:f(),scopeName:f.scopeName}));return function(m){const v=c.reduce((N,{useScope:w,scopeName:y})=>{const I=w(m)[`__scope${y}`];return{...N,...I}},{});return C.useMemo(()=>({[`__scope${n.scopeName}`]:v}),[v])}};return s.scopeName=n.scopeName,s}function ml(e){const n=gC(e),s=C.forwardRef((c,f)=>{const{children:m,...v}=c,N=C.Children.toArray(m),w=N.find(xC);if(w){const y=w.props.children,E=N.map(I=>I===w?C.Children.count(y)>1?C.Children.only(null):C.isValidElement(y)?y.props.children:null:I);return r.jsx(n,{...v,ref:f,children:C.isValidElement(y)?C.cloneElement(y,void 0,E):null})}return r.jsx(n,{...v,ref:f,children:m})});return s.displayName=`${e}.Slot`,s}var El=ml("Slot");function gC(e){const n=C.forwardRef((s,c)=>{const{children:f,...m}=s;if(C.isValidElement(f)){const v=vC(f),N=yC(m,f.props);return f.type!==C.Fragment&&(N.ref=c?my(c,v):v),C.cloneElement(f,N)}return C.Children.count(f)>1?C.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var py=Symbol("radix.slottable");function gy(e){const n=({children:s})=>r.jsx(r.Fragment,{children:s});return n.displayName=`${e}.Slottable`,n.__radixId=py,n}function xC(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===py}function yC(e,n){const s={...n};for(const c in n){const f=e[c],m=n[c];/^on[A-Z]/.test(c)?f&&m?s[c]=(...N)=>{const w=m(...N);return f(...N),w}:f&&(s[c]=f):c==="style"?s[c]={...f,...m}:c==="className"&&(s[c]=[f,m].filter(Boolean).join(" "))}return{...e,...s}}function vC(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function xy(e){const n=e+"CollectionProvider",[s,c]=zs(n),[f,m]=s(n,{collectionRef:{current:null},itemMap:new Map}),v=R=>{const{scope:P,children:H}=R,z=Oe.useRef(null),F=Oe.useRef(new Map).current;return r.jsx(f,{scope:P,itemMap:F,collectionRef:z,children:H})};v.displayName=n;const N=e+"CollectionSlot",w=ml(N),y=Oe.forwardRef((R,P)=>{const{scope:H,children:z}=R,F=m(N,H),Z=an(P,F.collectionRef);return r.jsx(w,{ref:Z,children:z})});y.displayName=N;const E=e+"CollectionItemSlot",I="data-radix-collection-item",O=ml(E),_=Oe.forwardRef((R,P)=>{const{scope:H,children:z,...F}=R,Z=Oe.useRef(null),W=an(P,Z),te=m(E,H);return Oe.useEffect(()=>(te.itemMap.set(Z,{ref:Z,...F}),()=>void te.itemMap.delete(Z))),r.jsx(O,{[I]:"",ref:W,children:z})});_.displayName=E;function k(R){const P=m(e+"CollectionConsumer",R);return Oe.useCallback(()=>{const z=P.collectionRef.current;if(!z)return[];const F=Array.from(z.querySelectorAll(`[${I}]`));return Array.from(P.itemMap.values()).sort((te,G)=>F.indexOf(te.ref.current)-F.indexOf(G.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:v,Slot:y,ItemSlot:_},k,c]}var wC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jt=wC.reduce((e,n)=>{const s=ml(`Primitive.${n}`),c=C.forwardRef((f,m)=>{const{asChild:v,...N}=f,w=v?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(w,{...N,ref:m})});return c.displayName=`Primitive.${n}`,{...e,[n]:c}},{});function yy(e,n){e&&Cl.flushSync(()=>e.dispatchEvent(n))}function Us(e){const n=C.useRef(e);return C.useEffect(()=>{n.current=e}),C.useMemo(()=>(...s)=>n.current?.(...s),[])}function bC(e,n=globalThis?.document){const s=Us(e);C.useEffect(()=>{const c=f=>{f.key==="Escape"&&s(f)};return n.addEventListener("keydown",c,{capture:!0}),()=>n.removeEventListener("keydown",c,{capture:!0})},[s,n])}var NC="DismissableLayer",Sm="dismissableLayer.update",CC="dismissableLayer.pointerDownOutside",EC="dismissableLayer.focusOutside",fg,vy=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sl=C.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:N,...w}=e,y=C.useContext(vy),[E,I]=C.useState(null),O=E?.ownerDocument??globalThis?.document,[,_]=C.useState({}),k=an(n,G=>I(G)),R=Array.from(y.layers),[P]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),H=R.indexOf(P),z=E?R.indexOf(E):-1,F=y.layersWithOutsidePointerEventsDisabled.size>0,Z=z>=H,W=AC(G=>{const J=G.target,se=[...y.branches].some(fe=>fe.contains(J));!Z||se||(f?.(G),v?.(G),G.defaultPrevented||N?.())},O),te=IC(G=>{const J=G.target;[...y.branches].some(fe=>fe.contains(J))||(m?.(G),v?.(G),G.defaultPrevented||N?.())},O);return bC(G=>{z===y.layers.size-1&&(c?.(G),!G.defaultPrevented&&N&&(G.preventDefault(),N()))},O),C.useEffect(()=>{if(E)return s&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(fg=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(E)),y.layers.add(E),hg(),()=>{s&&y.layersWithOutsidePointerEventsDisabled.size===1&&(O.body.style.pointerEvents=fg)}},[E,O,s,y]),C.useEffect(()=>()=>{E&&(y.layers.delete(E),y.layersWithOutsidePointerEventsDisabled.delete(E),hg())},[E,y]),C.useEffect(()=>{const G=()=>_({});return document.addEventListener(Sm,G),()=>document.removeEventListener(Sm,G)},[]),r.jsx(jt.div,{...w,ref:k,style:{pointerEvents:F?Z?"auto":"none":void 0,...e.style},onFocusCapture:yt(e.onFocusCapture,te.onFocusCapture),onBlurCapture:yt(e.onBlurCapture,te.onBlurCapture),onPointerDownCapture:yt(e.onPointerDownCapture,W.onPointerDownCapture)})});Sl.displayName=NC;var SC="DismissableLayerBranch",wy=C.forwardRef((e,n)=>{const s=C.useContext(vy),c=C.useRef(null),f=an(n,c);return C.useEffect(()=>{const m=c.current;if(m)return s.branches.add(m),()=>{s.branches.delete(m)}},[s.branches]),r.jsx(jt.div,{...e,ref:f})});wy.displayName=SC;function AC(e,n=globalThis?.document){const s=Us(e),c=C.useRef(!1),f=C.useRef(()=>{});return C.useEffect(()=>{const m=N=>{if(N.target&&!c.current){let w=function(){by(CC,s,y,{discrete:!0})};const y={originalEvent:N};N.pointerType==="touch"?(n.removeEventListener("click",f.current),f.current=w,n.addEventListener("click",f.current,{once:!0})):w()}else n.removeEventListener("click",f.current);c.current=!1},v=window.setTimeout(()=>{n.addEventListener("pointerdown",m)},0);return()=>{window.clearTimeout(v),n.removeEventListener("pointerdown",m),n.removeEventListener("click",f.current)}},[n,s]),{onPointerDownCapture:()=>c.current=!0}}function IC(e,n=globalThis?.document){const s=Us(e),c=C.useRef(!1);return C.useEffect(()=>{const f=m=>{m.target&&!c.current&&by(EC,s,{originalEvent:m},{discrete:!1})};return n.addEventListener("focusin",f),()=>n.removeEventListener("focusin",f)},[n,s]),{onFocusCapture:()=>c.current=!0,onBlurCapture:()=>c.current=!1}}function hg(){const e=new CustomEvent(Sm);document.dispatchEvent(e)}function by(e,n,s,{discrete:c}){const f=s.originalEvent.target,m=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&f.addEventListener(e,n,{once:!0}),c?yy(f,m):f.dispatchEvent(m)}var jC=Sl,TC=wy,sr=globalThis?.document?C.useLayoutEffect:()=>{},RC="Portal",sf=C.forwardRef((e,n)=>{const{container:s,...c}=e,[f,m]=C.useState(!1);sr(()=>m(!0),[]);const v=s||f&&globalThis?.document?.body;return v?hy.createPortal(r.jsx(jt.div,{...c,ref:n}),v):null});sf.displayName=RC;function _C(e,n){return C.useReducer((s,c)=>n[s][c]??s,e)}var Mi=e=>{const{present:n,children:s}=e,c=DC(n),f=typeof s=="function"?s({present:c.isPresent}):C.Children.only(s),m=an(c.ref,OC(f));return typeof s=="function"||c.isPresent?C.cloneElement(f,{ref:m}):null};Mi.displayName="Presence";function DC(e){const[n,s]=C.useState(),c=C.useRef(null),f=C.useRef(e),m=C.useRef("none"),v=e?"mounted":"unmounted",[N,w]=_C(v,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const y=mu(c.current);m.current=N==="mounted"?y:"none"},[N]),sr(()=>{const y=c.current,E=f.current;if(E!==e){const O=m.current,_=mu(y);e?w("MOUNT"):_==="none"||y?.display==="none"?w("UNMOUNT"):w(E&&O!==_?"ANIMATION_OUT":"UNMOUNT"),f.current=e}},[e,w]),sr(()=>{if(n){let y;const E=n.ownerDocument.defaultView??window,I=_=>{const R=mu(c.current).includes(_.animationName);if(_.target===n&&R&&(w("ANIMATION_END"),!f.current)){const P=n.style.animationFillMode;n.style.animationFillMode="forwards",y=E.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=P)})}},O=_=>{_.target===n&&(m.current=mu(c.current))};return n.addEventListener("animationstart",O),n.addEventListener("animationcancel",I),n.addEventListener("animationend",I),()=>{E.clearTimeout(y),n.removeEventListener("animationstart",O),n.removeEventListener("animationcancel",I),n.removeEventListener("animationend",I)}}else w("ANIMATION_END")},[n,w]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:C.useCallback(y=>{c.current=y?getComputedStyle(y):null,s(y)},[])}}function mu(e){return e?.animationName||"none"}function OC(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var kC=mp[" useInsertionEffect ".trim().toString()]||sr;function _i({prop:e,defaultProp:n,onChange:s=()=>{},caller:c}){const[f,m,v]=PC({defaultProp:n,onChange:s}),N=e!==void 0,w=N?e:f;{const E=C.useRef(e!==void 0);C.useEffect(()=>{const I=E.current;I!==N&&console.warn(`${c} is changing from ${I?"controlled":"uncontrolled"} to ${N?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),E.current=N},[N,c])}const y=C.useCallback(E=>{if(N){const I=MC(E)?E(e):E;I!==e&&v.current?.(I)}else m(E)},[N,e,m,v]);return[w,y]}function PC({defaultProp:e,onChange:n}){const[s,c]=C.useState(e),f=C.useRef(s),m=C.useRef(n);return kC(()=>{m.current=n},[n]),C.useEffect(()=>{f.current!==s&&(m.current?.(s),f.current=s)},[s,f]),[s,c,m]}function MC(e){return typeof e=="function"}var Ny=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LC="VisuallyHidden",af=C.forwardRef((e,n)=>r.jsx(jt.span,{...e,ref:n,style:{...Ny,...e.style}}));af.displayName=LC;var FC=af,pp="ToastProvider",[gp,BC,UC]=xy("Toast"),[Cy]=zs("Toast",[UC]),[zC,of]=Cy(pp),Ey=e=>{const{__scopeToast:n,label:s="Notification",duration:c=5e3,swipeDirection:f="right",swipeThreshold:m=50,children:v}=e,[N,w]=C.useState(null),[y,E]=C.useState(0),I=C.useRef(!1),O=C.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${pp}\`. Expected non-empty \`string\`.`),r.jsx(gp.Provider,{scope:n,children:r.jsx(zC,{scope:n,label:s,duration:c,swipeDirection:f,swipeThreshold:m,toastCount:y,viewport:N,onViewportChange:w,onToastAdd:C.useCallback(()=>E(_=>_+1),[]),onToastRemove:C.useCallback(()=>E(_=>_-1),[]),isFocusedToastEscapeKeyDownRef:I,isClosePausedRef:O,children:v})})};Ey.displayName=pp;var Sy="ToastViewport",VC=["F8"],Am="toast.viewportPause",Im="toast.viewportResume",Ay=C.forwardRef((e,n)=>{const{__scopeToast:s,hotkey:c=VC,label:f="Notifications ({hotkey})",...m}=e,v=of(Sy,s),N=BC(s),w=C.useRef(null),y=C.useRef(null),E=C.useRef(null),I=C.useRef(null),O=an(n,I,v.onViewportChange),_=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=v.toastCount>0;C.useEffect(()=>{const P=H=>{c.length!==0&&c.every(F=>H[F]||H.code===F)&&I.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[c]),C.useEffect(()=>{const P=w.current,H=I.current;if(k&&P&&H){const z=()=>{if(!v.isClosePausedRef.current){const te=new CustomEvent(Am);H.dispatchEvent(te),v.isClosePausedRef.current=!0}},F=()=>{if(v.isClosePausedRef.current){const te=new CustomEvent(Im);H.dispatchEvent(te),v.isClosePausedRef.current=!1}},Z=te=>{!P.contains(te.relatedTarget)&&F()},W=()=>{P.contains(document.activeElement)||F()};return P.addEventListener("focusin",z),P.addEventListener("focusout",Z),P.addEventListener("pointermove",z),P.addEventListener("pointerleave",W),window.addEventListener("blur",z),window.addEventListener("focus",F),()=>{P.removeEventListener("focusin",z),P.removeEventListener("focusout",Z),P.removeEventListener("pointermove",z),P.removeEventListener("pointerleave",W),window.removeEventListener("blur",z),window.removeEventListener("focus",F)}}},[k,v.isClosePausedRef]);const R=C.useCallback(({tabbingDirection:P})=>{const z=N().map(F=>{const Z=F.ref.current,W=[Z,...tE(Z)];return P==="forwards"?W:W.reverse()});return(P==="forwards"?z.reverse():z).flat()},[N]);return C.useEffect(()=>{const P=I.current;if(P){const H=z=>{const F=z.altKey||z.ctrlKey||z.metaKey;if(z.key==="Tab"&&!F){const W=document.activeElement,te=z.shiftKey;if(z.target===P&&te){y.current?.focus();return}const se=R({tabbingDirection:te?"backwards":"forwards"}),fe=se.findIndex(Ee=>Ee===W);rm(se.slice(fe+1))?z.preventDefault():te?y.current?.focus():E.current?.focus()}};return P.addEventListener("keydown",H),()=>P.removeEventListener("keydown",H)}},[N,R]),r.jsxs(TC,{ref:w,role:"region","aria-label":f.replace("{hotkey}",_),tabIndex:-1,style:{pointerEvents:k?void 0:"none"},children:[k&&r.jsx(jm,{ref:y,onFocusFromOutsideViewport:()=>{const P=R({tabbingDirection:"forwards"});rm(P)}}),r.jsx(gp.Slot,{scope:s,children:r.jsx(jt.ol,{tabIndex:-1,...m,ref:O})}),k&&r.jsx(jm,{ref:E,onFocusFromOutsideViewport:()=>{const P=R({tabbingDirection:"backwards"});rm(P)}})]})});Ay.displayName=Sy;var Iy="ToastFocusProxy",jm=C.forwardRef((e,n)=>{const{__scopeToast:s,onFocusFromOutsideViewport:c,...f}=e,m=of(Iy,s);return r.jsx(af,{"aria-hidden":!0,tabIndex:0,...f,ref:n,style:{position:"fixed"},onFocus:v=>{const N=v.relatedTarget;!m.viewport?.contains(N)&&c()}})});jm.displayName=Iy;var Qc="Toast",HC="toast.swipeStart",WC="toast.swipeMove",$C="toast.swipeCancel",GC="toast.swipeEnd",jy=C.forwardRef((e,n)=>{const{forceMount:s,open:c,defaultOpen:f,onOpenChange:m,...v}=e,[N,w]=_i({prop:c,defaultProp:f??!0,onChange:m,caller:Qc});return r.jsx(Mi,{present:s||N,children:r.jsx(ZC,{open:N,...v,ref:n,onClose:()=>w(!1),onPause:Us(e.onPause),onResume:Us(e.onResume),onSwipeStart:yt(e.onSwipeStart,y=>{y.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:yt(e.onSwipeMove,y=>{const{x:E,y:I}=y.detail.delta;y.currentTarget.setAttribute("data-swipe","move"),y.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${E}px`),y.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${I}px`)}),onSwipeCancel:yt(e.onSwipeCancel,y=>{y.currentTarget.setAttribute("data-swipe","cancel"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),y.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),y.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:yt(e.onSwipeEnd,y=>{const{x:E,y:I}=y.detail.delta;y.currentTarget.setAttribute("data-swipe","end"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),y.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${E}px`),y.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${I}px`),w(!1)})})})});jy.displayName=Qc;var[XC,YC]=Cy(Qc,{onClose(){}}),ZC=C.forwardRef((e,n)=>{const{__scopeToast:s,type:c="foreground",duration:f,open:m,onClose:v,onEscapeKeyDown:N,onPause:w,onResume:y,onSwipeStart:E,onSwipeMove:I,onSwipeCancel:O,onSwipeEnd:_,...k}=e,R=of(Qc,s),[P,H]=C.useState(null),z=an(n,re=>H(re)),F=C.useRef(null),Z=C.useRef(null),W=f||R.duration,te=C.useRef(0),G=C.useRef(W),J=C.useRef(0),{onToastAdd:se,onToastRemove:fe}=R,Ee=Us(()=>{P?.contains(document.activeElement)&&R.viewport?.focus(),v()}),ue=C.useCallback(re=>{!re||re===1/0||(window.clearTimeout(J.current),te.current=new Date().getTime(),J.current=window.setTimeout(Ee,re))},[Ee]);C.useEffect(()=>{const re=R.viewport;if(re){const q=()=>{ue(G.current),y?.()},U=()=>{const K=new Date().getTime()-te.current;G.current=G.current-K,window.clearTimeout(J.current),w?.()};return re.addEventListener(Am,U),re.addEventListener(Im,q),()=>{re.removeEventListener(Am,U),re.removeEventListener(Im,q)}}},[R.viewport,W,w,y,ue]),C.useEffect(()=>{m&&!R.isClosePausedRef.current&&ue(W)},[m,W,R.isClosePausedRef,ue]),C.useEffect(()=>(se(),()=>fe()),[se,fe]);const ge=C.useMemo(()=>P?Py(P):null,[P]);return R.viewport?r.jsxs(r.Fragment,{children:[ge&&r.jsx(qC,{__scopeToast:s,role:"status","aria-live":c==="foreground"?"assertive":"polite","aria-atomic":!0,children:ge}),r.jsx(XC,{scope:s,onClose:Ee,children:Cl.createPortal(r.jsx(gp.ItemSlot,{scope:s,children:r.jsx(jC,{asChild:!0,onEscapeKeyDown:yt(N,()=>{R.isFocusedToastEscapeKeyDownRef.current||Ee(),R.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(jt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":m?"open":"closed","data-swipe-direction":R.swipeDirection,...k,ref:z,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:yt(e.onKeyDown,re=>{re.key==="Escape"&&(N?.(re.nativeEvent),re.nativeEvent.defaultPrevented||(R.isFocusedToastEscapeKeyDownRef.current=!0,Ee()))}),onPointerDown:yt(e.onPointerDown,re=>{re.button===0&&(F.current={x:re.clientX,y:re.clientY})}),onPointerMove:yt(e.onPointerMove,re=>{if(!F.current)return;const q=re.clientX-F.current.x,U=re.clientY-F.current.y,K=!!Z.current,ne=["left","right"].includes(R.swipeDirection),oe=["left","up"].includes(R.swipeDirection)?Math.min:Math.max,we=ne?oe(0,q):0,X=ne?0:oe(0,U),ie=re.pointerType==="touch"?10:2,je={x:we,y:X},Ie={originalEvent:re,delta:je};K?(Z.current=je,pu(WC,I,Ie,{discrete:!1})):mg(je,R.swipeDirection,ie)?(Z.current=je,pu(HC,E,Ie,{discrete:!1}),re.target.setPointerCapture(re.pointerId)):(Math.abs(q)>ie||Math.abs(U)>ie)&&(F.current=null)}),onPointerUp:yt(e.onPointerUp,re=>{const q=Z.current,U=re.target;if(U.hasPointerCapture(re.pointerId)&&U.releasePointerCapture(re.pointerId),Z.current=null,F.current=null,q){const K=re.currentTarget,ne={originalEvent:re,delta:q};mg(q,R.swipeDirection,R.swipeThreshold)?pu(GC,_,ne,{discrete:!0}):pu($C,O,ne,{discrete:!0}),K.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),R.viewport)})]}):null}),qC=e=>{const{__scopeToast:n,children:s,...c}=e,f=of(Qc,n),[m,v]=C.useState(!1),[N,w]=C.useState(!1);return JC(()=>v(!0)),C.useEffect(()=>{const y=window.setTimeout(()=>w(!0),1e3);return()=>window.clearTimeout(y)},[]),N?null:r.jsx(sf,{asChild:!0,children:r.jsx(af,{...c,children:m&&r.jsxs(r.Fragment,{children:[f.label," ",s]})})})},QC="ToastTitle",Ty=C.forwardRef((e,n)=>{const{__scopeToast:s,...c}=e;return r.jsx(jt.div,{...c,ref:n})});Ty.displayName=QC;var KC="ToastDescription",Ry=C.forwardRef((e,n)=>{const{__scopeToast:s,...c}=e;return r.jsx(jt.div,{...c,ref:n})});Ry.displayName=KC;var _y="ToastAction",Dy=C.forwardRef((e,n)=>{const{altText:s,...c}=e;return s.trim()?r.jsx(ky,{altText:s,asChild:!0,children:r.jsx(xp,{...c,ref:n})}):(console.error(`Invalid prop \`altText\` supplied to \`${_y}\`. Expected non-empty \`string\`.`),null)});Dy.displayName=_y;var Oy="ToastClose",xp=C.forwardRef((e,n)=>{const{__scopeToast:s,...c}=e,f=YC(Oy,s);return r.jsx(ky,{asChild:!0,children:r.jsx(jt.button,{type:"button",...c,ref:n,onClick:yt(e.onClick,f.onClose)})})});xp.displayName=Oy;var ky=C.forwardRef((e,n)=>{const{__scopeToast:s,altText:c,...f}=e;return r.jsx(jt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":c||void 0,...f,ref:n})});function Py(e){const n=[];return Array.from(e.childNodes).forEach(c=>{if(c.nodeType===c.TEXT_NODE&&c.textContent&&n.push(c.textContent),eE(c)){const f=c.ariaHidden||c.hidden||c.style.display==="none",m=c.dataset.radixToastAnnounceExclude==="";if(!f)if(m){const v=c.dataset.radixToastAnnounceAlt;v&&n.push(v)}else n.push(...Py(c))}}),n}function pu(e,n,s,{discrete:c}){const f=s.originalEvent.currentTarget,m=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});n&&f.addEventListener(e,n,{once:!0}),c?yy(f,m):f.dispatchEvent(m)}var mg=(e,n,s=0)=>{const c=Math.abs(e.x),f=Math.abs(e.y),m=c>f;return n==="left"||n==="right"?m&&c>s:!m&&f>s};function JC(e=()=>{}){const n=Us(e);sr(()=>{let s=0,c=0;return s=window.requestAnimationFrame(()=>c=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(c)}},[n])}function eE(e){return e.nodeType===e.ELEMENT_NODE}function tE(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const f=c.tagName==="INPUT"&&c.type==="hidden";return c.disabled||c.hidden||f?NodeFilter.FILTER_SKIP:c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function rm(e){const n=document.activeElement;return e.some(s=>s===n?!0:(s.focus(),document.activeElement!==n))}var nE=Ey,My=Ay,Ly=jy,Fy=Ty,By=Ry,Uy=Dy,zy=xp;function Vy(e){var n,s,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var f=e.length;for(n=0;n<f;n++)e[n]&&(s=Vy(e[n]))&&(c&&(c+=" "),c+=s)}else for(s in e)e[s]&&(c&&(c+=" "),c+=s);return c}function Hy(){for(var e,n,s=0,c="",f=arguments.length;s<f;s++)(e=arguments[s])&&(n=Vy(e))&&(c&&(c+=" "),c+=n);return c}const pg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,gg=Hy,Eo=(e,n)=>s=>{var c;if(n?.variants==null)return gg(e,s?.class,s?.className);const{variants:f,defaultVariants:m}=n,v=Object.keys(f).map(y=>{const E=s?.[y],I=m?.[y];if(E===null)return null;const O=pg(E)||pg(I);return f[y][O]}),N=s&&Object.entries(s).reduce((y,E)=>{let[I,O]=E;return O===void 0||(y[I]=O),y},{}),w=n==null||(c=n.compoundVariants)===null||c===void 0?void 0:c.reduce((y,E)=>{let{class:I,className:O,..._}=E;return Object.entries(_).every(k=>{let[R,P]=k;return Array.isArray(P)?P.includes({...m,...N}[R]):{...m,...N}[R]===P})?[...y,I,O]:y},[]);return gg(e,v,w,s?.class,s?.className)};const rE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wy=(...e)=>e.filter((n,s,c)=>!!n&&n.trim()!==""&&c.indexOf(n)===s).join(" ").trim();var sE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const aE=C.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:c,className:f="",children:m,iconNode:v,...N},w)=>C.createElement("svg",{ref:w,...sE,width:n,height:n,stroke:e,strokeWidth:c?Number(s)*24/Number(n):s,className:Wy("lucide",f),...N},[...v.map(([y,E])=>C.createElement(y,E)),...Array.isArray(m)?m:[m]]));const bt=(e,n)=>{const s=C.forwardRef(({className:c,...f},m)=>C.createElement(aE,{ref:m,iconNode:n,className:Wy(`lucide-${rE(e)}`,c),...f}));return s.displayName=`${e}`,s};const iE=bt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const _c=bt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const $y=bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const oE=bt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);const Gy=bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const lE=bt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);const xg=bt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const cE=bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const fo=bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const dE=bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const ho=bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Mc=bt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const yg=bt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Lc=bt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Tm=bt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const cs=bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Rm=bt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Wr=bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const _m=bt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Ei=bt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const vg=bt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const wg=bt("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const Hr=bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const uE=bt("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const sm=bt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const fE=bt("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);const bg=bt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Xy=bt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const am=bt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Dm=bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const ku=bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const hE=bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const mE=bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const pE=bt("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);const Yy=bt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const gE=bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Pu=bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Bc=bt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const Om=bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const xE=bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Cs=bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const yE=bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Ng=bt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const vE=bt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const wE=bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const ll=bt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const pl=bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Cg=bt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const bE=bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const NE=bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Fs=bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const yp=bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vp="-",CE=e=>{const n=SE(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:c}=e;return{getClassGroupId:v=>{const N=v.split(vp);return N[0]===""&&N.length!==1&&N.shift(),Zy(N,n)||EE(v)},getConflictingClassGroupIds:(v,N)=>{const w=s[v]||[];return N&&c[v]?[...w,...c[v]]:w}}},Zy=(e,n)=>{if(e.length===0)return n.classGroupId;const s=e[0],c=n.nextPart.get(s),f=c?Zy(e.slice(1),c):void 0;if(f)return f;if(n.validators.length===0)return;const m=e.join(vp);return n.validators.find(({validator:v})=>v(m))?.classGroupId},Eg=/^\[(.+)\]$/,EE=e=>{if(Eg.test(e)){const n=Eg.exec(e)[1],s=n?.substring(0,n.indexOf(":"));if(s)return"arbitrary.."+s}},SE=e=>{const{theme:n,prefix:s}=e,c={nextPart:new Map,validators:[]};return IE(Object.entries(e.classGroups),s).forEach(([m,v])=>{km(v,c,m,n)}),c},km=(e,n,s,c)=>{e.forEach(f=>{if(typeof f=="string"){const m=f===""?n:Sg(n,f);m.classGroupId=s;return}if(typeof f=="function"){if(AE(f)){km(f(c),n,s,c);return}n.validators.push({validator:f,classGroupId:s});return}Object.entries(f).forEach(([m,v])=>{km(v,Sg(n,m),s,c)})})},Sg=(e,n)=>{let s=e;return n.split(vp).forEach(c=>{s.nextPart.has(c)||s.nextPart.set(c,{nextPart:new Map,validators:[]}),s=s.nextPart.get(c)}),s},AE=e=>e.isThemeGetter,IE=(e,n)=>n?e.map(([s,c])=>{const f=c.map(m=>typeof m=="string"?n+m:typeof m=="object"?Object.fromEntries(Object.entries(m).map(([v,N])=>[n+v,N])):m);return[s,f]}):e,jE=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,s=new Map,c=new Map;const f=(m,v)=>{s.set(m,v),n++,n>e&&(n=0,c=s,s=new Map)};return{get(m){let v=s.get(m);if(v!==void 0)return v;if((v=c.get(m))!==void 0)return f(m,v),v},set(m,v){s.has(m)?s.set(m,v):f(m,v)}}},qy="!",TE=e=>{const{separator:n,experimentalParseClassName:s}=e,c=n.length===1,f=n[0],m=n.length,v=N=>{const w=[];let y=0,E=0,I;for(let P=0;P<N.length;P++){let H=N[P];if(y===0){if(H===f&&(c||N.slice(P,P+m)===n)){w.push(N.slice(E,P)),E=P+m;continue}if(H==="/"){I=P;continue}}H==="["?y++:H==="]"&&y--}const O=w.length===0?N:N.substring(E),_=O.startsWith(qy),k=_?O.substring(1):O,R=I&&I>E?I-E:void 0;return{modifiers:w,hasImportantModifier:_,baseClassName:k,maybePostfixModifierPosition:R}};return s?N=>s({className:N,parseClassName:v}):v},RE=e=>{if(e.length<=1)return e;const n=[];let s=[];return e.forEach(c=>{c[0]==="["?(n.push(...s.sort(),c),s=[]):s.push(c)}),n.push(...s.sort()),n},_E=e=>({cache:jE(e.cacheSize),parseClassName:TE(e),...CE(e)}),DE=/\s+/,OE=(e,n)=>{const{parseClassName:s,getClassGroupId:c,getConflictingClassGroupIds:f}=n,m=[],v=e.trim().split(DE);let N="";for(let w=v.length-1;w>=0;w-=1){const y=v[w],{modifiers:E,hasImportantModifier:I,baseClassName:O,maybePostfixModifierPosition:_}=s(y);let k=!!_,R=c(k?O.substring(0,_):O);if(!R){if(!k){N=y+(N.length>0?" "+N:N);continue}if(R=c(O),!R){N=y+(N.length>0?" "+N:N);continue}k=!1}const P=RE(E).join(":"),H=I?P+qy:P,z=H+R;if(m.includes(z))continue;m.push(z);const F=f(R,k);for(let Z=0;Z<F.length;++Z){const W=F[Z];m.push(H+W)}N=y+(N.length>0?" "+N:N)}return N};function kE(){let e=0,n,s,c="";for(;e<arguments.length;)(n=arguments[e++])&&(s=Qy(n))&&(c&&(c+=" "),c+=s);return c}const Qy=e=>{if(typeof e=="string")return e;let n,s="";for(let c=0;c<e.length;c++)e[c]&&(n=Qy(e[c]))&&(s&&(s+=" "),s+=n);return s};function PE(e,...n){let s,c,f,m=v;function v(w){const y=n.reduce((E,I)=>I(E),e());return s=_E(y),c=s.cache.get,f=s.cache.set,m=N,N(w)}function N(w){const y=c(w);if(y)return y;const E=OE(w,s);return f(w,E),E}return function(){return m(kE.apply(null,arguments))}}const Dn=e=>{const n=s=>s[e]||[];return n.isThemeGetter=!0,n},Ky=/^\[(?:([a-z-]+):)?(.+)\]$/i,ME=/^\d+\/\d+$/,LE=new Set(["px","full","screen"]),FE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,La=e=>cl(e)||LE.has(e)||ME.test(e),gi=e=>Al(e,"length",qE),cl=e=>!!e&&!Number.isNaN(Number(e)),im=e=>Al(e,"number",cl),gc=e=>!!e&&Number.isInteger(Number(e)),HE=e=>e.endsWith("%")&&cl(e.slice(0,-1)),Mt=e=>Ky.test(e),xi=e=>FE.test(e),WE=new Set(["length","size","percentage"]),$E=e=>Al(e,WE,Jy),GE=e=>Al(e,"position",Jy),XE=new Set(["image","url"]),YE=e=>Al(e,XE,KE),ZE=e=>Al(e,"",QE),xc=()=>!0,Al=(e,n,s)=>{const c=Ky.exec(e);return c?c[1]?typeof n=="string"?c[1]===n:n.has(c[1]):s(c[2]):!1},qE=e=>BE.test(e)&&!UE.test(e),Jy=()=>!1,QE=e=>zE.test(e),KE=e=>VE.test(e),JE=()=>{const e=Dn("colors"),n=Dn("spacing"),s=Dn("blur"),c=Dn("brightness"),f=Dn("borderColor"),m=Dn("borderRadius"),v=Dn("borderSpacing"),N=Dn("borderWidth"),w=Dn("contrast"),y=Dn("grayscale"),E=Dn("hueRotate"),I=Dn("invert"),O=Dn("gap"),_=Dn("gradientColorStops"),k=Dn("gradientColorStopPositions"),R=Dn("inset"),P=Dn("margin"),H=Dn("opacity"),z=Dn("padding"),F=Dn("saturate"),Z=Dn("scale"),W=Dn("sepia"),te=Dn("skew"),G=Dn("space"),J=Dn("translate"),se=()=>["auto","contain","none"],fe=()=>["auto","hidden","clip","visible","scroll"],Ee=()=>["auto",Mt,n],ue=()=>[Mt,n],ge=()=>["",La,gi],re=()=>["auto",cl,Mt],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",Mt],we=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[cl,Mt];return{cacheSize:500,separator:":",theme:{colors:[xc],spacing:[La,gi],blur:["none","",xi,Mt],brightness:X(),borderColor:[e],borderRadius:["none","","full",xi,Mt],borderSpacing:ue(),borderWidth:ge(),contrast:X(),grayscale:oe(),hueRotate:X(),invert:oe(),gap:ue(),gradientColorStops:[e],gradientColorStopPositions:[HE,gi],inset:Ee(),margin:Ee(),opacity:X(),padding:ue(),saturate:X(),scale:X(),sepia:oe(),skew:X(),space:ue(),translate:ue()},classGroups:{aspect:[{aspect:["auto","square","video",Mt]}],container:["container"],columns:[{columns:[xi]}],"break-after":[{"break-after":we()}],"break-before":[{"break-before":we()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Mt]}],overflow:[{overflow:fe()}],"overflow-x":[{"overflow-x":fe()}],"overflow-y":[{"overflow-y":fe()}],overscroll:[{overscroll:se()}],"overscroll-x":[{"overscroll-x":se()}],"overscroll-y":[{"overscroll-y":se()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[R]}],"inset-x":[{"inset-x":[R]}],"inset-y":[{"inset-y":[R]}],start:[{start:[R]}],end:[{end:[R]}],top:[{top:[R]}],right:[{right:[R]}],bottom:[{bottom:[R]}],left:[{left:[R]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gc,Mt]}],basis:[{basis:Ee()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Mt]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",gc,Mt]}],"grid-cols":[{"grid-cols":[xc]}],"col-start-end":[{col:["auto",{span:["full",gc,Mt]},Mt]}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":[xc]}],"row-start-end":[{row:["auto",{span:[gc,Mt]},Mt]}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Mt]}],gap:[{gap:[O]}],"gap-x":[{"gap-x":[O]}],"gap-y":[{"gap-y":[O]}],"justify-content":[{justify:["normal",...ne()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ne(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ne(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[z]}],px:[{px:[z]}],py:[{py:[z]}],ps:[{ps:[z]}],pe:[{pe:[z]}],pt:[{pt:[z]}],pr:[{pr:[z]}],pb:[{pb:[z]}],pl:[{pl:[z]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[G]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[G]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Mt,n]}],"min-w":[{"min-w":[Mt,n,"min","max","fit"]}],"max-w":[{"max-w":[Mt,n,"none","full","min","max","fit","prose",{screen:[xi]},xi]}],h:[{h:[Mt,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Mt,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Mt,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Mt,n,"auto","min","max","fit"]}],"font-size":[{text:["base",xi,gi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",im]}],"font-family":[{font:[xc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Mt]}],"line-clamp":[{"line-clamp":["none",cl,im]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",La,Mt]}],"list-image":[{"list-image":["none",Mt]}],"list-style-type":[{list:["none","disc","decimal",Mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[H]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[H]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",La,gi]}],"underline-offset":[{"underline-offset":["auto",La,Mt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ue()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[H]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),GE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$E]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[m]}],"rounded-s":[{"rounded-s":[m]}],"rounded-e":[{"rounded-e":[m]}],"rounded-t":[{"rounded-t":[m]}],"rounded-r":[{"rounded-r":[m]}],"rounded-b":[{"rounded-b":[m]}],"rounded-l":[{"rounded-l":[m]}],"rounded-ss":[{"rounded-ss":[m]}],"rounded-se":[{"rounded-se":[m]}],"rounded-ee":[{"rounded-ee":[m]}],"rounded-es":[{"rounded-es":[m]}],"rounded-tl":[{"rounded-tl":[m]}],"rounded-tr":[{"rounded-tr":[m]}],"rounded-br":[{"rounded-br":[m]}],"rounded-bl":[{"rounded-bl":[m]}],"border-w":[{border:[N]}],"border-w-x":[{"border-x":[N]}],"border-w-y":[{"border-y":[N]}],"border-w-s":[{"border-s":[N]}],"border-w-e":[{"border-e":[N]}],"border-w-t":[{"border-t":[N]}],"border-w-r":[{"border-r":[N]}],"border-w-b":[{"border-b":[N]}],"border-w-l":[{"border-l":[N]}],"border-opacity":[{"border-opacity":[H]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[N]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[N]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[H]}],"divide-style":[{divide:U()}],"border-color":[{border:[f]}],"border-color-x":[{"border-x":[f]}],"border-color-y":[{"border-y":[f]}],"border-color-s":[{"border-s":[f]}],"border-color-e":[{"border-e":[f]}],"border-color-t":[{"border-t":[f]}],"border-color-r":[{"border-r":[f]}],"border-color-b":[{"border-b":[f]}],"border-color-l":[{"border-l":[f]}],"divide-color":[{divide:[f]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[La,Mt]}],"outline-w":[{outline:[La,gi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[H]}],"ring-offset-w":[{"ring-offset":[La,gi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",xi,ZE]}],"shadow-color":[{shadow:[xc]}],opacity:[{opacity:[H]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[c]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",xi,Mt]}],grayscale:[{grayscale:[y]}],"hue-rotate":[{"hue-rotate":[E]}],invert:[{invert:[I]}],saturate:[{saturate:[F]}],sepia:[{sepia:[W]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[c]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[y]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[E]}],"backdrop-invert":[{"backdrop-invert":[I]}],"backdrop-opacity":[{"backdrop-opacity":[H]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[v]}],"border-spacing-x":[{"border-spacing-x":[v]}],"border-spacing-y":[{"border-spacing-y":[v]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Mt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Mt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Z]}],"scale-x":[{"scale-x":[Z]}],"scale-y":[{"scale-y":[Z]}],rotate:[{rotate:[gc,Mt]}],"translate-x":[{"translate-x":[J]}],"translate-y":[{"translate-y":[J]}],"skew-x":[{"skew-x":[te]}],"skew-y":[{"skew-y":[te]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Mt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ue()}],"scroll-mx":[{"scroll-mx":ue()}],"scroll-my":[{"scroll-my":ue()}],"scroll-ms":[{"scroll-ms":ue()}],"scroll-me":[{"scroll-me":ue()}],"scroll-mt":[{"scroll-mt":ue()}],"scroll-mr":[{"scroll-mr":ue()}],"scroll-mb":[{"scroll-mb":ue()}],"scroll-ml":[{"scroll-ml":ue()}],"scroll-p":[{"scroll-p":ue()}],"scroll-px":[{"scroll-px":ue()}],"scroll-py":[{"scroll-py":ue()}],"scroll-ps":[{"scroll-ps":ue()}],"scroll-pe":[{"scroll-pe":ue()}],"scroll-pt":[{"scroll-pt":ue()}],"scroll-pr":[{"scroll-pr":ue()}],"scroll-pb":[{"scroll-pb":ue()}],"scroll-pl":[{"scroll-pl":ue()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[La,gi,im]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},eS=PE(JE);function Me(...e){return eS(Hy(e))}const tS=nE,ev=C.forwardRef(({className:e,...n},s)=>r.jsx(My,{ref:s,className:Me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...n}));ev.displayName=My.displayName;const nS=Eo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tv=C.forwardRef(({className:e,variant:n,...s},c)=>r.jsx(Ly,{ref:c,className:Me(nS({variant:n}),e),...s}));tv.displayName=Ly.displayName;const rS=C.forwardRef(({className:e,...n},s)=>r.jsx(Uy,{ref:s,className:Me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...n}));rS.displayName=Uy.displayName;const nv=C.forwardRef(({className:e,...n},s)=>r.jsx(zy,{ref:s,className:Me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...n,children:r.jsx(yp,{className:"h-4 w-4"})}));nv.displayName=zy.displayName;const rv=C.forwardRef(({className:e,...n},s)=>r.jsx(Fy,{ref:s,className:Me("text-sm font-semibold",e),...n}));rv.displayName=Fy.displayName;const sv=C.forwardRef(({className:e,...n},s)=>r.jsx(By,{ref:s,className:Me("text-sm opacity-90",e),...n}));sv.displayName=By.displayName;function sS(){const{toasts:e}=Un();return r.jsxs(tS,{children:[e.map(function({id:n,title:s,description:c,action:f,...m}){return r.jsxs(tv,{...m,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(rv,{children:s}),c&&r.jsx(sv,{children:c})]}),f,r.jsx(nv,{})]},n)}),r.jsx(ev,{})]})}var Ag=["light","dark"],aS="(prefers-color-scheme: dark)",iS=C.createContext(void 0),oS={setTheme:e=>{},themes:[]},lS=()=>{var e;return(e=C.useContext(iS))!=null?e:oS};C.memo(({forcedTheme:e,storageKey:n,attribute:s,enableSystem:c,enableColorScheme:f,defaultTheme:m,value:v,attrs:N,nonce:w})=>{let y=m==="system",E=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${N.map(k=>`'${k}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,I=f?Ag.includes(m)&&m?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${m}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",O=(k,R=!1,P=!0)=>{let H=v?v[k]:k,z=R?k+"|| ''":`'${H}'`,F="";return f&&P&&!R&&Ag.includes(k)&&(F+=`d.style.colorScheme = '${k}';`),s==="class"?R||H?F+=`c.add(${z})`:F+="null":H&&(F+=`d[s](n,${z})`),F},_=e?`!function(){${E}${O(e)}}()`:c?`!function(){try{${E}var e=localStorage.getItem('${n}');if('system'===e||(!e&&${y})){var t='${aS}',m=window.matchMedia(t);if(m.media!==t||m.matches){${O("dark")}}else{${O("light")}}}else if(e){${v?`var x=${JSON.stringify(v)};`:""}${O(v?"x[e]":"e",!0)}}${y?"":"else{"+O(m,!1,!1)+"}"}${I}}catch(e){}}()`:`!function(){try{${E}var e=localStorage.getItem('${n}');if(e){${v?`var x=${JSON.stringify(v)};`:""}${O(v?"x[e]":"e",!0)}}else{${O(m,!1,!1)};}${I}}catch(t){}}();`;return C.createElement("script",{nonce:w,dangerouslySetInnerHTML:{__html:_}})});var cS=e=>{switch(e){case"success":return fS;case"info":return mS;case"warning":return hS;case"error":return pS;default:return null}},dS=Array(12).fill(0),uS=({visible:e,className:n})=>Oe.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},Oe.createElement("div",{className:"sonner-spinner"},dS.map((s,c)=>Oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${c}`})))),fS=Oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),hS=Oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mS=Oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pS=Oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gS=Oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xS=()=>{let[e,n]=Oe.useState(document.hidden);return Oe.useEffect(()=>{let s=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e},Pm=1,yS=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:s,...c}=e,f=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Pm++,m=this.toasts.find(N=>N.id===f),v=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(f)&&this.dismissedToasts.delete(f),m?this.toasts=this.toasts.map(N=>N.id===f?(this.publish({...N,...e,id:f,title:s}),{...N,...e,id:f,dismissible:v,title:s}):N):this.addToast({title:s,...c,dismissible:v,id:f}),f},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let c=e instanceof Promise?e:e(),f=s!==void 0,m,v=c.then(async w=>{if(m=["resolve",w],Oe.isValidElement(w))f=!1,this.create({id:s,type:"default",message:w});else if(wS(w)&&!w.ok){f=!1;let y=typeof n.error=="function"?await n.error(`HTTP error! status: ${w.status}`):n.error,E=typeof n.description=="function"?await n.description(`HTTP error! status: ${w.status}`):n.description;this.create({id:s,type:"error",message:y,description:E})}else if(n.success!==void 0){f=!1;let y=typeof n.success=="function"?await n.success(w):n.success,E=typeof n.description=="function"?await n.description(w):n.description;this.create({id:s,type:"success",message:y,description:E})}}).catch(async w=>{if(m=["reject",w],n.error!==void 0){f=!1;let y=typeof n.error=="function"?await n.error(w):n.error,E=typeof n.description=="function"?await n.description(w):n.description;this.create({id:s,type:"error",message:y,description:E})}}).finally(()=>{var w;f&&(this.dismiss(s),s=void 0),(w=n.finally)==null||w.call(n)}),N=()=>new Promise((w,y)=>v.then(()=>m[0]==="reject"?y(m[1]):w(m[1])).catch(y));return typeof s!="string"&&typeof s!="number"?{unwrap:N}:Object.assign(s,{unwrap:N})},this.custom=(e,n)=>{let s=n?.id||Pm++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},os=new yS,vS=(e,n)=>{let s=n?.id||Pm++;return os.addToast({title:e,...n,id:s}),s},wS=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",bS=vS,NS=()=>os.toasts,CS=()=>os.getActiveToasts();Object.assign(bS,{success:os.success,info:os.info,warning:os.warning,error:os.error,custom:os.custom,message:os.message,promise:os.promise,dismiss:os.dismiss,loading:os.loading},{getHistory:NS,getToasts:CS});function ES(e,{insertAt:n}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",n==="top"&&s.firstChild?s.insertBefore(c,s.firstChild):s.appendChild(c),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e))}ES(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function gu(e){return e.label!==void 0}var SS=3,AS="32px",IS="16px",Ig=4e3,jS=356,TS=14,RS=20,_S=200;function Js(...e){return e.filter(Boolean).join(" ")}function DS(e){let[n,s]=e.split("-"),c=[];return n&&c.push(n),s&&c.push(s),c}var OS=e=>{var n,s,c,f,m,v,N,w,y,E,I;let{invert:O,toast:_,unstyled:k,interacting:R,setHeights:P,visibleToasts:H,heights:z,index:F,toasts:Z,expanded:W,removeToast:te,defaultRichColors:G,closeButton:J,style:se,cancelButtonStyle:fe,actionButtonStyle:Ee,className:ue="",descriptionClassName:ge="",duration:re,position:q,gap:U,loadingIcon:K,expandByDefault:ne,classNames:oe,icons:we,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:ie}=e,[je,Ie]=Oe.useState(null),[We,_e]=Oe.useState(null),[Ae,Ue]=Oe.useState(!1),[qe,st]=Oe.useState(!1),[me,Ze]=Oe.useState(!1),[Xe,ct]=Oe.useState(!1),[Yt,on]=Oe.useState(!1),[T,Re]=Oe.useState(0),[Be,ee]=Oe.useState(0),pe=Oe.useRef(_.duration||re||Ig),at=Oe.useRef(null),dt=Oe.useRef(null),Bt=F===0,Mn=F+1<=H,Pt=_.type,it=_.dismissible!==!1,vn=_.className||"",zn=_.descriptionClassName||"",fr=Oe.useMemo(()=>z.findIndex(ht=>ht.toastId===_.id)||0,[z,_.id]),Ir=Oe.useMemo(()=>{var ht;return(ht=_.closeButton)!=null?ht:J},[_.closeButton,J]),As=Oe.useMemo(()=>_.duration||re||Ig,[_.duration,re]),zt=Oe.useRef(0),ke=Oe.useRef(0),fn=Oe.useRef(0),Lt=Oe.useRef(null),[nn,ds]=q.split("-"),aa=Oe.useMemo(()=>z.reduce((ht,Zt,Rt)=>Rt>=fr?ht:ht+Zt.height,0),[z,fr]),Ca=xS(),Ft=_.invert||O,br=Pt==="loading";ke.current=Oe.useMemo(()=>fr*U+aa,[fr,aa]),Oe.useEffect(()=>{pe.current=As},[As]),Oe.useEffect(()=>{Ue(!0)},[]),Oe.useEffect(()=>{let ht=dt.current;if(ht){let Zt=ht.getBoundingClientRect().height;return ee(Zt),P(Rt=>[{toastId:_.id,height:Zt,position:_.position},...Rt]),()=>P(Rt=>Rt.filter(Gn=>Gn.toastId!==_.id))}},[P,_.id]),Oe.useLayoutEffect(()=>{if(!Ae)return;let ht=dt.current,Zt=ht.style.height;ht.style.height="auto";let Rt=ht.getBoundingClientRect().height;ht.style.height=Zt,ee(Rt),P(Gn=>Gn.find(hr=>hr.toastId===_.id)?Gn.map(hr=>hr.toastId===_.id?{...hr,height:Rt}:hr):[{toastId:_.id,height:Rt,position:_.position},...Gn])},[Ae,_.title,_.description,P,_.id]);let Qr=Oe.useCallback(()=>{st(!0),Re(ke.current),P(ht=>ht.filter(Zt=>Zt.toastId!==_.id)),setTimeout(()=>{te(_)},_S)},[_,te,P,ke]);Oe.useEffect(()=>{if(_.promise&&Pt==="loading"||_.duration===1/0||_.type==="loading")return;let ht;return W||R||ie&&Ca?(()=>{if(fn.current<zt.current){let Zt=new Date().getTime()-zt.current;pe.current=pe.current-Zt}fn.current=new Date().getTime()})():pe.current!==1/0&&(zt.current=new Date().getTime(),ht=setTimeout(()=>{var Zt;(Zt=_.onAutoClose)==null||Zt.call(_,_),Qr()},pe.current)),()=>clearTimeout(ht)},[W,R,_,Pt,ie,Ca,Qr]),Oe.useEffect(()=>{_.delete&&Qr()},[Qr,_.delete]);function Bi(){var ht,Zt,Rt;return we!=null&&we.loading?Oe.createElement("div",{className:Js(oe?.loader,(ht=_?.classNames)==null?void 0:ht.loader,"sonner-loader"),"data-visible":Pt==="loading"},we.loading):K?Oe.createElement("div",{className:Js(oe?.loader,(Zt=_?.classNames)==null?void 0:Zt.loader,"sonner-loader"),"data-visible":Pt==="loading"},K):Oe.createElement(uS,{className:Js(oe?.loader,(Rt=_?.classNames)==null?void 0:Rt.loader),visible:Pt==="loading"})}return Oe.createElement("li",{tabIndex:0,ref:dt,className:Js(ue,vn,oe?.toast,(n=_?.classNames)==null?void 0:n.toast,oe?.default,oe?.[Pt],(s=_?.classNames)==null?void 0:s[Pt]),"data-sonner-toast":"","data-rich-colors":(c=_.richColors)!=null?c:G,"data-styled":!(_.jsx||_.unstyled||k),"data-mounted":Ae,"data-promise":!!_.promise,"data-swiped":Yt,"data-removed":qe,"data-visible":Mn,"data-y-position":nn,"data-x-position":ds,"data-index":F,"data-front":Bt,"data-swiping":me,"data-dismissible":it,"data-type":Pt,"data-invert":Ft,"data-swipe-out":Xe,"data-swipe-direction":We,"data-expanded":!!(W||ne&&Ae),style:{"--index":F,"--toasts-before":F,"--z-index":Z.length-F,"--offset":`${qe?T:ke.current}px`,"--initial-height":ne?"auto":`${Be}px`,...se,..._.style},onDragEnd:()=>{Ze(!1),Ie(null),Lt.current=null},onPointerDown:ht=>{br||!it||(at.current=new Date,Re(ke.current),ht.target.setPointerCapture(ht.pointerId),ht.target.tagName!=="BUTTON"&&(Ze(!0),Lt.current={x:ht.clientX,y:ht.clientY}))},onPointerUp:()=>{var ht,Zt,Rt,Gn;if(Xe||!it)return;Lt.current=null;let hr=Number(((ht=dt.current)==null?void 0:ht.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jn=Number(((Zt=dt.current)==null?void 0:Zt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),us=new Date().getTime()-((Rt=at.current)==null?void 0:Rt.getTime()),Tn=je==="x"?hr:jn,Kr=Math.abs(Tn)/us;if(Math.abs(Tn)>=RS||Kr>.11){Re(ke.current),(Gn=_.onDismiss)==null||Gn.call(_,_),_e(je==="x"?hr>0?"right":"left":jn>0?"down":"up"),Qr(),ct(!0),on(!1);return}Ze(!1),Ie(null)},onPointerMove:ht=>{var Zt,Rt,Gn,hr;if(!Lt.current||!it||((Zt=window.getSelection())==null?void 0:Zt.toString().length)>0)return;let jn=ht.clientY-Lt.current.y,us=ht.clientX-Lt.current.x,Tn=(Rt=e.swipeDirections)!=null?Rt:DS(q);!je&&(Math.abs(us)>1||Math.abs(jn)>1)&&Ie(Math.abs(us)>Math.abs(jn)?"x":"y");let Kr={x:0,y:0};je==="y"?(Tn.includes("top")||Tn.includes("bottom"))&&(Tn.includes("top")&&jn<0||Tn.includes("bottom")&&jn>0)&&(Kr.y=jn):je==="x"&&(Tn.includes("left")||Tn.includes("right"))&&(Tn.includes("left")&&us<0||Tn.includes("right")&&us>0)&&(Kr.x=us),(Math.abs(Kr.x)>0||Math.abs(Kr.y)>0)&&on(!0),(Gn=dt.current)==null||Gn.style.setProperty("--swipe-amount-x",`${Kr.x}px`),(hr=dt.current)==null||hr.style.setProperty("--swipe-amount-y",`${Kr.y}px`)}},Ir&&!_.jsx?Oe.createElement("button",{"aria-label":X,"data-disabled":br,"data-close-button":!0,onClick:br||!it?()=>{}:()=>{var ht;Qr(),(ht=_.onDismiss)==null||ht.call(_,_)},className:Js(oe?.closeButton,(f=_?.classNames)==null?void 0:f.closeButton)},(m=we?.close)!=null?m:gS):null,_.jsx||C.isValidElement(_.title)?_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title:Oe.createElement(Oe.Fragment,null,Pt||_.icon||_.promise?Oe.createElement("div",{"data-icon":"",className:Js(oe?.icon,(v=_?.classNames)==null?void 0:v.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||Bi():null,_.type!=="loading"?_.icon||we?.[Pt]||cS(Pt):null):null,Oe.createElement("div",{"data-content":"",className:Js(oe?.content,(N=_?.classNames)==null?void 0:N.content)},Oe.createElement("div",{"data-title":"",className:Js(oe?.title,(w=_?.classNames)==null?void 0:w.title)},typeof _.title=="function"?_.title():_.title),_.description?Oe.createElement("div",{"data-description":"",className:Js(ge,zn,oe?.description,(y=_?.classNames)==null?void 0:y.description)},typeof _.description=="function"?_.description():_.description):null),C.isValidElement(_.cancel)?_.cancel:_.cancel&&gu(_.cancel)?Oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||fe,onClick:ht=>{var Zt,Rt;gu(_.cancel)&&it&&((Rt=(Zt=_.cancel).onClick)==null||Rt.call(Zt,ht),Qr())},className:Js(oe?.cancelButton,(E=_?.classNames)==null?void 0:E.cancelButton)},_.cancel.label):null,C.isValidElement(_.action)?_.action:_.action&&gu(_.action)?Oe.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||Ee,onClick:ht=>{var Zt,Rt;gu(_.action)&&((Rt=(Zt=_.action).onClick)==null||Rt.call(Zt,ht),!ht.defaultPrevented&&Qr())},className:Js(oe?.actionButton,(I=_?.classNames)==null?void 0:I.actionButton)},_.action.label):null))};function jg(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kS(e,n){let s={};return[e,n].forEach((c,f)=>{let m=f===1,v=m?"--mobile-offset":"--offset",N=m?IS:AS;function w(y){["top","right","bottom","left"].forEach(E=>{s[`${v}-${E}`]=typeof y=="number"?`${y}px`:y})}typeof c=="number"||typeof c=="string"?w(c):typeof c=="object"?["top","right","bottom","left"].forEach(y=>{c[y]===void 0?s[`${v}-${y}`]=N:s[`${v}-${y}`]=typeof c[y]=="number"?`${c[y]}px`:c[y]}):w(N)}),s}var PS=C.forwardRef(function(e,n){let{invert:s,position:c="bottom-right",hotkey:f=["altKey","KeyT"],expand:m,closeButton:v,className:N,offset:w,mobileOffset:y,theme:E="light",richColors:I,duration:O,style:_,visibleToasts:k=SS,toastOptions:R,dir:P=jg(),gap:H=TS,loadingIcon:z,icons:F,containerAriaLabel:Z="Notifications",pauseWhenPageIsHidden:W}=e,[te,G]=Oe.useState([]),J=Oe.useMemo(()=>Array.from(new Set([c].concat(te.filter(ie=>ie.position).map(ie=>ie.position)))),[te,c]),[se,fe]=Oe.useState([]),[Ee,ue]=Oe.useState(!1),[ge,re]=Oe.useState(!1),[q,U]=Oe.useState(E!=="system"?E:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=Oe.useRef(null),ne=f.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=Oe.useRef(null),we=Oe.useRef(!1),X=Oe.useCallback(ie=>{G(je=>{var Ie;return(Ie=je.find(We=>We.id===ie.id))!=null&&Ie.delete||os.dismiss(ie.id),je.filter(({id:We})=>We!==ie.id)})},[]);return Oe.useEffect(()=>os.subscribe(ie=>{if(ie.dismiss){G(je=>je.map(Ie=>Ie.id===ie.id?{...Ie,delete:!0}:Ie));return}setTimeout(()=>{hy.flushSync(()=>{G(je=>{let Ie=je.findIndex(We=>We.id===ie.id);return Ie!==-1?[...je.slice(0,Ie),{...je[Ie],...ie},...je.slice(Ie+1)]:[ie,...je]})})})}),[]),Oe.useEffect(()=>{if(E!=="system"){U(E);return}if(E==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:je})=>{U(je?"dark":"light")})}catch{ie.addListener(({matches:Ie})=>{try{U(Ie?"dark":"light")}catch(We){console.error(We)}})}},[E]),Oe.useEffect(()=>{te.length<=1&&ue(!1)},[te]),Oe.useEffect(()=>{let ie=je=>{var Ie,We;f.every(_e=>je[_e]||je.code===_e)&&(ue(!0),(Ie=K.current)==null||Ie.focus()),je.code==="Escape"&&(document.activeElement===K.current||(We=K.current)!=null&&We.contains(document.activeElement))&&ue(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[f]),Oe.useEffect(()=>{if(K.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,we.current=!1)}},[K.current]),Oe.createElement("section",{ref:n,"aria-label":`${Z} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},J.map((ie,je)=>{var Ie;let[We,_e]=ie.split("-");return te.length?Oe.createElement("ol",{key:ie,dir:P==="auto"?jg():P,tabIndex:-1,ref:K,className:N,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":We,"data-lifted":Ee&&te.length>1&&!m,"data-x-position":_e,style:{"--front-toast-height":`${((Ie=se[0])==null?void 0:Ie.height)||0}px`,"--width":`${jS}px`,"--gap":`${H}px`,..._,...kS(w,y)},onBlur:Ae=>{we.current&&!Ae.currentTarget.contains(Ae.relatedTarget)&&(we.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||we.current||(we.current=!0,oe.current=Ae.relatedTarget)},onMouseEnter:()=>ue(!0),onMouseMove:()=>ue(!0),onMouseLeave:()=>{ge||ue(!1)},onDragEnd:()=>ue(!1),onPointerDown:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},te.filter(Ae=>!Ae.position&&je===0||Ae.position===ie).map((Ae,Ue)=>{var qe,st;return Oe.createElement(OS,{key:Ae.id,icons:F,index:Ue,toast:Ae,defaultRichColors:I,duration:(qe=R?.duration)!=null?qe:O,className:R?.className,descriptionClassName:R?.descriptionClassName,invert:s,visibleToasts:k,closeButton:(st=R?.closeButton)!=null?st:v,interacting:ge,position:ie,style:R?.style,unstyled:R?.unstyled,classNames:R?.classNames,cancelButtonStyle:R?.cancelButtonStyle,actionButtonStyle:R?.actionButtonStyle,removeToast:X,toasts:te.filter(me=>me.position==Ae.position),heights:se.filter(me=>me.position==Ae.position),setHeights:fe,expandByDefault:m,gap:H,loadingIcon:z,expanded:Ee,pauseWhenPageIsHidden:W,swipeDirections:e.swipeDirections})})):null}))});const MS=({...e})=>{const{theme:n="system"}=lS();return r.jsx(PS,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var LS=mp[" useId ".trim().toString()]||(()=>{}),FS=0;function ji(e){const[n,s]=C.useState(LS());return sr(()=>{s(c=>c??String(FS++))},[e]),e||(n?`radix-${n}`:"")}const BS=["top","right","bottom","left"],Di=Math.min,Ns=Math.max,Mu=Math.round,xu=Math.floor,xa=e=>({x:e,y:e}),US={left:"right",right:"left",bottom:"top",top:"bottom"},zS={start:"end",end:"start"};function Mm(e,n,s){return Ns(e,Di(n,s))}function Va(e,n){return typeof e=="function"?e(n):e}function Ha(e){return e.split("-")[0]}function Il(e){return e.split("-")[1]}function wp(e){return e==="x"?"y":"x"}function bp(e){return e==="y"?"height":"width"}const VS=new Set(["top","bottom"]);function ma(e){return VS.has(Ha(e))?"y":"x"}function Np(e){return wp(ma(e))}function HS(e,n,s){s===void 0&&(s=!1);const c=Il(e),f=Np(e),m=bp(f);let v=f==="x"?c===(s?"end":"start")?"right":"left":c==="start"?"bottom":"top";return n.reference[m]>n.floating[m]&&(v=Lu(v)),[v,Lu(v)]}function WS(e){const n=Lu(e);return[Lm(e),n,Lm(n)]}function Lm(e){return e.replace(/start|end/g,n=>zS[n])}const Tg=["left","right"],Rg=["right","left"],$S=["top","bottom"],GS=["bottom","top"];function XS(e,n,s){switch(e){case"top":case"bottom":return s?n?Rg:Tg:n?Tg:Rg;case"left":case"right":return n?$S:GS;default:return[]}}function YS(e,n,s,c){const f=Il(e);let m=XS(Ha(e),s==="start",c);return f&&(m=m.map(v=>v+"-"+f),n&&(m=m.concat(m.map(Lm)))),m}function Lu(e){return e.replace(/left|right|bottom|top/g,n=>US[n])}function ZS(e){return{top:0,right:0,bottom:0,left:0,...e}}function av(e){return typeof e!="number"?ZS(e):{top:e,right:e,bottom:e,left:e}}function Fu(e){const{x:n,y:s,width:c,height:f}=e;return{width:c,height:f,top:s,left:n,right:n+c,bottom:s+f,x:n,y:s}}function _g(e,n,s){let{reference:c,floating:f}=e;const m=ma(n),v=Np(n),N=bp(v),w=Ha(n),y=m==="y",E=c.x+c.width/2-f.width/2,I=c.y+c.height/2-f.height/2,O=c[N]/2-f[N]/2;let _;switch(w){case"top":_={x:E,y:c.y-f.height};break;case"bottom":_={x:E,y:c.y+c.height};break;case"right":_={x:c.x+c.width,y:I};break;case"left":_={x:c.x-f.width,y:I};break;default:_={x:c.x,y:c.y}}switch(Il(n)){case"start":_[v]-=O*(s&&y?-1:1);break;case"end":_[v]+=O*(s&&y?-1:1);break}return _}const qS=async(e,n,s)=>{const{placement:c="bottom",strategy:f="absolute",middleware:m=[],platform:v}=s,N=m.filter(Boolean),w=await(v.isRTL==null?void 0:v.isRTL(n));let y=await v.getElementRects({reference:e,floating:n,strategy:f}),{x:E,y:I}=_g(y,c,w),O=c,_={},k=0;for(let R=0;R<N.length;R++){const{name:P,fn:H}=N[R],{x:z,y:F,data:Z,reset:W}=await H({x:E,y:I,initialPlacement:c,placement:O,strategy:f,middlewareData:_,rects:y,platform:v,elements:{reference:e,floating:n}});E=z??E,I=F??I,_={..._,[P]:{..._[P],...Z}},W&&k<=50&&(k++,typeof W=="object"&&(W.placement&&(O=W.placement),W.rects&&(y=W.rects===!0?await v.getElementRects({reference:e,floating:n,strategy:f}):W.rects),{x:E,y:I}=_g(y,O,w)),R=-1)}return{x:E,y:I,placement:O,strategy:f,middlewareData:_}};async function Uc(e,n){var s;n===void 0&&(n={});const{x:c,y:f,platform:m,rects:v,elements:N,strategy:w}=e,{boundary:y="clippingAncestors",rootBoundary:E="viewport",elementContext:I="floating",altBoundary:O=!1,padding:_=0}=Va(n,e),k=av(_),P=N[O?I==="floating"?"reference":"floating":I],H=Fu(await m.getClippingRect({element:(s=await(m.isElement==null?void 0:m.isElement(P)))==null||s?P:P.contextElement||await(m.getDocumentElement==null?void 0:m.getDocumentElement(N.floating)),boundary:y,rootBoundary:E,strategy:w})),z=I==="floating"?{x:c,y:f,width:v.floating.width,height:v.floating.height}:v.reference,F=await(m.getOffsetParent==null?void 0:m.getOffsetParent(N.floating)),Z=await(m.isElement==null?void 0:m.isElement(F))?await(m.getScale==null?void 0:m.getScale(F))||{x:1,y:1}:{x:1,y:1},W=Fu(m.convertOffsetParentRelativeRectToViewportRelativeRect?await m.convertOffsetParentRelativeRectToViewportRelativeRect({elements:N,rect:z,offsetParent:F,strategy:w}):z);return{top:(H.top-W.top+k.top)/Z.y,bottom:(W.bottom-H.bottom+k.bottom)/Z.y,left:(H.left-W.left+k.left)/Z.x,right:(W.right-H.right+k.right)/Z.x}}const QS=e=>({name:"arrow",options:e,async fn(n){const{x:s,y:c,placement:f,rects:m,platform:v,elements:N,middlewareData:w}=n,{element:y,padding:E=0}=Va(e,n)||{};if(y==null)return{};const I=av(E),O={x:s,y:c},_=Np(f),k=bp(_),R=await v.getDimensions(y),P=_==="y",H=P?"top":"left",z=P?"bottom":"right",F=P?"clientHeight":"clientWidth",Z=m.reference[k]+m.reference[_]-O[_]-m.floating[k],W=O[_]-m.reference[_],te=await(v.getOffsetParent==null?void 0:v.getOffsetParent(y));let G=te?te[F]:0;(!G||!await(v.isElement==null?void 0:v.isElement(te)))&&(G=N.floating[F]||m.floating[k]);const J=Z/2-W/2,se=G/2-R[k]/2-1,fe=Di(I[H],se),Ee=Di(I[z],se),ue=fe,ge=G-R[k]-Ee,re=G/2-R[k]/2+J,q=Mm(ue,re,ge),U=!w.arrow&&Il(f)!=null&&re!==q&&m.reference[k]/2-(re<ue?fe:Ee)-R[k]/2<0,K=U?re<ue?re-ue:re-ge:0;return{[_]:O[_]+K,data:{[_]:q,centerOffset:re-q-K,...U&&{alignmentOffset:K}},reset:U}}}),KS=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var s,c;const{placement:f,middlewareData:m,rects:v,initialPlacement:N,platform:w,elements:y}=n,{mainAxis:E=!0,crossAxis:I=!0,fallbackPlacements:O,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:R=!0,...P}=Va(e,n);if((s=m.arrow)!=null&&s.alignmentOffset)return{};const H=Ha(f),z=ma(N),F=Ha(N)===N,Z=await(w.isRTL==null?void 0:w.isRTL(y.floating)),W=O||(F||!R?[Lu(N)]:WS(N)),te=k!=="none";!O&&te&&W.push(...YS(N,R,k,Z));const G=[N,...W],J=await Uc(n,P),se=[];let fe=((c=m.flip)==null?void 0:c.overflows)||[];if(E&&se.push(J[H]),I){const re=HS(f,v,Z);se.push(J[re[0]],J[re[1]])}if(fe=[...fe,{placement:f,overflows:se}],!se.every(re=>re<=0)){var Ee,ue;const re=(((Ee=m.flip)==null?void 0:Ee.index)||0)+1,q=G[re];if(q&&(!(I==="alignment"?z!==ma(q):!1)||fe.every(ne=>ne.overflows[0]>0&&ma(ne.placement)===z)))return{data:{index:re,overflows:fe},reset:{placement:q}};let U=(ue=fe.filter(K=>K.overflows[0]<=0).sort((K,ne)=>K.overflows[1]-ne.overflows[1])[0])==null?void 0:ue.placement;if(!U)switch(_){case"bestFit":{var ge;const K=(ge=fe.filter(ne=>{if(te){const oe=ma(ne.placement);return oe===z||oe==="y"}return!0}).map(ne=>[ne.placement,ne.overflows.filter(oe=>oe>0).reduce((oe,we)=>oe+we,0)]).sort((ne,oe)=>ne[1]-oe[1])[0])==null?void 0:ge[0];K&&(U=K);break}case"initialPlacement":U=N;break}if(f!==U)return{reset:{placement:U}}}return{}}}};function Dg(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function Og(e){return BS.some(n=>e[n]>=0)}const JS=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:s}=n,{strategy:c="referenceHidden",...f}=Va(e,n);switch(c){case"referenceHidden":{const m=await Uc(n,{...f,elementContext:"reference"}),v=Dg(m,s.reference);return{data:{referenceHiddenOffsets:v,referenceHidden:Og(v)}}}case"escaped":{const m=await Uc(n,{...f,altBoundary:!0}),v=Dg(m,s.floating);return{data:{escapedOffsets:v,escaped:Og(v)}}}default:return{}}}}},iv=new Set(["left","top"]);async function e3(e,n){const{placement:s,platform:c,elements:f}=e,m=await(c.isRTL==null?void 0:c.isRTL(f.floating)),v=Ha(s),N=Il(s),w=ma(s)==="y",y=iv.has(v)?-1:1,E=m&&w?-1:1,I=Va(n,e);let{mainAxis:O,crossAxis:_,alignmentAxis:k}=typeof I=="number"?{mainAxis:I,crossAxis:0,alignmentAxis:null}:{mainAxis:I.mainAxis||0,crossAxis:I.crossAxis||0,alignmentAxis:I.alignmentAxis};return N&&typeof k=="number"&&(_=N==="end"?k*-1:k),w?{x:_*E,y:O*y}:{x:O*y,y:_*E}}const t3=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var s,c;const{x:f,y:m,placement:v,middlewareData:N}=n,w=await e3(n,e);return v===((s=N.offset)==null?void 0:s.placement)&&(c=N.arrow)!=null&&c.alignmentOffset?{}:{x:f+w.x,y:m+w.y,data:{...w,placement:v}}}}},n3=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:s,y:c,placement:f}=n,{mainAxis:m=!0,crossAxis:v=!1,limiter:N={fn:P=>{let{x:H,y:z}=P;return{x:H,y:z}}},...w}=Va(e,n),y={x:s,y:c},E=await Uc(n,w),I=ma(Ha(f)),O=wp(I);let _=y[O],k=y[I];if(m){const P=O==="y"?"top":"left",H=O==="y"?"bottom":"right",z=_+E[P],F=_-E[H];_=Mm(z,_,F)}if(v){const P=I==="y"?"top":"left",H=I==="y"?"bottom":"right",z=k+E[P],F=k-E[H];k=Mm(z,k,F)}const R=N.fn({...n,[O]:_,[I]:k});return{...R,data:{x:R.x-s,y:R.y-c,enabled:{[O]:m,[I]:v}}}}}},r3=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:s,y:c,placement:f,rects:m,middlewareData:v}=n,{offset:N=0,mainAxis:w=!0,crossAxis:y=!0}=Va(e,n),E={x:s,y:c},I=ma(f),O=wp(I);let _=E[O],k=E[I];const R=Va(N,n),P=typeof R=="number"?{mainAxis:R,crossAxis:0}:{mainAxis:0,crossAxis:0,...R};if(w){const F=O==="y"?"height":"width",Z=m.reference[O]-m.floating[F]+P.mainAxis,W=m.reference[O]+m.reference[F]-P.mainAxis;_<Z?_=Z:_>W&&(_=W)}if(y){var H,z;const F=O==="y"?"width":"height",Z=iv.has(Ha(f)),W=m.reference[I]-m.floating[F]+(Z&&((H=v.offset)==null?void 0:H[I])||0)+(Z?0:P.crossAxis),te=m.reference[I]+m.reference[F]+(Z?0:((z=v.offset)==null?void 0:z[I])||0)-(Z?P.crossAxis:0);k<W?k=W:k>te&&(k=te)}return{[O]:_,[I]:k}}}},s3=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var s,c;const{placement:f,rects:m,platform:v,elements:N}=n,{apply:w=()=>{},...y}=Va(e,n),E=await Uc(n,y),I=Ha(f),O=Il(f),_=ma(f)==="y",{width:k,height:R}=m.floating;let P,H;I==="top"||I==="bottom"?(P=I,H=O===(await(v.isRTL==null?void 0:v.isRTL(N.floating))?"start":"end")?"left":"right"):(H=I,P=O==="end"?"top":"bottom");const z=R-E.top-E.bottom,F=k-E.left-E.right,Z=Di(R-E[P],z),W=Di(k-E[H],F),te=!n.middlewareData.shift;let G=Z,J=W;if((s=n.middlewareData.shift)!=null&&s.enabled.x&&(J=F),(c=n.middlewareData.shift)!=null&&c.enabled.y&&(G=z),te&&!O){const fe=Ns(E.left,0),Ee=Ns(E.right,0),ue=Ns(E.top,0),ge=Ns(E.bottom,0);_?J=k-2*(fe!==0||Ee!==0?fe+Ee:Ns(E.left,E.right)):G=R-2*(ue!==0||ge!==0?ue+ge:Ns(E.top,E.bottom))}await w({...n,availableWidth:J,availableHeight:G});const se=await v.getDimensions(N.floating);return k!==se.width||R!==se.height?{reset:{rects:!0}}:{}}}};function lf(){return typeof window<"u"}function jl(e){return ov(e)?(e.nodeName||"").toLowerCase():"#document"}function Es(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function ba(e){var n;return(n=(ov(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function ov(e){return lf()?e instanceof Node||e instanceof Es(e).Node:!1}function ta(e){return lf()?e instanceof Element||e instanceof Es(e).Element:!1}function va(e){return lf()?e instanceof HTMLElement||e instanceof Es(e).HTMLElement:!1}function kg(e){return!lf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Es(e).ShadowRoot}const a3=new Set(["inline","contents"]);function Kc(e){const{overflow:n,overflowX:s,overflowY:c,display:f}=na(e);return/auto|scroll|overlay|hidden|clip/.test(n+c+s)&&!a3.has(f)}const i3=new Set(["table","td","th"]);function o3(e){return i3.has(jl(e))}const l3=[":popover-open",":modal"];function cf(e){return l3.some(n=>{try{return e.matches(n)}catch{return!1}})}const c3=["transform","translate","scale","rotate","perspective"],d3=["transform","translate","scale","rotate","perspective","filter"],u3=["paint","layout","strict","content"];function Cp(e){const n=Ep(),s=ta(e)?na(e):e;return c3.some(c=>s[c]?s[c]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!n&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!n&&(s.filter?s.filter!=="none":!1)||d3.some(c=>(s.willChange||"").includes(c))||u3.some(c=>(s.contain||"").includes(c))}function f3(e){let n=Oi(e);for(;va(n)&&!gl(n);){if(Cp(n))return n;if(cf(n))return null;n=Oi(n)}return null}function Ep(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const h3=new Set(["html","body","#document"]);function gl(e){return h3.has(jl(e))}function na(e){return Es(e).getComputedStyle(e)}function df(e){return ta(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Oi(e){if(jl(e)==="html")return e;const n=e.assignedSlot||e.parentNode||kg(e)&&e.host||ba(e);return kg(n)?n.host:n}function lv(e){const n=Oi(e);return gl(n)?e.ownerDocument?e.ownerDocument.body:e.body:va(n)&&Kc(n)?n:lv(n)}function zc(e,n,s){var c;n===void 0&&(n=[]),s===void 0&&(s=!0);const f=lv(e),m=f===((c=e.ownerDocument)==null?void 0:c.body),v=Es(f);if(m){const N=Fm(v);return n.concat(v,v.visualViewport||[],Kc(f)?f:[],N&&s?zc(N):[])}return n.concat(f,zc(f,[],s))}function Fm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function cv(e){const n=na(e);let s=parseFloat(n.width)||0,c=parseFloat(n.height)||0;const f=va(e),m=f?e.offsetWidth:s,v=f?e.offsetHeight:c,N=Mu(s)!==m||Mu(c)!==v;return N&&(s=m,c=v),{width:s,height:c,$:N}}function Sp(e){return ta(e)?e:e.contextElement}function dl(e){const n=Sp(e);if(!va(n))return xa(1);const s=n.getBoundingClientRect(),{width:c,height:f,$:m}=cv(n);let v=(m?Mu(s.width):s.width)/c,N=(m?Mu(s.height):s.height)/f;return(!v||!Number.isFinite(v))&&(v=1),(!N||!Number.isFinite(N))&&(N=1),{x:v,y:N}}const m3=xa(0);function dv(e){const n=Es(e);return!Ep()||!n.visualViewport?m3:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function p3(e,n,s){return n===void 0&&(n=!1),!s||n&&s!==Es(e)?!1:n}function po(e,n,s,c){n===void 0&&(n=!1),s===void 0&&(s=!1);const f=e.getBoundingClientRect(),m=Sp(e);let v=xa(1);n&&(c?ta(c)&&(v=dl(c)):v=dl(e));const N=p3(m,s,c)?dv(m):xa(0);let w=(f.left+N.x)/v.x,y=(f.top+N.y)/v.y,E=f.width/v.x,I=f.height/v.y;if(m){const O=Es(m),_=c&&ta(c)?Es(c):c;let k=O,R=Fm(k);for(;R&&c&&_!==k;){const P=dl(R),H=R.getBoundingClientRect(),z=na(R),F=H.left+(R.clientLeft+parseFloat(z.paddingLeft))*P.x,Z=H.top+(R.clientTop+parseFloat(z.paddingTop))*P.y;w*=P.x,y*=P.y,E*=P.x,I*=P.y,w+=F,y+=Z,k=Es(R),R=Fm(k)}}return Fu({width:E,height:I,x:w,y})}function Ap(e,n){const s=df(e).scrollLeft;return n?n.left+s:po(ba(e)).left+s}function uv(e,n,s){s===void 0&&(s=!1);const c=e.getBoundingClientRect(),f=c.left+n.scrollLeft-(s?0:Ap(e,c)),m=c.top+n.scrollTop;return{x:f,y:m}}function g3(e){let{elements:n,rect:s,offsetParent:c,strategy:f}=e;const m=f==="fixed",v=ba(c),N=n?cf(n.floating):!1;if(c===v||N&&m)return s;let w={scrollLeft:0,scrollTop:0},y=xa(1);const E=xa(0),I=va(c);if((I||!I&&!m)&&((jl(c)!=="body"||Kc(v))&&(w=df(c)),va(c))){const _=po(c);y=dl(c),E.x=_.x+c.clientLeft,E.y=_.y+c.clientTop}const O=v&&!I&&!m?uv(v,w,!0):xa(0);return{width:s.width*y.x,height:s.height*y.y,x:s.x*y.x-w.scrollLeft*y.x+E.x+O.x,y:s.y*y.y-w.scrollTop*y.y+E.y+O.y}}function x3(e){return Array.from(e.getClientRects())}function y3(e){const n=ba(e),s=df(e),c=e.ownerDocument.body,f=Ns(n.scrollWidth,n.clientWidth,c.scrollWidth,c.clientWidth),m=Ns(n.scrollHeight,n.clientHeight,c.scrollHeight,c.clientHeight);let v=-s.scrollLeft+Ap(e);const N=-s.scrollTop;return na(c).direction==="rtl"&&(v+=Ns(n.clientWidth,c.clientWidth)-f),{width:f,height:m,x:v,y:N}}function v3(e,n){const s=Es(e),c=ba(e),f=s.visualViewport;let m=c.clientWidth,v=c.clientHeight,N=0,w=0;if(f){m=f.width,v=f.height;const y=Ep();(!y||y&&n==="fixed")&&(N=f.offsetLeft,w=f.offsetTop)}return{width:m,height:v,x:N,y:w}}const w3=new Set(["absolute","fixed"]);function b3(e,n){const s=po(e,!0,n==="fixed"),c=s.top+e.clientTop,f=s.left+e.clientLeft,m=va(e)?dl(e):xa(1),v=e.clientWidth*m.x,N=e.clientHeight*m.y,w=f*m.x,y=c*m.y;return{width:v,height:N,x:w,y}}function Pg(e,n,s){let c;if(n==="viewport")c=v3(e,s);else if(n==="document")c=y3(ba(e));else if(ta(n))c=b3(n,s);else{const f=dv(e);c={x:n.x-f.x,y:n.y-f.y,width:n.width,height:n.height}}return Fu(c)}function fv(e,n){const s=Oi(e);return s===n||!ta(s)||gl(s)?!1:na(s).position==="fixed"||fv(s,n)}function N3(e,n){const s=n.get(e);if(s)return s;let c=zc(e,[],!1).filter(N=>ta(N)&&jl(N)!=="body"),f=null;const m=na(e).position==="fixed";let v=m?Oi(e):e;for(;ta(v)&&!gl(v);){const N=na(v),w=Cp(v);!w&&N.position==="fixed"&&(f=null),(m?!w&&!f:!w&&N.position==="static"&&!!f&&w3.has(f.position)||Kc(v)&&!w&&fv(e,v))?c=c.filter(E=>E!==v):f=N,v=Oi(v)}return n.set(e,c),c}function C3(e){let{element:n,boundary:s,rootBoundary:c,strategy:f}=e;const v=[...s==="clippingAncestors"?cf(n)?[]:N3(n,this._c):[].concat(s),c],N=v[0],w=v.reduce((y,E)=>{const I=Pg(n,E,f);return y.top=Ns(I.top,y.top),y.right=Di(I.right,y.right),y.bottom=Di(I.bottom,y.bottom),y.left=Ns(I.left,y.left),y},Pg(n,N,f));return{width:w.right-w.left,height:w.bottom-w.top,x:w.left,y:w.top}}function E3(e){const{width:n,height:s}=cv(e);return{width:n,height:s}}function S3(e,n,s){const c=va(n),f=ba(n),m=s==="fixed",v=po(e,!0,m,n);let N={scrollLeft:0,scrollTop:0};const w=xa(0);function y(){w.x=Ap(f)}if(c||!c&&!m)if((jl(n)!=="body"||Kc(f))&&(N=df(n)),c){const _=po(n,!0,m,n);w.x=_.x+n.clientLeft,w.y=_.y+n.clientTop}else f&&y();m&&!c&&f&&y();const E=f&&!c&&!m?uv(f,N):xa(0),I=v.left+N.scrollLeft-w.x-E.x,O=v.top+N.scrollTop-w.y-E.y;return{x:I,y:O,width:v.width,height:v.height}}function om(e){return na(e).position==="static"}function Mg(e,n){if(!va(e)||na(e).position==="fixed")return null;if(n)return n(e);let s=e.offsetParent;return ba(e)===s&&(s=s.ownerDocument.body),s}function hv(e,n){const s=Es(e);if(cf(e))return s;if(!va(e)){let f=Oi(e);for(;f&&!gl(f);){if(ta(f)&&!om(f))return f;f=Oi(f)}return s}let c=Mg(e,n);for(;c&&o3(c)&&om(c);)c=Mg(c,n);return c&&gl(c)&&om(c)&&!Cp(c)?s:c||f3(e)||s}const A3=async function(e){const n=this.getOffsetParent||hv,s=this.getDimensions,c=await s(e.floating);return{reference:S3(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:c.width,height:c.height}}};function I3(e){return na(e).direction==="rtl"}const j3={convertOffsetParentRelativeRectToViewportRelativeRect:g3,getDocumentElement:ba,getClippingRect:C3,getOffsetParent:hv,getElementRects:A3,getClientRects:x3,getDimensions:E3,getScale:dl,isElement:ta,isRTL:I3};function mv(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function T3(e,n){let s=null,c;const f=ba(e);function m(){var N;clearTimeout(c),(N=s)==null||N.disconnect(),s=null}function v(N,w){N===void 0&&(N=!1),w===void 0&&(w=1),m();const y=e.getBoundingClientRect(),{left:E,top:I,width:O,height:_}=y;if(N||n(),!O||!_)return;const k=xu(I),R=xu(f.clientWidth-(E+O)),P=xu(f.clientHeight-(I+_)),H=xu(E),F={rootMargin:-k+"px "+-R+"px "+-P+"px "+-H+"px",threshold:Ns(0,Di(1,w))||1};let Z=!0;function W(te){const G=te[0].intersectionRatio;if(G!==w){if(!Z)return v();G?v(!1,G):c=setTimeout(()=>{v(!1,1e-7)},1e3)}G===1&&!mv(y,e.getBoundingClientRect())&&v(),Z=!1}try{s=new IntersectionObserver(W,{...F,root:f.ownerDocument})}catch{s=new IntersectionObserver(W,F)}s.observe(e)}return v(!0),m}function R3(e,n,s,c){c===void 0&&(c={});const{ancestorScroll:f=!0,ancestorResize:m=!0,elementResize:v=typeof ResizeObserver=="function",layoutShift:N=typeof IntersectionObserver=="function",animationFrame:w=!1}=c,y=Sp(e),E=f||m?[...y?zc(y):[],...zc(n)]:[];E.forEach(H=>{f&&H.addEventListener("scroll",s,{passive:!0}),m&&H.addEventListener("resize",s)});const I=y&&N?T3(y,s):null;let O=-1,_=null;v&&(_=new ResizeObserver(H=>{let[z]=H;z&&z.target===y&&_&&(_.unobserve(n),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var F;(F=_)==null||F.observe(n)})),s()}),y&&!w&&_.observe(y),_.observe(n));let k,R=w?po(e):null;w&&P();function P(){const H=po(e);R&&!mv(R,H)&&s(),R=H,k=requestAnimationFrame(P)}return s(),()=>{var H;E.forEach(z=>{f&&z.removeEventListener("scroll",s),m&&z.removeEventListener("resize",s)}),I?.(),(H=_)==null||H.disconnect(),_=null,w&&cancelAnimationFrame(k)}}const _3=t3,D3=n3,O3=KS,k3=s3,P3=JS,Lg=QS,M3=r3,L3=(e,n,s)=>{const c=new Map,f={platform:j3,...s},m={...f.platform,_c:c};return qS(e,n,{...f,platform:m})};var F3=typeof document<"u",B3=function(){},Ru=F3?C.useLayoutEffect:B3;function Bu(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let s,c,f;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==n.length)return!1;for(c=s;c--!==0;)if(!Bu(e[c],n[c]))return!1;return!0}if(f=Object.keys(e),s=f.length,s!==Object.keys(n).length)return!1;for(c=s;c--!==0;)if(!{}.hasOwnProperty.call(n,f[c]))return!1;for(c=s;c--!==0;){const m=f[c];if(!(m==="_owner"&&e.$$typeof)&&!Bu(e[m],n[m]))return!1}return!0}return e!==e&&n!==n}function pv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fg(e,n){const s=pv(e);return Math.round(n*s)/s}function lm(e){const n=C.useRef(e);return Ru(()=>{n.current=e}),n}function U3(e){e===void 0&&(e={});const{placement:n="bottom",strategy:s="absolute",middleware:c=[],platform:f,elements:{reference:m,floating:v}={},transform:N=!0,whileElementsMounted:w,open:y}=e,[E,I]=C.useState({x:0,y:0,strategy:s,placement:n,middlewareData:{},isPositioned:!1}),[O,_]=C.useState(c);Bu(O,c)||_(c);const[k,R]=C.useState(null),[P,H]=C.useState(null),z=C.useCallback(ne=>{ne!==te.current&&(te.current=ne,R(ne))},[]),F=C.useCallback(ne=>{ne!==G.current&&(G.current=ne,H(ne))},[]),Z=m||k,W=v||P,te=C.useRef(null),G=C.useRef(null),J=C.useRef(E),se=w!=null,fe=lm(w),Ee=lm(f),ue=lm(y),ge=C.useCallback(()=>{if(!te.current||!G.current)return;const ne={placement:n,strategy:s,middleware:O};Ee.current&&(ne.platform=Ee.current),L3(te.current,G.current,ne).then(oe=>{const we={...oe,isPositioned:ue.current!==!1};re.current&&!Bu(J.current,we)&&(J.current=we,Cl.flushSync(()=>{I(we)}))})},[O,n,s,Ee,ue]);Ru(()=>{y===!1&&J.current.isPositioned&&(J.current.isPositioned=!1,I(ne=>({...ne,isPositioned:!1})))},[y]);const re=C.useRef(!1);Ru(()=>(re.current=!0,()=>{re.current=!1}),[]),Ru(()=>{if(Z&&(te.current=Z),W&&(G.current=W),Z&&W){if(fe.current)return fe.current(Z,W,ge);ge()}},[Z,W,ge,fe,se]);const q=C.useMemo(()=>({reference:te,floating:G,setReference:z,setFloating:F}),[z,F]),U=C.useMemo(()=>({reference:Z,floating:W}),[Z,W]),K=C.useMemo(()=>{const ne={position:s,left:0,top:0};if(!U.floating)return ne;const oe=Fg(U.floating,E.x),we=Fg(U.floating,E.y);return N?{...ne,transform:"translate("+oe+"px, "+we+"px)",...pv(U.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:oe,top:we}},[s,N,U.floating,E.x,E.y]);return C.useMemo(()=>({...E,update:ge,refs:q,elements:U,floatingStyles:K}),[E,ge,q,U,K])}const z3=e=>{function n(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:c,padding:f}=typeof e=="function"?e(s):e;return c&&n(c)?c.current!=null?Lg({element:c.current,padding:f}).fn(s):{}:c?Lg({element:c,padding:f}).fn(s):{}}}},V3=(e,n)=>({..._3(e),options:[e,n]}),H3=(e,n)=>({...D3(e),options:[e,n]}),W3=(e,n)=>({...M3(e),options:[e,n]}),$3=(e,n)=>({...O3(e),options:[e,n]}),G3=(e,n)=>({...k3(e),options:[e,n]}),X3=(e,n)=>({...P3(e),options:[e,n]}),Y3=(e,n)=>({...z3(e),options:[e,n]});var Z3="Arrow",gv=C.forwardRef((e,n)=>{const{children:s,width:c=10,height:f=5,...m}=e;return r.jsx(jt.svg,{...m,ref:n,width:c,height:f,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});gv.displayName=Z3;var q3=gv;function xv(e){const[n,s]=C.useState(void 0);return sr(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const c=new ResizeObserver(f=>{if(!Array.isArray(f)||!f.length)return;const m=f[0];let v,N;if("borderBoxSize"in m){const w=m.borderBoxSize,y=Array.isArray(w)?w[0]:w;v=y.inlineSize,N=y.blockSize}else v=e.offsetWidth,N=e.offsetHeight;s({width:v,height:N})});return c.observe(e,{box:"border-box"}),()=>c.unobserve(e)}else s(void 0)},[e]),n}var Ip="Popper",[yv,Tl]=zs(Ip),[Q3,vv]=yv(Ip),wv=e=>{const{__scopePopper:n,children:s}=e,[c,f]=C.useState(null);return r.jsx(Q3,{scope:n,anchor:c,onAnchorChange:f,children:s})};wv.displayName=Ip;var bv="PopperAnchor",Nv=C.forwardRef((e,n)=>{const{__scopePopper:s,virtualRef:c,...f}=e,m=vv(bv,s),v=C.useRef(null),N=an(n,v);return C.useEffect(()=>{m.onAnchorChange(c?.current||v.current)}),c?null:r.jsx(jt.div,{...f,ref:N})});Nv.displayName=bv;var jp="PopperContent",[K3,J3]=yv(jp),Cv=C.forwardRef((e,n)=>{const{__scopePopper:s,side:c="bottom",sideOffset:f=0,align:m="center",alignOffset:v=0,arrowPadding:N=0,avoidCollisions:w=!0,collisionBoundary:y=[],collisionPadding:E=0,sticky:I="partial",hideWhenDetached:O=!1,updatePositionStrategy:_="optimized",onPlaced:k,...R}=e,P=vv(jp,s),[H,z]=C.useState(null),F=an(n,Ae=>z(Ae)),[Z,W]=C.useState(null),te=xv(Z),G=te?.width??0,J=te?.height??0,se=c+(m!=="center"?"-"+m:""),fe=typeof E=="number"?E:{top:0,right:0,bottom:0,left:0,...E},Ee=Array.isArray(y)?y:[y],ue=Ee.length>0,ge={padding:fe,boundary:Ee.filter(tA),altBoundary:ue},{refs:re,floatingStyles:q,placement:U,isPositioned:K,middlewareData:ne}=U3({strategy:"fixed",placement:se,whileElementsMounted:(...Ae)=>R3(...Ae,{animationFrame:_==="always"}),elements:{reference:P.anchor},middleware:[V3({mainAxis:f+J,alignmentAxis:v}),w&&H3({mainAxis:!0,crossAxis:!1,limiter:I==="partial"?W3():void 0,...ge}),w&&$3({...ge}),G3({...ge,apply:({elements:Ae,rects:Ue,availableWidth:qe,availableHeight:st})=>{const{width:me,height:Ze}=Ue.reference,Xe=Ae.floating.style;Xe.setProperty("--radix-popper-available-width",`${qe}px`),Xe.setProperty("--radix-popper-available-height",`${st}px`),Xe.setProperty("--radix-popper-anchor-width",`${me}px`),Xe.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),Z&&Y3({element:Z,padding:N}),nA({arrowWidth:G,arrowHeight:J}),O&&X3({strategy:"referenceHidden",...ge})]}),[oe,we]=Av(U),X=Us(k);sr(()=>{K&&X?.()},[K,X]);const ie=ne.arrow?.x,je=ne.arrow?.y,Ie=ne.arrow?.centerOffset!==0,[We,_e]=C.useState();return sr(()=>{H&&_e(window.getComputedStyle(H).zIndex)},[H]),r.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:K?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:We,"--radix-popper-transform-origin":[ne.transformOrigin?.x,ne.transformOrigin?.y].join(" "),...ne.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(K3,{scope:s,placedSide:oe,onArrowChange:W,arrowX:ie,arrowY:je,shouldHideArrow:Ie,children:r.jsx(jt.div,{"data-side":oe,"data-align":we,...R,ref:F,style:{...R.style,animation:K?void 0:"none"}})})})});Cv.displayName=jp;var Ev="PopperArrow",eA={top:"bottom",right:"left",bottom:"top",left:"right"},Sv=C.forwardRef(function(n,s){const{__scopePopper:c,...f}=n,m=J3(Ev,c),v=eA[m.placedSide];return r.jsx("span",{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[v]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0},children:r.jsx(q3,{...f,ref:s,style:{...f.style,display:"block"}})})});Sv.displayName=Ev;function tA(e){return e!==null}var nA=e=>({name:"transformOrigin",options:e,fn(n){const{placement:s,rects:c,middlewareData:f}=n,v=f.arrow?.centerOffset!==0,N=v?0:e.arrowWidth,w=v?0:e.arrowHeight,[y,E]=Av(s),I={start:"0%",center:"50%",end:"100%"}[E],O=(f.arrow?.x??0)+N/2,_=(f.arrow?.y??0)+w/2;let k="",R="";return y==="bottom"?(k=v?I:`${O}px`,R=`${-w}px`):y==="top"?(k=v?I:`${O}px`,R=`${c.floating.height+w}px`):y==="right"?(k=`${-w}px`,R=v?I:`${_}px`):y==="left"&&(k=`${c.floating.width+w}px`,R=v?I:`${_}px`),{data:{x:k,y:R}}}});function Av(e){const[n,s="center"]=e.split("-");return[n,s]}var Tp=wv,Rp=Nv,_p=Cv,Dp=Sv,[uf]=zs("Tooltip",[Tl]),ff=Tl(),Iv="TooltipProvider",rA=700,Bm="tooltip.open",[sA,Op]=uf(Iv),jv=e=>{const{__scopeTooltip:n,delayDuration:s=rA,skipDelayDuration:c=300,disableHoverableContent:f=!1,children:m}=e,v=C.useRef(!0),N=C.useRef(!1),w=C.useRef(0);return C.useEffect(()=>{const y=w.current;return()=>window.clearTimeout(y)},[]),r.jsx(sA,{scope:n,isOpenDelayedRef:v,delayDuration:s,onOpen:C.useCallback(()=>{window.clearTimeout(w.current),v.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>v.current=!0,c)},[c]),isPointerInTransitRef:N,onPointerInTransitChange:C.useCallback(y=>{N.current=y},[]),disableHoverableContent:f,children:m})};jv.displayName=Iv;var Vc="Tooltip",[aA,hf]=uf(Vc),Tv=e=>{const{__scopeTooltip:n,children:s,open:c,defaultOpen:f,onOpenChange:m,disableHoverableContent:v,delayDuration:N}=e,w=Op(Vc,e.__scopeTooltip),y=ff(n),[E,I]=C.useState(null),O=ji(),_=C.useRef(0),k=v??w.disableHoverableContent,R=N??w.delayDuration,P=C.useRef(!1),[H,z]=_i({prop:c,defaultProp:f??!1,onChange:G=>{G?(w.onOpen(),document.dispatchEvent(new CustomEvent(Bm))):w.onClose(),m?.(G)},caller:Vc}),F=C.useMemo(()=>H?P.current?"delayed-open":"instant-open":"closed",[H]),Z=C.useCallback(()=>{window.clearTimeout(_.current),_.current=0,P.current=!1,z(!0)},[z]),W=C.useCallback(()=>{window.clearTimeout(_.current),_.current=0,z(!1)},[z]),te=C.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>{P.current=!0,z(!0),_.current=0},R)},[R,z]);return C.useEffect(()=>()=>{_.current&&(window.clearTimeout(_.current),_.current=0)},[]),r.jsx(Tp,{...y,children:r.jsx(aA,{scope:n,contentId:O,open:H,stateAttribute:F,trigger:E,onTriggerChange:I,onTriggerEnter:C.useCallback(()=>{w.isOpenDelayedRef.current?te():Z()},[w.isOpenDelayedRef,te,Z]),onTriggerLeave:C.useCallback(()=>{k?W():(window.clearTimeout(_.current),_.current=0)},[W,k]),onOpen:Z,onClose:W,disableHoverableContent:k,children:s})})};Tv.displayName=Vc;var Um="TooltipTrigger",Rv=C.forwardRef((e,n)=>{const{__scopeTooltip:s,...c}=e,f=hf(Um,s),m=Op(Um,s),v=ff(s),N=C.useRef(null),w=an(n,N,f.onTriggerChange),y=C.useRef(!1),E=C.useRef(!1),I=C.useCallback(()=>y.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",I),[I]),r.jsx(Rp,{asChild:!0,...v,children:r.jsx(jt.button,{"aria-describedby":f.open?f.contentId:void 0,"data-state":f.stateAttribute,...c,ref:w,onPointerMove:yt(e.onPointerMove,O=>{O.pointerType!=="touch"&&!E.current&&!m.isPointerInTransitRef.current&&(f.onTriggerEnter(),E.current=!0)}),onPointerLeave:yt(e.onPointerLeave,()=>{f.onTriggerLeave(),E.current=!1}),onPointerDown:yt(e.onPointerDown,()=>{f.open&&f.onClose(),y.current=!0,document.addEventListener("pointerup",I,{once:!0})}),onFocus:yt(e.onFocus,()=>{y.current||f.onOpen()}),onBlur:yt(e.onBlur,f.onClose),onClick:yt(e.onClick,f.onClose)})})});Rv.displayName=Um;var iA="TooltipPortal",[m_,oA]=uf(iA,{forceMount:void 0}),xl="TooltipContent",_v=C.forwardRef((e,n)=>{const s=oA(xl,e.__scopeTooltip),{forceMount:c=s.forceMount,side:f="top",...m}=e,v=hf(xl,e.__scopeTooltip);return r.jsx(Mi,{present:c||v.open,children:v.disableHoverableContent?r.jsx(Dv,{side:f,...m,ref:n}):r.jsx(lA,{side:f,...m,ref:n})})}),lA=C.forwardRef((e,n)=>{const s=hf(xl,e.__scopeTooltip),c=Op(xl,e.__scopeTooltip),f=C.useRef(null),m=an(n,f),[v,N]=C.useState(null),{trigger:w,onClose:y}=s,E=f.current,{onPointerInTransitChange:I}=c,O=C.useCallback(()=>{N(null),I(!1)},[I]),_=C.useCallback((k,R)=>{const P=k.currentTarget,H={x:k.clientX,y:k.clientY},z=hA(H,P.getBoundingClientRect()),F=mA(H,z),Z=pA(R.getBoundingClientRect()),W=xA([...F,...Z]);N(W),I(!0)},[I]);return C.useEffect(()=>()=>O(),[O]),C.useEffect(()=>{if(w&&E){const k=P=>_(P,E),R=P=>_(P,w);return w.addEventListener("pointerleave",k),E.addEventListener("pointerleave",R),()=>{w.removeEventListener("pointerleave",k),E.removeEventListener("pointerleave",R)}}},[w,E,_,O]),C.useEffect(()=>{if(v){const k=R=>{const P=R.target,H={x:R.clientX,y:R.clientY},z=w?.contains(P)||E?.contains(P),F=!gA(H,v);z?O():F&&(O(),y())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[w,E,v,y,O]),r.jsx(Dv,{...e,ref:m})}),[cA,dA]=uf(Vc,{isInside:!1}),uA=gy("TooltipContent"),Dv=C.forwardRef((e,n)=>{const{__scopeTooltip:s,children:c,"aria-label":f,onEscapeKeyDown:m,onPointerDownOutside:v,...N}=e,w=hf(xl,s),y=ff(s),{onClose:E}=w;return C.useEffect(()=>(document.addEventListener(Bm,E),()=>document.removeEventListener(Bm,E)),[E]),C.useEffect(()=>{if(w.trigger){const I=O=>{O.target?.contains(w.trigger)&&E()};return window.addEventListener("scroll",I,{capture:!0}),()=>window.removeEventListener("scroll",I,{capture:!0})}},[w.trigger,E]),r.jsx(Sl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:m,onPointerDownOutside:v,onFocusOutside:I=>I.preventDefault(),onDismiss:E,children:r.jsxs(_p,{"data-state":w.stateAttribute,...y,...N,ref:n,style:{...N.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(uA,{children:c}),r.jsx(cA,{scope:s,isInside:!0,children:r.jsx(FC,{id:w.contentId,role:"tooltip",children:f||c})})]})})});_v.displayName=xl;var Ov="TooltipArrow",fA=C.forwardRef((e,n)=>{const{__scopeTooltip:s,...c}=e,f=ff(s);return dA(Ov,s).isInside?null:r.jsx(Dp,{...f,...c,ref:n})});fA.displayName=Ov;function hA(e,n){const s=Math.abs(n.top-e.y),c=Math.abs(n.bottom-e.y),f=Math.abs(n.right-e.x),m=Math.abs(n.left-e.x);switch(Math.min(s,c,f,m)){case m:return"left";case f:return"right";case s:return"top";case c:return"bottom";default:throw new Error("unreachable")}}function mA(e,n,s=5){const c=[];switch(n){case"top":c.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":c.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":c.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":c.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return c}function pA(e){const{top:n,right:s,bottom:c,left:f}=e;return[{x:f,y:n},{x:s,y:n},{x:s,y:c},{x:f,y:c}]}function gA(e,n){const{x:s,y:c}=e;let f=!1;for(let m=0,v=n.length-1;m<n.length;v=m++){const N=n[m],w=n[v],y=N.x,E=N.y,I=w.x,O=w.y;E>c!=O>c&&s<(I-y)*(c-E)/(O-E)+y&&(f=!f)}return f}function xA(e){const n=e.slice();return n.sort((s,c)=>s.x<c.x?-1:s.x>c.x?1:s.y<c.y?-1:s.y>c.y?1:0),yA(n)}function yA(e){if(e.length<=1)return e.slice();const n=[];for(let c=0;c<e.length;c++){const f=e[c];for(;n.length>=2;){const m=n[n.length-1],v=n[n.length-2];if((m.x-v.x)*(f.y-v.y)>=(m.y-v.y)*(f.x-v.x))n.pop();else break}n.push(f)}n.pop();const s=[];for(let c=e.length-1;c>=0;c--){const f=e[c];for(;s.length>=2;){const m=s[s.length-1],v=s[s.length-2];if((m.x-v.x)*(f.y-v.y)>=(m.y-v.y)*(f.x-v.x))s.pop();else break}s.push(f)}return s.pop(),n.length===1&&s.length===1&&n[0].x===s[0].x&&n[0].y===s[0].y?n:n.concat(s)}var vA=jv,wA=Tv,bA=Rv,kv=_v;const Pv=vA,NA=wA,CA=bA,Mv=C.forwardRef(({className:e,sideOffset:n=4,...s},c)=>r.jsx(kv,{ref:c,sideOffset:n,className:Me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));Mv.displayName=kv.displayName;var Rl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},go=typeof window>"u"||"Deno"in globalThis;function qr(){}function EA(e,n){return typeof e=="function"?e(n):e}function zm(e){return typeof e=="number"&&e>=0&&e!==1/0}function Lv(e,n){return Math.max(e+(n||0)-Date.now(),0)}function Ti(e,n){return typeof e=="function"?e(n):e}function Bs(e,n){return typeof e=="function"?e(n):e}function Bg(e,n){const{type:s="all",exact:c,fetchStatus:f,predicate:m,queryKey:v,stale:N}=e;if(v){if(c){if(n.queryHash!==kp(v,n.options))return!1}else if(!Hc(n.queryKey,v))return!1}if(s!=="all"){const w=n.isActive();if(s==="active"&&!w||s==="inactive"&&w)return!1}return!(typeof N=="boolean"&&n.isStale()!==N||f&&f!==n.state.fetchStatus||m&&!m(n))}function Ug(e,n){const{exact:s,status:c,predicate:f,mutationKey:m}=e;if(m){if(!n.options.mutationKey)return!1;if(s){if(xo(n.options.mutationKey)!==xo(m))return!1}else if(!Hc(n.options.mutationKey,m))return!1}return!(c&&n.state.status!==c||f&&!f(n))}function kp(e,n){return(n?.queryKeyHashFn||xo)(e)}function xo(e){return JSON.stringify(e,(n,s)=>Vm(s)?Object.keys(s).sort().reduce((c,f)=>(c[f]=s[f],c),{}):s)}function Hc(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(s=>Hc(e[s],n[s])):!1}function Fv(e,n){if(e===n)return e;const s=zg(e)&&zg(n);if(s||Vm(e)&&Vm(n)){const c=s?e:Object.keys(e),f=c.length,m=s?n:Object.keys(n),v=m.length,N=s?[]:{},w=new Set(c);let y=0;for(let E=0;E<v;E++){const I=s?E:m[E];(!s&&w.has(I)||s)&&e[I]===void 0&&n[I]===void 0?(N[I]=void 0,y++):(N[I]=Fv(e[I],n[I]),N[I]===e[I]&&e[I]!==void 0&&y++)}return f===v&&y===f?e:N}return n}function Uu(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}function zg(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vm(e){if(!Vg(e))return!1;const n=e.constructor;if(n===void 0)return!0;const s=n.prototype;return!(!Vg(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Vg(e){return Object.prototype.toString.call(e)==="[object Object]"}function SA(e){return new Promise(n=>{setTimeout(n,e)})}function Hm(e,n,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,n):s.structuralSharing!==!1?Fv(e,n):n}function AA(e,n,s=0){const c=[...e,n];return s&&c.length>s?c.slice(1):c}function IA(e,n,s=0){const c=[n,...e];return s&&c.length>s?c.slice(0,-1):c}var Pp=Symbol();function Bv(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===Pp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Uv(e,n){return typeof e=="function"?e(...n):!!e}var jA=class extends Rl{#t;#e;#n;constructor(){super(),this.#n=e=>{if(!go&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#n=e,this.#e?.(),this.#e=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Mp=new jA,TA=class extends Rl{#t=!0;#e;#n;constructor(){super(),this.#n=e=>{if(!go&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#n=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#t}},zu=new TA;function Wm(){let e,n;const s=new Promise((f,m)=>{e=f,n=m});s.status="pending",s.catch(()=>{});function c(f){Object.assign(s,f),delete s.resolve,delete s.reject}return s.resolve=f=>{c({status:"fulfilled",value:f}),e(f)},s.reject=f=>{c({status:"rejected",reason:f}),n(f)},s}function RA(e){return Math.min(1e3*2**e,3e4)}function zv(e){return(e??"online")==="online"?zu.isOnline():!0}var Vv=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function cm(e){return e instanceof Vv}function Hv(e){let n=!1,s=0,c=!1,f;const m=Wm(),v=R=>{c||(O(new Vv(R)),e.abort?.())},N=()=>{n=!0},w=()=>{n=!1},y=()=>Mp.isFocused()&&(e.networkMode==="always"||zu.isOnline())&&e.canRun(),E=()=>zv(e.networkMode)&&e.canRun(),I=R=>{c||(c=!0,e.onSuccess?.(R),f?.(),m.resolve(R))},O=R=>{c||(c=!0,e.onError?.(R),f?.(),m.reject(R))},_=()=>new Promise(R=>{f=P=>{(c||y())&&R(P)},e.onPause?.()}).then(()=>{f=void 0,c||e.onContinue?.()}),k=()=>{if(c)return;let R;const P=s===0?e.initialPromise:void 0;try{R=P??e.fn()}catch(H){R=Promise.reject(H)}Promise.resolve(R).then(I).catch(H=>{if(c)return;const z=e.retry??(go?0:3),F=e.retryDelay??RA,Z=typeof F=="function"?F(s,H):F,W=z===!0||typeof z=="number"&&s<z||typeof z=="function"&&z(s,H);if(n||!W){O(H);return}s++,e.onFail?.(s,H),SA(Z).then(()=>y()?void 0:_()).then(()=>{n?O(H):k()})})};return{promise:m,cancel:v,continue:()=>(f?.(),m),cancelRetry:N,continueRetry:w,canStart:E,start:()=>(E()?k():_().then(k),m)}}var _A=e=>setTimeout(e,0);function DA(){let e=[],n=0,s=N=>{N()},c=N=>{N()},f=_A;const m=N=>{n?e.push(N):f(()=>{s(N)})},v=()=>{const N=e;e=[],N.length&&f(()=>{c(()=>{N.forEach(w=>{s(w)})})})};return{batch:N=>{let w;n++;try{w=N()}finally{n--,n||v()}return w},batchCalls:N=>(...w)=>{m(()=>{N(...w)})},schedule:m,setNotifyFunction:N=>{s=N},setBatchNotifyFunction:N=>{c=N},setScheduler:N=>{f=N}}}var wr=DA(),Wv=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zm(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(go?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},OA=class extends Wv{#t;#e;#n;#r;#s;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=kA(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const s=Hm(this.state.data,e,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),s}setState(e,n){this.#a({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(qr).catch(qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Bs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ti(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Lv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,n){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(y=>y.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,c=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},f=()=>{const w=Bv(this.options,n),E=(()=>{const I={client:this.#r,queryKey:this.queryKey,meta:this.meta};return c(I),I})();return this.#o=!1,this.options.persister?this.options.persister(w,E,this):w(E)},v=(()=>{const w={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:f};return c(w),w})();this.options.behavior?.onFetch(v,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==v.fetchOptions?.meta)&&this.#a({type:"fetch",meta:v.fetchOptions?.meta});const N=w=>{cm(w)&&w.silent||this.#a({type:"error",error:w}),cm(w)||(this.#n.config.onError?.(w,this),this.#n.config.onSettled?.(this.state.data,w,this)),this.scheduleGc()};return this.#s=Hv({initialPromise:n?.initialPromise,fn:v.fetchFn,abort:s.abort.bind(s),onSuccess:w=>{if(w===void 0){N(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(w)}catch(y){N(y);return}this.#n.config.onSuccess?.(w,this),this.#n.config.onSettled?.(w,this.state.error,this),this.scheduleGc()},onError:N,onFail:(w,y)=>{this.#a({type:"failed",failureCount:w,error:y})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:v.options.retry,retryDelay:v.options.retryDelay,networkMode:v.options.networkMode,canRun:()=>!0}),this.#s.start()}#a(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...$v(s.data,this.options),fetchMeta:e.meta??null};case"success":return this.#e=void 0,{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const c=e.error;return cm(c)&&c.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),wr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function $v(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zv(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function kA(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,s=n!==void 0,c=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:s?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var PA=class extends Rl{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,n,s){const c=n.queryKey,f=n.queryHash??kp(c,n);let m=this.get(f);return m||(m=new OA({client:e,queryKey:c,queryHash:f,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(c)}),this.add(m)),m}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#t.get(e.queryHash);n&&(e.destroy(),n===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>Bg(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>Bg(e,s)):n}notify(e){wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){wr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){wr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},MA=class extends Wv{#t;#e;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||Gv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#r({type:"continue"})};this.#n=Hv({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(f,m)=>{this.#r({type:"failed",failureCount:f,error:m})},onPause:()=>{this.#r({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const s=this.state.status==="pending",c=!this.#n.canStart();try{if(s)n();else{this.#r({type:"pending",variables:e,isPaused:c}),await this.#e.config.onMutate?.(e,this);const m=await this.options.onMutate?.(e);m!==this.state.context&&this.#r({type:"pending",context:m,variables:e,isPaused:c})}const f=await this.#n.start();return await this.#e.config.onSuccess?.(f,e,this.state.context,this),await this.options.onSuccess?.(f,e,this.state.context),await this.#e.config.onSettled?.(f,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(f,null,e,this.state.context),this.#r({type:"success",data:f}),f}catch(f){try{throw await this.#e.config.onError?.(f,e,this.state.context,this),await this.options.onError?.(f,e,this.state.context),await this.#e.config.onSettled?.(void 0,f,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,f,e,this.state.context),f}finally{this.#r({type:"error",error:f})}}finally{this.#e.runNext(this)}}#r(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wr.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function Gv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var LA=class extends Rl{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(e,n,s){const c=new MA({mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:s});return this.add(c),c}add(e){this.#t.add(e);const n=yu(e);if(typeof n=="string"){const s=this.#e.get(n);s?s.push(e):this.#e.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const n=yu(e);if(typeof n=="string"){const s=this.#e.get(n);if(s)if(s.length>1){const c=s.indexOf(e);c!==-1&&s.splice(c,1)}else s[0]===e&&this.#e.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=yu(e);if(typeof n=="string"){const c=this.#e.get(n)?.find(f=>f.state.status==="pending");return!c||c===e}else return!0}runNext(e){const n=yu(e);return typeof n=="string"?this.#e.get(n)?.find(c=>c!==e&&c.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){wr.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const n={exact:!0,...e};return this.getAll().find(s=>Ug(n,s))}findAll(e={}){return this.getAll().filter(n=>Ug(e,n))}notify(e){wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return wr.batch(()=>Promise.all(e.map(n=>n.continue().catch(qr))))}};function yu(e){return e.options.scope?.id}function Hg(e){return{onFetch:(n,s)=>{const c=n.options,f=n.fetchOptions?.meta?.fetchMore?.direction,m=n.state.data?.pages||[],v=n.state.data?.pageParams||[];let N={pages:[],pageParams:[]},w=0;const y=async()=>{let E=!1;const I=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(n.signal.aborted?E=!0:n.signal.addEventListener("abort",()=>{E=!0}),n.signal)})},O=Bv(n.options,n.fetchOptions),_=async(k,R,P)=>{if(E)return Promise.reject();if(R==null&&k.pages.length)return Promise.resolve(k);const z=(()=>{const te={client:n.client,queryKey:n.queryKey,pageParam:R,direction:P?"backward":"forward",meta:n.options.meta};return I(te),te})(),F=await O(z),{maxPages:Z}=n.options,W=P?IA:AA;return{pages:W(k.pages,F,Z),pageParams:W(k.pageParams,R,Z)}};if(f&&m.length){const k=f==="backward",R=k?FA:Wg,P={pages:m,pageParams:v},H=R(c,P);N=await _(P,H,k)}else{const k=e??m.length;do{const R=w===0?v[0]??c.initialPageParam:Wg(c,N);if(w>0&&R==null)break;N=await _(N,R),w++}while(w<k)}return N};n.options.persister?n.fetchFn=()=>n.options.persister?.(y,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},s):n.fetchFn=y}}}function Wg(e,{pages:n,pageParams:s}){const c=n.length-1;return n.length>0?e.getNextPageParam(n[c],n,s[c],s):void 0}function FA(e,{pages:n,pageParams:s}){return n.length>0?e.getPreviousPageParam?.(n[0],n,s[0],s):void 0}var BA=class{#t;#e;#n;#r;#s;#i;#o;#a;constructor(e={}){this.#t=e.queryCache||new PA,this.#e=e.mutationCache||new LA,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Mp.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=zu.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),s=this.#t.build(this,n),c=s.state.data;return c===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Ti(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(c))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:n,state:s})=>{const c=s.data;return[n,c]})}setQueryData(e,n,s){const c=this.defaultQueryOptions({queryKey:e}),m=this.#t.get(c.queryHash)?.state.data,v=EA(n,m);if(v!==void 0)return this.#t.build(this,c).setData(v,{...s,manual:!0})}setQueriesData(e,n,s){return wr.batch(()=>this.#t.findAll(e).map(({queryKey:c})=>[c,this.setQueryData(c,n,s)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state}removeQueries(e){const n=this.#t;wr.batch(()=>{n.findAll(e).forEach(s=>{n.remove(s)})})}resetQueries(e,n){const s=this.#t;return wr.batch(()=>(s.findAll(e).forEach(c=>{c.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const s={revert:!0,...n},c=wr.batch(()=>this.#t.findAll(e).map(f=>f.cancel(s)));return Promise.all(c).then(qr).catch(qr)}invalidateQueries(e,n={}){return wr.batch(()=>(this.#t.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const s={...n,cancelRefetch:n.cancelRefetch??!0},c=wr.batch(()=>this.#t.findAll(e).filter(f=>!f.isDisabled()&&!f.isStatic()).map(f=>{let m=f.fetch(void 0,s);return s.throwOnError||(m=m.catch(qr)),f.state.fetchStatus==="paused"?Promise.resolve():m}));return Promise.all(c).then(qr)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const s=this.#t.build(this,n);return s.isStaleByTime(Ti(n.staleTime,s))?s.fetch(n):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(qr).catch(qr)}fetchInfiniteQuery(e){return e.behavior=Hg(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(qr).catch(qr)}ensureInfiniteQueryData(e){return e.behavior=Hg(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zu.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(xo(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()],s={};return n.forEach(c=>{Hc(e,c.queryKey)&&Object.assign(s,c.defaultOptions)}),s}setMutationDefaults(e,n){this.#s.set(xo(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],s={};return n.forEach(c=>{Hc(e,c.mutationKey)&&Object.assign(s,c.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=kp(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Pp&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},UA=class extends Rl{constructor(e,n){super(),this.options=n,this.#t=e,this.#a=null,this.#o=Wm(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}#t;#e=void 0;#n=void 0;#r=void 0;#s;#i;#o;#a;#p;#f;#h;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),$g(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $m(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $m(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#b(),this.#e.removeObserver(this)}setOptions(e){const n=this.options,s=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Bs(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),n._defaulted&&!Uu(this.options,n)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const c=this.hasListeners();c&&Gg(this.#e,s,this.options,n)&&this.#u(),this.updateResult(),c&&(this.#e!==s||Bs(this.options.enabled,this.#e)!==Bs(n.enabled,this.#e)||Ti(this.options.staleTime,this.#e)!==Ti(n.staleTime,this.#e))&&this.#g();const f=this.#x();c&&(this.#e!==s||Bs(this.options.enabled,this.#e)!==Bs(n.enabled,this.#e)||f!==this.#l)&&this.#y(f)}getOptimisticResult(e){const n=this.#t.getQueryCache().build(this.#t,e),s=this.createResult(n,e);return VA(this,s)&&(this.#r=s,this.#i=this.options,this.#s=this.#e.state),s}getCurrentResult(){return this.#r}trackResult(e,n){return new Proxy(e,{get:(s,c)=>(this.trackProp(c),n?.(c),Reflect.get(s,c))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#t.defaultQueryOptions(e),s=this.#t.getQueryCache().build(this.#t,n);return s.fetch().then(()=>this.createResult(s,n))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(e){this.#N();let n=this.#e.fetch(this.options,e);return e?.throwOnError||(n=n.catch(qr)),n}#g(){this.#w();const e=Ti(this.options.staleTime,this.#e);if(go||this.#r.isStale||!zm(e))return;const s=Lv(this.#r.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},s)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#l=e,!(go||Bs(this.options.enabled,this.#e)===!1||!zm(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Mp.isFocused())&&this.#u()},this.#l))}#v(){this.#g(),this.#y(this.#x())}#w(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,n){const s=this.#e,c=this.options,f=this.#r,m=this.#s,v=this.#i,w=e!==s?e.state:this.#n,{state:y}=e;let E={...y},I=!1,O;if(n._optimisticResults){const J=this.hasListeners(),se=!J&&$g(e,n),fe=J&&Gg(e,s,n,c);(se||fe)&&(E={...E,...$v(y.data,e.options)}),n._optimisticResults==="isRestoring"&&(E.fetchStatus="idle")}let{error:_,errorUpdatedAt:k,status:R}=E;O=E.data;let P=!1;if(n.placeholderData!==void 0&&O===void 0&&R==="pending"){let J;f?.isPlaceholderData&&n.placeholderData===v?.placeholderData?(J=f.data,P=!0):J=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,J!==void 0&&(R="success",O=Hm(f?.data,J,n),I=!0)}if(n.select&&O!==void 0&&!P)if(f&&O===m?.data&&n.select===this.#p)O=this.#f;else try{this.#p=n.select,O=n.select(O),O=Hm(f?.data,O,n),this.#f=O,this.#a=null}catch(J){this.#a=J}this.#a&&(_=this.#a,O=this.#f,k=Date.now(),R="error");const H=E.fetchStatus==="fetching",z=R==="pending",F=R==="error",Z=z&&H,W=O!==void 0,G={status:R,fetchStatus:E.fetchStatus,isPending:z,isSuccess:R==="success",isError:F,isInitialLoading:Z,isLoading:Z,data:O,dataUpdatedAt:E.dataUpdatedAt,error:_,errorUpdatedAt:k,failureCount:E.fetchFailureCount,failureReason:E.fetchFailureReason,errorUpdateCount:E.errorUpdateCount,isFetched:E.dataUpdateCount>0||E.errorUpdateCount>0,isFetchedAfterMount:E.dataUpdateCount>w.dataUpdateCount||E.errorUpdateCount>w.errorUpdateCount,isFetching:H,isRefetching:H&&!z,isLoadingError:F&&!W,isPaused:E.fetchStatus==="paused",isPlaceholderData:I,isRefetchError:F&&W,isStale:Lp(e,n),refetch:this.refetch,promise:this.#o,isEnabled:Bs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const J=Ee=>{G.status==="error"?Ee.reject(G.error):G.data!==void 0&&Ee.resolve(G.data)},se=()=>{const Ee=this.#o=G.promise=Wm();J(Ee)},fe=this.#o;switch(fe.status){case"pending":e.queryHash===s.queryHash&&J(fe);break;case"fulfilled":(G.status==="error"||G.data!==fe.value)&&se();break;case"rejected":(G.status!=="error"||G.error!==fe.reason)&&se();break}}return G}updateResult(){const e=this.#r,n=this.createResult(this.#e,this.options);if(this.#s=this.#e.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#e),Uu(n,e))return;this.#r=n;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:c}=this.options,f=typeof c=="function"?c():c;if(f==="all"||!f&&!this.#m.size)return!0;const m=new Set(f??this.#m);return this.options.throwOnError&&m.add("error"),Object.keys(this.#r).some(v=>{const N=v;return this.#r[N]!==e[N]&&m.has(N)})};this.#C({listeners:s()})}#N(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const n=this.#e;this.#e=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#C(e){wr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function zA(e,n){return Bs(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function $g(e,n){return zA(e,n)||e.state.data!==void 0&&$m(e,n,n.refetchOnMount)}function $m(e,n,s){if(Bs(n.enabled,e)!==!1&&Ti(n.staleTime,e)!=="static"){const c=typeof s=="function"?s(e):s;return c==="always"||c!==!1&&Lp(e,n)}return!1}function Gg(e,n,s,c){return(e!==n||Bs(c.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Lp(e,s)}function Lp(e,n){return Bs(n.enabled,e)!==!1&&e.isStaleByTime(Ti(n.staleTime,e))}function VA(e,n){return!Uu(e.getCurrentResult(),n)}var HA=class extends Rl{#t;#e=void 0;#n;#r;constructor(n,s){super(),this.#t=n,this.setOptions(s),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const s=this.options;this.options=this.#t.defaultMutationOptions(n),Uu(this.options,s)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&xo(s.mutationKey)!==xo(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,s){return this.#r=s,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??Gv();this.#e={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){wr.batch(()=>{if(this.#r&&this.hasListeners()){const s=this.#e.variables,c=this.#e.context;n?.type==="success"?(this.#r.onSuccess?.(n.data,s,c),this.#r.onSettled?.(n.data,null,s,c)):n?.type==="error"&&(this.#r.onError?.(n.error,s,c),this.#r.onSettled?.(void 0,n.error,s,c))}this.listeners.forEach(s=>{s(this.#e)})})}},Xv=C.createContext(void 0),Fp=e=>{const n=C.useContext(Xv);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},WA=({client:e,children:n})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Xv.Provider,{value:e,children:n})),Yv=C.createContext(!1),$A=()=>C.useContext(Yv);Yv.Provider;function GA(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var XA=C.createContext(GA()),YA=()=>C.useContext(XA),ZA=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},qA=e=>{C.useEffect(()=>{e.clearReset()},[e])},QA=({result:e,errorResetBoundary:n,throwOnError:s,query:c,suspense:f})=>e.isError&&!n.isReset()&&!e.isFetching&&c&&(f&&e.data===void 0||Uv(s,[e.error,c])),KA=e=>{if(e.suspense){const n=c=>c==="static"?c:Math.max(c??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...c)=>n(s(...c)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},JA=(e,n)=>e.isLoading&&e.isFetching&&!n,e4=(e,n)=>e?.suspense&&n.isPending,Xg=(e,n,s)=>n.fetchOptimistic(e).catch(()=>{s.clearReset()});function t4(e,n,s){const c=$A(),f=YA(),m=Fp(),v=m.defaultQueryOptions(e);m.getDefaultOptions().queries?._experimental_beforeQuery?.(v),v._optimisticResults=c?"isRestoring":"optimistic",KA(v),ZA(v,f),qA(f);const N=!m.getQueryCache().get(v.queryHash),[w]=C.useState(()=>new n(m,v)),y=w.getOptimisticResult(v),E=!c&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(I=>{const O=E?w.subscribe(wr.batchCalls(I)):qr;return w.updateResult(),O},[w,E]),()=>w.getCurrentResult(),()=>w.getCurrentResult()),C.useEffect(()=>{w.setOptions(v)},[v,w]),e4(v,y))throw Xg(v,w,f);if(QA({result:y,errorResetBoundary:f,throwOnError:v.throwOnError,query:m.getQueryCache().get(v.queryHash),suspense:v.suspense}))throw y.error;return m.getDefaultOptions().queries?._experimental_afterQuery?.(v,y),v.experimental_prefetchInRender&&!go&&JA(y,c)&&(N?Xg(v,w,f):m.getQueryCache().get(v.queryHash)?.promise)?.catch(qr).finally(()=>{w.updateResult()}),v.notifyOnChangeProps?y:w.trackResult(y)}function n4(e,n){return t4(e,UA)}function r4(e,n){const s=Fp(),[c]=C.useState(()=>new HA(s,e));C.useEffect(()=>{c.setOptions(e)},[c,e]);const f=C.useSyncExternalStore(C.useCallback(v=>c.subscribe(wr.batchCalls(v)),[c]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m=C.useCallback((v,N)=>{c.mutate(v,N).catch(qr)},[c]);if(f.error&&Uv(c.options.throwOnError,[f.error]))throw f.error;return{...f,mutate:m,mutateAsync:f.mutate}}function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},Wc.apply(this,arguments)}var Si;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Si||(Si={}));const Yg="popstate";function s4(e){e===void 0&&(e={});function n(c,f){let{pathname:m,search:v,hash:N}=c.location;return Gm("",{pathname:m,search:v,hash:N},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function s(c,f){return typeof f=="string"?f:qv(f)}return i4(n,s,null,e)}function ur(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Zv(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function a4(){return Math.random().toString(36).substr(2,8)}function Zg(e,n){return{usr:e.state,key:e.key,idx:n}}function Gm(e,n,s,c){return s===void 0&&(s=null),Wc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?_l(n):n,{state:s,key:n&&n.key||c||a4()})}function qv(e){let{pathname:n="/",search:s="",hash:c=""}=e;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function _l(e){let n={};if(e){let s=e.indexOf("#");s>=0&&(n.hash=e.substr(s),e=e.substr(0,s));let c=e.indexOf("?");c>=0&&(n.search=e.substr(c),e=e.substr(0,c)),e&&(n.pathname=e)}return n}function i4(e,n,s,c){c===void 0&&(c={});let{window:f=document.defaultView,v5Compat:m=!1}=c,v=f.history,N=Si.Pop,w=null,y=E();y==null&&(y=0,v.replaceState(Wc({},v.state,{idx:y}),""));function E(){return(v.state||{idx:null}).idx}function I(){N=Si.Pop;let P=E(),H=P==null?null:P-y;y=P,w&&w({action:N,location:R.location,delta:H})}function O(P,H){N=Si.Push;let z=Gm(R.location,P,H);y=E()+1;let F=Zg(z,y),Z=R.createHref(z);try{v.pushState(F,"",Z)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;f.location.assign(Z)}m&&w&&w({action:N,location:R.location,delta:1})}function _(P,H){N=Si.Replace;let z=Gm(R.location,P,H);y=E();let F=Zg(z,y),Z=R.createHref(z);v.replaceState(F,"",Z),m&&w&&w({action:N,location:R.location,delta:0})}function k(P){let H=f.location.origin!=="null"?f.location.origin:f.location.href,z=typeof P=="string"?P:qv(P);return z=z.replace(/ $/,"%20"),ur(H,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,H)}let R={get action(){return N},get location(){return e(f,v)},listen(P){if(w)throw new Error("A history only accepts one active listener");return f.addEventListener(Yg,I),w=P,()=>{f.removeEventListener(Yg,I),w=null}},createHref(P){return n(f,P)},createURL:k,encodeLocation(P){let H=k(P);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:O,replace:_,go(P){return v.go(P)}};return R}var qg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qg||(qg={}));function o4(e,n,s){return s===void 0&&(s="/"),l4(e,n,s)}function l4(e,n,s,c){let f=typeof n=="string"?_l(n):n,m=Jv(f.pathname||"/",s);if(m==null)return null;let v=Qv(e);c4(v);let N=null;for(let w=0;N==null&&w<v.length;++w){let y=b4(m);N=y4(v[w],y)}return N}function Qv(e,n,s,c){n===void 0&&(n=[]),s===void 0&&(s=[]),c===void 0&&(c="");let f=(m,v,N)=>{let w={relativePath:N===void 0?m.path||"":N,caseSensitive:m.caseSensitive===!0,childrenIndex:v,route:m};w.relativePath.startsWith("/")&&(ur(w.relativePath.startsWith(c),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(c.length));let y=mo([c,w.relativePath]),E=s.concat(w);m.children&&m.children.length>0&&(ur(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Qv(m.children,n,E,y)),!(m.path==null&&!m.index)&&n.push({path:y,score:g4(y,m.index),routesMeta:E})};return e.forEach((m,v)=>{var N;if(m.path===""||!((N=m.path)!=null&&N.includes("?")))f(m,v);else for(let w of Kv(m.path))f(m,v,w)}),n}function Kv(e){let n=e.split("/");if(n.length===0)return[];let[s,...c]=n,f=s.endsWith("?"),m=s.replace(/\?$/,"");if(c.length===0)return f?[m,""]:[m];let v=Kv(c.join("/")),N=[];return N.push(...v.map(w=>w===""?m:[m,w].join("/"))),f&&N.push(...v),N.map(w=>e.startsWith("/")&&w===""?"/":w)}function c4(e){e.sort((n,s)=>n.score!==s.score?s.score-n.score:x4(n.routesMeta.map(c=>c.childrenIndex),s.routesMeta.map(c=>c.childrenIndex)))}const d4=/^:[\w-]+$/,u4=3,f4=2,h4=1,m4=10,p4=-2,Qg=e=>e==="*";function g4(e,n){let s=e.split("/"),c=s.length;return s.some(Qg)&&(c+=p4),n&&(c+=f4),s.filter(f=>!Qg(f)).reduce((f,m)=>f+(d4.test(m)?u4:m===""?h4:m4),c)}function x4(e,n){return e.length===n.length&&e.slice(0,-1).every((c,f)=>c===n[f])?e[e.length-1]-n[n.length-1]:0}function y4(e,n,s){let{routesMeta:c}=e,f={},m="/",v=[];for(let N=0;N<c.length;++N){let w=c[N],y=N===c.length-1,E=m==="/"?n:n.slice(m.length)||"/",I=v4({path:w.relativePath,caseSensitive:w.caseSensitive,end:y},E),O=w.route;if(!I)return null;Object.assign(f,I.params),v.push({params:f,pathname:mo([m,I.pathname]),pathnameBase:S4(mo([m,I.pathnameBase])),route:O}),I.pathnameBase!=="/"&&(m=mo([m,I.pathnameBase]))}return v}function v4(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,c]=w4(e.path,e.caseSensitive,e.end),f=n.match(s);if(!f)return null;let m=f[0],v=m.replace(/(.)\/+$/,"$1"),N=f.slice(1);return{params:c.reduce((y,E,I)=>{let{paramName:O,isOptional:_}=E;if(O==="*"){let R=N[I]||"";v=m.slice(0,m.length-R.length).replace(/(.)\/+$/,"$1")}const k=N[I];return _&&!k?y[O]=void 0:y[O]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:m,pathnameBase:v,pattern:e}}function w4(e,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Zv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let c=[],f="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,N,w)=>(c.push({paramName:N,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(c.push({paramName:"*"}),f+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?f+="\\/*$":e!==""&&e!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,n?void 0:"i"),c]}function b4(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Zv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Jv(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,c=e.charAt(s);return c&&c!=="/"?null:e.slice(s)||"/"}function N4(e,n){n===void 0&&(n="/");let{pathname:s,search:c="",hash:f=""}=typeof e=="string"?_l(e):e;return{pathname:s?s.startsWith("/")?s:C4(s,n):n,search:A4(c),hash:I4(f)}}function C4(e,n){let s=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(f=>{f===".."?s.length>1&&s.pop():f!=="."&&s.push(f)}),s.length>1?s.join("/"):"/"}function dm(e,n,s,c){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E4(e){return e.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function ew(e,n){let s=E4(e);return n?s.map((c,f)=>f===s.length-1?c.pathname:c.pathnameBase):s.map(c=>c.pathnameBase)}function tw(e,n,s,c){c===void 0&&(c=!1);let f;typeof e=="string"?f=_l(e):(f=Wc({},e),ur(!f.pathname||!f.pathname.includes("?"),dm("?","pathname","search",f)),ur(!f.pathname||!f.pathname.includes("#"),dm("#","pathname","hash",f)),ur(!f.search||!f.search.includes("#"),dm("#","search","hash",f)));let m=e===""||f.pathname==="",v=m?"/":f.pathname,N;if(v==null)N=s;else{let I=n.length-1;if(!c&&v.startsWith("..")){let O=v.split("/");for(;O[0]==="..";)O.shift(),I-=1;f.pathname=O.join("/")}N=I>=0?n[I]:"/"}let w=N4(f,N),y=v&&v!=="/"&&v.endsWith("/"),E=(m||v===".")&&s.endsWith("/");return!w.pathname.endsWith("/")&&(y||E)&&(w.pathname+="/"),w}const mo=e=>e.join("/").replace(/\/\/+/g,"/"),S4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),A4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,I4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function j4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nw=["post","put","patch","delete"];new Set(nw);const T4=["get",...nw];new Set(T4);function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},$c.apply(this,arguments)}const Bp=C.createContext(null),R4=C.createContext(null),Jc=C.createContext(null),mf=C.createContext(null),So=C.createContext({outlet:null,matches:[],isDataRoute:!1}),rw=C.createContext(null);function ed(){return C.useContext(mf)!=null}function Ao(){return ed()||ur(!1),C.useContext(mf).location}function sw(e){C.useContext(Jc).static||C.useLayoutEffect(e)}function Na(){let{isDataRoute:e}=C.useContext(So);return e?H4():_4()}function _4(){ed()||ur(!1);let e=C.useContext(Bp),{basename:n,future:s,navigator:c}=C.useContext(Jc),{matches:f}=C.useContext(So),{pathname:m}=Ao(),v=JSON.stringify(ew(f,s.v7_relativeSplatPath)),N=C.useRef(!1);return sw(()=>{N.current=!0}),C.useCallback(function(y,E){if(E===void 0&&(E={}),!N.current)return;if(typeof y=="number"){c.go(y);return}let I=tw(y,JSON.parse(v),m,E.relative==="path");e==null&&n!=="/"&&(I.pathname=I.pathname==="/"?n:mo([n,I.pathname])),(E.replace?c.replace:c.push)(I,E.state,E)},[n,c,v,m,e])}function D4(e,n){return O4(e,n)}function O4(e,n,s,c){ed()||ur(!1);let{navigator:f}=C.useContext(Jc),{matches:m}=C.useContext(So),v=m[m.length-1],N=v?v.params:{};v&&v.pathname;let w=v?v.pathnameBase:"/";v&&v.route;let y=Ao(),E;if(n){var I;let P=typeof n=="string"?_l(n):n;w==="/"||(I=P.pathname)!=null&&I.startsWith(w)||ur(!1),E=P}else E=y;let O=E.pathname||"/",_=O;if(w!=="/"){let P=w.replace(/^\//,"").split("/");_="/"+O.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=o4(e,{pathname:_}),R=F4(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},N,P.params),pathname:mo([w,f.encodeLocation?f.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?w:mo([w,f.encodeLocation?f.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),m,s,c);return n&&R?C.createElement(mf.Provider,{value:{location:$c({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Si.Pop}},R):R}function k4(){let e=V4(),n=j4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,f={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},n),s?C.createElement("pre",{style:f},s):null,null)}const P4=C.createElement(k4,null);class M4 extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?C.createElement(So.Provider,{value:this.props.routeContext},C.createElement(rw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L4(e){let{routeContext:n,match:s,children:c}=e,f=C.useContext(Bp);return f&&f.static&&f.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=s.route.id),C.createElement(So.Provider,{value:n},c)}function F4(e,n,s,c){var f;if(n===void 0&&(n=[]),s===void 0&&(s=null),c===void 0&&(c=null),e==null){var m;if(!s)return null;if(s.errors)e=s.matches;else if((m=c)!=null&&m.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let v=e,N=(f=s)==null?void 0:f.errors;if(N!=null){let E=v.findIndex(I=>I.route.id&&N?.[I.route.id]!==void 0);E>=0||ur(!1),v=v.slice(0,Math.min(v.length,E+1))}let w=!1,y=-1;if(s&&c&&c.v7_partialHydration)for(let E=0;E<v.length;E++){let I=v[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(y=E),I.route.id){let{loaderData:O,errors:_}=s,k=I.route.loader&&O[I.route.id]===void 0&&(!_||_[I.route.id]===void 0);if(I.route.lazy||k){w=!0,y>=0?v=v.slice(0,y+1):v=[v[0]];break}}}return v.reduceRight((E,I,O)=>{let _,k=!1,R=null,P=null;s&&(_=N&&I.route.id?N[I.route.id]:void 0,R=I.route.errorElement||P4,w&&(y<0&&O===0?(W4("route-fallback"),k=!0,P=null):y===O&&(k=!0,P=I.route.hydrateFallbackElement||null)));let H=n.concat(v.slice(0,O+1)),z=()=>{let F;return _?F=R:k?F=P:I.route.Component?F=C.createElement(I.route.Component,null):I.route.element?F=I.route.element:F=E,C.createElement(L4,{match:I,routeContext:{outlet:E,matches:H,isDataRoute:s!=null},children:F})};return s&&(I.route.ErrorBoundary||I.route.errorElement||O===0)?C.createElement(M4,{location:s.location,revalidation:s.revalidation,component:R,error:_,children:z(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):z()},null)}var aw=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(aw||{}),iw=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(iw||{});function B4(e){let n=C.useContext(Bp);return n||ur(!1),n}function U4(e){let n=C.useContext(R4);return n||ur(!1),n}function z4(e){let n=C.useContext(So);return n||ur(!1),n}function ow(e){let n=z4(),s=n.matches[n.matches.length-1];return s.route.id||ur(!1),s.route.id}function V4(){var e;let n=C.useContext(rw),s=U4(),c=ow();return n!==void 0?n:(e=s.errors)==null?void 0:e[c]}function H4(){let{router:e}=B4(aw.UseNavigateStable),n=ow(iw.UseNavigateStable),s=C.useRef(!1);return sw(()=>{s.current=!0}),C.useCallback(function(f,m){m===void 0&&(m={}),s.current&&(typeof f=="number"?e.navigate(f):e.navigate(f,$c({fromRouteId:n},m)))},[e,n])}const Kg={};function W4(e,n,s){Kg[e]||(Kg[e]=!0)}function $4(e,n){e?.v7_startTransition,e?.v7_relativeSplatPath}function Fc(e){let{to:n,replace:s,state:c,relative:f}=e;ed()||ur(!1);let{future:m,static:v}=C.useContext(Jc),{matches:N}=C.useContext(So),{pathname:w}=Ao(),y=Na(),E=tw(n,ew(N,m.v7_relativeSplatPath),w,f==="path"),I=JSON.stringify(E);return C.useEffect(()=>y(JSON.parse(I),{replace:s,state:c,relative:f}),[y,I,f,s,c]),null}function gn(e){ur(!1)}function G4(e){let{basename:n="/",children:s=null,location:c,navigationType:f=Si.Pop,navigator:m,static:v=!1,future:N}=e;ed()&&ur(!1);let w=n.replace(/^\/*/,"/"),y=C.useMemo(()=>({basename:w,navigator:m,static:v,future:$c({v7_relativeSplatPath:!1},N)}),[w,N,m,v]);typeof c=="string"&&(c=_l(c));let{pathname:E="/",search:I="",hash:O="",state:_=null,key:k="default"}=c,R=C.useMemo(()=>{let P=Jv(E,w);return P==null?null:{location:{pathname:P,search:I,hash:O,state:_,key:k},navigationType:f}},[w,E,I,O,_,k,f]);return R==null?null:C.createElement(Jc.Provider,{value:y},C.createElement(mf.Provider,{children:s,value:R}))}function X4(e){let{children:n,location:s}=e;return D4(Xm(n),s)}new Promise(()=>{});function Xm(e,n){n===void 0&&(n=[]);let s=[];return C.Children.forEach(e,(c,f)=>{if(!C.isValidElement(c))return;let m=[...n,f];if(c.type===C.Fragment){s.push.apply(s,Xm(c.props.children,m));return}c.type!==gn&&ur(!1),!c.props.index||!c.props.children||ur(!1);let v={id:c.props.id||m.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(v.children=Xm(c.props.children,m)),s.push(v)}),s}function Ym(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,s)=>{let c=e[s];return n.concat(Array.isArray(c)?c.map(f=>[s,f]):[[s,c]])},[]))}function Y4(e,n){let s=Ym(e);return n&&n.forEach((c,f)=>{s.has(f)||n.getAll(f).forEach(m=>{s.append(f,m)})}),s}const Z4="6";try{window.__reactRouterVersion=Z4}catch{}const q4="startTransition",Jg=mp[q4];function Q4(e){let{basename:n,children:s,future:c,window:f}=e,m=C.useRef();m.current==null&&(m.current=s4({window:f,v5Compat:!0}));let v=m.current,[N,w]=C.useState({action:v.action,location:v.location}),{v7_startTransition:y}=c||{},E=C.useCallback(I=>{y&&Jg?Jg(()=>w(I)):w(I)},[w,y]);return C.useLayoutEffect(()=>v.listen(E),[v,E]),C.useEffect(()=>$4(c),[c]),C.createElement(G4,{basename:n,children:s,location:N.location,navigationType:N.action,navigator:v,future:c})}var ex;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ex||(ex={}));var tx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(tx||(tx={}));function lw(e){let n=C.useRef(Ym(e)),s=C.useRef(!1),c=Ao(),f=C.useMemo(()=>Y4(c.search,s.current?null:n.current),[c.search]),m=Na(),v=C.useCallback((N,w)=>{const y=Ym(typeof N=="function"?N(f):N);s.current=!0,m("?"+y,w)},[m,f]);return[f,v]}const Zm="https://bbaec9682261.ngrok-free.app";function K4(){const e=Zm;return e.includes("localhost")||e.includes("127.0.0.1")?`Cannot connect to the backend server at ${e}. Please ensure:
1. The backend server is running
2. The server is accessible at ${e}
3. Check your .env file and ensure VITE_API_URL is set correctly`:`Cannot connect to the backend server at ${e}. Please check:
1. The server is running and accessible
2. Your network connection
3. The VITE_API_URL in your .env file is correct`}const cw=C.createContext(void 0),nx=()=>{if(typeof window>"u")return null;try{const e=localStorage.getItem("hrms_user");return e?JSON.parse(e):null}catch{return null}},J4=({children:e})=>{const[n,s]=C.useState(()=>nx()),[c,f]=C.useState(!0);C.useEffect(()=>{(async()=>{const w=nx();if(!w||!w.employeeId){f(!1);return}try{const y=await fetch(`${Zm}/employees?employeeId=${w.employeeId}`);if(y.ok){const I=(await y.json()).data?.[0];if(I&&I.status==="inactive"){s(null),localStorage.removeItem("hrms_user"),localStorage.removeItem("hrms_token"),f(!1);return}}}catch(y){console.error("Error verifying user status:",y)}s(w),f(!1)})()},[]);const m=async(N,w)=>{try{const y=await fetch(`${Zm}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({identifier:N,password:w})}),E=await y.json().catch(()=>({}));if(!y.ok)return{success:!1,message:E?.message||"Invalid credentials"};const I={id:String(E.user.id),username:E.user.username,role:E.user.role,employeeId:E.user.employeeId,fullName:E.user.fullName,email:E.user.email,token:E.token,passwordResetRequired:E.user.passwordResetRequired||!1};return s(I),localStorage.setItem("hrms_user",JSON.stringify(I)),localStorage.setItem("hrms_token",E.token),{success:!0,user:I}}catch(y){return console.error("Login error",y),{success:!1,message:y instanceof TypeError&&y.message.includes("fetch")?K4():"Unable to reach the server. Please try again."}}},v=()=>{s(null),localStorage.removeItem("hrms_user"),localStorage.removeItem("hrms_token")};return r.jsx(cw.Provider,{value:{user:n,login:m,logout:v,isAuthenticated:!!n,isLoading:c},children:e})},Vs=()=>{const e=C.useContext(cw);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},qn=({children:e,allowedRoles:n})=>{const{user:s,isAuthenticated:c,isLoading:f,logout:m}=Vs(),[v,N]=Oe.useState(!0),[w,y]=Oe.useState(null);if(Oe.useEffect(()=>{s&&c?(async()=>{if(!s?.employeeId){N(!1);return}try{const _=await fetch(`https://bbaec9682261.ngrok-free.app/employees?employeeId=${s.employeeId}`);if(_.ok){const R=(await _.json()).data?.[0];if(R&&(y(R.status),R.status==="inactive")){m(),N(!1);return}}}catch(O){console.error("Error checking user status:",O)}N(!1)})():N(!1)},[s,c,m]),f||v)return r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:r.jsx("div",{className:"text-muted-foreground",children:"Loading..."})});if(!c)return r.jsx(Fc,{to:"/login",replace:!0});if(w==="inactive")return r.jsx(Fc,{to:"/login",replace:!0});const E=s?.role==="admin"?"/dashboard":"/employee/dashboard";return n&&s&&!n.includes(s.role)?r.jsx(Fc,{to:E,replace:!0}):r.jsx(r.Fragment,{children:e})},Up=Eo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Se=C.forwardRef(({className:e,variant:n,size:s,asChild:c=!1,...f},m)=>{const v=c?El:"button";return r.jsx(v,{className:Me(Up({variant:n,size:s,className:e})),ref:m,...f})});Se.displayName="Button";const Te=C.forwardRef(({className:e,type:n,...s},c)=>r.jsx("input",{type:n,className:Me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:c,...s}));Te.displayName="Input";var eI="Label",dw=C.forwardRef((e,n)=>r.jsx(jt.label,{...e,ref:n,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));dw.displayName=eI;var uw=dw;const tI=Eo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gt=C.forwardRef(({className:e,...n},s)=>r.jsx(uw,{ref:s,className:Me(tI(),e),...n}));gt.displayName=uw.displayName;const nI="/assets/background_image-COXU37PQ.png",fw="/assets/logo-IG4AvUhu.png",rI=()=>{const[e,n]=C.useState(""),[s,c]=C.useState(""),[f,m]=C.useState(""),[v,N]=C.useState(!1),[w,y]=C.useState({employeeId:"",email:"",password:""}),[E,I]=C.useState(!1),{login:O}=Vs(),_=Na(),{toast:k}=Un(),R=()=>{const H={employeeId:"",email:"",password:""};return e.trim()?/^\d{2}-[A-Z]{2,4}-[A-Z0-9]{1,10}$/i.test(e.trim())||(H.employeeId="Invalid Employee ID format. Expected: YY-GPC-XXXXX (e.g., 25-GPC-00008 or 25-GPC-GRD01)"):H.employeeId="This field is required",s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim())||(H.email="Invalid email format"):H.email="This field is required",f.trim()||(H.password="This field is required"),y(H),!Object.values(H).some(Boolean)},P=async H=>{if(H.preventDefault(),!R())return;I(!0);const z=await O(s||e,f);if(I(!1),z.success){if(z.user?.passwordResetRequired){k({variant:"default",title:"Password Reset Required",description:"Please change your password to continue."}),_("/profile?changePassword=true");return}let F="/employee/dashboard";z.user?.role==="admin"?F="/dashboard":z.user?.role==="guard"&&(F="/guard/dashboard"),k({title:"Login Successful",description:"Welcome to HRMS"}),_(F)}else k({variant:"destructive",title:"Login Failed",description:z.message||"Invalid credentials"})};return C.useEffect(()=>{if(!Object.values(w).some(Boolean))return;const H=setTimeout(()=>{y({employeeId:"",email:"",password:""})},5e3);return()=>clearTimeout(H)},[w]),r.jsx("div",{className:"min-h-screen flex items-center justify-start p-4 lg:p-12",style:{backgroundImage:`url(${nI})`,backgroundSize:"cover",backgroundPosition:"center"},children:r.jsxs("div",{className:"w-full max-w-sm p-6 bg-card/95 backdrop-blur-sm rounded-xl shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full overflow-hidden border-4 border-primary/80 shadow-lg bg-card",children:r.jsx("img",{src:fw,alt:"The Great Plebeian College",className:"w-full h-full object-cover"})}),r.jsx("h1",{className:"text-xl font-semibold text-foreground mb-2",children:"The Great Plebeian College"}),r.jsx("h2",{className:"text-lg font-medium text-foreground",children:"Sign In"})]}),r.jsxs("form",{onSubmit:P,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"employeeId",className:"text-foreground",children:"Employee ID"}),r.jsx(Te,{id:"employeeId",type:"text",placeholder:"YY-GPC-XXXXX",value:e,onChange:H=>{n(H.target.value),w.employeeId&&y(z=>({...z,employeeId:""}))},className:"bg-card/50","aria-invalid":!!w.employeeId,"aria-describedby":"employeeId-error"}),w.employeeId&&r.jsxs("p",{id:"employeeId-error",className:"text-xs text-destructive flex items-center gap-1",children:[r.jsx(ho,{className:"h-3.5 w-3.5"}),w.employeeId]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"email",className:"text-foreground",children:"Email"}),r.jsx(Te,{id:"email",type:"email",placeholder:"Enter your email",value:s,onChange:H=>{c(H.target.value),w.email&&y(z=>({...z,email:""}))},className:"bg-card/50","aria-invalid":!!w.email,"aria-describedby":"email-error"}),w.email&&r.jsxs("p",{id:"email-error",className:"text-xs text-destructive flex items-center gap-1",children:[r.jsx(ho,{className:"h-3.5 w-3.5"}),w.email]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"password",className:"text-foreground",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Te,{id:"password",type:v?"text":"password",placeholder:"Enter your password",value:f,onChange:H=>{m(H.target.value),w.password&&y(z=>({...z,password:""}))},className:"bg-card/50 pr-10","aria-invalid":!!w.password,"aria-describedby":"password-error"}),r.jsx("button",{type:"button",onClick:()=>N(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:v?r.jsx(_m,{className:"h-4 w-4"}):r.jsx(Ei,{className:"h-4 w-4"})})]}),w.password&&r.jsxs("p",{id:"password-error",className:"text-xs text-destructive flex items-center gap-1",children:[r.jsx(ho,{className:"h-3.5 w-3.5"}),w.password]})]}),r.jsx(Se,{type:"submit",className:"w-full bg-primary hover:bg-primary/90",disabled:E,children:E?"Signing In...":"Sign In"})]})]})})};async function St(e,n={}){const s=new Headers(n.headers);return s.set("ngrok-skip-browser-warning","true"),n.body&&!s.has("Content-Type")&&s.set("Content-Type","application/json"),fetch(e,{...n,headers:s})}const sI=()=>{const[e,n]=C.useState(""),{toast:s}=Un(),c=Na(),f=async m=>{if(m.preventDefault(),!e.trim()){s({variant:"destructive",title:"Email required",description:"Please enter the email associated with your account."});return}try{const N=await St("https://bbaec9682261.ngrok-free.app/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),w=await N.json();if(!N.ok)throw new Error(w.message||"Failed to send reset link");s({title:"Check your inbox",description:w.message||"If an account with that email exists, a password reset link has been sent."})}catch(v){console.error("Forgot password error",v),s({variant:"destructive",title:"Error",description:v instanceof Error?v.message:"Unable to send reset link. Please try again."})}};return r.jsx("div",{className:"min-h-screen bg-[#d7ecff] flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-[#d7ecff] shadow-[0_10px_40px_rgba(0,0,0,0.05)] border border-[#bcd7ff] px-6 py-16 lg:px-16",children:[r.jsx("div",{className:"flex items-center justify-center gap-8 text-[#0a1f4d] font-semibold mb-10",children:[1,2,3].map((m,v)=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${m===1?"bg-[#001a5c] border-[#001a5c] text-white":"border-[#001a5c] text-[#001a5c]"}`,children:m}),v<2&&r.jsx("div",{className:"w-16 lg:w-24 h-0.5 bg-[#001a5c] opacity-60"})]},m))}),r.jsxs("div",{className:"text-center space-y-3 mb-10",children:[r.jsx("h1",{className:"text-4xl font-bold text-[#001a5c]",children:"Forgot Password?"}),r.jsx("p",{className:"text-base text-[#1d2f5d]",children:"Enter the email address associated with your account to receive a verification code."})]}),r.jsxs("form",{onSubmit:f,className:"max-w-md mx-auto space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"email",className:"text-[#001a5c] font-semibold",children:"Email"}),r.jsx(Te,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:m=>n(m.target.value),className:"h-14 rounded-2xl border-[#9ab7e8] bg-white/80 text-lg placeholder:text-[#9ab0d6]"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-2",children:[r.jsx(Se,{type:"button",variant:"outline",onClick:()=>c("/login"),className:"w-full sm:w-40 h-12 rounded-full border-2 border-[#9ab7e8] text-[#4b5f92] bg-transparent hover:bg-white",children:"Cancel"}),r.jsx(Se,{type:"submit",className:"w-full sm:w-40 h-12 rounded-full bg-[#051a66] hover:bg-[#0b2987] text-white text-lg font-semibold",children:"Send"})]})]})]})})},aI=()=>{const[e]=lw(),n=e.get("token"),[s,c]=C.useState(""),[f,m]=C.useState(""),[v,N]=C.useState(!1),{toast:w}=Un(),y=Na();C.useEffect(()=>{n||(w({variant:"destructive",title:"Invalid Link",description:"No reset token found. Please request a new password reset."}),y("/forgot-password"))},[n,y,w]);const E=async I=>{if(I.preventDefault(),!s.trim()){w({variant:"destructive",title:"Password required",description:"Please enter a new password."});return}if(s.length<6){w({variant:"destructive",title:"Password too short",description:"Password must be at least 6 characters long."});return}if(s!==f){w({variant:"destructive",title:"Passwords do not match",description:"Please make sure both passwords match."});return}if(!n){w({variant:"destructive",title:"Invalid token",description:"No reset token found. Please request a new password reset."});return}try{N(!0);const _=await St("https://bbaec9682261.ngrok-free.app/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,newPassword:s})}),k=await _.json();if(!_.ok)throw new Error(k.message||"Failed to reset password");w({title:"Password Reset Successful",description:"Your password has been reset. You can now login with your new password."}),setTimeout(()=>{y("/login")},2e3)}catch(O){console.error("Reset password error",O),w({variant:"destructive",title:"Error",description:O instanceof Error?O.message:"Unable to reset password. Please try again."})}finally{N(!1)}};return r.jsx("div",{className:"min-h-screen bg-[#d7ecff] flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-[0_10px_40px_rgba(0,0,0,0.05)] border border-[#bcd7ff] px-6 py-16 lg:px-16",children:[r.jsx("div",{className:"flex items-center justify-center gap-8 text-[#0a1f4d] font-semibold mb-10",children:[1,2,3].map((I,O)=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${I===3?"bg-[#001a5c] border-[#001a5c] text-white":"border-[#001a5c] text-[#001a5c]"}`,children:I}),O<2&&r.jsx("div",{className:"w-16 lg:w-24 h-0.5 bg-[#001a5c] opacity-60"})]},I))}),r.jsxs("div",{className:"text-center space-y-3 mb-10",children:[r.jsx("h1",{className:"text-4xl font-bold text-[#001a5c]",children:"Reset Password"}),r.jsx("p",{className:"text-base text-[#1d2f5d]",children:"Enter your new password below."})]}),r.jsxs("form",{onSubmit:E,className:"max-w-md mx-auto space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"newPassword",className:"text-[#001a5c] font-semibold",children:"New Password"}),r.jsx(Te,{id:"newPassword",type:"password",placeholder:"Enter new password",value:s,onChange:I=>c(I.target.value),className:"h-14 rounded-2xl border-[#9ab7e8] bg-white/80 text-lg placeholder:text-[#9ab0d6]",minLength:6,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"confirmPassword",className:"text-[#001a5c] font-semibold",children:"Confirm Password"}),r.jsx(Te,{id:"confirmPassword",type:"password",placeholder:"Confirm new password",value:f,onChange:I=>m(I.target.value),className:"h-14 rounded-2xl border-[#9ab7e8] bg-white/80 text-lg placeholder:text-[#9ab0d6]",minLength:6,required:!0})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-2",children:[r.jsx(Se,{type:"button",variant:"outline",onClick:()=>y("/login"),className:"w-full sm:w-40 h-12 rounded-full border-2 border-[#9ab7e8] text-[#4b5f92] bg-transparent hover:bg-white",children:"Cancel"}),r.jsx(Se,{type:"submit",disabled:v||!n,className:"w-full sm:w-40 h-12 rounded-full bg-[#051a66] hover:bg-[#0b2987] text-white text-lg font-semibold disabled:opacity-50",children:v?"Resetting...":"Reset Password"})]})]})]})})},Ye=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,className:Me("rounded-lg border bg-card text-card-foreground shadow-sm",e),...n}));Ye.displayName="Card";const rr=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,className:Me("flex flex-col space-y-1.5 p-6",e),...n}));rr.displayName="CardHeader";const Bn=C.forwardRef(({className:e,...n},s)=>r.jsx("h3",{ref:s,className:Me("text-2xl font-semibold leading-none tracking-tight",e),...n}));Bn.displayName="CardTitle";const ul=C.forwardRef(({className:e,...n},s)=>r.jsx("p",{ref:s,className:Me("text-sm text-muted-foreground",e),...n}));ul.displayName="CardDescription";const Gt=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,className:Me("p-6 pt-0",e),...n}));Gt.displayName="CardContent";const iI=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,className:Me("flex items-center p-6 pt-0",e),...n}));iI.displayName="CardFooter";const um=768;function oI(){const[e,n]=C.useState(void 0);return C.useEffect(()=>{const s=window.matchMedia(`(max-width: ${um-1}px)`),c=()=>{n(window.innerWidth<um)};return s.addEventListener("change",c),n(window.innerWidth<um),()=>s.removeEventListener("change",c)},[]),!!e}var lI="Separator",rx="horizontal",cI=["horizontal","vertical"],hw=C.forwardRef((e,n)=>{const{decorative:s,orientation:c=rx,...f}=e,m=dI(c)?c:rx,N=s?{role:"none"}:{"aria-orientation":m==="vertical"?m:void 0,role:"separator"};return r.jsx(jt.div,{"data-orientation":m,...N,...f,ref:n})});hw.displayName=lI;function dI(e){return cI.includes(e)}var mw=hw;const zp=C.forwardRef(({className:e,orientation:n="horizontal",decorative:s=!0,...c},f)=>r.jsx(mw,{ref:f,decorative:s,orientation:n,className:Me("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...c}));zp.displayName=mw.displayName;var fm="focusScope.autoFocusOnMount",hm="focusScope.autoFocusOnUnmount",sx={bubbles:!1,cancelable:!0},uI="FocusScope",Vp=C.forwardRef((e,n)=>{const{loop:s=!1,trapped:c=!1,onMountAutoFocus:f,onUnmountAutoFocus:m,...v}=e,[N,w]=C.useState(null),y=Us(f),E=Us(m),I=C.useRef(null),O=an(n,R=>w(R)),_=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(c){let R=function(F){if(_.paused||!N)return;const Z=F.target;N.contains(Z)?I.current=Z:Ni(I.current,{select:!0})},P=function(F){if(_.paused||!N)return;const Z=F.relatedTarget;Z!==null&&(N.contains(Z)||Ni(I.current,{select:!0}))},H=function(F){if(document.activeElement===document.body)for(const W of F)W.removedNodes.length>0&&Ni(N)};document.addEventListener("focusin",R),document.addEventListener("focusout",P);const z=new MutationObserver(H);return N&&z.observe(N,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",R),document.removeEventListener("focusout",P),z.disconnect()}}},[c,N,_.paused]),C.useEffect(()=>{if(N){ix.add(_);const R=document.activeElement;if(!N.contains(R)){const H=new CustomEvent(fm,sx);N.addEventListener(fm,y),N.dispatchEvent(H),H.defaultPrevented||(fI(xI(pw(N)),{select:!0}),document.activeElement===R&&Ni(N))}return()=>{N.removeEventListener(fm,y),setTimeout(()=>{const H=new CustomEvent(hm,sx);N.addEventListener(hm,E),N.dispatchEvent(H),H.defaultPrevented||Ni(R??document.body,{select:!0}),N.removeEventListener(hm,E),ix.remove(_)},0)}}},[N,y,E,_]);const k=C.useCallback(R=>{if(!s&&!c||_.paused)return;const P=R.key==="Tab"&&!R.altKey&&!R.ctrlKey&&!R.metaKey,H=document.activeElement;if(P&&H){const z=R.currentTarget,[F,Z]=hI(z);F&&Z?!R.shiftKey&&H===Z?(R.preventDefault(),s&&Ni(F,{select:!0})):R.shiftKey&&H===F&&(R.preventDefault(),s&&Ni(Z,{select:!0})):H===z&&R.preventDefault()}},[s,c,_.paused]);return r.jsx(jt.div,{tabIndex:-1,...v,ref:O,onKeyDown:k})});Vp.displayName=uI;function fI(e,{select:n=!1}={}){const s=document.activeElement;for(const c of e)if(Ni(c,{select:n}),document.activeElement!==s)return}function hI(e){const n=pw(e),s=ax(n,e),c=ax(n.reverse(),e);return[s,c]}function pw(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const f=c.tagName==="INPUT"&&c.type==="hidden";return c.disabled||c.hidden||f?NodeFilter.FILTER_SKIP:c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function ax(e,n){for(const s of e)if(!mI(s,{upTo:n}))return s}function mI(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pI(e){return e instanceof HTMLInputElement&&"select"in e}function Ni(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&pI(e)&&n&&e.select()}}var ix=gI();function gI(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=ox(e,n),e.unshift(n)},remove(n){e=ox(e,n),e[0]?.resume()}}}function ox(e,n){const s=[...e],c=s.indexOf(n);return c!==-1&&s.splice(c,1),s}function xI(e){return e.filter(n=>n.tagName!=="A")}var mm=0;function gw(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lx()),document.body.insertAdjacentElement("beforeend",e[1]??lx()),mm++,()=>{mm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),mm--}},[])}function lx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ha=function(){return ha=Object.assign||function(n){for(var s,c=1,f=arguments.length;c<f;c++){s=arguments[c];for(var m in s)Object.prototype.hasOwnProperty.call(s,m)&&(n[m]=s[m])}return n},ha.apply(this,arguments)};function xw(e,n){var s={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&n.indexOf(c)<0&&(s[c]=e[c]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(e);f<c.length;f++)n.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(e,c[f])&&(s[c[f]]=e[c[f]]);return s}function yI(e,n,s){if(s||arguments.length===2)for(var c=0,f=n.length,m;c<f;c++)(m||!(c in n))&&(m||(m=Array.prototype.slice.call(n,0,c)),m[c]=n[c]);return e.concat(m||Array.prototype.slice.call(n))}var _u="right-scroll-bar-position",Du="width-before-scroll-bar",vI="with-scroll-bars-hidden",wI="--removed-body-scroll-bar-size";function pm(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function bI(e,n){var s=C.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(c){var f=s.value;f!==c&&(s.value=c,s.callback(c,f))}}}})[0];return s.callback=n,s.facade}var NI=typeof window<"u"?C.useLayoutEffect:C.useEffect,cx=new WeakMap;function CI(e,n){var s=bI(null,function(c){return e.forEach(function(f){return pm(f,c)})});return NI(function(){var c=cx.get(s);if(c){var f=new Set(c),m=new Set(e),v=s.current;f.forEach(function(N){m.has(N)||pm(N,null)}),m.forEach(function(N){f.has(N)||pm(N,v)})}cx.set(s,e)},[e]),s}function EI(e){return e}function SI(e,n){n===void 0&&(n=EI);var s=[],c=!1,f={read:function(){if(c)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(m){var v=n(m,c);return s.push(v),function(){s=s.filter(function(N){return N!==v})}},assignSyncMedium:function(m){for(c=!0;s.length;){var v=s;s=[],v.forEach(m)}s={push:function(N){return m(N)},filter:function(){return s}}},assignMedium:function(m){c=!0;var v=[];if(s.length){var N=s;s=[],N.forEach(m),v=s}var w=function(){var E=v;v=[],E.forEach(m)},y=function(){return Promise.resolve().then(w)};y(),s={push:function(E){v.push(E),y()},filter:function(E){return v=v.filter(E),s}}}};return f}function AI(e){e===void 0&&(e={});var n=SI(null);return n.options=ha({async:!0,ssr:!1},e),n}var yw=function(e){var n=e.sideCar,s=xw(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var c=n.read();if(!c)throw new Error("Sidecar medium not found");return C.createElement(c,ha({},s))};yw.isSideCarExport=!0;function II(e,n){return e.useMedium(n),yw}var vw=AI(),gm=function(){},pf=C.forwardRef(function(e,n){var s=C.useRef(null),c=C.useState({onScrollCapture:gm,onWheelCapture:gm,onTouchMoveCapture:gm}),f=c[0],m=c[1],v=e.forwardProps,N=e.children,w=e.className,y=e.removeScrollBar,E=e.enabled,I=e.shards,O=e.sideCar,_=e.noRelative,k=e.noIsolation,R=e.inert,P=e.allowPinchZoom,H=e.as,z=H===void 0?"div":H,F=e.gapMode,Z=xw(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),W=O,te=CI([s,n]),G=ha(ha({},Z),f);return C.createElement(C.Fragment,null,E&&C.createElement(W,{sideCar:vw,removeScrollBar:y,shards:I,noRelative:_,noIsolation:k,inert:R,setCallbacks:m,allowPinchZoom:!!P,lockRef:s,gapMode:F}),v?C.cloneElement(C.Children.only(N),ha(ha({},G),{ref:te})):C.createElement(z,ha({},G,{className:w,ref:te}),N))});pf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pf.classNames={fullWidth:Du,zeroRight:_u};var jI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function TI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=jI();return n&&e.setAttribute("nonce",n),e}function RI(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function _I(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var DI=function(){var e=0,n=null;return{add:function(s){e==0&&(n=TI())&&(RI(n,s),_I(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},OI=function(){var e=DI();return function(n,s){C.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},ww=function(){var e=OI(),n=function(s){var c=s.styles,f=s.dynamic;return e(c,f),null};return n},kI={left:0,top:0,right:0,gap:0},xm=function(e){return parseInt(e||"",10)||0},PI=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],c=n[e==="padding"?"paddingTop":"marginTop"],f=n[e==="padding"?"paddingRight":"marginRight"];return[xm(s),xm(c),xm(f)]},MI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kI;var n=PI(e),s=document.documentElement.clientWidth,c=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,c-s+n[2]-n[0])}},LI=ww(),fl="data-scroll-locked",FI=function(e,n,s,c){var f=e.left,m=e.top,v=e.right,N=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(vI,` {
   overflow: hidden `).concat(c,`;
   padding-right: `).concat(N,"px ").concat(c,`;
  }
  body[`).concat(fl,`] {
    overflow: hidden `).concat(c,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(c,";"),s==="margin"&&`
    padding-left: `.concat(f,`px;
    padding-top: `).concat(m,`px;
    padding-right: `).concat(v,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(N,"px ").concat(c,`;
    `),s==="padding"&&"padding-right: ".concat(N,"px ").concat(c,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_u,` {
    right: `).concat(N,"px ").concat(c,`;
  }
  
  .`).concat(Du,` {
    margin-right: `).concat(N,"px ").concat(c,`;
  }
  
  .`).concat(_u," .").concat(_u,` {
    right: 0 `).concat(c,`;
  }
  
  .`).concat(Du," .").concat(Du,` {
    margin-right: 0 `).concat(c,`;
  }
  
  body[`).concat(fl,`] {
    `).concat(wI,": ").concat(N,`px;
  }
`)},dx=function(){var e=parseInt(document.body.getAttribute(fl)||"0",10);return isFinite(e)?e:0},BI=function(){C.useEffect(function(){return document.body.setAttribute(fl,(dx()+1).toString()),function(){var e=dx()-1;e<=0?document.body.removeAttribute(fl):document.body.setAttribute(fl,e.toString())}},[])},UI=function(e){var n=e.noRelative,s=e.noImportant,c=e.gapMode,f=c===void 0?"margin":c;BI();var m=C.useMemo(function(){return MI(f)},[f]);return C.createElement(LI,{styles:FI(m,!n,f,s?"":"!important")})},qm=!1;if(typeof window<"u")try{var vu=Object.defineProperty({},"passive",{get:function(){return qm=!0,!0}});window.addEventListener("test",vu,vu),window.removeEventListener("test",vu,vu)}catch{qm=!1}var Ko=qm?{passive:!1}:!1,zI=function(e){return e.tagName==="TEXTAREA"},bw=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!zI(e)&&s[n]==="visible")},VI=function(e){return bw(e,"overflowY")},HI=function(e){return bw(e,"overflowX")},ux=function(e,n){var s=n.ownerDocument,c=n;do{typeof ShadowRoot<"u"&&c instanceof ShadowRoot&&(c=c.host);var f=Nw(e,c);if(f){var m=Cw(e,c),v=m[1],N=m[2];if(v>N)return!0}c=c.parentNode}while(c&&c!==s.body);return!1},WI=function(e){var n=e.scrollTop,s=e.scrollHeight,c=e.clientHeight;return[n,s,c]},$I=function(e){var n=e.scrollLeft,s=e.scrollWidth,c=e.clientWidth;return[n,s,c]},Nw=function(e,n){return e==="v"?VI(n):HI(n)},Cw=function(e,n){return e==="v"?WI(n):$I(n)},GI=function(e,n){return e==="h"&&n==="rtl"?-1:1},XI=function(e,n,s,c,f){var m=GI(e,window.getComputedStyle(n).direction),v=m*c,N=s.target,w=n.contains(N),y=!1,E=v>0,I=0,O=0;do{if(!N)break;var _=Cw(e,N),k=_[0],R=_[1],P=_[2],H=R-P-m*k;(k||H)&&Nw(e,N)&&(I+=H,O+=k);var z=N.parentNode;N=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!w&&N!==document.body||w&&(n.contains(N)||n===N));return(E&&Math.abs(I)<1||!E&&Math.abs(O)<1)&&(y=!0),y},wu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fx=function(e){return[e.deltaX,e.deltaY]},hx=function(e){return e&&"current"in e?e.current:e},YI=function(e,n){return e[0]===n[0]&&e[1]===n[1]},ZI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qI=0,Jo=[];function QI(e){var n=C.useRef([]),s=C.useRef([0,0]),c=C.useRef(),f=C.useState(qI++)[0],m=C.useState(ww)[0],v=C.useRef(e);C.useEffect(function(){v.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(f));var R=yI([e.lockRef.current],(e.shards||[]).map(hx),!0).filter(Boolean);return R.forEach(function(P){return P.classList.add("allow-interactivity-".concat(f))}),function(){document.body.classList.remove("block-interactivity-".concat(f)),R.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(f))})}}},[e.inert,e.lockRef.current,e.shards]);var N=C.useCallback(function(R,P){if("touches"in R&&R.touches.length===2||R.type==="wheel"&&R.ctrlKey)return!v.current.allowPinchZoom;var H=wu(R),z=s.current,F="deltaX"in R?R.deltaX:z[0]-H[0],Z="deltaY"in R?R.deltaY:z[1]-H[1],W,te=R.target,G=Math.abs(F)>Math.abs(Z)?"h":"v";if("touches"in R&&G==="h"&&te.type==="range")return!1;var J=ux(G,te);if(!J)return!0;if(J?W=G:(W=G==="v"?"h":"v",J=ux(G,te)),!J)return!1;if(!c.current&&"changedTouches"in R&&(F||Z)&&(c.current=W),!W)return!0;var se=c.current||W;return XI(se,P,R,se==="h"?F:Z)},[]),w=C.useCallback(function(R){var P=R;if(!(!Jo.length||Jo[Jo.length-1]!==m)){var H="deltaY"in P?fx(P):wu(P),z=n.current.filter(function(W){return W.name===P.type&&(W.target===P.target||P.target===W.shadowParent)&&YI(W.delta,H)})[0];if(z&&z.should){P.cancelable&&P.preventDefault();return}if(!z){var F=(v.current.shards||[]).map(hx).filter(Boolean).filter(function(W){return W.contains(P.target)}),Z=F.length>0?N(P,F[0]):!v.current.noIsolation;Z&&P.cancelable&&P.preventDefault()}}},[]),y=C.useCallback(function(R,P,H,z){var F={name:R,delta:P,target:H,should:z,shadowParent:KI(H)};n.current.push(F),setTimeout(function(){n.current=n.current.filter(function(Z){return Z!==F})},1)},[]),E=C.useCallback(function(R){s.current=wu(R),c.current=void 0},[]),I=C.useCallback(function(R){y(R.type,fx(R),R.target,N(R,e.lockRef.current))},[]),O=C.useCallback(function(R){y(R.type,wu(R),R.target,N(R,e.lockRef.current))},[]);C.useEffect(function(){return Jo.push(m),e.setCallbacks({onScrollCapture:I,onWheelCapture:I,onTouchMoveCapture:O}),document.addEventListener("wheel",w,Ko),document.addEventListener("touchmove",w,Ko),document.addEventListener("touchstart",E,Ko),function(){Jo=Jo.filter(function(R){return R!==m}),document.removeEventListener("wheel",w,Ko),document.removeEventListener("touchmove",w,Ko),document.removeEventListener("touchstart",E,Ko)}},[]);var _=e.removeScrollBar,k=e.inert;return C.createElement(C.Fragment,null,k?C.createElement(m,{styles:ZI(f)}):null,_?C.createElement(UI,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function KI(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const JI=II(vw,QI);var Hp=C.forwardRef(function(e,n){return C.createElement(pf,ha({},e,{ref:n,sideCar:JI}))});Hp.classNames=pf.classNames;var ej=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},el=new WeakMap,bu=new WeakMap,Nu={},ym=0,Ew=function(e){return e&&(e.host||Ew(e.parentNode))},tj=function(e,n){return n.map(function(s){if(e.contains(s))return s;var c=Ew(s);return c&&e.contains(c)?c:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},nj=function(e,n,s,c){var f=tj(n,Array.isArray(e)?e:[e]);Nu[s]||(Nu[s]=new WeakMap);var m=Nu[s],v=[],N=new Set,w=new Set(f),y=function(I){!I||N.has(I)||(N.add(I),y(I.parentNode))};f.forEach(y);var E=function(I){!I||w.has(I)||Array.prototype.forEach.call(I.children,function(O){if(N.has(O))E(O);else try{var _=O.getAttribute(c),k=_!==null&&_!=="false",R=(el.get(O)||0)+1,P=(m.get(O)||0)+1;el.set(O,R),m.set(O,P),v.push(O),R===1&&k&&bu.set(O,!0),P===1&&O.setAttribute(s,"true"),k||O.setAttribute(c,"true")}catch(H){console.error("aria-hidden: cannot operate on ",O,H)}})};return E(n),N.clear(),ym++,function(){v.forEach(function(I){var O=el.get(I)-1,_=m.get(I)-1;el.set(I,O),m.set(I,_),O||(bu.has(I)||I.removeAttribute(c),bu.delete(I)),_||I.removeAttribute(s)}),ym--,ym||(el=new WeakMap,el=new WeakMap,bu=new WeakMap,Nu={})}},Sw=function(e,n,s){s===void 0&&(s="data-aria-hidden");var c=Array.from(Array.isArray(e)?e:[e]),f=ej(e);return f?(c.push.apply(c,Array.from(f.querySelectorAll("[aria-live]"))),nj(c,f,s,"aria-hidden")):function(){return null}},gf="Dialog",[Aw,Iw]=zs(gf),[rj,ra]=Aw(gf),jw=e=>{const{__scopeDialog:n,children:s,open:c,defaultOpen:f,onOpenChange:m,modal:v=!0}=e,N=C.useRef(null),w=C.useRef(null),[y,E]=_i({prop:c,defaultProp:f??!1,onChange:m,caller:gf});return r.jsx(rj,{scope:n,triggerRef:N,contentRef:w,contentId:ji(),titleId:ji(),descriptionId:ji(),open:y,onOpenChange:E,onOpenToggle:C.useCallback(()=>E(I=>!I),[E]),modal:v,children:s})};jw.displayName=gf;var Tw="DialogTrigger",Rw=C.forwardRef((e,n)=>{const{__scopeDialog:s,...c}=e,f=ra(Tw,s),m=an(n,f.triggerRef);return r.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":Gp(f.open),...c,ref:m,onClick:yt(e.onClick,f.onOpenToggle)})});Rw.displayName=Tw;var Wp="DialogPortal",[sj,_w]=Aw(Wp,{forceMount:void 0}),Dw=e=>{const{__scopeDialog:n,forceMount:s,children:c,container:f}=e,m=ra(Wp,n);return r.jsx(sj,{scope:n,forceMount:s,children:C.Children.map(c,v=>r.jsx(Mi,{present:s||m.open,children:r.jsx(sf,{asChild:!0,container:f,children:v})}))})};Dw.displayName=Wp;var Vu="DialogOverlay",Ow=C.forwardRef((e,n)=>{const s=_w(Vu,e.__scopeDialog),{forceMount:c=s.forceMount,...f}=e,m=ra(Vu,e.__scopeDialog);return m.modal?r.jsx(Mi,{present:c||m.open,children:r.jsx(ij,{...f,ref:n})}):null});Ow.displayName=Vu;var aj=ml("DialogOverlay.RemoveScroll"),ij=C.forwardRef((e,n)=>{const{__scopeDialog:s,...c}=e,f=ra(Vu,s);return r.jsx(Hp,{as:aj,allowPinchZoom:!0,shards:[f.contentRef],children:r.jsx(jt.div,{"data-state":Gp(f.open),...c,ref:n,style:{pointerEvents:"auto",...c.style}})})}),yo="DialogContent",kw=C.forwardRef((e,n)=>{const s=_w(yo,e.__scopeDialog),{forceMount:c=s.forceMount,...f}=e,m=ra(yo,e.__scopeDialog);return r.jsx(Mi,{present:c||m.open,children:m.modal?r.jsx(oj,{...f,ref:n}):r.jsx(lj,{...f,ref:n})})});kw.displayName=yo;var oj=C.forwardRef((e,n)=>{const s=ra(yo,e.__scopeDialog),c=C.useRef(null),f=an(n,s.contentRef,c);return C.useEffect(()=>{const m=c.current;if(m)return Sw(m)},[]),r.jsx(Pw,{...e,ref:f,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yt(e.onCloseAutoFocus,m=>{m.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:yt(e.onPointerDownOutside,m=>{const v=m.detail.originalEvent,N=v.button===0&&v.ctrlKey===!0;(v.button===2||N)&&m.preventDefault()}),onFocusOutside:yt(e.onFocusOutside,m=>m.preventDefault())})}),lj=C.forwardRef((e,n)=>{const s=ra(yo,e.__scopeDialog),c=C.useRef(!1),f=C.useRef(!1);return r.jsx(Pw,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:m=>{e.onCloseAutoFocus?.(m),m.defaultPrevented||(c.current||s.triggerRef.current?.focus(),m.preventDefault()),c.current=!1,f.current=!1},onInteractOutside:m=>{e.onInteractOutside?.(m),m.defaultPrevented||(c.current=!0,m.detail.originalEvent.type==="pointerdown"&&(f.current=!0));const v=m.target;s.triggerRef.current?.contains(v)&&m.preventDefault(),m.detail.originalEvent.type==="focusin"&&f.current&&m.preventDefault()}})}),Pw=C.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:c,onOpenAutoFocus:f,onCloseAutoFocus:m,...v}=e,N=ra(yo,s),w=C.useRef(null),y=an(n,w);return gw(),r.jsxs(r.Fragment,{children:[r.jsx(Vp,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:f,onUnmountAutoFocus:m,children:r.jsx(Sl,{role:"dialog",id:N.contentId,"aria-describedby":N.descriptionId,"aria-labelledby":N.titleId,"data-state":Gp(N.open),...v,ref:y,onDismiss:()=>N.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(dj,{titleId:N.titleId}),r.jsx(fj,{contentRef:w,descriptionId:N.descriptionId})]})]})}),$p="DialogTitle",Mw=C.forwardRef((e,n)=>{const{__scopeDialog:s,...c}=e,f=ra($p,s);return r.jsx(jt.h2,{id:f.titleId,...c,ref:n})});Mw.displayName=$p;var Lw="DialogDescription",Fw=C.forwardRef((e,n)=>{const{__scopeDialog:s,...c}=e,f=ra(Lw,s);return r.jsx(jt.p,{id:f.descriptionId,...c,ref:n})});Fw.displayName=Lw;var Bw="DialogClose",Uw=C.forwardRef((e,n)=>{const{__scopeDialog:s,...c}=e,f=ra(Bw,s);return r.jsx(jt.button,{type:"button",...c,ref:n,onClick:yt(e.onClick,()=>f.onOpenChange(!1))})});Uw.displayName=Bw;function Gp(e){return e?"open":"closed"}var zw="DialogTitleWarning",[cj,Vw]=mC(zw,{contentName:yo,titleName:$p,docsSlug:"dialog"}),dj=({titleId:e})=>{const n=Vw(zw),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},uj="DialogDescriptionWarning",fj=({contentRef:e,descriptionId:n})=>{const c=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Vw(uj).contentName}}.`;return C.useEffect(()=>{const f=e.current?.getAttribute("aria-describedby");n&&f&&(document.getElementById(n)||console.warn(c))},[c,e,n]),null},Xp=jw,Hw=Rw,Yp=Dw,td=Ow,nd=kw,rd=Mw,sd=Fw,xf=Uw;const hj=Xp,mj=Yp,Ww=C.forwardRef(({className:e,...n},s)=>r.jsx(td,{className:Me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n,ref:s}));Ww.displayName=td.displayName;const pj=Eo("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),$w=C.forwardRef(({side:e="right",className:n,children:s,...c},f)=>r.jsxs(mj,{children:[r.jsx(Ww,{}),r.jsxs(nd,{ref:f,className:Me(pj({side:e}),n),...c,children:[s,r.jsxs(xf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[r.jsx(yp,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$w.displayName=nd.displayName;const gj=C.forwardRef(({className:e,...n},s)=>r.jsx(rd,{ref:s,className:Me("text-lg font-semibold text-foreground",e),...n}));gj.displayName=rd.displayName;const xj=C.forwardRef(({className:e,...n},s)=>r.jsx(sd,{ref:s,className:Me("text-sm text-muted-foreground",e),...n}));xj.displayName=sd.displayName;function mx({className:e,...n}){return r.jsx("div",{className:Me("animate-pulse rounded-md bg-muted",e),...n})}const yj="sidebar:state",vj=3600*24*7,wj="16rem",bj="18rem",Nj="4rem",Cj="b",Gw=C.createContext(null);function ad(){const e=C.useContext(Gw);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Xw=C.forwardRef(({defaultOpen:e=!0,open:n,onOpenChange:s,className:c,style:f,children:m,...v},N)=>{const w=oI(),[y,E]=C.useState(!1),[I,O]=C.useState(e),_=n??I,k=C.useCallback(z=>{const F=typeof z=="function"?z(_):z;s?s(F):O(F),document.cookie=`${yj}=${F}; path=/; max-age=${vj}`},[s,_]),R=C.useCallback(()=>w?E(z=>!z):k(z=>!z),[w,k,E]);C.useEffect(()=>{const z=F=>{F.key===Cj&&(F.metaKey||F.ctrlKey)&&(F.preventDefault(),R())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[R]);const P=_?"expanded":"collapsed",H=C.useMemo(()=>({state:P,open:_,setOpen:k,isMobile:w,openMobile:y,setOpenMobile:E,toggleSidebar:R}),[P,_,k,w,y,E,R]);return r.jsx(Gw.Provider,{value:H,children:r.jsx(Pv,{delayDuration:0,children:r.jsx("div",{style:{"--sidebar-width":wj,"--sidebar-width-icon":Nj,...f},className:Me("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",c),ref:N,...v,children:m})})})});Xw.displayName="SidebarProvider";const Yw=C.forwardRef(({side:e="left",variant:n="sidebar",collapsible:s="offcanvas",className:c,children:f,...m},v)=>{const{isMobile:N,state:w,openMobile:y,setOpenMobile:E}=ad();return s==="none"?r.jsx("div",{className:Me("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",c),ref:v,...m,children:f}):N?r.jsx(hj,{open:y,onOpenChange:E,...m,children:r.jsx($w,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":bj},side:e,children:r.jsx("div",{className:"flex h-full w-full flex-col",children:f})})}):r.jsxs("div",{ref:v,className:"group peer hidden text-sidebar-foreground md:block","data-state":w,"data-collapsible":w==="collapsed"?s:"","data-variant":n,"data-side":e,children:[r.jsx("div",{className:Me("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",n==="floating"||n==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),r.jsx("div",{className:Me("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",n==="floating"||n==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",c),...m,children:r.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:f})})]})});Yw.displayName="Sidebar";const Zw=C.forwardRef(({className:e,onClick:n,...s},c)=>{const{toggleSidebar:f}=ad();return r.jsxs(Se,{ref:c,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Me("h-7 w-7",e),onClick:m=>{n?.(m),f()},...s,children:[r.jsx(pE,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Zw.displayName="SidebarTrigger";const Ej=C.forwardRef(({className:e,...n},s)=>{const{toggleSidebar:c}=ad();return r.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:c,title:"Toggle Sidebar",className:Me("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...n})});Ej.displayName="SidebarRail";const Sj=C.forwardRef(({className:e,...n},s)=>r.jsx("main",{ref:s,className:Me("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...n}));Sj.displayName="SidebarInset";const Aj=C.forwardRef(({className:e,...n},s)=>r.jsx(Te,{ref:s,"data-sidebar":"input",className:Me("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...n}));Aj.displayName="SidebarInput";const Ij=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,"data-sidebar":"header",className:Me("flex flex-col gap-2 p-2",e),...n}));Ij.displayName="SidebarHeader";const jj=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,"data-sidebar":"footer",className:Me("flex flex-col gap-2 p-2",e),...n}));jj.displayName="SidebarFooter";const Tj=C.forwardRef(({className:e,...n},s)=>r.jsx(zp,{ref:s,"data-sidebar":"separator",className:Me("mx-2 w-auto bg-sidebar-border",e),...n}));Tj.displayName="SidebarSeparator";const qw=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,"data-sidebar":"content",className:Me("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...n}));qw.displayName="SidebarContent";const Qm=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,"data-sidebar":"group",className:Me("relative flex w-full min-w-0 flex-col p-2",e),...n}));Qm.displayName="SidebarGroup";const Rj=C.forwardRef(({className:e,asChild:n=!1,...s},c)=>{const f=n?El:"div";return r.jsx(f,{ref:c,"data-sidebar":"group-label",className:Me("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...s})});Rj.displayName="SidebarGroupLabel";const _j=C.forwardRef(({className:e,asChild:n=!1,...s},c)=>{const f=n?El:"button";return r.jsx(f,{ref:c,"data-sidebar":"group-action",className:Me("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...s})});_j.displayName="SidebarGroupAction";const Dj=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,"data-sidebar":"group-content",className:Me("w-full text-sm",e),...n}));Dj.displayName="SidebarGroupContent";const Km=C.forwardRef(({className:e,...n},s)=>r.jsx("ul",{ref:s,"data-sidebar":"menu",className:Me("flex w-full min-w-0 flex-col gap-1 group-data-[collapsible=icon]:gap-3",e),...n}));Km.displayName="SidebarMenu";const Ba=C.forwardRef(({className:e,...n},s)=>r.jsx("li",{ref:s,"data-sidebar":"menu-item",className:Me("group/menu-item relative",e),...n}));Ba.displayName="SidebarMenuItem";const Oj=Eo("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-12 group-data-[collapsible=icon]:!p-3 group-data-[collapsible=icon]:gap-0 group-data-[collapsible=icon]:justify-center group-data-[collapsible=icon]:rounded-2xl group-data-[collapsible=icon]:text-center [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-12 text-sm",sm:"h-10 text-xs",lg:"h-14 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Ua=C.forwardRef(({asChild:e=!1,isActive:n=!1,variant:s="default",size:c="default",tooltip:f,className:m,...v},N)=>{const w=e?El:"button",{isMobile:y,state:E}=ad(),I=r.jsx(w,{ref:N,"data-sidebar":"menu-button","data-size":c,"data-active":n,className:Me(Oj({variant:s,size:c}),m),...v});return f?(typeof f=="string"&&(f={children:f}),r.jsxs(NA,{children:[r.jsx(CA,{asChild:!0,children:I}),r.jsx(Mv,{side:"right",align:"center",hidden:E!=="collapsed"||y,...f})]})):I});Ua.displayName="SidebarMenuButton";const kj=C.forwardRef(({className:e,asChild:n=!1,showOnHover:s=!1,...c},f)=>{const m=n?El:"button";return r.jsx(m,{ref:f,"data-sidebar":"menu-action",className:Me("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...c})});kj.displayName="SidebarMenuAction";const Pj=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:Me("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...n}));Pj.displayName="SidebarMenuBadge";const Mj=C.forwardRef(({className:e,showIcon:n=!1,...s},c)=>{const f=C.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return r.jsxs("div",{ref:c,"data-sidebar":"menu-skeleton",className:Me("flex h-8 items-center gap-2 rounded-md px-2",e),...s,children:[n&&r.jsx(mx,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),r.jsx(mx,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":f}})]})});Mj.displayName="SidebarMenuSkeleton";const sl=C.forwardRef(({className:e,...n},s)=>r.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:Me("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...n}));sl.displayName="SidebarMenuSub";const Vr=C.forwardRef(({...e},n)=>r.jsx("li",{ref:n,...e}));Vr.displayName="SidebarMenuSubItem";const Zr=C.forwardRef(({asChild:e=!1,size:n="md",isActive:s,className:c,...f},m)=>{const v=e?El:"a";return r.jsx(v,{ref:m,"data-sidebar":"menu-sub-button","data-size":n,"data-active":s,className:Me("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",n==="sm"&&"text-xs",n==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",c),...f})});Zr.displayName="SidebarMenuSubButton";var yf="Collapsible",[Lj]=zs(yf),[Fj,Zp]=Lj(yf),Qw=C.forwardRef((e,n)=>{const{__scopeCollapsible:s,open:c,defaultOpen:f,disabled:m,onOpenChange:v,...N}=e,[w,y]=_i({prop:c,defaultProp:f??!1,onChange:v,caller:yf});return r.jsx(Fj,{scope:s,disabled:m,contentId:ji(),open:w,onOpenToggle:C.useCallback(()=>y(E=>!E),[y]),children:r.jsx(jt.div,{"data-state":Qp(w),"data-disabled":m?"":void 0,...N,ref:n})})});Qw.displayName=yf;var Kw="CollapsibleTrigger",Jw=C.forwardRef((e,n)=>{const{__scopeCollapsible:s,...c}=e,f=Zp(Kw,s);return r.jsx(jt.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":Qp(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...c,ref:n,onClick:yt(e.onClick,f.onOpenToggle)})});Jw.displayName=Kw;var qp="CollapsibleContent",e2=C.forwardRef((e,n)=>{const{forceMount:s,...c}=e,f=Zp(qp,e.__scopeCollapsible);return r.jsx(Mi,{present:s||f.open,children:({present:m})=>r.jsx(Bj,{...c,ref:n,present:m})})});e2.displayName=qp;var Bj=C.forwardRef((e,n)=>{const{__scopeCollapsible:s,present:c,children:f,...m}=e,v=Zp(qp,s),[N,w]=C.useState(c),y=C.useRef(null),E=an(n,y),I=C.useRef(0),O=I.current,_=C.useRef(0),k=_.current,R=v.open||N,P=C.useRef(R),H=C.useRef(void 0);return C.useEffect(()=>{const z=requestAnimationFrame(()=>P.current=!1);return()=>cancelAnimationFrame(z)},[]),sr(()=>{const z=y.current;if(z){H.current=H.current||{transitionDuration:z.style.transitionDuration,animationName:z.style.animationName},z.style.transitionDuration="0s",z.style.animationName="none";const F=z.getBoundingClientRect();I.current=F.height,_.current=F.width,P.current||(z.style.transitionDuration=H.current.transitionDuration,z.style.animationName=H.current.animationName),w(c)}},[v.open,c]),r.jsx(jt.div,{"data-state":Qp(v.open),"data-disabled":v.disabled?"":void 0,id:v.contentId,hidden:!R,...m,ref:E,style:{"--radix-collapsible-content-height":O?`${O}px`:void 0,"--radix-collapsible-content-width":k?`${k}px`:void 0,...e.style},children:R&&f})});function Qp(e){return e?"open":"closed"}var Uj=Qw;const yc=Uj,vc=Jw,wc=e2;var t2="AlertDialog",[zj]=zs(t2,[Iw]),Wa=Iw(),n2=e=>{const{__scopeAlertDialog:n,...s}=e,c=Wa(n);return r.jsx(Xp,{...c,...s,modal:!0})};n2.displayName=t2;var Vj="AlertDialogTrigger",Hj=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...c}=e,f=Wa(s);return r.jsx(Hw,{...f,...c,ref:n})});Hj.displayName=Vj;var Wj="AlertDialogPortal",r2=e=>{const{__scopeAlertDialog:n,...s}=e,c=Wa(n);return r.jsx(Yp,{...c,...s})};r2.displayName=Wj;var $j="AlertDialogOverlay",s2=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...c}=e,f=Wa(s);return r.jsx(td,{...f,...c,ref:n})});s2.displayName=$j;var hl="AlertDialogContent",[Gj,Xj]=zj(hl),Yj=gy("AlertDialogContent"),a2=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,children:c,...f}=e,m=Wa(s),v=C.useRef(null),N=an(n,v),w=C.useRef(null);return r.jsx(cj,{contentName:hl,titleName:i2,docsSlug:"alert-dialog",children:r.jsx(Gj,{scope:s,cancelRef:w,children:r.jsxs(nd,{role:"alertdialog",...m,...f,ref:N,onOpenAutoFocus:yt(f.onOpenAutoFocus,y=>{y.preventDefault(),w.current?.focus({preventScroll:!0})}),onPointerDownOutside:y=>y.preventDefault(),onInteractOutside:y=>y.preventDefault(),children:[r.jsx(Yj,{children:c}),r.jsx(qj,{contentRef:v})]})})})});a2.displayName=hl;var i2="AlertDialogTitle",o2=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...c}=e,f=Wa(s);return r.jsx(rd,{...f,...c,ref:n})});o2.displayName=i2;var l2="AlertDialogDescription",c2=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...c}=e,f=Wa(s);return r.jsx(sd,{...f,...c,ref:n})});c2.displayName=l2;var Zj="AlertDialogAction",d2=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...c}=e,f=Wa(s);return r.jsx(xf,{...f,...c,ref:n})});d2.displayName=Zj;var u2="AlertDialogCancel",f2=C.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...c}=e,{cancelRef:f}=Xj(u2,s),m=Wa(s),v=an(n,f);return r.jsx(xf,{...m,...c,ref:v})});f2.displayName=u2;var qj=({contentRef:e})=>{const n=`\`${hl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${hl}\` by passing a \`${l2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${hl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return C.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(n)},[n,e]),null},Qj=n2,Kj=r2,h2=s2,m2=a2,p2=d2,g2=f2,x2=o2,y2=c2;const Jj=Qj,e8=Kj,v2=C.forwardRef(({className:e,...n},s)=>r.jsx(h2,{className:Me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n,ref:s}));v2.displayName=h2.displayName;const w2=C.forwardRef(({className:e,...n},s)=>r.jsxs(e8,{children:[r.jsx(v2,{}),r.jsx(m2,{ref:s,className:Me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n})]}));w2.displayName=m2.displayName;const b2=({className:e,...n})=>r.jsx("div",{className:Me("flex flex-col space-y-2 text-center sm:text-left",e),...n});b2.displayName="AlertDialogHeader";const N2=({className:e,...n})=>r.jsx("div",{className:Me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n});N2.displayName="AlertDialogFooter";const C2=C.forwardRef(({className:e,...n},s)=>r.jsx(x2,{ref:s,className:Me("text-lg font-semibold",e),...n}));C2.displayName=x2.displayName;const E2=C.forwardRef(({className:e,...n},s)=>r.jsx(y2,{ref:s,className:Me("text-sm text-muted-foreground",e),...n}));E2.displayName=y2.displayName;const S2=C.forwardRef(({className:e,...n},s)=>r.jsx(p2,{ref:s,className:Me(Up(),e),...n}));S2.displayName=p2.displayName;const A2=C.forwardRef(({className:e,...n},s)=>r.jsx(g2,{ref:s,className:Me(Up({variant:"outline"}),"mt-2 sm:mt-0",e),...n}));A2.displayName=g2.displayName;function t8(){const{state:e}=ad(),n=Na(),s=Ao(),{user:c,logout:f}=Vs(),m=e==="collapsed",[v,N]=C.useState({employees:!1,organization:!1,attendance:!1,documents:!1,settings:!1,logout:!1}),[w,y]=C.useState(!1),E=c?.role==="admin",I=C.useCallback(G=>{N(J=>({...J,[G]:!J[G]}))},[]),O=G=>{n("/documents",{state:{openDialog:G}})},_=G=>s.pathname===G,k=()=>{f(),n("/login")},R=G=>G.some(J=>s.pathname.startsWith(J)),P=G=>Me("flex items-center justify-center rounded-lg transition-all duration-200 p-2",m?"h-10 w-10 mx-auto bg-white/10 text-white":"h-10 w-10 bg-white/10 text-white",G&&"bg-white text-primary"),H=R(["/employees"]),z=R(["/organization"]),F=R(["/attendance"]),Z=R(["/documents"]),W=R(["/settings"]);C.useEffect(()=>{N(G=>({...G,employees:H,organization:z,attendance:F,documents:Z,settings:W}))},[H,z,F,Z,W]);const te=C.useMemo(()=>[{id:"dashboard",label:"Dashboard",icon:bg,onClick:()=>n("/employee/dashboard"),active:s.pathname==="/employee/dashboard"},{id:"attendance",label:"Attendance",icon:cs,onClick:()=>n("/attendance/history"),active:s.pathname.startsWith("/attendance")},{id:"profile",label:"Profile",icon:Lc,onClick:()=>n("/profile"),active:s.pathname.startsWith("/profile")},{id:"logout",label:"Logout",icon:ku,onClick:()=>y(!0),active:!1}],[s.pathname,n]);return r.jsxs(r.Fragment,{children:[r.jsx(Yw,{collapsible:"icon",className:"border-r border-sidebar-border transition-all duration-300",children:r.jsxs(qw,{className:"bg-sidebar",children:[r.jsx("div",{className:"py-4 border-b border-sidebar-border",children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:Me("flex items-center justify-center transition-all duration-300",m?"h-14 w-14":"h-20 w-32"),children:r.jsx("img",{src:fw,alt:"The Great Plebeian College",className:"object-contain h-full w-full"})})})}),E?r.jsx(Qm,{className:"px-2 py-4",children:r.jsxs(Km,{children:[r.jsx(Ba,{children:r.jsxs(Ua,{onClick:()=>n("/dashboard"),isActive:_("/dashboard"),className:Me("hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",_("/dashboard")&&"bg-sidebar-accent text-sidebar-accent-foreground"),children:[r.jsx("div",{className:P(_("/dashboard")),children:r.jsx(bg,{className:Me("w-5 h-5",_("/dashboard")?"text-primary":"text-white")})}),!m&&r.jsx("span",{children:"Dashboard"})]})}),r.jsx(yc,{open:v.employees,onOpenChange:()=>I("employees"),children:r.jsxs(Ba,{children:[r.jsx(vc,{asChild:!0,children:r.jsxs(Ua,{className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",isActive:H,children:[r.jsx("div",{className:P(H),children:r.jsx(Fs,{className:Me("w-5 h-5",H?"text-primary":"text-white")})}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1 text-left",children:"Employees"}),r.jsx(fo,{className:Me("w-4 h-4 transition-transform",v.employees&&"rotate-180")})]})]})}),!m&&r.jsx(wc,{children:r.jsxs(sl,{children:[r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/employees"),isActive:_("/employees"),children:r.jsx("span",{children:"Active Employees"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/employees/inactive"),isActive:_("/employees/inactive"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Inactive Employees"})})}),r.jsx(Vr,{children:r.jsxs(Zr,{onClick:()=>n("/generate-qr-codes"),isActive:_("/generate-qr-codes"),children:[r.jsx(Bc,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Generate QR Codes"})]})})]})})]})}),r.jsx(yc,{open:v.organization,onOpenChange:()=>I("organization"),children:r.jsxs(Ba,{children:[r.jsx(vc,{asChild:!0,children:r.jsxs(Ua,{className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",isActive:z,children:[r.jsx("div",{className:P(z),children:r.jsx($y,{className:Me("w-5 h-5",z?"text-primary":"text-white")})}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1 text-left",children:"Organization"}),r.jsx(fo,{className:Me("w-4 h-4 transition-transform",v.organization&&"rotate-180")})]})]})}),!m&&r.jsx(wc,{children:r.jsxs(sl,{children:[r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/organization/department"),isActive:_("/organization/department"),children:r.jsx("span",{children:"Department"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/organization/designation"),isActive:_("/organization/designation"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Designation"})})})]})})]})}),r.jsx(yc,{open:v.attendance,onOpenChange:()=>I("attendance"),children:r.jsxs(Ba,{children:[r.jsx(vc,{asChild:!0,children:r.jsxs(Ua,{className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",isActive:F,children:[r.jsx("div",{className:P(F),children:r.jsx(cs,{className:Me("w-5 h-5",F?"text-primary":"text-white")})}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1 text-left",children:"Attendance"}),r.jsx(fo,{className:Me("w-4 h-4 transition-transform",v.attendance&&"rotate-180")})]})]})}),!m&&r.jsx(wc,{children:r.jsxs(sl,{children:[r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/attendance/list"),isActive:_("/attendance/list"),children:r.jsx("span",{children:"Attendance List"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/attendance/add"),isActive:_("/attendance/add"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Add Attendance"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/attendance/report"),isActive:_("/attendance/report"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Attendance Report"})})})]})})]})}),r.jsx(yc,{open:v.documents,onOpenChange:()=>I("documents"),children:r.jsxs(Ba,{children:[r.jsx(vc,{asChild:!0,children:r.jsxs(Ua,{className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",isActive:Z,children:[r.jsx("div",{className:P(Z),children:r.jsx(Hr,{className:Me("w-5 h-5",Z?"text-primary":"text-white")})}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1 text-left",children:"Documents"}),r.jsx(fo,{className:Me("w-4 h-4 transition-transform",v.documents&&"rotate-180")})]})]})}),!m&&r.jsx(wc,{children:r.jsxs(sl,{children:[r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>O("documents"),isActive:_("/documents"),children:r.jsx("span",{children:"Employee Documents"})})}),r.jsx(Vr,{})]})})]})}),r.jsx(yc,{open:v.settings,onOpenChange:()=>I("settings"),children:r.jsxs(Ba,{children:[r.jsx(vc,{asChild:!0,children:r.jsxs(Ua,{className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",isActive:W,children:[r.jsx("div",{className:P(W),children:r.jsx(yE,{className:Me("w-5 h-5",W?"text-primary":"text-white")})}),!m&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1 text-left",children:"Settings"}),r.jsx(fo,{className:Me("w-4 h-4 transition-transform",v.settings&&"rotate-180")})]})]})}),!m&&r.jsx(wc,{children:r.jsxs(sl,{children:[r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/settings"),isActive:_("/settings"),children:r.jsx("span",{children:"Settings"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/settings/audit-logs"),isActive:_("/settings/audit-logs"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Audit Logs"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/settings/data-privacy"),isActive:_("/settings/data-privacy"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Data Privacy"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/settings/data-integrity"),isActive:_("/settings/data-integrity"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Data Integrity"})})}),r.jsx(Vr,{children:r.jsx(Zr,{onClick:()=>n("/settings/non-repudiation"),isActive:_("/settings/non-repudiation"),className:"text-sidebar-foreground/50",children:r.jsx("span",{children:"Non-Repudiation"})})})]})})]})}),r.jsx(Ba,{children:r.jsxs(Ua,{onClick:()=>y(!0),className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:[r.jsx("div",{className:P(!1),children:r.jsx(ku,{className:"w-5 h-5 text-white"})}),!m&&r.jsx("span",{children:"Logout"})]})})]})}):r.jsx(Qm,{className:"px-2 py-4",children:r.jsx(Km,{children:te.map(G=>r.jsx(Ba,{children:r.jsxs(Ua,{onClick:G.onClick,isActive:G.active,className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:[r.jsx("div",{className:P(G.active),children:r.jsx(G.icon,{className:Me("w-5 h-5",G.active?"text-primary":"text-white")})}),!m&&r.jsx("span",{children:G.label})]})},G.id))})})]})}),r.jsx(Jj,{open:w,onOpenChange:y,children:r.jsxs(w2,{children:[r.jsxs(b2,{children:[r.jsx(C2,{children:"Log out of your account?"}),r.jsx(E2,{children:"Youll need to sign in again to access your dashboard."})]}),r.jsxs(N2,{children:[r.jsx(A2,{children:"Cancel"}),r.jsx(S2,{onClick:k,children:"Log out"})]})]})})]})}const ar=({children:e})=>{const{user:n}=Vs();return r.jsx(Xw,{children:r.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-background",children:[r.jsx(t8,{}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"sticky top-0 z-10 bg-card border-b border-border px-6 py-4 flex items-center justify-between gap-4",children:r.jsx("div",{className:"flex items-center gap-4 w-full justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Zw,{className:"hover:bg-accent"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n?.fullName}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:n?.role})]})]})})}),r.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e})]})]})})},kn=Xp,n8=Hw,r8=Yp,I2=C.forwardRef(({className:e,...n},s)=>r.jsx(td,{ref:s,className:Me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n}));I2.displayName=td.displayName;const An=C.forwardRef(({className:e,children:n,...s},c)=>r.jsxs(r8,{children:[r.jsx(I2,{}),r.jsxs(nd,{ref:c,className:Me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[n,r.jsxs(xf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[r.jsx(yp,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));An.displayName=nd.displayName;const Pn=({className:e,...n})=>r.jsx("div",{className:Me("flex flex-col space-y-1.5 text-center sm:text-left",e),...n});Pn.displayName="DialogHeader";const pa=({className:e,...n})=>r.jsx("div",{className:Me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n});pa.displayName="DialogFooter";const In=C.forwardRef(({className:e,...n},s)=>r.jsx(rd,{ref:s,className:Me("text-lg font-semibold leading-none tracking-tight",e),...n}));In.displayName=rd.displayName;const dr=C.forwardRef(({className:e,...n},s)=>r.jsx(sd,{ref:s,className:Me("text-sm text-muted-foreground",e),...n}));dr.displayName=sd.displayName;const yl=C.forwardRef(({className:e,...n},s)=>r.jsx("textarea",{className:Me("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));yl.displayName="Textarea";function px(e,[n,s]){return Math.min(s,Math.max(n,e))}var s8=C.createContext(void 0);function a8(e){const n=C.useContext(s8);return e||n||"ltr"}function j2(e){const n=C.useRef({value:e,previous:e});return C.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}var i8=[" ","Enter","ArrowUp","ArrowDown"],o8=[" ","Enter"],vo="Select",[vf,wf,l8]=xy(vo),[Dl]=zs(vo,[l8,Tl]),bf=Tl(),[c8,Li]=Dl(vo),[d8,u8]=Dl(vo),T2=e=>{const{__scopeSelect:n,children:s,open:c,defaultOpen:f,onOpenChange:m,value:v,defaultValue:N,onValueChange:w,dir:y,name:E,autoComplete:I,disabled:O,required:_,form:k}=e,R=bf(n),[P,H]=C.useState(null),[z,F]=C.useState(null),[Z,W]=C.useState(!1),te=a8(y),[G,J]=_i({prop:c,defaultProp:f??!1,onChange:m,caller:vo}),[se,fe]=_i({prop:v,defaultProp:N,onChange:w,caller:vo}),Ee=C.useRef(null),ue=P?k||!!P.closest("form"):!0,[ge,re]=C.useState(new Set),q=Array.from(ge).map(U=>U.props.value).join(";");return r.jsx(Tp,{...R,children:r.jsxs(c8,{required:_,scope:n,trigger:P,onTriggerChange:H,valueNode:z,onValueNodeChange:F,valueNodeHasChildren:Z,onValueNodeHasChildrenChange:W,contentId:ji(),value:se,onValueChange:fe,open:G,onOpenChange:J,dir:te,triggerPointerDownPosRef:Ee,disabled:O,children:[r.jsx(vf.Provider,{scope:n,children:r.jsx(d8,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(U=>{re(K=>new Set(K).add(U))},[]),onNativeOptionRemove:C.useCallback(U=>{re(K=>{const ne=new Set(K);return ne.delete(U),ne})},[]),children:s})}),ue?r.jsxs(J2,{"aria-hidden":!0,required:_,tabIndex:-1,name:E,autoComplete:I,value:se,onChange:U=>fe(U.target.value),disabled:O,form:k,children:[se===void 0?r.jsx("option",{value:""}):null,Array.from(ge)]},q):null]})})};T2.displayName=vo;var R2="SelectTrigger",_2=C.forwardRef((e,n)=>{const{__scopeSelect:s,disabled:c=!1,...f}=e,m=bf(s),v=Li(R2,s),N=v.disabled||c,w=an(n,v.onTriggerChange),y=wf(s),E=C.useRef("touch"),[I,O,_]=tb(R=>{const P=y().filter(F=>!F.disabled),H=P.find(F=>F.value===v.value),z=nb(P,R,H);z!==void 0&&v.onValueChange(z.value)}),k=R=>{N||(v.onOpenChange(!0),_()),R&&(v.triggerPointerDownPosRef.current={x:Math.round(R.pageX),y:Math.round(R.pageY)})};return r.jsx(Rp,{asChild:!0,...m,children:r.jsx(jt.button,{type:"button",role:"combobox","aria-controls":v.contentId,"aria-expanded":v.open,"aria-required":v.required,"aria-autocomplete":"none",dir:v.dir,"data-state":v.open?"open":"closed",disabled:N,"data-disabled":N?"":void 0,"data-placeholder":eb(v.value)?"":void 0,...f,ref:w,onClick:yt(f.onClick,R=>{R.currentTarget.focus(),E.current!=="mouse"&&k(R)}),onPointerDown:yt(f.onPointerDown,R=>{E.current=R.pointerType;const P=R.target;P.hasPointerCapture(R.pointerId)&&P.releasePointerCapture(R.pointerId),R.button===0&&R.ctrlKey===!1&&R.pointerType==="mouse"&&(k(R),R.preventDefault())}),onKeyDown:yt(f.onKeyDown,R=>{const P=I.current!=="";!(R.ctrlKey||R.altKey||R.metaKey)&&R.key.length===1&&O(R.key),!(P&&R.key===" ")&&i8.includes(R.key)&&(k(),R.preventDefault())})})})});_2.displayName=R2;var D2="SelectValue",O2=C.forwardRef((e,n)=>{const{__scopeSelect:s,className:c,style:f,children:m,placeholder:v="",...N}=e,w=Li(D2,s),{onValueNodeHasChildrenChange:y}=w,E=m!==void 0,I=an(n,w.onValueNodeChange);return sr(()=>{y(E)},[y,E]),r.jsx(jt.span,{...N,ref:I,style:{pointerEvents:"none"},children:eb(w.value)?r.jsx(r.Fragment,{children:v}):m})});O2.displayName=D2;var f8="SelectIcon",k2=C.forwardRef((e,n)=>{const{__scopeSelect:s,children:c,...f}=e;return r.jsx(jt.span,{"aria-hidden":!0,...f,ref:n,children:c||""})});k2.displayName=f8;var h8="SelectPortal",P2=e=>r.jsx(sf,{asChild:!0,...e});P2.displayName=h8;var wo="SelectContent",M2=C.forwardRef((e,n)=>{const s=Li(wo,e.__scopeSelect),[c,f]=C.useState();if(sr(()=>{f(new DocumentFragment)},[]),!s.open){const m=c;return m?Cl.createPortal(r.jsx(L2,{scope:e.__scopeSelect,children:r.jsx(vf.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),m):null}return r.jsx(F2,{...e,ref:n})});M2.displayName=wo;var ea=10,[L2,Fi]=Dl(wo),m8="SelectContentImpl",p8=ml("SelectContent.RemoveScroll"),F2=C.forwardRef((e,n)=>{const{__scopeSelect:s,position:c="item-aligned",onCloseAutoFocus:f,onEscapeKeyDown:m,onPointerDownOutside:v,side:N,sideOffset:w,align:y,alignOffset:E,arrowPadding:I,collisionBoundary:O,collisionPadding:_,sticky:k,hideWhenDetached:R,avoidCollisions:P,...H}=e,z=Li(wo,s),[F,Z]=C.useState(null),[W,te]=C.useState(null),G=an(n,Ae=>Z(Ae)),[J,se]=C.useState(null),[fe,Ee]=C.useState(null),ue=wf(s),[ge,re]=C.useState(!1),q=C.useRef(!1);C.useEffect(()=>{if(F)return Sw(F)},[F]),gw();const U=C.useCallback(Ae=>{const[Ue,...qe]=ue().map(Ze=>Ze.ref.current),[st]=qe.slice(-1),me=document.activeElement;for(const Ze of Ae)if(Ze===me||(Ze?.scrollIntoView({block:"nearest"}),Ze===Ue&&W&&(W.scrollTop=0),Ze===st&&W&&(W.scrollTop=W.scrollHeight),Ze?.focus(),document.activeElement!==me))return},[ue,W]),K=C.useCallback(()=>U([J,F]),[U,J,F]);C.useEffect(()=>{ge&&K()},[ge,K]);const{onOpenChange:ne,triggerPointerDownPosRef:oe}=z;C.useEffect(()=>{if(F){let Ae={x:0,y:0};const Ue=st=>{Ae={x:Math.abs(Math.round(st.pageX)-(oe.current?.x??0)),y:Math.abs(Math.round(st.pageY)-(oe.current?.y??0))}},qe=st=>{Ae.x<=10&&Ae.y<=10?st.preventDefault():F.contains(st.target)||ne(!1),document.removeEventListener("pointermove",Ue),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",Ue),document.addEventListener("pointerup",qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ue),document.removeEventListener("pointerup",qe,{capture:!0})}}},[F,ne,oe]),C.useEffect(()=>{const Ae=()=>ne(!1);return window.addEventListener("blur",Ae),window.addEventListener("resize",Ae),()=>{window.removeEventListener("blur",Ae),window.removeEventListener("resize",Ae)}},[ne]);const[we,X]=tb(Ae=>{const Ue=ue().filter(me=>!me.disabled),qe=Ue.find(me=>me.ref.current===document.activeElement),st=nb(Ue,Ae,qe);st&&setTimeout(()=>st.ref.current.focus())}),ie=C.useCallback((Ae,Ue,qe)=>{const st=!q.current&&!qe;(z.value!==void 0&&z.value===Ue||st)&&(se(Ae),st&&(q.current=!0))},[z.value]),je=C.useCallback(()=>F?.focus(),[F]),Ie=C.useCallback((Ae,Ue,qe)=>{const st=!q.current&&!qe;(z.value!==void 0&&z.value===Ue||st)&&Ee(Ae)},[z.value]),We=c==="popper"?Jm:B2,_e=We===Jm?{side:N,sideOffset:w,align:y,alignOffset:E,arrowPadding:I,collisionBoundary:O,collisionPadding:_,sticky:k,hideWhenDetached:R,avoidCollisions:P}:{};return r.jsx(L2,{scope:s,content:F,viewport:W,onViewportChange:te,itemRefCallback:ie,selectedItem:J,onItemLeave:je,itemTextRefCallback:Ie,focusSelectedItem:K,selectedItemText:fe,position:c,isPositioned:ge,searchRef:we,children:r.jsx(Hp,{as:p8,allowPinchZoom:!0,children:r.jsx(Vp,{asChild:!0,trapped:z.open,onMountAutoFocus:Ae=>{Ae.preventDefault()},onUnmountAutoFocus:yt(f,Ae=>{z.trigger?.focus({preventScroll:!0}),Ae.preventDefault()}),children:r.jsx(Sl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:m,onPointerDownOutside:v,onFocusOutside:Ae=>Ae.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:r.jsx(We,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:Ae=>Ae.preventDefault(),...H,..._e,onPlaced:()=>re(!0),ref:G,style:{display:"flex",flexDirection:"column",outline:"none",...H.style},onKeyDown:yt(H.onKeyDown,Ae=>{const Ue=Ae.ctrlKey||Ae.altKey||Ae.metaKey;if(Ae.key==="Tab"&&Ae.preventDefault(),!Ue&&Ae.key.length===1&&X(Ae.key),["ArrowUp","ArrowDown","Home","End"].includes(Ae.key)){let st=ue().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(Ae.key)&&(st=st.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ae.key)){const me=Ae.target,Ze=st.indexOf(me);st=st.slice(Ze+1)}setTimeout(()=>U(st)),Ae.preventDefault()}})})})})})})});F2.displayName=m8;var g8="SelectItemAlignedPosition",B2=C.forwardRef((e,n)=>{const{__scopeSelect:s,onPlaced:c,...f}=e,m=Li(wo,s),v=Fi(wo,s),[N,w]=C.useState(null),[y,E]=C.useState(null),I=an(n,G=>E(G)),O=wf(s),_=C.useRef(!1),k=C.useRef(!0),{viewport:R,selectedItem:P,selectedItemText:H,focusSelectedItem:z}=v,F=C.useCallback(()=>{if(m.trigger&&m.valueNode&&N&&y&&R&&P&&H){const G=m.trigger.getBoundingClientRect(),J=y.getBoundingClientRect(),se=m.valueNode.getBoundingClientRect(),fe=H.getBoundingClientRect();if(m.dir!=="rtl"){const me=fe.left-J.left,Ze=se.left-me,Xe=G.left-Ze,ct=G.width+Xe,Yt=Math.max(ct,J.width),on=window.innerWidth-ea,T=px(Ze,[ea,Math.max(ea,on-Yt)]);N.style.minWidth=ct+"px",N.style.left=T+"px"}else{const me=J.right-fe.right,Ze=window.innerWidth-se.right-me,Xe=window.innerWidth-G.right-Ze,ct=G.width+Xe,Yt=Math.max(ct,J.width),on=window.innerWidth-ea,T=px(Ze,[ea,Math.max(ea,on-Yt)]);N.style.minWidth=ct+"px",N.style.right=T+"px"}const Ee=O(),ue=window.innerHeight-ea*2,ge=R.scrollHeight,re=window.getComputedStyle(y),q=parseInt(re.borderTopWidth,10),U=parseInt(re.paddingTop,10),K=parseInt(re.borderBottomWidth,10),ne=parseInt(re.paddingBottom,10),oe=q+U+ge+ne+K,we=Math.min(P.offsetHeight*5,oe),X=window.getComputedStyle(R),ie=parseInt(X.paddingTop,10),je=parseInt(X.paddingBottom,10),Ie=G.top+G.height/2-ea,We=ue-Ie,_e=P.offsetHeight/2,Ae=P.offsetTop+_e,Ue=q+U+Ae,qe=oe-Ue;if(Ue<=Ie){const me=Ee.length>0&&P===Ee[Ee.length-1].ref.current;N.style.bottom="0px";const Ze=y.clientHeight-R.offsetTop-R.offsetHeight,Xe=Math.max(We,_e+(me?je:0)+Ze+K),ct=Ue+Xe;N.style.height=ct+"px"}else{const me=Ee.length>0&&P===Ee[0].ref.current;N.style.top="0px";const Xe=Math.max(Ie,q+R.offsetTop+(me?ie:0)+_e)+qe;N.style.height=Xe+"px",R.scrollTop=Ue-Ie+R.offsetTop}N.style.margin=`${ea}px 0`,N.style.minHeight=we+"px",N.style.maxHeight=ue+"px",c?.(),requestAnimationFrame(()=>_.current=!0)}},[O,m.trigger,m.valueNode,N,y,R,P,H,m.dir,c]);sr(()=>F(),[F]);const[Z,W]=C.useState();sr(()=>{y&&W(window.getComputedStyle(y).zIndex)},[y]);const te=C.useCallback(G=>{G&&k.current===!0&&(F(),z?.(),k.current=!1)},[F,z]);return r.jsx(y8,{scope:s,contentWrapper:N,shouldExpandOnScrollRef:_,onScrollButtonChange:te,children:r.jsx("div",{ref:w,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Z},children:r.jsx(jt.div,{...f,ref:I,style:{boxSizing:"border-box",maxHeight:"100%",...f.style}})})})});B2.displayName=g8;var x8="SelectPopperPosition",Jm=C.forwardRef((e,n)=>{const{__scopeSelect:s,align:c="start",collisionPadding:f=ea,...m}=e,v=bf(s);return r.jsx(_p,{...v,...m,ref:n,align:c,collisionPadding:f,style:{boxSizing:"border-box",...m.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jm.displayName=x8;var[y8,Kp]=Dl(wo,{}),ep="SelectViewport",U2=C.forwardRef((e,n)=>{const{__scopeSelect:s,nonce:c,...f}=e,m=Fi(ep,s),v=Kp(ep,s),N=an(n,m.onViewportChange),w=C.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),r.jsx(vf.Slot,{scope:s,children:r.jsx(jt.div,{"data-radix-select-viewport":"",role:"presentation",...f,ref:N,style:{position:"relative",flex:1,overflow:"hidden auto",...f.style},onScroll:yt(f.onScroll,y=>{const E=y.currentTarget,{contentWrapper:I,shouldExpandOnScrollRef:O}=v;if(O?.current&&I){const _=Math.abs(w.current-E.scrollTop);if(_>0){const k=window.innerHeight-ea*2,R=parseFloat(I.style.minHeight),P=parseFloat(I.style.height),H=Math.max(R,P);if(H<k){const z=H+_,F=Math.min(k,z),Z=z-F;I.style.height=F+"px",I.style.bottom==="0px"&&(E.scrollTop=Z>0?Z:0,I.style.justifyContent="flex-end")}}}w.current=E.scrollTop})})})]})});U2.displayName=ep;var z2="SelectGroup",[v8,w8]=Dl(z2),b8=C.forwardRef((e,n)=>{const{__scopeSelect:s,...c}=e,f=ji();return r.jsx(v8,{scope:s,id:f,children:r.jsx(jt.div,{role:"group","aria-labelledby":f,...c,ref:n})})});b8.displayName=z2;var V2="SelectLabel",H2=C.forwardRef((e,n)=>{const{__scopeSelect:s,...c}=e,f=w8(V2,s);return r.jsx(jt.div,{id:f.id,...c,ref:n})});H2.displayName=V2;var Hu="SelectItem",[N8,W2]=Dl(Hu),$2=C.forwardRef((e,n)=>{const{__scopeSelect:s,value:c,disabled:f=!1,textValue:m,...v}=e,N=Li(Hu,s),w=Fi(Hu,s),y=N.value===c,[E,I]=C.useState(m??""),[O,_]=C.useState(!1),k=an(n,z=>w.itemRefCallback?.(z,c,f)),R=ji(),P=C.useRef("touch"),H=()=>{f||(N.onValueChange(c),N.onOpenChange(!1))};if(c==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(N8,{scope:s,value:c,disabled:f,textId:R,isSelected:y,onItemTextChange:C.useCallback(z=>{I(F=>F||(z?.textContent??"").trim())},[]),children:r.jsx(vf.ItemSlot,{scope:s,value:c,disabled:f,textValue:E,children:r.jsx(jt.div,{role:"option","aria-labelledby":R,"data-highlighted":O?"":void 0,"aria-selected":y&&O,"data-state":y?"checked":"unchecked","aria-disabled":f||void 0,"data-disabled":f?"":void 0,tabIndex:f?void 0:-1,...v,ref:k,onFocus:yt(v.onFocus,()=>_(!0)),onBlur:yt(v.onBlur,()=>_(!1)),onClick:yt(v.onClick,()=>{P.current!=="mouse"&&H()}),onPointerUp:yt(v.onPointerUp,()=>{P.current==="mouse"&&H()}),onPointerDown:yt(v.onPointerDown,z=>{P.current=z.pointerType}),onPointerMove:yt(v.onPointerMove,z=>{P.current=z.pointerType,f?w.onItemLeave?.():P.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:yt(v.onPointerLeave,z=>{z.currentTarget===document.activeElement&&w.onItemLeave?.()}),onKeyDown:yt(v.onKeyDown,z=>{w.searchRef?.current!==""&&z.key===" "||(o8.includes(z.key)&&H(),z.key===" "&&z.preventDefault())})})})})});$2.displayName=Hu;var Dc="SelectItemText",G2=C.forwardRef((e,n)=>{const{__scopeSelect:s,className:c,style:f,...m}=e,v=Li(Dc,s),N=Fi(Dc,s),w=W2(Dc,s),y=u8(Dc,s),[E,I]=C.useState(null),O=an(n,H=>I(H),w.onItemTextChange,H=>N.itemTextRefCallback?.(H,w.value,w.disabled)),_=E?.textContent,k=C.useMemo(()=>r.jsx("option",{value:w.value,disabled:w.disabled,children:_},w.value),[w.disabled,w.value,_]),{onNativeOptionAdd:R,onNativeOptionRemove:P}=y;return sr(()=>(R(k),()=>P(k)),[R,P,k]),r.jsxs(r.Fragment,{children:[r.jsx(jt.span,{id:w.textId,...m,ref:O}),w.isSelected&&v.valueNode&&!v.valueNodeHasChildren?Cl.createPortal(m.children,v.valueNode):null]})});G2.displayName=Dc;var X2="SelectItemIndicator",Y2=C.forwardRef((e,n)=>{const{__scopeSelect:s,...c}=e;return W2(X2,s).isSelected?r.jsx(jt.span,{"aria-hidden":!0,...c,ref:n}):null});Y2.displayName=X2;var tp="SelectScrollUpButton",Z2=C.forwardRef((e,n)=>{const s=Fi(tp,e.__scopeSelect),c=Kp(tp,e.__scopeSelect),[f,m]=C.useState(!1),v=an(n,c.onScrollButtonChange);return sr(()=>{if(s.viewport&&s.isPositioned){let N=function(){const y=w.scrollTop>0;m(y)};const w=s.viewport;return N(),w.addEventListener("scroll",N),()=>w.removeEventListener("scroll",N)}},[s.viewport,s.isPositioned]),f?r.jsx(Q2,{...e,ref:v,onAutoScroll:()=>{const{viewport:N,selectedItem:w}=s;N&&w&&(N.scrollTop=N.scrollTop-w.offsetHeight)}}):null});Z2.displayName=tp;var np="SelectScrollDownButton",q2=C.forwardRef((e,n)=>{const s=Fi(np,e.__scopeSelect),c=Kp(np,e.__scopeSelect),[f,m]=C.useState(!1),v=an(n,c.onScrollButtonChange);return sr(()=>{if(s.viewport&&s.isPositioned){let N=function(){const y=w.scrollHeight-w.clientHeight,E=Math.ceil(w.scrollTop)<y;m(E)};const w=s.viewport;return N(),w.addEventListener("scroll",N),()=>w.removeEventListener("scroll",N)}},[s.viewport,s.isPositioned]),f?r.jsx(Q2,{...e,ref:v,onAutoScroll:()=>{const{viewport:N,selectedItem:w}=s;N&&w&&(N.scrollTop=N.scrollTop+w.offsetHeight)}}):null});q2.displayName=np;var Q2=C.forwardRef((e,n)=>{const{__scopeSelect:s,onAutoScroll:c,...f}=e,m=Fi("SelectScrollButton",s),v=C.useRef(null),N=wf(s),w=C.useCallback(()=>{v.current!==null&&(window.clearInterval(v.current),v.current=null)},[]);return C.useEffect(()=>()=>w(),[w]),sr(()=>{N().find(E=>E.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[N]),r.jsx(jt.div,{"aria-hidden":!0,...f,ref:n,style:{flexShrink:0,...f.style},onPointerDown:yt(f.onPointerDown,()=>{v.current===null&&(v.current=window.setInterval(c,50))}),onPointerMove:yt(f.onPointerMove,()=>{m.onItemLeave?.(),v.current===null&&(v.current=window.setInterval(c,50))}),onPointerLeave:yt(f.onPointerLeave,()=>{w()})})}),C8="SelectSeparator",K2=C.forwardRef((e,n)=>{const{__scopeSelect:s,...c}=e;return r.jsx(jt.div,{"aria-hidden":!0,...c,ref:n})});K2.displayName=C8;var rp="SelectArrow",E8=C.forwardRef((e,n)=>{const{__scopeSelect:s,...c}=e,f=bf(s),m=Li(rp,s),v=Fi(rp,s);return m.open&&v.position==="popper"?r.jsx(Dp,{...f,...c,ref:n}):null});E8.displayName=rp;var S8="SelectBubbleInput",J2=C.forwardRef(({__scopeSelect:e,value:n,...s},c)=>{const f=C.useRef(null),m=an(c,f),v=j2(n);return C.useEffect(()=>{const N=f.current;if(!N)return;const w=window.HTMLSelectElement.prototype,E=Object.getOwnPropertyDescriptor(w,"value").set;if(v!==n&&E){const I=new Event("change",{bubbles:!0});E.call(N,n),N.dispatchEvent(I)}},[v,n]),r.jsx(jt.select,{...s,style:{...Ny,...s.style},ref:m,defaultValue:n})});J2.displayName=S8;function eb(e){return e===""||e===void 0}function tb(e){const n=Us(e),s=C.useRef(""),c=C.useRef(0),f=C.useCallback(v=>{const N=s.current+v;n(N),(function w(y){s.current=y,window.clearTimeout(c.current),y!==""&&(c.current=window.setTimeout(()=>w(""),1e3))})(N)},[n]),m=C.useCallback(()=>{s.current="",window.clearTimeout(c.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(c.current),[]),[s,f,m]}function nb(e,n,s){const f=n.length>1&&Array.from(n).every(y=>y===n[0])?n[0]:n,m=s?e.indexOf(s):-1;let v=A8(e,Math.max(m,0));f.length===1&&(v=v.filter(y=>y!==s));const w=v.find(y=>y.textValue.toLowerCase().startsWith(f.toLowerCase()));return w!==s?w:void 0}function A8(e,n){return e.map((s,c)=>e[(n+c)%e.length])}var I8=T2,rb=_2,j8=O2,T8=k2,R8=P2,sb=M2,_8=U2,ab=H2,ib=$2,D8=G2,O8=Y2,ob=Z2,lb=q2,cb=K2;const En=I8,Sn=j8,xn=C.forwardRef(({className:e,children:n,...s},c)=>r.jsxs(rb,{ref:c,className:Me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[n,r.jsx(T8,{asChild:!0,children:r.jsx(fo,{className:"h-4 w-4 opacity-50"})})]}));xn.displayName=rb.displayName;const db=C.forwardRef(({className:e,...n},s)=>r.jsx(ob,{ref:s,className:Me("flex cursor-default items-center justify-center py-1",e),...n,children:r.jsx(dE,{className:"h-4 w-4"})}));db.displayName=ob.displayName;const ub=C.forwardRef(({className:e,...n},s)=>r.jsx(lb,{ref:s,className:Me("flex cursor-default items-center justify-center py-1",e),...n,children:r.jsx(fo,{className:"h-4 w-4"})}));ub.displayName=lb.displayName;const yn=C.forwardRef(({className:e,children:n,position:s="popper",...c},f)=>r.jsx(R8,{children:r.jsxs(sb,{ref:f,className:Me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...c,children:[r.jsx(db,{}),r.jsx(_8,{className:Me("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),r.jsx(ub,{})]})}));yn.displayName=sb.displayName;const k8=C.forwardRef(({className:e,...n},s)=>r.jsx(ab,{ref:s,className:Me("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...n}));k8.displayName=ab.displayName;const nt=C.forwardRef(({className:e,children:n,...s},c)=>r.jsxs(ib,{ref:c,className:Me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(O8,{children:r.jsx(cE,{className:"h-4 w-4"})})}),r.jsx(D8,{children:n})]}));nt.displayName=ib.displayName;const P8=C.forwardRef(({className:e,...n},s)=>r.jsx(cb,{ref:s,className:Me("-mx-1 my-1 h-px bg-muted",e),...n}));P8.displayName=cb.displayName;var vm,Nf="HoverCard",[fb]=zs(Nf,[Tl]),Cf=Tl(),[M8,Jp]=fb(Nf),hb=e=>{const{__scopeHoverCard:n,children:s,open:c,defaultOpen:f,onOpenChange:m,openDelay:v=700,closeDelay:N=300}=e,w=Cf(n),y=C.useRef(0),E=C.useRef(0),I=C.useRef(!1),O=C.useRef(!1),[_,k]=_i({prop:c,defaultProp:f??!1,onChange:m,caller:Nf}),R=C.useCallback(()=>{clearTimeout(E.current),y.current=window.setTimeout(()=>k(!0),v)},[v,k]),P=C.useCallback(()=>{clearTimeout(y.current),!I.current&&!O.current&&(E.current=window.setTimeout(()=>k(!1),N))},[N,k]),H=C.useCallback(()=>k(!1),[k]);return C.useEffect(()=>()=>{clearTimeout(y.current),clearTimeout(E.current)},[]),r.jsx(M8,{scope:n,open:_,onOpenChange:k,onOpen:R,onClose:P,onDismiss:H,hasSelectionRef:I,isPointerDownOnContentRef:O,children:r.jsx(Tp,{...w,children:s})})};hb.displayName=Nf;var mb="HoverCardTrigger",pb=C.forwardRef((e,n)=>{const{__scopeHoverCard:s,...c}=e,f=Jp(mb,s),m=Cf(s);return r.jsx(Rp,{asChild:!0,...m,children:r.jsx(jt.a,{"data-state":f.open?"open":"closed",...c,ref:n,onPointerEnter:yt(e.onPointerEnter,$u(f.onOpen)),onPointerLeave:yt(e.onPointerLeave,$u(f.onClose)),onFocus:yt(e.onFocus,f.onOpen),onBlur:yt(e.onBlur,f.onClose),onTouchStart:yt(e.onTouchStart,v=>v.preventDefault())})})});pb.displayName=mb;var L8="HoverCardPortal",[g_,F8]=fb(L8,{forceMount:void 0}),Wu="HoverCardContent",gb=C.forwardRef((e,n)=>{const s=F8(Wu,e.__scopeHoverCard),{forceMount:c=s.forceMount,...f}=e,m=Jp(Wu,e.__scopeHoverCard);return r.jsx(Mi,{present:c||m.open,children:r.jsx(B8,{"data-state":m.open?"open":"closed",...f,onPointerEnter:yt(e.onPointerEnter,$u(m.onOpen)),onPointerLeave:yt(e.onPointerLeave,$u(m.onClose)),ref:n})})});gb.displayName=Wu;var B8=C.forwardRef((e,n)=>{const{__scopeHoverCard:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,...N}=e,w=Jp(Wu,s),y=Cf(s),E=C.useRef(null),I=an(n,E),[O,_]=C.useState(!1);return C.useEffect(()=>{if(O){const k=document.body;return vm=k.style.userSelect||k.style.webkitUserSelect,k.style.userSelect="none",k.style.webkitUserSelect="none",()=>{k.style.userSelect=vm,k.style.webkitUserSelect=vm}}},[O]),C.useEffect(()=>{if(E.current){const k=()=>{_(!1),w.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(w.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",k),()=>{document.removeEventListener("pointerup",k),w.hasSelectionRef.current=!1,w.isPointerDownOnContentRef.current=!1}}},[w.isPointerDownOnContentRef,w.hasSelectionRef]),C.useEffect(()=>{E.current&&V8(E.current).forEach(R=>R.setAttribute("tabindex","-1"))}),r.jsx(Sl,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:v,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:yt(m,k=>{k.preventDefault()}),onDismiss:w.onDismiss,children:r.jsx(_p,{...y,...N,onPointerDown:yt(N.onPointerDown,k=>{k.currentTarget.contains(k.target)&&_(!0),w.hasSelectionRef.current=!1,w.isPointerDownOnContentRef.current=!0}),ref:I,style:{...N.style,userSelect:O?"text":void 0,WebkitUserSelect:O?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),U8="HoverCardArrow",z8=C.forwardRef((e,n)=>{const{__scopeHoverCard:s,...c}=e,f=Cf(s);return r.jsx(Dp,{...f,...c,ref:n})});z8.displayName=U8;function $u(e){return n=>n.pointerType==="touch"?void 0:e()}function V8(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;s.nextNode();)n.push(s.currentNode);return n}var H8=hb,W8=pb,xb=gb;const gx=H8,xx=W8,sp=C.forwardRef(({className:e,align:n="center",sideOffset:s=4,...c},f)=>r.jsx(xb,{ref:f,align:n,sideOffset:s,className:Me("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...c}));sp.displayName=xb.displayName;const $8=Eo("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $r({className:e,variant:n,...s}){return r.jsx("div",{className:Me($8({variant:n}),e),...s})}const bc="hrms_employees",yx=[{id:"1",employeeId:"EMP001",firstName:"John",middleName:"A.",lastName:"Doe",suffixName:"Jr.",fullName:"John A. Doe Jr.",department:"IT Department",position:"Software Developer",email:"john.doe@company.com",phone:"+1234567890",dateOfBirth:"1990-05-15",address:"123 Main St, City, State 12345",dateHired:"2020-01-15",employmentType:"Regular",status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",employeeId:"EMP002",firstName:"Jane",middleName:"B.",lastName:"Smith",suffixName:"",fullName:"Jane B. Smith",department:"HR Department",position:"HR Manager",email:"jane.smith@company.com",phone:"+1234567891",dateOfBirth:"1988-08-22",address:"456 Oak Ave, City, State 12345",dateHired:"2019-03-10",employmentType:"Regular",status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",employeeId:"EMP003",firstName:"Mike",middleName:"C.",lastName:"Johnson",suffixName:"",fullName:"Mike C. Johnson",department:"Finance",position:"Accountant",email:"mike.johnson@company.com",phone:"+1234567892",dateOfBirth:"1992-12-05",address:"789 Pine Rd, City, State 12345",dateHired:"2021-06-20",employmentType:"Regular",status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],Ou={getAll(){const e=localStorage.getItem(bc);return e?JSON.parse(e):(localStorage.setItem(bc,JSON.stringify(yx)),yx)},getActive(){return this.getAll().filter(e=>e.status==="active")},getInactive(){return this.getAll().filter(e=>e.status==="inactive")},getById(e){return this.getAll().find(n=>n.id===e)},add(e){const n=this.getAll(),s={...e,id:Date.now().toString(),employmentType:e.employmentType||"Regular",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.push(s),localStorage.setItem(bc,JSON.stringify(n)),s},update(e,n){const s=this.getAll(),c=s.findIndex(f=>f.id===e);return c===-1?null:(s[c]={...s[c],...n,updatedAt:new Date().toISOString()},localStorage.setItem(bc,JSON.stringify(s)),s[c])},archive(e,n){return this.update(e,{status:"inactive",archivedReason:n,archivedDate:new Date().toISOString()})},restore(e){return this.update(e,{status:"active",archivedReason:void 0,archivedDate:void 0})},delete(e){const n=this.getAll(),s=n.filter(c=>c.id!==e);return s.length===n.length?!1:(localStorage.setItem(bc,JSON.stringify(s)),!0)}},Nc="hrms_attendance",vx=[{id:"1",employeeId:"EMP001",employeeName:"John Doe",date:new Date().toISOString().split("T")[0],checkIn:"09:00",checkOut:"17:00",status:"present",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],G8={getAll(){const e=localStorage.getItem(Nc);return e?JSON.parse(e):(localStorage.setItem(Nc,JSON.stringify(vx)),vx)},getByDateRange(e,n){return this.getAll().filter(s=>s.date>=e&&s.date<=n)},getByEmployee(e){return this.getAll().filter(n=>n.employeeId===e)},getByEmployeeAndDate(e,n){return this.getAll().find(c=>c.employeeId===e&&c.date===n)||null},add(e){const n=this.getAll(),s={...e,id:Date.now().toString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.push(s),localStorage.setItem(Nc,JSON.stringify(n)),s},update(e,n){const s=this.getAll(),c=s.findIndex(f=>f.id===e);return c===-1?null:(s[c]={...s[c],...n,updatedAt:new Date().toISOString()},localStorage.setItem(Nc,JSON.stringify(s)),s[c])},delete(e){const n=this.getAll(),s=n.filter(c=>c.id!==e);return s.length===n.length?!1:(localStorage.setItem(Nc,JSON.stringify(s)),!0)}},Cu="hrms_todos",co={getAll(){const e=localStorage.getItem(Cu);return e?JSON.parse(e):[]},add(e){const n=this.getAll(),s={id:Date.now().toString(),task:e.trim(),completed:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.push(s),localStorage.setItem(Cu,JSON.stringify(n)),s},update(e,n){const s=this.getAll(),c=s.findIndex(f=>f.id===e);return c===-1?null:(s[c]={...s[c],...n,updatedAt:new Date().toISOString()},localStorage.setItem(Cu,JSON.stringify(s)),s[c])},toggle(e){const n=this.getAll().find(s=>s.id===e);return n?this.update(e,{completed:!n.completed}):null},delete(e){const n=this.getAll(),s=n.filter(c=>c.id!==e);return s.length===n.length?!1:(localStorage.setItem(Cu,JSON.stringify(s)),!0)}},Cc="https://bbaec9682261.ngrok-free.app",X8=()=>{const{user:e,logout:n}=Vs(),s=Na(),{toast:c}=Un(),f=ee=>{s("/documents",{state:{openDialog:ee}})},m=ee=>{s("/organization/department",{state:{openDialog:ee}})},[v,N]=C.useState(!1),[w,y]=C.useState(null),[E,I]=C.useState("reminder"),[O,_]=C.useState(""),[k,R]=C.useState(""),[P,H]=C.useState(""),[z,F]=C.useState(""),[Z,W]=C.useState({}),[te,G]=C.useState(!1),[J,se]=C.useState(!1),[fe,Ee]=C.useState([]),[ue,ge]=C.useState([]),[re,q]=C.useState(!1),[U,K]=C.useState(""),[ne,oe]=C.useState([]),[we,X]=C.useState({present:0,absent:0,late:0}),ie=new Date,je=ie.getMonth()+1,Ie=ie.getFullYear(),We=new Date(Ie,je-1,1).getDay(),_e=new Date(Ie,je,0).getDate(),Ae=[];for(let ee=0;ee<We;ee++)Ae.push(null);for(let ee=1;ee<=_e;ee++)Ae.push(ee);for(;Ae.length<35;)Ae.push(null);const Ue=ee=>new Date(Ie,je-1,ee).toISOString().split("T")[0],qe=ee=>{const pe=new Date(ee);return pe.getMonth()+1!==je||pe.getFullYear()!==Ie?null:pe.getDate()},st=async()=>{try{G(!0);const ee=await fetch(`${Cc}/calendar-events?month=${je}&year=${Ie}`);if(!ee.ok)throw new Error("Failed to fetch calendar events");const pe=await ee.json(),at={};pe.data.forEach(dt=>{const Bt=qe(dt.eventDate);Bt!==null&&(at[Bt]||(at[Bt]=[]),at[Bt].push(dt))}),W(at)}catch(ee){if(ee instanceof TypeError&&ee.message.includes("Failed to fetch")){W({}),G(!1);return}console.error("Error fetching calendar events",ee),c({variant:"destructive",title:"Error",description:"Unable to load calendar events. Please try again."})}finally{G(!1)}},me=async()=>{try{const ee=await fetch(`${Cc}/activity-logs/recent?limit=5`);if(!ee.ok)throw new Error("Failed to fetch activity logs");const at=(await ee.json()).data.map(dt=>({action:dt.description||`${dt.actionType} ${dt.resourceType}`,name:dt.resourceName||dt.userName,time:Be(new Date(dt.createdAt))}));Ee(at)}catch(ee){if(ee instanceof TypeError&&ee.message.includes("Failed to fetch")){Ee([]);return}console.error("Error fetching activity logs",ee)}},Ze=async()=>{try{const ee=new Date().toISOString().split("T")[0],pe=await St(`${Cc}/attendance?date=${ee}`);if(!pe.ok)throw new Error("Failed to fetch attendance");const dt=(await pe.json()).data||[];oe(dt);const Bt=await fetch(`${Cc}/employees?status=active`);let Mn=0;Bt.ok&&(Mn=(await Bt.json()).data?.length||0);const Pt=dt.filter(zt=>zt.status==="present").length,it=dt.filter(zt=>zt.status==="late").length,fr=new Date().getHours()>=17,Ir=dt.filter(zt=>zt.status==="absent").length;let As=Ir;if(fr){const zt=new Set(dt.map(fn=>fn.employeeId)),ke=Mn-zt.size;As=Ir+ke}X({present:Math.max(0,Pt),absent:Math.max(0,As),late:Math.max(0,it)})}catch(ee){if(ee instanceof TypeError&&ee.message.includes("Failed to fetch")){X({present:0,absent:0,late:0});return}console.error("Error fetching attendance",ee)}};C.useEffect(()=>{const ee=()=>new Date().toISOString().split("T")[0];let pe=ee(),at=!1;const dt=()=>{const Mn=new Date,Pt=ee(),it=Mn.getHours(),vn=Mn.getMinutes();it===23&&vn>=59&&!at?(X({present:0,absent:0,late:0}),oe([]),at=!0):Pt!==pe?(at=!1,pe=Pt,Ze()):(!at||it<23||vn<59)&&Ze()};dt();const Bt=setInterval(dt,3e5);return()=>clearInterval(Bt)},[]),C.useEffect(()=>{ge(co.getAll())},[]),C.useEffect(()=>{e?.role==="admin"&&(st(),me(),Ze())},[je,Ie,e?.role]);const Xe=()=>{if(!U.trim()){c({variant:"destructive",title:"Error",description:"Please enter a task."});return}co.add(U),ge(co.getAll()),K(""),q(!1),c({title:"Success",description:"Todo added successfully."})},ct=ee=>{co.toggle(ee),ge(co.getAll())},Yt=ee=>{co.delete(ee),ge(co.getAll()),c({title:"Success",description:"Todo deleted successfully."})},on=[{key:"attendance",title:"Attendance",description:"View attendance history",icon:cs,iconClasses:"text-accent",bg:"bg-accent/10",handler:()=>s("/attendance/list")},{key:"profile",title:"My Profile",description:"Update your information",icon:Lc,iconClasses:"text-primary",bg:"bg-primary/10",handler:()=>s("/profile")},{key:"logout",title:"Logout",description:"Log out",icon:ku,iconClasses:"text-destructive",bg:"bg-destructive/10",handler:()=>{n(),s("/login")}}],T=ee=>{if(!ee)return;console.log("handleDayClick called with day:",ee);const pe=Ue(ee);console.log("Date string:",pe),y(ee),I("reminder"),_(""),R(""),H(pe),F(""),setTimeout(()=>{console.log("Setting showEventModal to true"),N(!0)},0)},Re=async()=>{if(!(!O.trim()||!P))try{if(se(!0),!(await St(`${Cc}/calendar-events`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:O.trim(),type:E,description:k.trim()||null,eventDate:P,eventTime:z||null,createdBy:e?.fullName||null})})).ok)throw new Error("Failed to save calendar event");await st(),N(!1),_(""),R(""),H(""),F(""),c({title:"Success",description:"Event/Reminder saved successfully"})}catch(ee){console.error("Error saving calendar event",ee),c({variant:"destructive",title:"Error",description:"Unable to save event. Please try again."})}finally{se(!1)}},Be=ee=>{const at=new Date().getTime()-ee.getTime(),dt=Math.floor(at/6e4),Bt=Math.floor(at/36e5),Mn=Math.floor(at/864e5);return dt<60?`${dt} minutes ago`:Bt<24?`${Bt} hours ago`:Mn<7?`${Mn} days ago`:ee.toLocaleDateString()};return C.useMemo(()=>{const ee=Ou.getAll(),pe=Ou.getActive(),at=Ou.getInactive(),dt=G8.getAll(),Bt=new Date().toISOString().split("T")[0],Pt=dt.filter(ke=>ke.date===Bt).filter(ke=>ke.status==="present"||ke.status==="late").length,it=pe.length-Pt,vn=new Set(pe.map(ke=>ke.department).filter(Boolean)),zn=Array.from(vn).map((ke,fn)=>{const Lt=pe.filter(ds=>ds.department===ke).length,nn=["bg-primary","bg-accent","bg-success","bg-warning","bg-destructive"];return{name:ke,count:Lt,color:nn[fn%nn.length]||"bg-primary"}}),fr=new Date;fr.setDate(fr.getDate()-30);const Ir=ee.filter(ke=>new Date(ke.createdAt)>=fr),As=ee.length-Ir.length,zt=As>0?ee.length-As:0;return{totalEmployees:ee.length,activeEmployees:pe.length,inactiveEmployees:at.length,presentToday:Pt,absentToday:it,departmentsCount:vn.size,departmentCounts:zn,growth:zt}},[]),e?.role==="admin"?r.jsx(ar,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(Ye,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s("/employees"),children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[r.jsx(Fs,{className:"w-8 h-8 text-primary"}),r.jsx(Bn,{className:"text-lg",children:"Employees"}),r.jsx(Se,{variant:"link",className:"text-primary",children:"View Details"})]})})}),r.jsx(Ye,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s("/attendance/list"),children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[r.jsx(cs,{className:"w-8 h-8 text-primary"}),r.jsx(Bn,{className:"text-lg",children:"Attendance"}),r.jsx(Se,{variant:"link",className:"text-primary",children:"View Details"})]})})}),r.jsx(Ye,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>f("documents"),children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[r.jsx(Hr,{className:"w-8 h-8 text-primary"}),r.jsx(Bn,{className:"text-lg",children:"Documents"}),r.jsx(Se,{variant:"link",className:"text-primary",children:"View Details"})]})})}),r.jsx(Ye,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>m({name:"department"}),children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[r.jsx($y,{className:"w-8 h-8 text-primary"}),r.jsx(Bn,{className:"text-lg",children:"Organization"}),r.jsx(Se,{variant:"link",className:"text-primary",children:"View Details"})]})})})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:we.absent}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Absent Employees"})]})]})})}),r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:we.present}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Present Employees"})]})]})})}),r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:we.late}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Late Employees"})]})]})})})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsxs(Ye,{className:"h-[320px] flex flex-col overflow-hidden",children:[r.jsx(rr,{className:"pb-2 flex-shrink-0",children:r.jsx(Bn,{className:"text-xl",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}).toUpperCase()})}),r.jsxs(Gt,{className:"pt-0 flex-1 flex flex-col min-h-0 overflow-hidden",children:[r.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 flex-shrink-0",children:["S","M","T","W","T","F","S"].map((ee,pe)=>r.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:ee},pe))}),r.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1 min-h-0",style:{gridTemplateRows:"repeat(5, minmax(0, 1fr))"},children:Ae.map((ee,pe)=>{const at=ee?Z[ee]||[]:[],dt=at.length>0,Bt=at.some(it=>it.type==="event"),Mn=at.some(it=>it.type==="reminder"),Pt=r.jsxs("div",{className:`relative flex h-full w-full flex-col items-center justify-center rounded-md text-sm transition-colors overflow-hidden ${ee?"hover:bg-accent cursor-pointer active:bg-accent/80":"cursor-default text-transparent pointer-events-none"}`,onClick:it=>{ee&&(console.log("Calendar day clicked, day:",ee),it.preventDefault(),it.stopPropagation(),T(ee))},role:"button",tabIndex:ee?0:-1,onKeyDown:it=>{ee&&(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),T(ee))},children:[r.jsx("span",{className:"font-medium text-xs sm:text-sm truncate",children:ee??""}),ee&&dt&&r.jsxs("div",{className:"mt-1 flex items-center gap-0.5",children:[Bt&&r.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 ring-2 ring-blue-200",title:"Event"}),Mn&&r.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary",title:"Reminder"})]})]});return!ee||!dt?r.jsx("div",{children:Pt},pe):r.jsxs(gx,{openDelay:200,closeDelay:100,children:[r.jsx(xx,{asChild:!0,children:Pt}),r.jsx(sp,{className:"w-80",side:"top",align:"center",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold mb-2",children:new Date(Ue(ee)).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),r.jsx("div",{className:"space-y-2",children:at.map((it,vn)=>r.jsxs("div",{className:"border-l-2 border-primary pl-3 py-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx($r,{variant:it.type==="event"?"default":"secondary",className:"text-xs",children:it.type==="event"?"Event":"Reminder"}),it.eventTime&&r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(cs,{className:"h-3 w-3"}),it.eventTime]})]}),r.jsx("p",{className:"text-sm font-medium text-foreground",children:it.title}),it.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:it.description}),it.createdBy&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Created by: ",it.createdBy]})]},vn))})]}),r.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Click the date to view details"})]})})]},pe)})})]})]}),r.jsxs(Ye,{className:"h-[320px] flex flex-col",children:[r.jsx(rr,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Bn,{children:"To Do List"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"List of your next task to complete"})]}),r.jsx(Se,{size:"sm",onClick:()=>q(!0),className:"rounded-full h-8 w-8 p-0",children:r.jsx(Pu,{className:"h-4 w-4"})})]})}),r.jsx(Gt,{className:"pt-0 flex-1 flex flex-col overflow-y-auto",children:r.jsx("div",{className:"space-y-2 flex-1",children:ue.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-sm",children:"No tasks yet. Click + to add one."}):ue.map(ee=>r.jsxs("div",{className:"flex items-center gap-3 py-1 group",children:[r.jsx("button",{onClick:()=>ct(ee.id),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${ee.completed?"bg-success border-success":"border-muted-foreground hover:border-primary"}`,children:ee.completed&&r.jsx("span",{className:"text-white text-xs",children:""})}),r.jsx("span",{className:`text-sm flex-1 ${ee.completed?"line-through text-muted-foreground":""}`,children:ee.task}),r.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>Yt(ee.id),className:"opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 text-destructive hover:text-destructive",children:r.jsx(pl,{className:"h-3 w-3"})})]},ee.id))})})]})]}),r.jsx(kn,{open:v,onOpenChange:ee=>{console.log("Dialog onOpenChange called with:",ee),N(ee),ee||(_(""),R(""),H(""),F(""),y(null))},children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:w?`Schedule for ${new Date(P||Ue(w)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`:"Schedule"}),r.jsx(dr,{children:"Add a reminder or event to keep track of your schedule."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Type"}),r.jsxs(En,{value:E,onValueChange:ee=>I(ee),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select type"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"reminder",children:"Reminder"}),r.jsx(nt,{value:"event",children:"Event"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Date"}),r.jsx(Te,{type:"date",value:P,onChange:ee=>H(ee.target.value),className:"w-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Time"}),r.jsx(Te,{type:"time",value:z,onChange:ee=>F(ee.target.value),className:"w-full"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Event Name"}),r.jsx(Te,{placeholder:"Team sync, submit report...",value:O,onChange:ee=>_(ee.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Description"}),r.jsx(yl,{placeholder:"Add notes, agenda, preparation reminders...",value:k,onChange:ee=>R(ee.target.value),rows:4})]}),w&&(Z[w]?.length??0)>0&&r.jsxs("div",{className:"rounded-lg border bg-muted/40 p-3 space-y-2",children:[r.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Existing items for this date"}),r.jsx("ul",{className:"space-y-2",children:Z[w].map((ee,pe)=>r.jsxs("li",{className:"text-sm",children:[r.jsx("span",{className:"font-medium capitalize",children:ee.type}),": ",ee.title]},`${ee.title}-${pe}`))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Se,{variant:"outline",onClick:()=>N(!1),disabled:J,children:"Cancel"}),r.jsx(Se,{onClick:Re,disabled:!O.trim()||!P||J,children:J?"Saving...":"Save"})]})]})}),r.jsx(kn,{open:re,onOpenChange:q,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Add New Task"}),r.jsx(dr,{children:"Add a new task to your todo list."})]}),r.jsx("div",{className:"space-y-4 py-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Task"}),r.jsx(Te,{placeholder:"Enter task description...",value:U,onChange:ee=>K(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&Xe()},autoFocus:!0})]})}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:()=>{q(!1),K("")},children:"Cancel"}),r.jsx(Se,{onClick:Xe,disabled:!U.trim(),children:"Add Task"})]})]})})]})}):r.jsx(ar,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:on.map(ee=>r.jsx(Ye,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:ee.handler,children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${ee.bg}`,children:r.jsx(ee.icon,{className:`w-5 h-5 ${ee.iconClasses}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:ee.title}),r.jsx("p",{className:"text-xs text-muted-foreground",children:ee.description})]})]})})},ee.key))}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:we.absent}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Absent Employees"})]})]})})}),r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:we.present}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Present Employees"})]})]})})}),r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:we.late}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Late Employees"})]})]})})})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsxs(Ye,{className:"h-[320px] flex flex-col",children:[r.jsx(rr,{className:"pb-2",children:r.jsx(Bn,{className:"text-xl",children:"APRIL 2025"})}),r.jsxs(Gt,{className:"pt-0 flex-1 flex flex-col",children:[r.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map((ee,pe)=>r.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:ee},pe))}),r.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1 auto-rows-[minmax(35px,1fr)]",children:Ae.map((ee,pe)=>{const at=ee?Z[ee]||[]:[],dt=at.length>0,Bt=at.some(it=>it.type==="event"),Mn=at.some(it=>it.type==="reminder"),Pt=r.jsxs("div",{className:`relative flex h-full w-full flex-col items-center justify-center rounded-md text-sm transition-colors ${ee?"hover:bg-accent cursor-pointer active:bg-accent/80":"cursor-default text-transparent pointer-events-none"}`,onClick:it=>{ee&&(it.preventDefault(),it.stopPropagation(),T(ee))},role:"button",tabIndex:ee?0:-1,onKeyDown:it=>{ee&&(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),T(ee))},children:[r.jsx("span",{className:"font-medium",children:ee??""}),ee&&dt&&r.jsxs("div",{className:"mt-1 flex items-center gap-0.5",children:[Bt&&r.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive ring-2 ring-destructive/30",title:"Event"}),Mn&&r.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary",title:"Reminder"})]})]});return!ee||!dt?r.jsx("div",{children:Pt},pe):r.jsxs(gx,{openDelay:200,closeDelay:100,children:[r.jsx(xx,{asChild:!0,children:Pt}),r.jsx(sp,{className:"w-80",side:"top",align:"center",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold mb-2",children:new Date(Ue(ee)).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),r.jsx("div",{className:"space-y-2",children:at.map((it,vn)=>r.jsxs("div",{className:"border-l-2 border-primary pl-3 py-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx($r,{variant:it.type==="event"?"default":"secondary",className:"text-xs",children:it.type==="event"?"Event":"Reminder"}),it.eventTime&&r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(cs,{className:"h-3 w-3"}),it.eventTime]})]}),r.jsx("p",{className:"text-sm font-medium text-foreground",children:it.title}),it.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:it.description}),it.createdBy&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Created by: ",it.createdBy]})]},vn))})]}),r.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Click the date to view details"})]})})]},pe)})})]})]}),r.jsxs(Ye,{className:"h-[320px] flex flex-col",children:[r.jsx(rr,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Bn,{children:"To Do List"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"List of your next task to complete"})]}),r.jsx(Se,{size:"sm",onClick:()=>q(!0),className:"rounded-full h-8 w-8 p-0",children:r.jsx(Pu,{className:"h-4 w-4"})})]})}),r.jsx(Gt,{className:"pt-0 flex-1 flex flex-col overflow-y-auto",children:r.jsx("div",{className:"space-y-2 flex-1",children:ue.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-sm",children:"No tasks yet. Click + to add one."}):ue.map(ee=>r.jsxs("div",{className:"flex items-center gap-3 py-1 group",children:[r.jsx("button",{onClick:()=>ct(ee.id),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${ee.completed?"bg-success border-success":"border-muted-foreground hover:border-primary"}`,children:ee.completed&&r.jsx("span",{className:"text-white text-xs",children:""})}),r.jsx("span",{className:`text-sm flex-1 ${ee.completed?"line-through text-muted-foreground":""}`,children:ee.task}),r.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>Yt(ee.id),className:"opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 text-destructive hover:text-destructive",children:r.jsx(pl,{className:"h-3 w-3"})})]},ee.id))})})]})]}),r.jsx(kn,{open:v,onOpenChange:ee=>{console.log("Dialog onOpenChange called with:",ee),N(ee),ee||(_(""),R(""),H(""),F(""),y(null))},children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:w?`Schedule for ${new Date(P||Ue(w)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`:"Schedule"}),r.jsx(dr,{children:"Add a reminder or event to keep track of your schedule."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Type"}),r.jsxs(En,{value:E,onValueChange:ee=>I(ee),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select type"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"reminder",children:"Reminder"}),r.jsx(nt,{value:"event",children:"Event"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Date"}),r.jsx(Te,{type:"date",value:P,onChange:ee=>H(ee.target.value),className:"w-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Time"}),r.jsx(Te,{type:"time",value:z,onChange:ee=>F(ee.target.value),className:"w-full"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Event Name"}),r.jsx(Te,{placeholder:"Team sync, submit report...",value:O,onChange:ee=>_(ee.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Description"}),r.jsx(yl,{placeholder:"Add notes, agenda, preparation reminders...",value:k,onChange:ee=>R(ee.target.value),rows:4})]}),w&&(Z[w]?.length??0)>0&&r.jsxs("div",{className:"rounded-lg border bg-muted/40 p-3 space-y-2",children:[r.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Existing items for this date"}),r.jsx("ul",{className:"space-y-2",children:Z[w].map((ee,pe)=>r.jsxs("li",{className:"text-sm",children:[r.jsx("span",{className:"font-medium capitalize",children:ee.type}),": ",ee.title]},`${ee.title}-${pe}`))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Se,{variant:"outline",onClick:()=>N(!1),disabled:J,children:"Cancel"}),r.jsx(Se,{onClick:Re,disabled:!O.trim()||!P||J,children:J?"Saving...":"Save"})]})]})}),r.jsx(kn,{open:re,onOpenChange:q,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Add New Task"}),r.jsx(dr,{children:"Add a new task to your todo list."})]}),r.jsx("div",{className:"space-y-4 py-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Task"}),r.jsx(Te,{placeholder:"Enter task description...",value:U,onChange:ee=>K(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&Xe()},autoFocus:!0})]})}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:()=>{q(!1),K("")},children:"Cancel"}),r.jsx(Se,{onClick:Xe,disabled:!U.trim(),children:"Add Task"})]})]})})]})})};var Y8=Object.defineProperty,Gu=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,vb=Object.prototype.propertyIsEnumerable,wx=(e,n,s)=>n in e?Y8(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,ap=(e,n)=>{for(var s in n||(n={}))yb.call(n,s)&&wx(e,s,n[s]);if(Gu)for(var s of Gu(n))vb.call(n,s)&&wx(e,s,n[s]);return e},ip=(e,n)=>{var s={};for(var c in e)yb.call(e,c)&&n.indexOf(c)<0&&(s[c]=e[c]);if(e!=null&&Gu)for(var c of Gu(e))n.indexOf(c)<0&&vb.call(e,c)&&(s[c]=e[c]);return s};var bo;(e=>{const n=class $t{constructor(w,y,E,I){if(this.version=w,this.errorCorrectionLevel=y,this.modules=[],this.isFunction=[],w<$t.MIN_VERSION||w>$t.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let O=[];for(let k=0;k<this.size;k++)O.push(!1);for(let k=0;k<this.size;k++)this.modules.push(O.slice()),this.isFunction.push(O.slice());this.drawFunctionPatterns();const _=this.addEccAndInterleave(E);if(this.drawCodewords(_),I==-1){let k=1e9;for(let R=0;R<8;R++){this.applyMask(R),this.drawFormatBits(R);const P=this.getPenaltyScore();P<k&&(I=R,k=P),this.applyMask(R)}}f(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,y){const E=e.QrSegment.makeSegments(w);return $t.encodeSegments(E,y)}static encodeBinary(w,y){const E=e.QrSegment.makeBytes(w);return $t.encodeSegments([E],y)}static encodeSegments(w,y,E=1,I=40,O=-1,_=!0){if(!($t.MIN_VERSION<=E&&E<=I&&I<=$t.MAX_VERSION)||O<-1||O>7)throw new RangeError("Invalid value");let k,R;for(k=E;;k++){const F=$t.getNumDataCodewords(k,y)*8,Z=v.getTotalBits(w,k);if(Z<=F){R=Z;break}if(k>=I)throw new RangeError("Data too long")}for(const F of[$t.Ecc.MEDIUM,$t.Ecc.QUARTILE,$t.Ecc.HIGH])_&&R<=$t.getNumDataCodewords(k,F)*8&&(y=F);let P=[];for(const F of w){s(F.mode.modeBits,4,P),s(F.numChars,F.mode.numCharCountBits(k),P);for(const Z of F.getData())P.push(Z)}f(P.length==R);const H=$t.getNumDataCodewords(k,y)*8;f(P.length<=H),s(0,Math.min(4,H-P.length),P),s(0,(8-P.length%8)%8,P),f(P.length%8==0);for(let F=236;P.length<H;F^=253)s(F,8,P);let z=[];for(;z.length*8<P.length;)z.push(0);return P.forEach((F,Z)=>z[Z>>>3]|=F<<7-(Z&7)),new $t(k,y,z,O)}getModule(w,y){return 0<=w&&w<this.size&&0<=y&&y<this.size&&this.modules[y][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let E=0;E<this.size;E++)this.setFunctionModule(6,E,E%2==0),this.setFunctionModule(E,6,E%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),y=w.length;for(let E=0;E<y;E++)for(let I=0;I<y;I++)E==0&&I==0||E==0&&I==y-1||E==y-1&&I==0||this.drawAlignmentPattern(w[E],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const y=this.errorCorrectionLevel.formatBits<<3|w;let E=y;for(let O=0;O<10;O++)E=E<<1^(E>>>9)*1335;const I=(y<<10|E)^21522;f(I>>>15==0);for(let O=0;O<=5;O++)this.setFunctionModule(8,O,c(I,O));this.setFunctionModule(8,7,c(I,6)),this.setFunctionModule(8,8,c(I,7)),this.setFunctionModule(7,8,c(I,8));for(let O=9;O<15;O++)this.setFunctionModule(14-O,8,c(I,O));for(let O=0;O<8;O++)this.setFunctionModule(this.size-1-O,8,c(I,O));for(let O=8;O<15;O++)this.setFunctionModule(8,this.size-15+O,c(I,O));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let E=0;E<12;E++)w=w<<1^(w>>>11)*7973;const y=this.version<<12|w;f(y>>>18==0);for(let E=0;E<18;E++){const I=c(y,E),O=this.size-11+E%3,_=Math.floor(E/3);this.setFunctionModule(O,_,I),this.setFunctionModule(_,O,I)}}drawFinderPattern(w,y){for(let E=-4;E<=4;E++)for(let I=-4;I<=4;I++){const O=Math.max(Math.abs(I),Math.abs(E)),_=w+I,k=y+E;0<=_&&_<this.size&&0<=k&&k<this.size&&this.setFunctionModule(_,k,O!=2&&O!=4)}}drawAlignmentPattern(w,y){for(let E=-2;E<=2;E++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,y+E,Math.max(Math.abs(I),Math.abs(E))!=1)}setFunctionModule(w,y,E){this.modules[y][w]=E,this.isFunction[y][w]=!0}addEccAndInterleave(w){const y=this.version,E=this.errorCorrectionLevel;if(w.length!=$t.getNumDataCodewords(y,E))throw new RangeError("Invalid argument");const I=$t.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][y],O=$t.ECC_CODEWORDS_PER_BLOCK[E.ordinal][y],_=Math.floor($t.getNumRawDataModules(y)/8),k=I-_%I,R=Math.floor(_/I);let P=[];const H=$t.reedSolomonComputeDivisor(O);for(let F=0,Z=0;F<I;F++){let W=w.slice(Z,Z+R-O+(F<k?0:1));Z+=W.length;const te=$t.reedSolomonComputeRemainder(W,H);F<k&&W.push(0),P.push(W.concat(te))}let z=[];for(let F=0;F<P[0].length;F++)P.forEach((Z,W)=>{(F!=R-O||W>=k)&&z.push(Z[F])});return f(z.length==_),z}drawCodewords(w){if(w.length!=Math.floor($t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let y=0;for(let E=this.size-1;E>=1;E-=2){E==6&&(E=5);for(let I=0;I<this.size;I++)for(let O=0;O<2;O++){const _=E-O,R=(E+1&2)==0?this.size-1-I:I;!this.isFunction[R][_]&&y<w.length*8&&(this.modules[R][_]=c(w[y>>>3],7-(y&7)),y++)}}f(y==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let y=0;y<this.size;y++)for(let E=0;E<this.size;E++){let I;switch(w){case 0:I=(E+y)%2==0;break;case 1:I=y%2==0;break;case 2:I=E%3==0;break;case 3:I=(E+y)%3==0;break;case 4:I=(Math.floor(E/3)+Math.floor(y/2))%2==0;break;case 5:I=E*y%2+E*y%3==0;break;case 6:I=(E*y%2+E*y%3)%2==0;break;case 7:I=((E+y)%2+E*y%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[y][E]&&I&&(this.modules[y][E]=!this.modules[y][E])}}getPenaltyScore(){let w=0;for(let O=0;O<this.size;O++){let _=!1,k=0,R=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[O][P]==_?(k++,k==5?w+=$t.PENALTY_N1:k>5&&w++):(this.finderPenaltyAddHistory(k,R),_||(w+=this.finderPenaltyCountPatterns(R)*$t.PENALTY_N3),_=this.modules[O][P],k=1);w+=this.finderPenaltyTerminateAndCount(_,k,R)*$t.PENALTY_N3}for(let O=0;O<this.size;O++){let _=!1,k=0,R=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][O]==_?(k++,k==5?w+=$t.PENALTY_N1:k>5&&w++):(this.finderPenaltyAddHistory(k,R),_||(w+=this.finderPenaltyCountPatterns(R)*$t.PENALTY_N3),_=this.modules[P][O],k=1);w+=this.finderPenaltyTerminateAndCount(_,k,R)*$t.PENALTY_N3}for(let O=0;O<this.size-1;O++)for(let _=0;_<this.size-1;_++){const k=this.modules[O][_];k==this.modules[O][_+1]&&k==this.modules[O+1][_]&&k==this.modules[O+1][_+1]&&(w+=$t.PENALTY_N2)}let y=0;for(const O of this.modules)y=O.reduce((_,k)=>_+(k?1:0),y);const E=this.size*this.size,I=Math.ceil(Math.abs(y*20-E*10)/E)-1;return f(0<=I&&I<=9),w+=I*$t.PENALTY_N4,f(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,y=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let E=[6];for(let I=this.size-7;E.length<w;I-=y)E.splice(1,0,I);return E}}static getNumRawDataModules(w){if(w<$t.MIN_VERSION||w>$t.MAX_VERSION)throw new RangeError("Version number out of range");let y=(16*w+128)*w+64;if(w>=2){const E=Math.floor(w/7)+2;y-=(25*E-10)*E-55,w>=7&&(y-=36)}return f(208<=y&&y<=29648),y}static getNumDataCodewords(w,y){return Math.floor($t.getNumRawDataModules(w)/8)-$t.ECC_CODEWORDS_PER_BLOCK[y.ordinal][w]*$t.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let y=[];for(let I=0;I<w-1;I++)y.push(0);y.push(1);let E=1;for(let I=0;I<w;I++){for(let O=0;O<y.length;O++)y[O]=$t.reedSolomonMultiply(y[O],E),O+1<y.length&&(y[O]^=y[O+1]);E=$t.reedSolomonMultiply(E,2)}return y}static reedSolomonComputeRemainder(w,y){let E=y.map(I=>0);for(const I of w){const O=I^E.shift();E.push(0),y.forEach((_,k)=>E[k]^=$t.reedSolomonMultiply(_,O))}return E}static reedSolomonMultiply(w,y){if(w>>>8||y>>>8)throw new RangeError("Byte out of range");let E=0;for(let I=7;I>=0;I--)E=E<<1^(E>>>7)*285,E^=(y>>>I&1)*w;return f(E>>>8==0),E}finderPenaltyCountPatterns(w){const y=w[1];f(y<=this.size*3);const E=y>0&&w[2]==y&&w[3]==y*3&&w[4]==y&&w[5]==y;return(E&&w[0]>=y*4&&w[6]>=y?1:0)+(E&&w[6]>=y*4&&w[0]>=y?1:0)}finderPenaltyTerminateAndCount(w,y,E){return w&&(this.finderPenaltyAddHistory(y,E),y=0),y+=this.size,this.finderPenaltyAddHistory(y,E),this.finderPenaltyCountPatterns(E)}finderPenaltyAddHistory(w,y){y[0]==0&&(w+=this.size),y.pop(),y.unshift(w)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function s(N,w,y){if(w<0||w>31||N>>>w)throw new RangeError("Value out of range");for(let E=w-1;E>=0;E--)y.push(N>>>E&1)}function c(N,w){return(N>>>w&1)!=0}function f(N){if(!N)throw new Error("Assertion error")}const m=class Qn{constructor(w,y,E){if(this.mode=w,this.numChars=y,this.bitData=E,y<0)throw new RangeError("Invalid argument");this.bitData=E.slice()}static makeBytes(w){let y=[];for(const E of w)s(E,8,y);return new Qn(Qn.Mode.BYTE,w.length,y)}static makeNumeric(w){if(!Qn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let y=[];for(let E=0;E<w.length;){const I=Math.min(w.length-E,3);s(parseInt(w.substring(E,E+I),10),I*3+1,y),E+=I}return new Qn(Qn.Mode.NUMERIC,w.length,y)}static makeAlphanumeric(w){if(!Qn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let y=[],E;for(E=0;E+2<=w.length;E+=2){let I=Qn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(E))*45;I+=Qn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(E+1)),s(I,11,y)}return E<w.length&&s(Qn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(E)),6,y),new Qn(Qn.Mode.ALPHANUMERIC,w.length,y)}static makeSegments(w){return w==""?[]:Qn.isNumeric(w)?[Qn.makeNumeric(w)]:Qn.isAlphanumeric(w)?[Qn.makeAlphanumeric(w)]:[Qn.makeBytes(Qn.toUtf8ByteArray(w))]}static makeEci(w){let y=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)s(w,8,y);else if(w<16384)s(2,2,y),s(w,14,y);else if(w<1e6)s(6,3,y),s(w,21,y);else throw new RangeError("ECI assignment value out of range");return new Qn(Qn.Mode.ECI,0,y)}static isNumeric(w){return Qn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return Qn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,y){let E=0;for(const I of w){const O=I.mode.numCharCountBits(y);if(I.numChars>=1<<O)return 1/0;E+=4+O+I.bitData.length}return E}static toUtf8ByteArray(w){w=encodeURI(w);let y=[];for(let E=0;E<w.length;E++)w.charAt(E)!="%"?y.push(w.charCodeAt(E)):(y.push(parseInt(w.substring(E+1,E+3),16)),E+=2);return y}};m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let v=m;e.QrSegment=m})(bo||(bo={}));(e=>{(n=>{const s=class{constructor(f,m){this.ordinal=f,this.formatBits=m}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),n.Ecc=s})(e.QrCode||(e.QrCode={}))})(bo||(bo={}));(e=>{(n=>{const s=class{constructor(f,m){this.modeBits=f,this.numBitsCharCount=m}numCharCountBits(f){return this.numBitsCharCount[Math.floor((f+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),n.Mode=s})(e.QrSegment||(e.QrSegment={}))})(bo||(bo={}));var il=bo;var Z8={L:il.QrCode.Ecc.LOW,M:il.QrCode.Ecc.MEDIUM,Q:il.QrCode.Ecc.QUARTILE,H:il.QrCode.Ecc.HIGH},wb=128,bb="L",Nb="#FFFFFF",Cb="#000000",Eb=!1,Sb=1,q8=4,Q8=0,K8=.1;function Ab(e,n=0){const s=[];return e.forEach(function(c,f){let m=null;c.forEach(function(v,N){if(!v&&m!==null){s.push(`M${m+n} ${f+n}h${N-m}v1H${m+n}z`),m=null;return}if(N===c.length-1){if(!v)return;m===null?s.push(`M${N+n},${f+n} h1v1H${N+n}z`):s.push(`M${m+n},${f+n} h${N+1-m}v1H${m+n}z`);return}v&&m===null&&(m=N)})}),s.join("")}function Ib(e,n){return e.slice().map((s,c)=>c<n.y||c>=n.y+n.h?s:s.map((f,m)=>m<n.x||m>=n.x+n.w?f:!1))}function J8(e,n,s,c){if(c==null)return null;const f=e.length+s*2,m=Math.floor(n*K8),v=f/n,N=(c.width||m)*v,w=(c.height||m)*v,y=c.x==null?e.length/2-N/2:c.x*v,E=c.y==null?e.length/2-w/2:c.y*v,I=c.opacity==null?1:c.opacity;let O=null;if(c.excavate){let k=Math.floor(y),R=Math.floor(E),P=Math.ceil(N+y-k),H=Math.ceil(w+E-R);O={x:k,y:R,w:P,h:H}}const _=c.crossOrigin;return{x:y,y:E,h:w,w:N,excavation:O,opacity:I,crossOrigin:_}}function eT(e,n){return n!=null?Math.max(Math.floor(n),0):e?q8:Q8}function jb({value:e,level:n,minVersion:s,includeMargin:c,marginSize:f,imageSettings:m,size:v,boostLevel:N}){let w=Oe.useMemo(()=>{const k=(Array.isArray(e)?e:[e]).reduce((R,P)=>(R.push(...il.QrSegment.makeSegments(P)),R),[]);return il.QrCode.encodeSegments(k,Z8[n],s,void 0,void 0,N)},[e,n,s,N]);const{cells:y,margin:E,numCells:I,calculatedImageSettings:O}=Oe.useMemo(()=>{let _=w.getModules();const k=eT(c,f),R=_.length+k*2,P=J8(_,v,k,m);return{cells:_,margin:k,numCells:R,calculatedImageSettings:P}},[w,v,m,c,f]);return{qrcode:w,margin:E,cells:y,numCells:I,calculatedImageSettings:O}}var tT=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),nT=Oe.forwardRef(function(n,s){const c=n,{value:f,size:m=wb,level:v=bb,bgColor:N=Nb,fgColor:w=Cb,includeMargin:y=Eb,minVersion:E=Sb,boostLevel:I,marginSize:O,imageSettings:_}=c,R=ip(c,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=R,H=ip(R,["style"]),z=_?.src,F=Oe.useRef(null),Z=Oe.useRef(null),W=Oe.useCallback(re=>{F.current=re,typeof s=="function"?s(re):s&&(s.current=re)},[s]),[te,G]=Oe.useState(!1),{margin:J,cells:se,numCells:fe,calculatedImageSettings:Ee}=jb({value:f,level:v,minVersion:E,boostLevel:I,includeMargin:y,marginSize:O,imageSettings:_,size:m});Oe.useEffect(()=>{if(F.current!=null){const re=F.current,q=re.getContext("2d");if(!q)return;let U=se;const K=Z.current,ne=Ee!=null&&K!==null&&K.complete&&K.naturalHeight!==0&&K.naturalWidth!==0;ne&&Ee.excavation!=null&&(U=Ib(se,Ee.excavation));const oe=window.devicePixelRatio||1;re.height=re.width=m*oe;const we=m/fe*oe;q.scale(we,we),q.fillStyle=N,q.fillRect(0,0,fe,fe),q.fillStyle=w,tT?q.fill(new Path2D(Ab(U,J))):se.forEach(function(X,ie){X.forEach(function(je,Ie){je&&q.fillRect(Ie+J,ie+J,1,1)})}),Ee&&(q.globalAlpha=Ee.opacity),ne&&q.drawImage(K,Ee.x+J,Ee.y+J,Ee.w,Ee.h)}}),Oe.useEffect(()=>{G(!1)},[z]);const ue=ap({height:m,width:m},P);let ge=null;return z!=null&&(ge=Oe.createElement("img",{src:z,key:z,style:{display:"none"},onLoad:()=>{G(!0)},ref:Z,crossOrigin:Ee?.crossOrigin})),Oe.createElement(Oe.Fragment,null,Oe.createElement("canvas",ap({style:ue,height:m,width:m,ref:W,role:"img"},H)),ge)});nT.displayName="QRCodeCanvas";var Gc=Oe.forwardRef(function(n,s){const c=n,{value:f,size:m=wb,level:v=bb,bgColor:N=Nb,fgColor:w=Cb,includeMargin:y=Eb,minVersion:E=Sb,boostLevel:I,title:O,marginSize:_,imageSettings:k}=c,R=ip(c,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:H,numCells:z,calculatedImageSettings:F}=jb({value:f,level:v,minVersion:E,boostLevel:I,includeMargin:y,marginSize:_,imageSettings:k,size:m});let Z=H,W=null;k!=null&&F!=null&&(F.excavation!=null&&(Z=Ib(H,F.excavation)),W=Oe.createElement("image",{href:k.src,height:F.h,width:F.w,x:F.x+P,y:F.y+P,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const te=Ab(Z,P);return Oe.createElement("svg",ap({height:m,width:m,viewBox:`0 0 ${z} ${z}`,ref:s,role:"img"},R),!!O&&Oe.createElement("title",null,O),Oe.createElement("path",{fill:N,d:`M0,0 h${z}v${z}H0z`,shapeRendering:"crispEdges"}),Oe.createElement("path",{fill:w,d:te,shapeRendering:"crispEdges"}),W)});Gc.displayName="QRCodeSVG";const bx="https://bbaec9682261.ngrok-free.app",rT=()=>{const{user:e}=Vs(),[n,s]=C.useState(null),[c,f]=C.useState(!0),[m,v]=C.useState({}),[N,w]=C.useState(!1),y=new Date,[E,I]=C.useState(y.getDate()),[O,_]=C.useState(y.getMonth()),[k,R]=C.useState(y.getFullYear()),P=new Date(k,O+1,0).getDate(),H=new Date(k,O,1).getDay(),z=[...Array.from({length:H},()=>null),...Array.from({length:P},(G,J)=>J+1)];C.useEffect(()=>{F(),Z();const G=setInterval(()=>{Z()},3e4);return()=>{clearInterval(G)}},[e]);const F=async()=>{if(e?.employeeId)try{const G=await St(`${bx}/employees/${e.employeeId}`);if(G.ok){const J=await G.json();J.data?s({id:J.data.id,employeeId:J.data.employeeId,fullName:J.data.fullName,position:J.data.designation||"Employee",department:J.data.department||"College Department",employmentType:J.data.employmentType||"Regular",qrCodeData:J.data.qrCodeData}):s({id:e.id?.toString()||"",employeeId:e.employeeId||"",fullName:e.fullName||"",position:"Employee",department:"College Department",employmentType:"Regular"})}}catch(G){console.error("Error fetching employee data",G),s({id:e.id?.toString()||"",employeeId:e.employeeId||"",fullName:e.fullName||"",position:"Employee",department:"College Department",employmentType:"Regular"})}finally{f(!1)}},Z=async()=>{if(e?.employeeId)try{const G=new Date().toISOString().split("T")[0],J=await fetch(`${bx}/attendance?employeeId=${e.employeeId}&date=${G}`);if(J.ok){const se=await J.json();if(se.data&&se.data.length>0){const fe=se.data[0];v({checkIn:fe.checkIn,checkOut:fe.checkOut,status:fe.status})}else v({})}}catch(G){console.error("Error fetching today's attendance",G)}},W=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],te=["SUN","MON","TUE","WED","THU","FRI","SAT"];return c?r.jsx(ar,{children:r.jsx("div",{className:"flex items-center justify-center h-full w-full",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})}):r.jsxs(ar,{children:[r.jsx("div",{className:"h-full w-full -m-6",children:r.jsx(Ye,{className:"rounded-none shadow-lg border-0 h-full",children:r.jsx(Gt,{className:"p-8 h-full flex items-center",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 w-full h-full",children:[r.jsx("div",{className:"space-y-4 flex flex-col justify-center",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-muted mb-4 border-4 border-primary/20",children:r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-primary/10",children:r.jsx("span",{className:"text-4xl font-bold text-primary",children:n?.fullName?.charAt(0)||e?.fullName?.charAt(0)||"E"})})}),r.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:n?.fullName||e?.fullName||"Employee"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:n?.employeeId||e?.employeeId||"EMP001"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n?.employmentType||"Regular"}),r.jsxs("div",{className:"w-full bg-primary/10 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground uppercase",children:"Position"}),r.jsx("p",{className:"text-base font-semibold text-primary",children:n?.position||"Employee"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground uppercase",children:"Department"}),r.jsx("p",{className:"text-base font-semibold text-primary",children:n?.department||"College Department"})]})]})]})}),r.jsxs("div",{className:"space-y-4 flex flex-col justify-center",children:[r.jsxs("h3",{className:"text-xl font-bold text-center",children:[W[O]," ",k]}),r.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:te.map(G=>r.jsx("div",{className:"text-center text-xs font-semibold text-muted-foreground py-2",children:G},G))}),r.jsx("div",{className:"grid grid-cols-7 gap-1",children:z.map((G,J)=>{if(G===null)return r.jsx("div",{className:"aspect-square"},`empty-${J}`);const se=G===E,fe=G===y.getDate()&&O===new Date().getMonth()&&k===new Date().getFullYear();return r.jsx("button",{onClick:()=>I(G),className:`aspect-square rounded-lg text-sm font-medium transition-colors ${se?"bg-primary text-primary-foreground":fe?"bg-primary/20 text-primary font-bold":"hover:bg-muted"}`,children:G},G)})})]}),r.jsxs("div",{className:"space-y-4 flex flex-col justify-center",children:[r.jsx(Ye,{className:"rounded-xl border-2 border-primary/50 transition-colors",children:r.jsx(Gt,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(Bc,{className:"w-8 h-8 text-primary"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-lg mb-1",children:"My QR Code"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Show this to the guard for attendance"}),r.jsx(Se,{onClick:()=>w(!0),className:"w-full",variant:"default",children:"Show QR Code"})]})]})})}),r.jsx(Ye,{className:"rounded-xl border-2 hover:border-primary/50 transition-colors",children:r.jsx(Gt,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(cs,{className:"w-8 h-8 text-primary"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-lg mb-1",children:"Sign In Time"}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:m.checkIn||"Not yet signed in"})]})]})})}),r.jsx(Ye,{className:"rounded-xl border-2 hover:border-primary/50 transition-colors",children:r.jsx(Gt,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(cs,{className:"w-8 h-8 text-primary"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-lg mb-1",children:"Sign Out Time"}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:m.checkOut||"Not yet signed out"})]})]})})})]})]})})})}),r.jsx(kn,{open:N,onOpenChange:w,children:r.jsxs(An,{className:"max-w-md w-full",children:[r.jsx(In,{className:"text-lg font-semibold text-center",children:"My Attendance QR Code"}),r.jsxs("div",{className:"flex flex-col items-center space-y-4 py-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Show this QR code to the guard to record your attendance"}),n?.qrCodeData?r.jsx("div",{className:"bg-white p-6 rounded-lg",children:r.jsx(Gc,{value:n.qrCodeData,size:256,level:"H"})}):r.jsx("div",{className:"bg-muted p-6 rounded-lg",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"QR code not available"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm font-medium",children:n?.fullName}),r.jsx("p",{className:"text-xs text-muted-foreground",children:n?.employeeId})]})]})]})})]})},Ef=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:Me("w-full caption-bottom text-sm",e),...n})}));Ef.displayName="Table";const Sf=C.forwardRef(({className:e,...n},s)=>r.jsx("thead",{ref:s,className:Me("[&_tr]:border-b",e),...n}));Sf.displayName="TableHeader";const Af=C.forwardRef(({className:e,...n},s)=>r.jsx("tbody",{ref:s,className:Me("[&_tr:last-child]:border-0",e),...n}));Af.displayName="TableBody";const sT=C.forwardRef(({className:e,...n},s)=>r.jsx("tfoot",{ref:s,className:Me("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...n}));sT.displayName="TableFooter";const ga=C.forwardRef(({className:e,...n},s)=>r.jsx("tr",{ref:s,className:Me("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...n}));ga.displayName="TableRow";const cr=C.forwardRef(({className:e,...n},s)=>r.jsx("th",{ref:s,className:Me("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...n}));cr.displayName="TableHead";const $n=C.forwardRef(({className:e,...n},s)=>r.jsx("td",{ref:s,className:Me("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...n}));$n.displayName="TableCell";const aT=C.forwardRef(({className:e,...n},s)=>r.jsx("caption",{ref:s,className:Me("mt-4 text-sm text-muted-foreground",e),...n}));aT.displayName="TableCaption";var tn;(function(e){e.assertEqual=f=>{};function n(f){}e.assertIs=n;function s(f){throw new Error}e.assertNever=s,e.arrayToEnum=f=>{const m={};for(const v of f)m[v]=v;return m},e.getValidEnumValues=f=>{const m=e.objectKeys(f).filter(N=>typeof f[f[N]]!="number"),v={};for(const N of m)v[N]=f[N];return e.objectValues(v)},e.objectValues=f=>e.objectKeys(f).map(function(m){return f[m]}),e.objectKeys=typeof Object.keys=="function"?f=>Object.keys(f):f=>{const m=[];for(const v in f)Object.prototype.hasOwnProperty.call(f,v)&&m.push(v);return m},e.find=(f,m)=>{for(const v of f)if(m(v))return v},e.isInteger=typeof Number.isInteger=="function"?f=>Number.isInteger(f):f=>typeof f=="number"&&Number.isFinite(f)&&Math.floor(f)===f;function c(f,m=" | "){return f.map(v=>typeof v=="string"?`'${v}'`:v).join(m)}e.joinValues=c,e.jsonStringifyReplacer=(f,m)=>typeof m=="bigint"?m.toString():m})(tn||(tn={}));var Nx;(function(e){e.mergeShapes=(n,s)=>({...n,...s})})(Nx||(Nx={}));const lt=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ci=e=>{switch(typeof e){case"undefined":return lt.undefined;case"string":return lt.string;case"number":return Number.isNaN(e)?lt.nan:lt.number;case"boolean":return lt.boolean;case"function":return lt.function;case"bigint":return lt.bigint;case"symbol":return lt.symbol;case"object":return Array.isArray(e)?lt.array:e===null?lt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?lt.promise:typeof Map<"u"&&e instanceof Map?lt.map:typeof Set<"u"&&e instanceof Set?lt.set:typeof Date<"u"&&e instanceof Date?lt.date:lt.object;default:return lt.unknown}},Ge=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wa extends Error{get errors(){return this.issues}constructor(n){super(),this.issues=[],this.addIssue=c=>{this.issues=[...this.issues,c]},this.addIssues=(c=[])=>{this.issues=[...this.issues,...c]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=n}format(n){const s=n||function(m){return m.message},c={_errors:[]},f=m=>{for(const v of m.issues)if(v.code==="invalid_union")v.unionErrors.map(f);else if(v.code==="invalid_return_type")f(v.returnTypeError);else if(v.code==="invalid_arguments")f(v.argumentsError);else if(v.path.length===0)c._errors.push(s(v));else{let N=c,w=0;for(;w<v.path.length;){const y=v.path[w];w===v.path.length-1?(N[y]=N[y]||{_errors:[]},N[y]._errors.push(s(v))):N[y]=N[y]||{_errors:[]},N=N[y],w++}}};return f(this),c}static assert(n){if(!(n instanceof wa))throw new Error(`Not a ZodError: ${n}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(n=s=>s.message){const s={},c=[];for(const f of this.issues)if(f.path.length>0){const m=f.path[0];s[m]=s[m]||[],s[m].push(n(f))}else c.push(n(f));return{formErrors:c,fieldErrors:s}}get formErrors(){return this.flatten()}}wa.create=e=>new wa(e);const op=(e,n)=>{let s;switch(e.code){case Ge.invalid_type:e.received===lt.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case Ge.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,tn.jsonStringifyReplacer)}`;break;case Ge.unrecognized_keys:s=`Unrecognized key(s) in object: ${tn.joinValues(e.keys,", ")}`;break;case Ge.invalid_union:s="Invalid input";break;case Ge.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${tn.joinValues(e.options)}`;break;case Ge.invalid_enum_value:s=`Invalid enum value. Expected ${tn.joinValues(e.options)}, received '${e.received}'`;break;case Ge.invalid_arguments:s="Invalid function arguments";break;case Ge.invalid_return_type:s="Invalid function return type";break;case Ge.invalid_date:s="Invalid date";break;case Ge.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:tn.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case Ge.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case Ge.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case Ge.custom:s="Invalid input";break;case Ge.invalid_intersection_types:s="Intersection results could not be merged";break;case Ge.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case Ge.not_finite:s="Number must be finite";break;default:s=n.defaultError,tn.assertNever(e)}return{message:s}};let iT=op;function oT(){return iT}const lT=e=>{const{data:n,path:s,errorMaps:c,issueData:f}=e,m=[...s,...f.path||[]],v={...f,path:m};if(f.message!==void 0)return{...f,path:m,message:f.message};let N="";const w=c.filter(y=>!!y).slice().reverse();for(const y of w)N=y(v,{data:n,defaultError:N}).message;return{...f,path:m,message:N}};function Je(e,n){const s=oT(),c=lT({issueData:n,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===op?void 0:op].filter(f=>!!f)});e.common.issues.push(c)}class Ss{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(n,s){const c=[];for(const f of s){if(f.status==="aborted")return _t;f.status==="dirty"&&n.dirty(),c.push(f.value)}return{status:n.value,value:c}}static async mergeObjectAsync(n,s){const c=[];for(const f of s){const m=await f.key,v=await f.value;c.push({key:m,value:v})}return Ss.mergeObjectSync(n,c)}static mergeObjectSync(n,s){const c={};for(const f of s){const{key:m,value:v}=f;if(m.status==="aborted"||v.status==="aborted")return _t;m.status==="dirty"&&n.dirty(),v.status==="dirty"&&n.dirty(),m.value!=="__proto__"&&(typeof v.value<"u"||f.alwaysSet)&&(c[m.value]=v.value)}return{status:n.value,value:c}}}const _t=Object.freeze({status:"aborted"}),Oc=e=>({status:"dirty",value:e}),Hs=e=>({status:"valid",value:e}),Cx=e=>e.status==="aborted",Ex=e=>e.status==="dirty",vl=e=>e.status==="valid",Xu=e=>typeof Promise<"u"&&e instanceof Promise;var ft;(function(e){e.errToObj=n=>typeof n=="string"?{message:n}:n||{},e.toString=n=>typeof n=="string"?n:n?.message})(ft||(ft={}));class ki{constructor(n,s,c,f){this._cachedPath=[],this.parent=n,this.data=s,this._path=c,this._key=f}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sx=(e,n)=>{if(vl(n))return{success:!0,data:n.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new wa(e.common.issues);return this._error=s,this._error}}};function Ht(e){if(!e)return{};const{errorMap:n,invalid_type_error:s,required_error:c,description:f}=e;if(n&&(s||c))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return n?{errorMap:n,description:f}:{errorMap:(v,N)=>{const{message:w}=e;return v.code==="invalid_enum_value"?{message:w??N.defaultError}:typeof N.data>"u"?{message:w??c??N.defaultError}:v.code!=="invalid_type"?{message:N.defaultError}:{message:w??s??N.defaultError}},description:f}}class Jt{get description(){return this._def.description}_getType(n){return Ci(n.data)}_getOrReturnCtx(n,s){return s||{common:n.parent.common,data:n.data,parsedType:Ci(n.data),schemaErrorMap:this._def.errorMap,path:n.path,parent:n.parent}}_processInputParams(n){return{status:new Ss,ctx:{common:n.parent.common,data:n.data,parsedType:Ci(n.data),schemaErrorMap:this._def.errorMap,path:n.path,parent:n.parent}}}_parseSync(n){const s=this._parse(n);if(Xu(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(n){const s=this._parse(n);return Promise.resolve(s)}parse(n,s){const c=this.safeParse(n,s);if(c.success)return c.data;throw c.error}safeParse(n,s){const c={common:{issues:[],async:s?.async??!1,contextualErrorMap:s?.errorMap},path:s?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:Ci(n)},f=this._parseSync({data:n,path:c.path,parent:c});return Sx(c,f)}"~validate"(n){const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:Ci(n)};if(!this["~standard"].async)try{const c=this._parseSync({data:n,path:[],parent:s});return vl(c)?{value:c.value}:{issues:s.common.issues}}catch(c){c?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:n,path:[],parent:s}).then(c=>vl(c)?{value:c.value}:{issues:s.common.issues})}async parseAsync(n,s){const c=await this.safeParseAsync(n,s);if(c.success)return c.data;throw c.error}async safeParseAsync(n,s){const c={common:{issues:[],contextualErrorMap:s?.errorMap,async:!0},path:s?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:Ci(n)},f=this._parse({data:n,path:c.path,parent:c}),m=await(Xu(f)?f:Promise.resolve(f));return Sx(c,m)}refine(n,s){const c=f=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(f):s;return this._refinement((f,m)=>{const v=n(f),N=()=>m.addIssue({code:Ge.custom,...c(f)});return typeof Promise<"u"&&v instanceof Promise?v.then(w=>w?!0:(N(),!1)):v?!0:(N(),!1)})}refinement(n,s){return this._refinement((c,f)=>n(c)?!0:(f.addIssue(typeof s=="function"?s(c,f):s),!1))}_refinement(n){return new bl({schema:this,typeName:Dt.ZodEffects,effect:{type:"refinement",refinement:n}})}superRefine(n){return this._refinement(n)}constructor(n){this.spa=this.safeParseAsync,this._def=n,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Ri.create(this,this._def)}nullable(){return Nl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ya.create(this)}promise(){return Qu.create(this,this._def)}or(n){return Zu.create([this,n],this._def)}and(n){return qu.create(this,n,this._def)}transform(n){return new bl({...Ht(this._def),schema:this,typeName:Dt.ZodEffects,effect:{type:"transform",transform:n}})}default(n){const s=typeof n=="function"?n:()=>n;return new cp({...Ht(this._def),innerType:this,defaultValue:s,typeName:Dt.ZodDefault})}brand(){return new _T({typeName:Dt.ZodBranded,type:this,...Ht(this._def)})}catch(n){const s=typeof n=="function"?n:()=>n;return new dp({...Ht(this._def),innerType:this,catchValue:s,typeName:Dt.ZodCatch})}describe(n){const s=this.constructor;return new s({...this._def,description:n})}pipe(n){return e0.create(this,n)}readonly(){return up.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cT=/^c[^\s-]{8,}$/i,dT=/^[0-9a-z]+$/,uT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hT=/^[a-z0-9_-]{21}$/i,mT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,pT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,gT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wm;const yT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Tb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ET=new RegExp(`^${Tb}$`);function Rb(e){let n="[0-5]\\d";e.precision?n=`${n}\\.\\d{${e.precision}}`:e.precision==null&&(n=`${n}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${n})${s}`}function ST(e){return new RegExp(`^${Rb(e)}$`)}function AT(e){let n=`${Tb}T${Rb(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),n=`${n}(${s.join("|")})`,new RegExp(`^${n}$`)}function IT(e,n){return!!((n==="v4"||!n)&&yT.test(e)||(n==="v6"||!n)&&wT.test(e))}function jT(e,n){if(!mT.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const c=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),f=JSON.parse(atob(c));return!(typeof f!="object"||f===null||"typ"in f&&f?.typ!=="JWT"||!f.alg||n&&f.alg!==n)}catch{return!1}}function TT(e,n){return!!((n==="v4"||!n)&&vT.test(e)||(n==="v6"||!n)&&bT.test(e))}class Ai extends Jt{_parse(n){if(this._def.coerce&&(n.data=String(n.data)),this._getType(n)!==lt.string){const m=this._getOrReturnCtx(n);return Je(m,{code:Ge.invalid_type,expected:lt.string,received:m.parsedType}),_t}const c=new Ss;let f;for(const m of this._def.checks)if(m.kind==="min")n.data.length<m.value&&(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.too_small,minimum:m.value,type:"string",inclusive:!0,exact:!1,message:m.message}),c.dirty());else if(m.kind==="max")n.data.length>m.value&&(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.too_big,maximum:m.value,type:"string",inclusive:!0,exact:!1,message:m.message}),c.dirty());else if(m.kind==="length"){const v=n.data.length>m.value,N=n.data.length<m.value;(v||N)&&(f=this._getOrReturnCtx(n,f),v?Je(f,{code:Ge.too_big,maximum:m.value,type:"string",inclusive:!0,exact:!0,message:m.message}):N&&Je(f,{code:Ge.too_small,minimum:m.value,type:"string",inclusive:!0,exact:!0,message:m.message}),c.dirty())}else if(m.kind==="email")gT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"email",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="emoji")wm||(wm=new RegExp(xT,"u")),wm.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"emoji",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="uuid")fT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"uuid",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="nanoid")hT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"nanoid",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="cuid")cT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"cuid",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="cuid2")dT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"cuid2",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="ulid")uT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"ulid",code:Ge.invalid_string,message:m.message}),c.dirty());else if(m.kind==="url")try{new URL(n.data)}catch{f=this._getOrReturnCtx(n,f),Je(f,{validation:"url",code:Ge.invalid_string,message:m.message}),c.dirty()}else m.kind==="regex"?(m.regex.lastIndex=0,m.regex.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"regex",code:Ge.invalid_string,message:m.message}),c.dirty())):m.kind==="trim"?n.data=n.data.trim():m.kind==="includes"?n.data.includes(m.value,m.position)||(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.invalid_string,validation:{includes:m.value,position:m.position},message:m.message}),c.dirty()):m.kind==="toLowerCase"?n.data=n.data.toLowerCase():m.kind==="toUpperCase"?n.data=n.data.toUpperCase():m.kind==="startsWith"?n.data.startsWith(m.value)||(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.invalid_string,validation:{startsWith:m.value},message:m.message}),c.dirty()):m.kind==="endsWith"?n.data.endsWith(m.value)||(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.invalid_string,validation:{endsWith:m.value},message:m.message}),c.dirty()):m.kind==="datetime"?AT(m).test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.invalid_string,validation:"datetime",message:m.message}),c.dirty()):m.kind==="date"?ET.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.invalid_string,validation:"date",message:m.message}),c.dirty()):m.kind==="time"?ST(m).test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.invalid_string,validation:"time",message:m.message}),c.dirty()):m.kind==="duration"?pT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"duration",code:Ge.invalid_string,message:m.message}),c.dirty()):m.kind==="ip"?IT(n.data,m.version)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"ip",code:Ge.invalid_string,message:m.message}),c.dirty()):m.kind==="jwt"?jT(n.data,m.alg)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"jwt",code:Ge.invalid_string,message:m.message}),c.dirty()):m.kind==="cidr"?TT(n.data,m.version)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"cidr",code:Ge.invalid_string,message:m.message}),c.dirty()):m.kind==="base64"?NT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"base64",code:Ge.invalid_string,message:m.message}),c.dirty()):m.kind==="base64url"?CT.test(n.data)||(f=this._getOrReturnCtx(n,f),Je(f,{validation:"base64url",code:Ge.invalid_string,message:m.message}),c.dirty()):tn.assertNever(m);return{status:c.value,value:n.data}}_regex(n,s,c){return this.refinement(f=>n.test(f),{validation:s,code:Ge.invalid_string,...ft.errToObj(c)})}_addCheck(n){return new Ai({...this._def,checks:[...this._def.checks,n]})}email(n){return this._addCheck({kind:"email",...ft.errToObj(n)})}url(n){return this._addCheck({kind:"url",...ft.errToObj(n)})}emoji(n){return this._addCheck({kind:"emoji",...ft.errToObj(n)})}uuid(n){return this._addCheck({kind:"uuid",...ft.errToObj(n)})}nanoid(n){return this._addCheck({kind:"nanoid",...ft.errToObj(n)})}cuid(n){return this._addCheck({kind:"cuid",...ft.errToObj(n)})}cuid2(n){return this._addCheck({kind:"cuid2",...ft.errToObj(n)})}ulid(n){return this._addCheck({kind:"ulid",...ft.errToObj(n)})}base64(n){return this._addCheck({kind:"base64",...ft.errToObj(n)})}base64url(n){return this._addCheck({kind:"base64url",...ft.errToObj(n)})}jwt(n){return this._addCheck({kind:"jwt",...ft.errToObj(n)})}ip(n){return this._addCheck({kind:"ip",...ft.errToObj(n)})}cidr(n){return this._addCheck({kind:"cidr",...ft.errToObj(n)})}datetime(n){return typeof n=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:n}):this._addCheck({kind:"datetime",precision:typeof n?.precision>"u"?null:n?.precision,offset:n?.offset??!1,local:n?.local??!1,...ft.errToObj(n?.message)})}date(n){return this._addCheck({kind:"date",message:n})}time(n){return typeof n=="string"?this._addCheck({kind:"time",precision:null,message:n}):this._addCheck({kind:"time",precision:typeof n?.precision>"u"?null:n?.precision,...ft.errToObj(n?.message)})}duration(n){return this._addCheck({kind:"duration",...ft.errToObj(n)})}regex(n,s){return this._addCheck({kind:"regex",regex:n,...ft.errToObj(s)})}includes(n,s){return this._addCheck({kind:"includes",value:n,position:s?.position,...ft.errToObj(s?.message)})}startsWith(n,s){return this._addCheck({kind:"startsWith",value:n,...ft.errToObj(s)})}endsWith(n,s){return this._addCheck({kind:"endsWith",value:n,...ft.errToObj(s)})}min(n,s){return this._addCheck({kind:"min",value:n,...ft.errToObj(s)})}max(n,s){return this._addCheck({kind:"max",value:n,...ft.errToObj(s)})}length(n,s){return this._addCheck({kind:"length",value:n,...ft.errToObj(s)})}nonempty(n){return this.min(1,ft.errToObj(n))}trim(){return new Ai({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ai({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ai({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(n=>n.kind==="datetime")}get isDate(){return!!this._def.checks.find(n=>n.kind==="date")}get isTime(){return!!this._def.checks.find(n=>n.kind==="time")}get isDuration(){return!!this._def.checks.find(n=>n.kind==="duration")}get isEmail(){return!!this._def.checks.find(n=>n.kind==="email")}get isURL(){return!!this._def.checks.find(n=>n.kind==="url")}get isEmoji(){return!!this._def.checks.find(n=>n.kind==="emoji")}get isUUID(){return!!this._def.checks.find(n=>n.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(n=>n.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(n=>n.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(n=>n.kind==="cuid2")}get isULID(){return!!this._def.checks.find(n=>n.kind==="ulid")}get isIP(){return!!this._def.checks.find(n=>n.kind==="ip")}get isCIDR(){return!!this._def.checks.find(n=>n.kind==="cidr")}get isBase64(){return!!this._def.checks.find(n=>n.kind==="base64")}get isBase64url(){return!!this._def.checks.find(n=>n.kind==="base64url")}get minLength(){let n=null;for(const s of this._def.checks)s.kind==="min"&&(n===null||s.value>n)&&(n=s.value);return n}get maxLength(){let n=null;for(const s of this._def.checks)s.kind==="max"&&(n===null||s.value<n)&&(n=s.value);return n}}Ai.create=e=>new Ai({checks:[],typeName:Dt.ZodString,coerce:e?.coerce??!1,...Ht(e)});function RT(e,n){const s=(e.toString().split(".")[1]||"").length,c=(n.toString().split(".")[1]||"").length,f=s>c?s:c,m=Number.parseInt(e.toFixed(f).replace(".","")),v=Number.parseInt(n.toFixed(f).replace(".",""));return m%v/10**f}class Xc extends Jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(n){if(this._def.coerce&&(n.data=Number(n.data)),this._getType(n)!==lt.number){const m=this._getOrReturnCtx(n);return Je(m,{code:Ge.invalid_type,expected:lt.number,received:m.parsedType}),_t}let c;const f=new Ss;for(const m of this._def.checks)m.kind==="int"?tn.isInteger(n.data)||(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.invalid_type,expected:"integer",received:"float",message:m.message}),f.dirty()):m.kind==="min"?(m.inclusive?n.data<m.value:n.data<=m.value)&&(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.too_small,minimum:m.value,type:"number",inclusive:m.inclusive,exact:!1,message:m.message}),f.dirty()):m.kind==="max"?(m.inclusive?n.data>m.value:n.data>=m.value)&&(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.too_big,maximum:m.value,type:"number",inclusive:m.inclusive,exact:!1,message:m.message}),f.dirty()):m.kind==="multipleOf"?RT(n.data,m.value)!==0&&(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.not_multiple_of,multipleOf:m.value,message:m.message}),f.dirty()):m.kind==="finite"?Number.isFinite(n.data)||(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.not_finite,message:m.message}),f.dirty()):tn.assertNever(m);return{status:f.value,value:n.data}}gte(n,s){return this.setLimit("min",n,!0,ft.toString(s))}gt(n,s){return this.setLimit("min",n,!1,ft.toString(s))}lte(n,s){return this.setLimit("max",n,!0,ft.toString(s))}lt(n,s){return this.setLimit("max",n,!1,ft.toString(s))}setLimit(n,s,c,f){return new Xc({...this._def,checks:[...this._def.checks,{kind:n,value:s,inclusive:c,message:ft.toString(f)}]})}_addCheck(n){return new Xc({...this._def,checks:[...this._def.checks,n]})}int(n){return this._addCheck({kind:"int",message:ft.toString(n)})}positive(n){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ft.toString(n)})}negative(n){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ft.toString(n)})}nonpositive(n){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ft.toString(n)})}nonnegative(n){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ft.toString(n)})}multipleOf(n,s){return this._addCheck({kind:"multipleOf",value:n,message:ft.toString(s)})}finite(n){return this._addCheck({kind:"finite",message:ft.toString(n)})}safe(n){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ft.toString(n)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ft.toString(n)})}get minValue(){let n=null;for(const s of this._def.checks)s.kind==="min"&&(n===null||s.value>n)&&(n=s.value);return n}get maxValue(){let n=null;for(const s of this._def.checks)s.kind==="max"&&(n===null||s.value<n)&&(n=s.value);return n}get isInt(){return!!this._def.checks.find(n=>n.kind==="int"||n.kind==="multipleOf"&&tn.isInteger(n.value))}get isFinite(){let n=null,s=null;for(const c of this._def.checks){if(c.kind==="finite"||c.kind==="int"||c.kind==="multipleOf")return!0;c.kind==="min"?(s===null||c.value>s)&&(s=c.value):c.kind==="max"&&(n===null||c.value<n)&&(n=c.value)}return Number.isFinite(s)&&Number.isFinite(n)}}Xc.create=e=>new Xc({checks:[],typeName:Dt.ZodNumber,coerce:e?.coerce||!1,...Ht(e)});class Yc extends Jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(n){if(this._def.coerce)try{n.data=BigInt(n.data)}catch{return this._getInvalidInput(n)}if(this._getType(n)!==lt.bigint)return this._getInvalidInput(n);let c;const f=new Ss;for(const m of this._def.checks)m.kind==="min"?(m.inclusive?n.data<m.value:n.data<=m.value)&&(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.too_small,type:"bigint",minimum:m.value,inclusive:m.inclusive,message:m.message}),f.dirty()):m.kind==="max"?(m.inclusive?n.data>m.value:n.data>=m.value)&&(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.too_big,type:"bigint",maximum:m.value,inclusive:m.inclusive,message:m.message}),f.dirty()):m.kind==="multipleOf"?n.data%m.value!==BigInt(0)&&(c=this._getOrReturnCtx(n,c),Je(c,{code:Ge.not_multiple_of,multipleOf:m.value,message:m.message}),f.dirty()):tn.assertNever(m);return{status:f.value,value:n.data}}_getInvalidInput(n){const s=this._getOrReturnCtx(n);return Je(s,{code:Ge.invalid_type,expected:lt.bigint,received:s.parsedType}),_t}gte(n,s){return this.setLimit("min",n,!0,ft.toString(s))}gt(n,s){return this.setLimit("min",n,!1,ft.toString(s))}lte(n,s){return this.setLimit("max",n,!0,ft.toString(s))}lt(n,s){return this.setLimit("max",n,!1,ft.toString(s))}setLimit(n,s,c,f){return new Yc({...this._def,checks:[...this._def.checks,{kind:n,value:s,inclusive:c,message:ft.toString(f)}]})}_addCheck(n){return new Yc({...this._def,checks:[...this._def.checks,n]})}positive(n){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ft.toString(n)})}negative(n){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ft.toString(n)})}nonpositive(n){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ft.toString(n)})}nonnegative(n){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ft.toString(n)})}multipleOf(n,s){return this._addCheck({kind:"multipleOf",value:n,message:ft.toString(s)})}get minValue(){let n=null;for(const s of this._def.checks)s.kind==="min"&&(n===null||s.value>n)&&(n=s.value);return n}get maxValue(){let n=null;for(const s of this._def.checks)s.kind==="max"&&(n===null||s.value<n)&&(n=s.value);return n}}Yc.create=e=>new Yc({checks:[],typeName:Dt.ZodBigInt,coerce:e?.coerce??!1,...Ht(e)});class Ax extends Jt{_parse(n){if(this._def.coerce&&(n.data=!!n.data),this._getType(n)!==lt.boolean){const c=this._getOrReturnCtx(n);return Je(c,{code:Ge.invalid_type,expected:lt.boolean,received:c.parsedType}),_t}return Hs(n.data)}}Ax.create=e=>new Ax({typeName:Dt.ZodBoolean,coerce:e?.coerce||!1,...Ht(e)});class Yu extends Jt{_parse(n){if(this._def.coerce&&(n.data=new Date(n.data)),this._getType(n)!==lt.date){const m=this._getOrReturnCtx(n);return Je(m,{code:Ge.invalid_type,expected:lt.date,received:m.parsedType}),_t}if(Number.isNaN(n.data.getTime())){const m=this._getOrReturnCtx(n);return Je(m,{code:Ge.invalid_date}),_t}const c=new Ss;let f;for(const m of this._def.checks)m.kind==="min"?n.data.getTime()<m.value&&(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.too_small,message:m.message,inclusive:!0,exact:!1,minimum:m.value,type:"date"}),c.dirty()):m.kind==="max"?n.data.getTime()>m.value&&(f=this._getOrReturnCtx(n,f),Je(f,{code:Ge.too_big,message:m.message,inclusive:!0,exact:!1,maximum:m.value,type:"date"}),c.dirty()):tn.assertNever(m);return{status:c.value,value:new Date(n.data.getTime())}}_addCheck(n){return new Yu({...this._def,checks:[...this._def.checks,n]})}min(n,s){return this._addCheck({kind:"min",value:n.getTime(),message:ft.toString(s)})}max(n,s){return this._addCheck({kind:"max",value:n.getTime(),message:ft.toString(s)})}get minDate(){let n=null;for(const s of this._def.checks)s.kind==="min"&&(n===null||s.value>n)&&(n=s.value);return n!=null?new Date(n):null}get maxDate(){let n=null;for(const s of this._def.checks)s.kind==="max"&&(n===null||s.value<n)&&(n=s.value);return n!=null?new Date(n):null}}Yu.create=e=>new Yu({checks:[],coerce:e?.coerce||!1,typeName:Dt.ZodDate,...Ht(e)});class Ix extends Jt{_parse(n){if(this._getType(n)!==lt.symbol){const c=this._getOrReturnCtx(n);return Je(c,{code:Ge.invalid_type,expected:lt.symbol,received:c.parsedType}),_t}return Hs(n.data)}}Ix.create=e=>new Ix({typeName:Dt.ZodSymbol,...Ht(e)});class jx extends Jt{_parse(n){if(this._getType(n)!==lt.undefined){const c=this._getOrReturnCtx(n);return Je(c,{code:Ge.invalid_type,expected:lt.undefined,received:c.parsedType}),_t}return Hs(n.data)}}jx.create=e=>new jx({typeName:Dt.ZodUndefined,...Ht(e)});class Tx extends Jt{_parse(n){if(this._getType(n)!==lt.null){const c=this._getOrReturnCtx(n);return Je(c,{code:Ge.invalid_type,expected:lt.null,received:c.parsedType}),_t}return Hs(n.data)}}Tx.create=e=>new Tx({typeName:Dt.ZodNull,...Ht(e)});class Rx extends Jt{constructor(){super(...arguments),this._any=!0}_parse(n){return Hs(n.data)}}Rx.create=e=>new Rx({typeName:Dt.ZodAny,...Ht(e)});class _x extends Jt{constructor(){super(...arguments),this._unknown=!0}_parse(n){return Hs(n.data)}}_x.create=e=>new _x({typeName:Dt.ZodUnknown,...Ht(e)});class Pi extends Jt{_parse(n){const s=this._getOrReturnCtx(n);return Je(s,{code:Ge.invalid_type,expected:lt.never,received:s.parsedType}),_t}}Pi.create=e=>new Pi({typeName:Dt.ZodNever,...Ht(e)});class Dx extends Jt{_parse(n){if(this._getType(n)!==lt.undefined){const c=this._getOrReturnCtx(n);return Je(c,{code:Ge.invalid_type,expected:lt.void,received:c.parsedType}),_t}return Hs(n.data)}}Dx.create=e=>new Dx({typeName:Dt.ZodVoid,...Ht(e)});class ya extends Jt{_parse(n){const{ctx:s,status:c}=this._processInputParams(n),f=this._def;if(s.parsedType!==lt.array)return Je(s,{code:Ge.invalid_type,expected:lt.array,received:s.parsedType}),_t;if(f.exactLength!==null){const v=s.data.length>f.exactLength.value,N=s.data.length<f.exactLength.value;(v||N)&&(Je(s,{code:v?Ge.too_big:Ge.too_small,minimum:N?f.exactLength.value:void 0,maximum:v?f.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:f.exactLength.message}),c.dirty())}if(f.minLength!==null&&s.data.length<f.minLength.value&&(Je(s,{code:Ge.too_small,minimum:f.minLength.value,type:"array",inclusive:!0,exact:!1,message:f.minLength.message}),c.dirty()),f.maxLength!==null&&s.data.length>f.maxLength.value&&(Je(s,{code:Ge.too_big,maximum:f.maxLength.value,type:"array",inclusive:!0,exact:!1,message:f.maxLength.message}),c.dirty()),s.common.async)return Promise.all([...s.data].map((v,N)=>f.type._parseAsync(new ki(s,v,s.path,N)))).then(v=>Ss.mergeArray(c,v));const m=[...s.data].map((v,N)=>f.type._parseSync(new ki(s,v,s.path,N)));return Ss.mergeArray(c,m)}get element(){return this._def.type}min(n,s){return new ya({...this._def,minLength:{value:n,message:ft.toString(s)}})}max(n,s){return new ya({...this._def,maxLength:{value:n,message:ft.toString(s)}})}length(n,s){return new ya({...this._def,exactLength:{value:n,message:ft.toString(s)}})}nonempty(n){return this.min(1,n)}}ya.create=(e,n)=>new ya({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Dt.ZodArray,...Ht(n)});function al(e){if(e instanceof lr){const n={};for(const s in e.shape){const c=e.shape[s];n[s]=Ri.create(al(c))}return new lr({...e._def,shape:()=>n})}else return e instanceof ya?new ya({...e._def,type:al(e.element)}):e instanceof Ri?Ri.create(al(e.unwrap())):e instanceof Nl?Nl.create(al(e.unwrap())):e instanceof No?No.create(e.items.map(n=>al(n))):e}class lr extends Jt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const n=this._def.shape(),s=tn.objectKeys(n);return this._cached={shape:n,keys:s},this._cached}_parse(n){if(this._getType(n)!==lt.object){const y=this._getOrReturnCtx(n);return Je(y,{code:Ge.invalid_type,expected:lt.object,received:y.parsedType}),_t}const{status:c,ctx:f}=this._processInputParams(n),{shape:m,keys:v}=this._getCached(),N=[];if(!(this._def.catchall instanceof Pi&&this._def.unknownKeys==="strip"))for(const y in f.data)v.includes(y)||N.push(y);const w=[];for(const y of v){const E=m[y],I=f.data[y];w.push({key:{status:"valid",value:y},value:E._parse(new ki(f,I,f.path,y)),alwaysSet:y in f.data})}if(this._def.catchall instanceof Pi){const y=this._def.unknownKeys;if(y==="passthrough")for(const E of N)w.push({key:{status:"valid",value:E},value:{status:"valid",value:f.data[E]}});else if(y==="strict")N.length>0&&(Je(f,{code:Ge.unrecognized_keys,keys:N}),c.dirty());else if(y!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const y=this._def.catchall;for(const E of N){const I=f.data[E];w.push({key:{status:"valid",value:E},value:y._parse(new ki(f,I,f.path,E)),alwaysSet:E in f.data})}}return f.common.async?Promise.resolve().then(async()=>{const y=[];for(const E of w){const I=await E.key,O=await E.value;y.push({key:I,value:O,alwaysSet:E.alwaysSet})}return y}).then(y=>Ss.mergeObjectSync(c,y)):Ss.mergeObjectSync(c,w)}get shape(){return this._def.shape()}strict(n){return ft.errToObj,new lr({...this._def,unknownKeys:"strict",...n!==void 0?{errorMap:(s,c)=>{const f=this._def.errorMap?.(s,c).message??c.defaultError;return s.code==="unrecognized_keys"?{message:ft.errToObj(n).message??f}:{message:f}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(n){return new lr({...this._def,shape:()=>({...this._def.shape(),...n})})}merge(n){return new lr({unknownKeys:n._def.unknownKeys,catchall:n._def.catchall,shape:()=>({...this._def.shape(),...n._def.shape()}),typeName:Dt.ZodObject})}setKey(n,s){return this.augment({[n]:s})}catchall(n){return new lr({...this._def,catchall:n})}pick(n){const s={};for(const c of tn.objectKeys(n))n[c]&&this.shape[c]&&(s[c]=this.shape[c]);return new lr({...this._def,shape:()=>s})}omit(n){const s={};for(const c of tn.objectKeys(this.shape))n[c]||(s[c]=this.shape[c]);return new lr({...this._def,shape:()=>s})}deepPartial(){return al(this)}partial(n){const s={};for(const c of tn.objectKeys(this.shape)){const f=this.shape[c];n&&!n[c]?s[c]=f:s[c]=f.optional()}return new lr({...this._def,shape:()=>s})}required(n){const s={};for(const c of tn.objectKeys(this.shape))if(n&&!n[c])s[c]=this.shape[c];else{let m=this.shape[c];for(;m instanceof Ri;)m=m._def.innerType;s[c]=m}return new lr({...this._def,shape:()=>s})}keyof(){return _b(tn.objectKeys(this.shape))}}lr.create=(e,n)=>new lr({shape:()=>e,unknownKeys:"strip",catchall:Pi.create(),typeName:Dt.ZodObject,...Ht(n)});lr.strictCreate=(e,n)=>new lr({shape:()=>e,unknownKeys:"strict",catchall:Pi.create(),typeName:Dt.ZodObject,...Ht(n)});lr.lazycreate=(e,n)=>new lr({shape:e,unknownKeys:"strip",catchall:Pi.create(),typeName:Dt.ZodObject,...Ht(n)});class Zu extends Jt{_parse(n){const{ctx:s}=this._processInputParams(n),c=this._def.options;function f(m){for(const N of m)if(N.result.status==="valid")return N.result;for(const N of m)if(N.result.status==="dirty")return s.common.issues.push(...N.ctx.common.issues),N.result;const v=m.map(N=>new wa(N.ctx.common.issues));return Je(s,{code:Ge.invalid_union,unionErrors:v}),_t}if(s.common.async)return Promise.all(c.map(async m=>{const v={...s,common:{...s.common,issues:[]},parent:null};return{result:await m._parseAsync({data:s.data,path:s.path,parent:v}),ctx:v}})).then(f);{let m;const v=[];for(const w of c){const y={...s,common:{...s.common,issues:[]},parent:null},E=w._parseSync({data:s.data,path:s.path,parent:y});if(E.status==="valid")return E;E.status==="dirty"&&!m&&(m={result:E,ctx:y}),y.common.issues.length&&v.push(y.common.issues)}if(m)return s.common.issues.push(...m.ctx.common.issues),m.result;const N=v.map(w=>new wa(w));return Je(s,{code:Ge.invalid_union,unionErrors:N}),_t}}get options(){return this._def.options}}Zu.create=(e,n)=>new Zu({options:e,typeName:Dt.ZodUnion,...Ht(n)});function lp(e,n){const s=Ci(e),c=Ci(n);if(e===n)return{valid:!0,data:e};if(s===lt.object&&c===lt.object){const f=tn.objectKeys(n),m=tn.objectKeys(e).filter(N=>f.indexOf(N)!==-1),v={...e,...n};for(const N of m){const w=lp(e[N],n[N]);if(!w.valid)return{valid:!1};v[N]=w.data}return{valid:!0,data:v}}else if(s===lt.array&&c===lt.array){if(e.length!==n.length)return{valid:!1};const f=[];for(let m=0;m<e.length;m++){const v=e[m],N=n[m],w=lp(v,N);if(!w.valid)return{valid:!1};f.push(w.data)}return{valid:!0,data:f}}else return s===lt.date&&c===lt.date&&+e==+n?{valid:!0,data:e}:{valid:!1}}class qu extends Jt{_parse(n){const{status:s,ctx:c}=this._processInputParams(n),f=(m,v)=>{if(Cx(m)||Cx(v))return _t;const N=lp(m.value,v.value);return N.valid?((Ex(m)||Ex(v))&&s.dirty(),{status:s.value,value:N.data}):(Je(c,{code:Ge.invalid_intersection_types}),_t)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([m,v])=>f(m,v)):f(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}qu.create=(e,n,s)=>new qu({left:e,right:n,typeName:Dt.ZodIntersection,...Ht(s)});class No extends Jt{_parse(n){const{status:s,ctx:c}=this._processInputParams(n);if(c.parsedType!==lt.array)return Je(c,{code:Ge.invalid_type,expected:lt.array,received:c.parsedType}),_t;if(c.data.length<this._def.items.length)return Je(c,{code:Ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_t;!this._def.rest&&c.data.length>this._def.items.length&&(Je(c,{code:Ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const m=[...c.data].map((v,N)=>{const w=this._def.items[N]||this._def.rest;return w?w._parse(new ki(c,v,c.path,N)):null}).filter(v=>!!v);return c.common.async?Promise.all(m).then(v=>Ss.mergeArray(s,v)):Ss.mergeArray(s,m)}get items(){return this._def.items}rest(n){return new No({...this._def,rest:n})}}No.create=(e,n)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new No({items:e,typeName:Dt.ZodTuple,rest:null,...Ht(n)})};class Ox extends Jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(n){const{status:s,ctx:c}=this._processInputParams(n);if(c.parsedType!==lt.map)return Je(c,{code:Ge.invalid_type,expected:lt.map,received:c.parsedType}),_t;const f=this._def.keyType,m=this._def.valueType,v=[...c.data.entries()].map(([N,w],y)=>({key:f._parse(new ki(c,N,c.path,[y,"key"])),value:m._parse(new ki(c,w,c.path,[y,"value"]))}));if(c.common.async){const N=new Map;return Promise.resolve().then(async()=>{for(const w of v){const y=await w.key,E=await w.value;if(y.status==="aborted"||E.status==="aborted")return _t;(y.status==="dirty"||E.status==="dirty")&&s.dirty(),N.set(y.value,E.value)}return{status:s.value,value:N}})}else{const N=new Map;for(const w of v){const y=w.key,E=w.value;if(y.status==="aborted"||E.status==="aborted")return _t;(y.status==="dirty"||E.status==="dirty")&&s.dirty(),N.set(y.value,E.value)}return{status:s.value,value:N}}}}Ox.create=(e,n,s)=>new Ox({valueType:n,keyType:e,typeName:Dt.ZodMap,...Ht(s)});class Zc extends Jt{_parse(n){const{status:s,ctx:c}=this._processInputParams(n);if(c.parsedType!==lt.set)return Je(c,{code:Ge.invalid_type,expected:lt.set,received:c.parsedType}),_t;const f=this._def;f.minSize!==null&&c.data.size<f.minSize.value&&(Je(c,{code:Ge.too_small,minimum:f.minSize.value,type:"set",inclusive:!0,exact:!1,message:f.minSize.message}),s.dirty()),f.maxSize!==null&&c.data.size>f.maxSize.value&&(Je(c,{code:Ge.too_big,maximum:f.maxSize.value,type:"set",inclusive:!0,exact:!1,message:f.maxSize.message}),s.dirty());const m=this._def.valueType;function v(w){const y=new Set;for(const E of w){if(E.status==="aborted")return _t;E.status==="dirty"&&s.dirty(),y.add(E.value)}return{status:s.value,value:y}}const N=[...c.data.values()].map((w,y)=>m._parse(new ki(c,w,c.path,y)));return c.common.async?Promise.all(N).then(w=>v(w)):v(N)}min(n,s){return new Zc({...this._def,minSize:{value:n,message:ft.toString(s)}})}max(n,s){return new Zc({...this._def,maxSize:{value:n,message:ft.toString(s)}})}size(n,s){return this.min(n,s).max(n,s)}nonempty(n){return this.min(1,n)}}Zc.create=(e,n)=>new Zc({valueType:e,minSize:null,maxSize:null,typeName:Dt.ZodSet,...Ht(n)});class kx extends Jt{get schema(){return this._def.getter()}_parse(n){const{ctx:s}=this._processInputParams(n);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}kx.create=(e,n)=>new kx({getter:e,typeName:Dt.ZodLazy,...Ht(n)});class Px extends Jt{_parse(n){if(n.data!==this._def.value){const s=this._getOrReturnCtx(n);return Je(s,{received:s.data,code:Ge.invalid_literal,expected:this._def.value}),_t}return{status:"valid",value:n.data}}get value(){return this._def.value}}Px.create=(e,n)=>new Px({value:e,typeName:Dt.ZodLiteral,...Ht(n)});function _b(e,n){return new wl({values:e,typeName:Dt.ZodEnum,...Ht(n)})}class wl extends Jt{_parse(n){if(typeof n.data!="string"){const s=this._getOrReturnCtx(n),c=this._def.values;return Je(s,{expected:tn.joinValues(c),received:s.parsedType,code:Ge.invalid_type}),_t}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(n.data)){const s=this._getOrReturnCtx(n),c=this._def.values;return Je(s,{received:s.data,code:Ge.invalid_enum_value,options:c}),_t}return Hs(n.data)}get options(){return this._def.values}get enum(){const n={};for(const s of this._def.values)n[s]=s;return n}get Values(){const n={};for(const s of this._def.values)n[s]=s;return n}get Enum(){const n={};for(const s of this._def.values)n[s]=s;return n}extract(n,s=this._def){return wl.create(n,{...this._def,...s})}exclude(n,s=this._def){return wl.create(this.options.filter(c=>!n.includes(c)),{...this._def,...s})}}wl.create=_b;class Mx extends Jt{_parse(n){const s=tn.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(n);if(c.parsedType!==lt.string&&c.parsedType!==lt.number){const f=tn.objectValues(s);return Je(c,{expected:tn.joinValues(f),received:c.parsedType,code:Ge.invalid_type}),_t}if(this._cache||(this._cache=new Set(tn.getValidEnumValues(this._def.values))),!this._cache.has(n.data)){const f=tn.objectValues(s);return Je(c,{received:c.data,code:Ge.invalid_enum_value,options:f}),_t}return Hs(n.data)}get enum(){return this._def.values}}Mx.create=(e,n)=>new Mx({values:e,typeName:Dt.ZodNativeEnum,...Ht(n)});class Qu extends Jt{unwrap(){return this._def.type}_parse(n){const{ctx:s}=this._processInputParams(n);if(s.parsedType!==lt.promise&&s.common.async===!1)return Je(s,{code:Ge.invalid_type,expected:lt.promise,received:s.parsedType}),_t;const c=s.parsedType===lt.promise?s.data:Promise.resolve(s.data);return Hs(c.then(f=>this._def.type.parseAsync(f,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Qu.create=(e,n)=>new Qu({type:e,typeName:Dt.ZodPromise,...Ht(n)});class bl extends Jt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(n){const{status:s,ctx:c}=this._processInputParams(n),f=this._def.effect||null,m={addIssue:v=>{Je(c,v),v.fatal?s.abort():s.dirty()},get path(){return c.path}};if(m.addIssue=m.addIssue.bind(m),f.type==="preprocess"){const v=f.transform(c.data,m);if(c.common.async)return Promise.resolve(v).then(async N=>{if(s.value==="aborted")return _t;const w=await this._def.schema._parseAsync({data:N,path:c.path,parent:c});return w.status==="aborted"?_t:w.status==="dirty"||s.value==="dirty"?Oc(w.value):w});{if(s.value==="aborted")return _t;const N=this._def.schema._parseSync({data:v,path:c.path,parent:c});return N.status==="aborted"?_t:N.status==="dirty"||s.value==="dirty"?Oc(N.value):N}}if(f.type==="refinement"){const v=N=>{const w=f.refinement(N,m);if(c.common.async)return Promise.resolve(w);if(w instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return N};if(c.common.async===!1){const N=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return N.status==="aborted"?_t:(N.status==="dirty"&&s.dirty(),v(N.value),{status:s.value,value:N.value})}else return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(N=>N.status==="aborted"?_t:(N.status==="dirty"&&s.dirty(),v(N.value).then(()=>({status:s.value,value:N.value}))))}if(f.type==="transform")if(c.common.async===!1){const v=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if(!vl(v))return _t;const N=f.transform(v.value,m);if(N instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:N}}else return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(v=>vl(v)?Promise.resolve(f.transform(v.value,m)).then(N=>({status:s.value,value:N})):_t);tn.assertNever(f)}}bl.create=(e,n,s)=>new bl({schema:e,typeName:Dt.ZodEffects,effect:n,...Ht(s)});bl.createWithPreprocess=(e,n,s)=>new bl({schema:n,effect:{type:"preprocess",transform:e},typeName:Dt.ZodEffects,...Ht(s)});class Ri extends Jt{_parse(n){return this._getType(n)===lt.undefined?Hs(void 0):this._def.innerType._parse(n)}unwrap(){return this._def.innerType}}Ri.create=(e,n)=>new Ri({innerType:e,typeName:Dt.ZodOptional,...Ht(n)});class Nl extends Jt{_parse(n){return this._getType(n)===lt.null?Hs(null):this._def.innerType._parse(n)}unwrap(){return this._def.innerType}}Nl.create=(e,n)=>new Nl({innerType:e,typeName:Dt.ZodNullable,...Ht(n)});class cp extends Jt{_parse(n){const{ctx:s}=this._processInputParams(n);let c=s.data;return s.parsedType===lt.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}cp.create=(e,n)=>new cp({innerType:e,typeName:Dt.ZodDefault,defaultValue:typeof n.default=="function"?n.default:()=>n.default,...Ht(n)});class dp extends Jt{_parse(n){const{ctx:s}=this._processInputParams(n),c={...s,common:{...s.common,issues:[]}},f=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return Xu(f)?f.then(m=>({status:"valid",value:m.status==="valid"?m.value:this._def.catchValue({get error(){return new wa(c.common.issues)},input:c.data})})):{status:"valid",value:f.status==="valid"?f.value:this._def.catchValue({get error(){return new wa(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}dp.create=(e,n)=>new dp({innerType:e,typeName:Dt.ZodCatch,catchValue:typeof n.catch=="function"?n.catch:()=>n.catch,...Ht(n)});class Lx extends Jt{_parse(n){if(this._getType(n)!==lt.nan){const c=this._getOrReturnCtx(n);return Je(c,{code:Ge.invalid_type,expected:lt.nan,received:c.parsedType}),_t}return{status:"valid",value:n.data}}}Lx.create=e=>new Lx({typeName:Dt.ZodNaN,...Ht(e)});class _T extends Jt{_parse(n){const{ctx:s}=this._processInputParams(n),c=s.data;return this._def.type._parse({data:c,path:s.path,parent:s})}unwrap(){return this._def.type}}class e0 extends Jt{_parse(n){const{status:s,ctx:c}=this._processInputParams(n);if(c.common.async)return(async()=>{const m=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return m.status==="aborted"?_t:m.status==="dirty"?(s.dirty(),Oc(m.value)):this._def.out._parseAsync({data:m.value,path:c.path,parent:c})})();{const f=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return f.status==="aborted"?_t:f.status==="dirty"?(s.dirty(),{status:"dirty",value:f.value}):this._def.out._parseSync({data:f.value,path:c.path,parent:c})}}static create(n,s){return new e0({in:n,out:s,typeName:Dt.ZodPipeline})}}class up extends Jt{_parse(n){const s=this._def.innerType._parse(n),c=f=>(vl(f)&&(f.value=Object.freeze(f.value)),f);return Xu(s)?s.then(f=>c(f)):c(s)}unwrap(){return this._def.innerType}}up.create=(e,n)=>new up({innerType:e,typeName:Dt.ZodReadonly,...Ht(n)});var Dt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Dt||(Dt={}));const is=Ai.create;Pi.create;ya.create;const DT=lr.create;Zu.create;qu.create;No.create;wl.create;Qu.create;Ri.create;Nl.create;var bm={exports:{}},Nm={};var Fx;function OT(){if(Fx)return Nm;Fx=1;var e=rf();function n(I,O){return I===O&&(I!==0||1/I===1/O)||I!==I&&O!==O}var s=typeof Object.is=="function"?Object.is:n,c=e.useState,f=e.useEffect,m=e.useLayoutEffect,v=e.useDebugValue;function N(I,O){var _=O(),k=c({inst:{value:_,getSnapshot:O}}),R=k[0].inst,P=k[1];return m(function(){R.value=_,R.getSnapshot=O,w(R)&&P({inst:R})},[I,_,O]),f(function(){return w(R)&&P({inst:R}),I(function(){w(R)&&P({inst:R})})},[I]),v(_),_}function w(I){var O=I.getSnapshot;I=I.value;try{var _=O();return!s(I,_)}catch{return!0}}function y(I,O){return O()}var E=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:N;return Nm.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:E,Nm}var Bx;function kT(){return Bx||(Bx=1,bm.exports=OT()),bm.exports}var PT=kT();function MT(){return PT.useSyncExternalStore(LT,()=>!0,()=>!1)}function LT(){return()=>{}}var t0="Avatar",[FT]=zs(t0),[BT,Db]=FT(t0),Ob=C.forwardRef((e,n)=>{const{__scopeAvatar:s,...c}=e,[f,m]=C.useState("idle");return r.jsx(BT,{scope:s,imageLoadingStatus:f,onImageLoadingStatusChange:m,children:r.jsx(jt.span,{...c,ref:n})})});Ob.displayName=t0;var kb="AvatarImage",Pb=C.forwardRef((e,n)=>{const{__scopeAvatar:s,src:c,onLoadingStatusChange:f=()=>{},...m}=e,v=Db(kb,s),N=UT(c,m),w=Us(y=>{f(y),v.onImageLoadingStatusChange(y)});return sr(()=>{N!=="idle"&&w(N)},[N,w]),N==="loaded"?r.jsx(jt.img,{...m,ref:n,src:c}):null});Pb.displayName=kb;var Mb="AvatarFallback",Lb=C.forwardRef((e,n)=>{const{__scopeAvatar:s,delayMs:c,...f}=e,m=Db(Mb,s),[v,N]=C.useState(c===void 0);return C.useEffect(()=>{if(c!==void 0){const w=window.setTimeout(()=>N(!0),c);return()=>window.clearTimeout(w)}},[c]),v&&m.imageLoadingStatus!=="loaded"?r.jsx(jt.span,{...f,ref:n}):null});Lb.displayName=Mb;function Ux(e,n){return e?n?(e.src!==n&&(e.src=n),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function UT(e,{referrerPolicy:n,crossOrigin:s}){const c=MT(),f=C.useRef(null),m=c?(f.current||(f.current=new window.Image),f.current):null,[v,N]=C.useState(()=>Ux(m,e));return sr(()=>{N(Ux(m,e))},[m,e]),sr(()=>{const w=I=>()=>{N(I)};if(!m)return;const y=w("loaded"),E=w("error");return m.addEventListener("load",y),m.addEventListener("error",E),n&&(m.referrerPolicy=n),typeof s=="string"&&(m.crossOrigin=s),()=>{m.removeEventListener("load",y),m.removeEventListener("error",E)}},[m,s,n]),v}var Fb=Ob,Bb=Pb,Ub=Lb;const n0=C.forwardRef(({className:e,...n},s)=>r.jsx(Fb,{ref:s,className:Me("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...n}));n0.displayName=Fb.displayName;const zT=C.forwardRef(({className:e,...n},s)=>r.jsx(Bb,{ref:s,className:Me("aspect-square h-full w-full",e),...n}));zT.displayName=Bb.displayName;const r0=C.forwardRef(({className:e,...n},s)=>r.jsx(Ub,{ref:s,className:Me("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...n}));r0.displayName=Ub.displayName;const Ec={firstName:"",middleName:"",lastName:"",suffixName:"",address:"",contactNumber:"",gender:"",civilStatus:"",dateOfBirth:"",email:"",employeeId:"",department:"",designation:"",role:"Employee",employmentType:"Regular",sssNumber:"",pagibigNumber:"",tinNumber:"",dateOfJoining:"",dateOfLeaving:"",emergencyContact:"",educationalBackground:"",signatureFile:"",signatureFileSize:"",pdsFile:"",pdsFileSize:"",serviceRecordFile:"",serviceRecordFileSize:"",status:"Active",password:"",posNumber:"",deactivationDate:"",reactivationDate:""},Ct=({label:e,children:n,className:s=""})=>r.jsxs("div",{className:`space-y-2 ${s}`,children:[r.jsx(gt,{className:"text-sm font-semibold text-muted-foreground",children:e}),n]}),Fa="https://bbaec9682261.ngrok-free.app",zx=["Regular","Contractual","Probationary","Project-Based"],VT=e=>{if(!e)return!1;const n=e.split("-");if(n.length!==3)return!1;const[s,c,f]=n;return!(!/^\d{2}$/.test(s)||!/^[A-Z]{2,4}$/.test(c)||!/^\d{1,5}$/.test(f))},HT=DT({employeeId:is().trim().min(1,"Employee ID is required").refine(e=>VT(e),{message:"Employee ID must be in format: YY-SCHOOL-XXXXX (e.g., 25-GPC-12345). Year: 2 digits, School: 2-4 letters, Unique ID: 1-5 digits"}),firstName:is().trim().min(1,"First name is required"),middleName:is().trim().min(1,"Middle name is required"),lastName:is().trim().min(1,"Last name is required"),suffixName:is().trim().optional(),department:is().min(1,"Department is required"),designation:is().min(1,"Designation is required"),email:is().trim().email("Invalid email").max(255),contactNumber:is().trim().min(1,"Contact number is required"),dateOfBirth:is().min(1,"Date of birth is required"),address:is().trim().min(1,"Address is required"),dateOfJoining:is().min(1,"Date of joining is required"),employmentType:is().min(1,"Employment type is required"),password:is().trim().min(6,"Password must be at least 6 characters")}),Eu={employeeId:"",firstName:"",middleName:"",lastName:"",suffixName:"",address:"",contactNumber:"",gender:"",civilStatus:"",dateOfBirth:"",email:"",department:"",designation:"",role:"Employee",employmentType:"Regular",sssNumber:"",pagibigNumber:"",tinNumber:"",dateOfJoining:"",dateOfLeaving:"",emergencyContact:"",educationalBackground:"",signatureFile:null,pdsFile:null,serviceRecordFile:null,status:"Active",password:""},WT=()=>{const[e,n]=C.useState([]),[s,c]=C.useState([]),[f,m]=C.useState([]),[v,N]=C.useState(""),[w,y]=C.useState("all"),[E,I]=C.useState(!1),[O,_]=C.useState(!1),[k,R]=C.useState(!1),[P,H]=C.useState(!1),[z,F]=C.useState(null),[Z,W]=C.useState(""),[te,G]=C.useState(!1),[J,se]=C.useState(Ec),[fe,Ee]=C.useState(Eu),[ue,ge]=C.useState(!0),[re,q]=C.useState(!1),[U,K]=C.useState({}),{toast:ne}=Un(),{user:oe}=Vs();Na();const[we,X]=C.useState(!1),[ie,je]=C.useState(!1),Ie=T=>({id:String(T.id),employeeId:T.employeeId,firstName:T.firstName||"",middleName:T.middleName||"",lastName:T.lastName||"",suffixName:T.suffixName||"",fullName:T.fullName,department:T.department,position:T.position,email:T.email,phone:T.phone,dateOfBirth:T.dateOfBirth||"",address:T.address||"",gender:T.gender||"",civilStatus:T.civilStatus||"",dateHired:T.dateHired,dateOfLeaving:T.dateOfLeaving||"",employmentType:T.employmentType||"Regular",role:T.role||"",sssNumber:T.sssNumber||"",pagibigNumber:T.pagibigNumber||"",tinNumber:T.tinNumber||"",emergencyContact:T.emergencyContact||"",educationalBackground:T.educationalBackground||"",signatureFile:T.signatureFile||"",pdsFile:T.pdsFile||"",serviceRecordFile:T.serviceRecordFile||"",status:T.status,archivedReason:T.archivedReason||void 0,archivedDate:T.archivedAt||void 0,createdAt:T.createdAt,updatedAt:T.updatedAt}),We=async()=>{try{ge(!0);const T=await St(`${Fa}/employees?status=active`);if(!T.ok)throw new Error("Failed to fetch employees");const Re=await T.json();n(Re.data.map(Ie))}catch(T){console.error(T),T instanceof TypeError&&T.message.includes("Failed to fetch")?ne({variant:"destructive",title:"Server Connection Error",description:"Unable to connect to the server. Please make sure the backend server is running on port 4000."}):ne({variant:"destructive",title:"Error",description:"Unable to load employees. Please try again."})}finally{ge(!1)}},_e=async()=>{try{const T=await St(`${Fa}/departments`);if(!T.ok)throw new Error("Failed to fetch departments");const Re=await T.json();c(Re.data)}catch(T){if(T instanceof TypeError&&T.message.includes("Failed to fetch"))return;console.error(T)}},Ae=async()=>{try{const T=await St(`${Fa}/designations`);if(!T.ok)throw new Error("Failed to fetch designations");const Re=await T.json();m(Re.data)}catch(T){if(T instanceof TypeError&&T.message.includes("Failed to fetch"))return;console.error(T)}};C.useEffect(()=>{We(),_e(),Ae()},[]);const Ue=e.filter(T=>{const Re=T.fullName.toLowerCase().includes(v.toLowerCase())||T.employeeId.toLowerCase().includes(v.toLowerCase()),Be=w==="all"||T.department===w;return Re&&Be}),qe=async()=>{try{K({});const T=HT.parse(fe);q(!0);const Re=[T.firstName,T.middleName,T.lastName,T.suffixName||""].filter(ee=>ee&&ee.trim().length).join(" ").replace(/\s+/g," ").trim();if(!(await St(`${Fa}/employees`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:T.employeeId,firstName:T.firstName,middleName:T.middleName,lastName:T.lastName,suffixName:T.suffixName,fullName:Re,department:T.department,position:T.designation,email:T.email,phone:T.contactNumber,dateOfBirth:T.dateOfBirth,address:T.address,gender:fe.gender||null,civilStatus:fe.civilStatus||null,dateHired:T.dateOfJoining,dateOfLeaving:fe.dateOfLeaving||null,employmentType:T.employmentType||"Regular",role:fe.role||null,sssNumber:fe.sssNumber||null,pagibigNumber:fe.pagibigNumber||null,tinNumber:fe.tinNumber||null,emergencyContact:fe.emergencyContact||null,educationalBackground:fe.educationalBackground||null,signatureFile:fe.signatureFile?.name||null,pdsFile:fe.pdsFile?.name||null,serviceRecordFile:fe.serviceRecordFile?.name||null,password:T.password})})).ok)throw new Error("Failed to add employee");await We(),I(!1),Ee(Eu),K({}),X(!1),ne({title:"Success",description:"Employee added successfully"})}catch(T){if(T instanceof wa){const Re={};T.errors.forEach(Be=>{Be.path[0]&&(Re[Be.path[0].toString()]=Be.message)}),K(Re)}else console.error(T),ne({variant:"destructive",title:"Error",description:"Unable to add employee. Please try again."})}finally{q(!1)}},st=async T=>{F(T);try{const Re=await St(`${Fa}/employees/${T.id}`);if(Re.ok){const ee=(await Re.json()).data;se({...Ec,firstName:T.firstName||"",middleName:T.middleName||"",lastName:T.lastName||"",suffixName:T.suffixName||"",address:T.address,contactNumber:T.phone,dateOfBirth:T.dateOfBirth,email:T.email,employeeId:T.employeeId,department:T.department,designation:T.position,dateOfJoining:T.dateHired,status:T.status==="active"?"Active":"Inactive",employmentType:T.employmentType||"Regular",emergencyContact:T.emergencyContact||"",educationalBackground:T.educationalBackground||"",signatureFile:T.signatureFile||"",signatureFileSize:T.signatureFile?"Uploaded":"",pdsFile:T.pdsFile||"",pdsFileSize:T.pdsFile?"Uploaded":"",serviceRecordFile:T.serviceRecordFile||"",serviceRecordFileSize:T.serviceRecordFile?"Uploaded":"",registeredFaceFile:T.registeredFaceFile||"",registeredFaceFileSize:T.registeredFaceFile?"Captured":"",password:ee.password_hash?"":"",deactivationDate:ee.deactivation_date||"",reactivationDate:ee.reactivation_date||""})}else se({...Ec,firstName:T.firstName||"",middleName:T.middleName||"",lastName:T.lastName||"",suffixName:T.suffixName||"",address:T.address,contactNumber:T.phone,dateOfBirth:T.dateOfBirth,email:T.email,employeeId:T.employeeId,department:T.department,designation:T.position,dateOfJoining:T.dateHired,status:T.status==="active"?"Active":"Inactive",employmentType:T.employmentType||"Regular",emergencyContact:T.emergencyContact||"",educationalBackground:T.educationalBackground||"",signatureFile:T.signatureFile||"",signatureFileSize:T.signatureFile?"Uploaded":"",pdsFile:T.pdsFile||"",pdsFileSize:T.pdsFile?"Uploaded":"",serviceRecordFile:T.serviceRecordFile||"",serviceRecordFileSize:T.serviceRecordFile?"Uploaded":"",registeredFaceFile:T.registeredFaceFile||"",registeredFaceFileSize:T.registeredFaceFile?"Captured":"",password:""})}catch(Re){console.error("Error fetching employee details:",Re),se({...Ec,firstName:T.firstName||"",middleName:T.middleName||"",lastName:T.lastName||"",suffixName:T.suffixName||"",address:T.address,contactNumber:T.phone,dateOfBirth:T.dateOfBirth,email:T.email,employeeId:T.employeeId,department:T.department,designation:T.position,dateOfJoining:T.dateHired,status:T.status==="active"?"Active":"Inactive",employmentType:T.employmentType||"Regular",emergencyContact:T.emergencyContact||"",educationalBackground:T.educationalBackground||"",signatureFile:T.signatureFile||"",signatureFileSize:T.signatureFile?"Uploaded":"",pdsFile:T.pdsFile||"",pdsFileSize:T.pdsFile?"Uploaded":"",serviceRecordFile:T.serviceRecordFile||"",serviceRecordFileSize:T.serviceRecordFile?"Uploaded":"",registeredFaceFile:T.registeredFaceFile||"",registeredFaceFileSize:T.registeredFaceFile?"Captured":"",password:""})}G(!0)},me=(T,Re)=>{se(Be=>({...Be,[T]:Re}))},Ze=()=>{G(!1),se(Ec),F(null),je(!1)},Xe=T=>{T.preventDefault(),z&&(async()=>{try{q(!0);const Re={status:J.status.toLowerCase(),firstName:J.firstName||void 0,middleName:J.middleName||void 0,lastName:J.lastName||void 0,suffixName:J.suffixName||void 0,address:J.address||void 0,phone:J.contactNumber||void 0,dateOfBirth:J.dateOfBirth||void 0,email:J.email||void 0,department:J.department||void 0,position:J.designation||void 0,dateHired:J.dateOfJoining||void 0,dateOfLeaving:J.dateOfLeaving||void 0,employmentType:J.employmentType||void 0,role:J.role||void 0,gender:J.gender||void 0,civilStatus:J.civilStatus||void 0,sssNumber:J.sssNumber||void 0,pagibigNumber:J.pagibigNumber||void 0,tinNumber:J.tinNumber||void 0,emergencyContact:J.emergencyContact||void 0,educationalBackground:J.educationalBackground||void 0,password:J.password&&J.password!==""&&J.password.trim()!==""?J.password:void 0,deactivationDate:J.deactivationDate||void 0,reactivationDate:J.reactivationDate||void 0};if(!(await fetch(`${Fa}/employees/${z.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)})).ok)throw new Error("Failed to update employee");await We(),Re.status==="inactive"?ne({title:"Employee Archived",description:"Employee has been moved to the inactive employees list."}):ne({title:"Updated",description:"Employee information updated successfully."}),Ze()}catch(Re){console.error(Re),ne({variant:"destructive",title:"Error",description:"Unable to update employee. Please try again."})}finally{q(!1)}})()},ct=async()=>{if(z)try{q(!0);const T=await fetch(`${Fa}/employees/${z.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!T.ok){const Re=await T.json().catch(()=>({}));throw new Error(Re.message||"Failed to delete employee")}await We(),R(!1),F(null),ne({title:"Deleted",description:"Employee deleted successfully."})}catch(T){console.error(T),ne({variant:"destructive",title:"Error",description:T instanceof Error?T.message:"Unable to delete employee. Please try again."})}finally{q(!1)}},Yt=()=>{if(!z||!Z.trim()){ne({variant:"destructive",title:"Error",description:"Please provide a reason for archiving"});return}(async()=>{try{if(q(!0),!(await fetch(`${Fa}/employees/${z.id}/archive`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:Z})})).ok)throw new Error("Failed to archive employee");await We(),_(!1),W(""),F(null),ne({title:"Success",description:"Employee archived successfully"})}catch(T){console.error(T),ne({variant:"destructive",title:"Error",description:"Unable to archive employee. Please try again."})}finally{q(!1)}})()},on=async()=>{z&&(async()=>{try{q(!0);const T=await fetch(`${Fa}/employees/${z.id}/reset-password`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetBy:oe?.fullName||"Admin"})});if(!T.ok){const Be=await T.json().catch(()=>({}));throw new Error(Be.message||"Failed to reset password")}const Re=await T.json();await We(),H(!1),F(null),ne({title:"Password Reset",description:`Password has been reset. Temporary password: ${Re.temporaryPassword||"N/A"}. Employee must change password on next login.`,duration:1e4})}catch(T){console.error(T),ne({variant:"destructive",title:"Error",description:T instanceof Error?T.message:"Unable to reset password. Please try again."})}finally{q(!1)}})()};return r.jsxs(ar,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Employee Management"}),r.jsx("p",{className:"text-muted-foreground",children:"View and manage employee records"})]}),r.jsx("div",{className:"flex gap-3",children:r.jsxs(Se,{onClick:()=>I(!0),className:"gap-2",children:[r.jsx(Pu,{className:"w-4 h-4"}),"Add Employee"]})})]}),r.jsxs(Ye,{className:"shadow-sm",children:[r.jsxs(rr,{className:"border-b bg-gradient-to-r from-primary/5 to-primary/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-primary"})}),r.jsx(Bn,{className:"text-xl",children:"Employee List"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(Te,{placeholder:"Search by name or ID...",value:v,onChange:T=>N(T.target.value),className:"pl-10 h-11"})]}),r.jsxs(En,{value:w,onValueChange:y,children:[r.jsx(xn,{className:"w-full md:w-[220px] h-11",children:r.jsx(Sn,{placeholder:"Filter by department"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"all",children:"All Departments"}),s.map(T=>r.jsx(nt,{value:T.name,children:T.name},T.id))]})]})]})]}),r.jsx(Gt,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ef,{children:[r.jsx(Sf,{children:r.jsxs(ga,{className:"bg-muted/50",children:[r.jsx(cr,{className:"font-semibold",children:"Employee Name"}),r.jsx(cr,{className:"font-semibold",children:"Employee ID"}),r.jsx(cr,{className:"font-semibold",children:"Department"}),r.jsx(cr,{className:"font-semibold",children:"Designation"}),r.jsx(cr,{className:"font-semibold",children:"Status"}),r.jsx(cr,{className:"font-semibold",children:"Employment Type"}),r.jsx(cr,{className:"font-semibold text-center",children:"Action"})]})}),r.jsx(Af,{children:ue?r.jsx(ga,{children:r.jsx($n,{colSpan:7,className:"text-center text-muted-foreground py-12",children:"Loading employees..."})}):Ue.length===0?r.jsx(ga,{children:r.jsx($n,{colSpan:7,className:"text-center text-muted-foreground py-12",children:"No employees found"})}):Ue.map(T=>r.jsxs(ga,{className:"hover:bg-muted/30 transition-colors",children:[r.jsx($n,{className:"font-medium",children:T.fullName}),r.jsx($n,{className:"text-muted-foreground",children:T.employeeId}),r.jsx($n,{children:T.department}),r.jsx($n,{children:T.position}),r.jsx($n,{children:r.jsx($r,{variant:"default",className:T.status==="active"?"bg-success hover:bg-success":"bg-muted text-foreground",children:T.status==="active"?"Active":"Inactive"})}),r.jsx($n,{children:T.employmentType||"Regular"}),r.jsx($n,{children:r.jsxs("div",{className:"flex justify-center gap-2",children:[r.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-primary hover:text-primary hover:bg-primary/10",onClick:()=>st(T),title:"Edit Employee",children:r.jsx(ll,{className:"w-4 h-4"})}),T.status==="active"&&r.jsxs(r.Fragment,{children:[r.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{F(T),H(!0)},title:"Reset Password",children:r.jsx(fE,{className:"w-4 h-4"})}),r.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:()=>{F(T),_(!0)},title:"Move to Inactive",children:r.jsx(iE,{className:"w-4 h-4"})})]}),r.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{F(T),R(!0)},title:"Delete Employee",children:r.jsx(pl,{className:"w-4 h-4"})})]})})]},T.id))})]})})})]})]}),r.jsx(kn,{open:E,onOpenChange:T=>{I(T),T||(Ee(Eu),X(!1),K({}))},children:r.jsxs(An,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Pn,{children:[r.jsx(In,{className:"text-2xl font-semibold",children:"Add New Employee"}),r.jsx(dr,{children:"Fill in all employee details below"})]}),r.jsxs("form",{onSubmit:T=>{T.preventDefault(),qe()},className:"space-y-6",children:[r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs(Ct,{label:"First Name *",children:[r.jsx(Te,{value:fe.firstName,onChange:T=>Ee({...fe,firstName:T.target.value}),placeholder:"Employee's First Name"}),U.firstName&&r.jsx("p",{className:"text-sm text-destructive",children:U.firstName})]}),r.jsxs(Ct,{label:"Middle Name *",children:[r.jsx(Te,{value:fe.middleName,onChange:T=>Ee({...fe,middleName:T.target.value}),placeholder:"Employee's Middle Name"}),U.middleName&&r.jsx("p",{className:"text-sm text-destructive",children:U.middleName})]}),r.jsxs(Ct,{label:"Last Name *",children:[r.jsx(Te,{value:fe.lastName,onChange:T=>Ee({...fe,lastName:T.target.value}),placeholder:"Employee's Last Name"}),U.lastName&&r.jsx("p",{className:"text-sm text-destructive",children:U.lastName})]}),r.jsxs(Ct,{label:"Suffix Name",children:[r.jsx(Te,{value:fe.suffixName,onChange:T=>Ee({...fe,suffixName:T.target.value}),placeholder:"Jr., Sr., III, etc. (Optional)"}),U.suffixName&&r.jsx("p",{className:"text-sm text-destructive",children:U.suffixName})]}),r.jsxs(Ct,{label:"Address *",children:[r.jsx(Te,{value:fe.address,onChange:T=>Ee({...fe,address:T.target.value}),placeholder:"Employee's Address"}),U.address&&r.jsx("p",{className:"text-sm text-destructive",children:U.address})]}),r.jsxs(Ct,{label:"Contact Number *",children:[r.jsx(Te,{value:fe.contactNumber,onChange:T=>Ee({...fe,contactNumber:T.target.value}),placeholder:"+63 9873462438"}),U.contactNumber&&r.jsx("p",{className:"text-sm text-destructive",children:U.contactNumber})]}),r.jsx(Ct,{label:"Gender",children:r.jsxs(En,{value:fe.gender,onValueChange:T=>Ee({...fe,gender:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Gender"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Male",children:"Male"}),r.jsx(nt,{value:"Female",children:"Female"}),r.jsx(nt,{value:"Other",children:"Other"})]})]})}),r.jsx(Ct,{label:"Civil Status",children:r.jsxs(En,{value:fe.civilStatus,onValueChange:T=>Ee({...fe,civilStatus:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Status"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Single",children:"Single"}),r.jsx(nt,{value:"Married",children:"Married"}),r.jsx(nt,{value:"Divorced",children:"Divorced"}),r.jsx(nt,{value:"Widowed",children:"Widowed"})]})]})}),r.jsxs(Ct,{label:"Date of Birth *",children:[r.jsx(Te,{type:"date",value:fe.dateOfBirth,onChange:T=>Ee({...fe,dateOfBirth:T.target.value}),min:"1900-01-01",max:new Date().toISOString().split("T")[0]}),U.dateOfBirth&&r.jsx("p",{className:"text-sm text-destructive",children:U.dateOfBirth})]}),r.jsxs(Ct,{label:"Email *",children:[r.jsx(Te,{type:"email",value:fe.email,onChange:T=>Ee({...fe,email:T.target.value}),placeholder:"email@gmail.com"}),U.email&&r.jsx("p",{className:"text-sm text-destructive",children:U.email})]})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs(Ct,{label:"Employee ID *",children:[r.jsx(Te,{value:fe.employeeId,onChange:T=>Ee({...fe,employeeId:T.target.value}),placeholder:"Example: 25-GPC-012345"}),U.employeeId&&r.jsx("p",{className:"text-sm text-destructive",children:U.employeeId})]}),r.jsxs(Ct,{label:"Department *",children:[r.jsxs(En,{value:fe.department,onValueChange:T=>Ee({...fe,department:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Department"})}),r.jsx(yn,{children:s.map(T=>r.jsx(nt,{value:T.name,children:T.name},T.id))})]}),U.department&&r.jsx("p",{className:"text-sm text-destructive",children:U.department})]}),r.jsxs(Ct,{label:"Designation *",children:[r.jsxs(En,{value:fe.designation,onValueChange:T=>Ee({...fe,designation:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Designation"})}),r.jsx(yn,{children:f.map(T=>r.jsx(nt,{value:T.name,children:T.name},T.id))})]}),U.designation&&r.jsx("p",{className:"text-sm text-destructive",children:U.designation})]}),r.jsx(Ct,{label:"Role",children:r.jsxs(En,{value:fe.role,onValueChange:T=>Ee({...fe,role:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Role"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Admin",children:"Admin"}),r.jsx(nt,{value:"Employee",children:"Employee"}),r.jsx(nt,{value:"Former Employee",children:"Former Employee"})]})]})}),r.jsxs(Ct,{label:"Employment Type *",children:[r.jsxs(En,{value:fe.employmentType,onValueChange:T=>Ee({...fe,employmentType:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Type"})}),r.jsx(yn,{children:zx.map(T=>r.jsx(nt,{value:T,children:T},T))})]}),U.employmentType&&r.jsx("p",{className:"text-sm text-destructive",children:U.employmentType})]})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[r.jsx(Ct,{label:"SSS Number",children:r.jsx(Te,{value:fe.sssNumber,onChange:T=>Ee({...fe,sssNumber:T.target.value}),placeholder:"Example: 00-0000000-0"})}),r.jsx(Ct,{label:"Pag-IBIG Number",children:r.jsx(Te,{value:fe.pagibigNumber,onChange:T=>Ee({...fe,pagibigNumber:T.target.value}),placeholder:"Example: 0000-0000-0000"})}),r.jsx(Ct,{label:"TIN Number",children:r.jsx(Te,{value:fe.tinNumber,onChange:T=>Ee({...fe,tinNumber:T.target.value}),placeholder:"Example: 000-000-000-000"})})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(Ct,{label:"Date of Joining *",children:[r.jsx(Te,{type:"date",value:fe.dateOfJoining,onChange:T=>Ee({...fe,dateOfJoining:T.target.value})}),U.dateOfJoining&&r.jsx("p",{className:"text-sm text-destructive",children:U.dateOfJoining})]}),r.jsx(Ct,{label:"Date of Leaving",children:r.jsx(Te,{type:"date",value:fe.dateOfLeaving,onChange:T=>Ee({...fe,dateOfLeaving:T.target.value})})}),r.jsx(Ct,{label:"Emergency Contact Person",className:"lg:col-span-2",children:r.jsx(Te,{value:fe.emergencyContact,onChange:T=>Ee({...fe,emergencyContact:T.target.value}),placeholder:"Employee's Contact Person"})}),r.jsx(Ct,{label:"Educational Background",className:"lg:col-span-2",children:r.jsx(Te,{value:fe.educationalBackground,onChange:T=>Ee({...fe,educationalBackground:T.target.value}),placeholder:"Employee's Background"})})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(Ct,{label:"Status",children:r.jsxs(En,{value:fe.status,onValueChange:T=>Ee({...fe,status:T}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Status"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Active",children:"Active"}),r.jsx(nt,{value:"Inactive",children:"Inactive"})]})]})}),r.jsx(Ct,{label:"Password",children:r.jsxs("div",{className:"relative",children:[r.jsx(Te,{type:we?"text":"password",value:fe.password,onChange:T=>Ee({...fe,password:T.target.value}),placeholder:"Employee's password",className:"pr-10"}),r.jsx("button",{type:"button",onClick:()=>X(!we),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",tabIndex:-1,children:we?r.jsx(_m,{className:"h-4 w-4"}):r.jsx(Ei,{className:"h-4 w-4"})})]})})]}),r.jsxs(pa,{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[r.jsx(Se,{type:"button",variant:"destructive",onClick:()=>{I(!1),Ee(Eu),K({}),X(!1)},className:"sm:w-auto rounded-full px-8",children:"Cancel"}),r.jsx(Se,{type:"submit",disabled:re,className:"sm:w-auto rounded-full px-8 bg-green-600 hover:bg-green-700",children:re?"Adding...":"Add"})]})]})]})}),r.jsx(kn,{open:te,onOpenChange:T=>T?G(!0):Ze(),children:r.jsx(An,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs(r.Fragment,{children:[r.jsxs(Pn,{className:"text-left",children:[r.jsx(In,{className:"text-2xl font-semibold",children:"Edit Employee Information"}),r.jsx(dr,{className:"text-base",children:"Update the fields below then click update to save your changes."})]}),r.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-border bg-muted/30 p-4",children:[r.jsx(n0,{className:"h-14 w-14 bg-primary/10 text-primary",children:r.jsx(r0,{className:"text-lg font-semibold",children:J.firstName.charAt(0)||z?.fullName.charAt(0)||"E"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-foreground",children:[J.firstName,J.middleName,J.lastName,J.suffixName].filter(T=>T&&T.trim().length).join(" ")||z?.fullName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[J.employeeId||z?.employeeId," "," ",J.department||z?.department]})]})]}),r.jsxs("form",{className:"space-y-6",onSubmit:Xe,children:[r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(Ct,{label:"First Name",children:r.jsx(Te,{value:J.firstName,onChange:T=>me("firstName",T.target.value)})}),r.jsx(Ct,{label:"Middle Name",children:r.jsx(Te,{value:J.middleName,onChange:T=>me("middleName",T.target.value)})}),r.jsx(Ct,{label:"Last Name",children:r.jsx(Te,{value:J.lastName,onChange:T=>me("lastName",T.target.value)})}),r.jsx(Ct,{label:"Suffix Name",children:r.jsx(Te,{value:J.suffixName,onChange:T=>me("suffixName",T.target.value)})}),r.jsx(Ct,{label:"Address",className:"lg:col-span-2",children:r.jsx(Te,{value:J.address,onChange:T=>me("address",T.target.value)})}),r.jsx(Ct,{label:"Contact Number",children:r.jsx(Te,{value:J.contactNumber,onChange:T=>me("contactNumber",T.target.value)})}),r.jsx(Ct,{label:"Gender",children:r.jsxs(En,{value:J.gender,onValueChange:T=>me("gender",T),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Gender"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Male",children:"Male"}),r.jsx(nt,{value:"Female",children:"Female"}),r.jsx(nt,{value:"Other",children:"Other"})]})]})}),r.jsx(Ct,{label:"Civil Status",children:r.jsxs(En,{value:J.civilStatus,onValueChange:T=>me("civilStatus",T),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Status"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Single",children:"Single"}),r.jsx(nt,{value:"Married",children:"Married"}),r.jsx(nt,{value:"Divorced",children:"Divorced"}),r.jsx(nt,{value:"Widowed",children:"Widowed"})]})]})}),r.jsx(Ct,{label:"Date of Birth",children:r.jsx(Te,{type:"date",value:J.dateOfBirth,onChange:T=>me("dateOfBirth",T.target.value),min:"1900-01-01",max:new Date().toISOString().split("T")[0]})}),r.jsx(Ct,{label:"Email",children:r.jsx(Te,{type:"email",value:J.email,onChange:T=>me("email",T.target.value)})}),r.jsx(Ct,{label:"Employee ID",children:r.jsx(Te,{value:J.employeeId,onChange:T=>me("employeeId",T.target.value)})}),r.jsx(Ct,{label:"Department",children:r.jsxs(En,{value:J.department,onValueChange:T=>me("department",T),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Department"})}),r.jsx(yn,{children:s.map(T=>r.jsx(nt,{value:T.name,children:T.name},T.id))})]})}),r.jsx(Ct,{label:"Designation",children:r.jsxs(En,{value:J.designation,onValueChange:T=>me("designation",T),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Designation"})}),r.jsx(yn,{children:f.map(T=>r.jsx(nt,{value:T.name,children:T.name},T.id))})]})}),r.jsx(Ct,{label:"Role",children:r.jsxs(En,{value:J.role,onValueChange:T=>me("role",T),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Role"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Admin",children:"Admin"}),r.jsx(nt,{value:"Employee",children:"Employee"}),r.jsx(nt,{value:"Former Employee",children:"Former Employee"})]})]})}),r.jsx(Ct,{label:"Employment Type",children:r.jsxs(En,{value:J.employmentType,onValueChange:T=>me("employmentType",T),children:[r.jsx(xn,{children:r.jsx(Sn,{})}),r.jsx(yn,{children:zx.map(T=>r.jsx(nt,{value:T,children:T},T))})]})}),r.jsx(Ct,{label:"SSS Number",children:r.jsx(Te,{value:J.sssNumber,onChange:T=>me("sssNumber",T.target.value)})}),r.jsx(Ct,{label:"Pag-IBIG Number",children:r.jsx(Te,{value:J.pagibigNumber,onChange:T=>me("pagibigNumber",T.target.value)})}),r.jsx(Ct,{label:"TIN Number",children:r.jsx(Te,{value:J.tinNumber,onChange:T=>me("tinNumber",T.target.value)})}),r.jsx(Ct,{label:"Date of Joining",children:r.jsx(Te,{type:"date",value:J.dateOfJoining,onChange:T=>me("dateOfJoining",T.target.value)})}),r.jsx(Ct,{label:"Date of Leaving",children:r.jsx(Te,{type:"date",value:J.dateOfLeaving,onChange:T=>me("dateOfLeaving",T.target.value)})}),r.jsx(Ct,{label:"Emergency Contact Person",className:"lg:col-span-2",children:r.jsx(Te,{value:J.emergencyContact,onChange:T=>me("emergencyContact",T.target.value)})}),r.jsx(Ct,{label:"Educational Background",className:"lg:col-span-2",children:r.jsx(Te,{value:J.educationalBackground,onChange:T=>me("educationalBackground",T.target.value)})}),r.jsx(Ct,{label:"Status",children:r.jsxs(En,{value:J.status,onValueChange:T=>me("status",T),children:[r.jsx(xn,{children:r.jsx(Sn,{})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"Active",children:"Active"}),r.jsx(nt,{value:"Inactive",children:"Inactive"})]})]})}),r.jsx(Ct,{label:"Password",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Te,{type:ie?"text":"password",value:J.password===""?"":J.password,onChange:T=>{me("password",T.target.value)},onFocus:()=>{J.password===""&&me("password","")},placeholder:J.password===""?"Password is set (click to change)":"Enter new password (optional)",className:"pr-10"}),r.jsx("button",{type:"button",onClick:()=>je(!ie),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",tabIndex:-1,children:ie?r.jsx(_m,{className:"h-4 w-4"}):r.jsx(Ei,{className:"h-4 w-4"})})]}),J.password===""&&r.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Password is set. Click the field above to change it."})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-2",children:[r.jsx(Se,{type:"button",variant:"outline",className:"sm:w-auto rounded-full px-6",onClick:Ze,children:"Cancel"}),r.jsx(Se,{type:"submit",className:"sm:w-auto rounded-full px-6",disabled:re,children:re?"Saving...":"Update"})]})]})]})})}),r.jsx(kn,{open:O,onOpenChange:_,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Archive Employee"}),r.jsxs(dr,{children:["Please provide a reason for archiving ",z?.fullName]})]}),r.jsx("div",{className:"space-y-4 py-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"reason",children:"Reason for archiving *"}),r.jsx(Te,{id:"reason",value:Z,onChange:T=>W(T.target.value),placeholder:"e.g., Resigned, Terminated, etc."})]})}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:()=>{_(!1),W(""),F(null)},children:"Cancel"}),r.jsx(Se,{variant:"destructive",onClick:Yt,disabled:re,children:re?"Archiving...":"Archive"})]})]})}),r.jsx(kn,{open:P,onOpenChange:H,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Reset Password"}),r.jsxs(dr,{children:["Reset password for ",z?.fullName,"? A temporary password will be generated and the employee will be required to change it on next login."]})]}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:()=>{H(!1),F(null)},disabled:re,children:"Cancel"}),r.jsx(Se,{onClick:on,disabled:re,children:re?"Resetting...":"Reset Password"})]})]})}),r.jsx(kn,{open:k,onOpenChange:R,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Delete Employee"}),r.jsxs(dr,{children:["Are you sure you want to delete ",z?.fullName,"? This action cannot be undone."]})]}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:()=>{R(!1),F(null)},disabled:re,children:"Cancel"}),r.jsx(Se,{variant:"destructive",onClick:ct,disabled:re,children:re?"Deleting...":"Delete"})]})]})})]})},$T=["Employee","Manager","Admin","Contractor"],Su={firstName:"",lastName:"",employeeId:"",department:"",designation:"",role:"",dateOfJoining:"",dateOfLeaving:"",reason:"",retire:"",deactivationDate:"",reactivationDate:"",uploadImage:"",uploadImagePreview:"",serviceRecord:"",serviceRecordPreview:"",personalDataSheet:"",personalDataSheetPreview:"",employmentRecord:"",employmentRecordPreview:""},Sc="https://bbaec9682261.ngrok-free.app",zr=({label:e,className:n="",error:s,children:c})=>r.jsxs("div",{className:`space-y-2 ${n}`,children:[r.jsx(gt,{className:"text-sm font-semibold text-muted-foreground",children:e}),c,s&&r.jsx("p",{className:"text-sm text-destructive",children:s})]}),GT=()=>{const[e,n]=C.useState([]),[s,c]=C.useState([]),[f,m]=C.useState([]),[v,N]=C.useState(""),[w,y]=C.useState(!1),[E,I]=C.useState(null),[O,_]=C.useState(!1),[k,R]=C.useState(Su),[P,H]=C.useState({}),[z,F]=C.useState(!0),[Z,W]=C.useState(!1),{toast:te}=Un(),G=async()=>{try{const U=await St(`${Sc}/departments`);if(!U.ok)throw new Error("Failed to fetch departments");const K=await U.json();c(K.data)}catch(U){console.error(U)}},J=async()=>{try{const U=await St(`${Sc}/designations`);if(!U.ok)throw new Error("Failed to fetch designations");const K=await U.json();m(K.data)}catch(U){console.error(U)}},se=U=>({id:U.id,employeeId:U.employeeId,firstName:U.firstName||"",lastName:U.lastName||"",fullName:U.fullName,department:U.department,position:U.position,email:U.email,phone:U.phone,dateOfBirth:U.dateOfBirth||"",address:U.address||"",gender:U.gender||"",civilStatus:U.civilStatus||"",dateHired:U.dateHired,dateOfLeaving:U.dateOfLeaving||"",employmentType:U.employmentType||"Regular",role:U.role||"",sssNumber:U.sssNumber||"",pagibigNumber:U.pagibigNumber||"",tinNumber:U.tinNumber||"",emergencyContact:U.emergencyContact||"",educationalBackground:U.educationalBackground||"",signatureFile:U.signatureFile||"",pdsFile:U.pdsFile||"",serviceRecordFile:U.serviceRecordFile||"",registeredFaceFile:U.registeredFaceFile||"",status:U.status,archivedReason:U.archivedReason||void 0,archivedDate:U.archivedAt||void 0,createdAt:U.createdAt,updatedAt:U.updatedAt}),fe=async()=>{try{F(!0);const U=await St(`${Sc}/employees?status=inactive`);if(!U.ok)throw new Error("Failed to fetch inactive employees");const K=await U.json();n(K.data.map(se))}catch(U){console.error(U),te({variant:"destructive",title:"Error",description:"Unable to load inactive employees. Please try again."})}finally{F(!1)}},Ee=async U=>{U.preventDefault();const K={};if(k.firstName.trim()||(K.firstName="Required"),k.lastName.trim()||(K.lastName="Required"),k.employeeId.trim()||(K.employeeId="Required"),k.department||(K.department="Required"),k.designation||(K.designation="Required"),H(K),!Object.keys(K).length)try{W(!0);const ne=k.employeeId.trim(),oe=k.firstName.trim(),we=k.lastName.trim(),X=`Inactive${Date.now().toString().slice(-4)}!`,ie=k.reason||(k.retire==="yes"?"Retired":"Marked as inactive"),je=k.deactivationDate||new Date().toISOString().slice(0,10),Ie=await St(`${Sc}/employees`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:ne,firstName:oe,middleName:"N/A",lastName:we,suffixName:"N/A",fullName:`${oe} ${we}`.replace(/\s+/g," ").trim(),department:k.department,position:k.designation,email:`${ne.toLowerCase()}@inactive.local`,phone:"0000000000",dateOfBirth:"1990-01-01",address:k.reason||"No address provided",dateHired:k.dateOfJoining||new Date().toISOString().slice(0,10),dateOfLeaving:k.dateOfLeaving||k.deactivationDate||null,status:"inactive",archivedReason:ie,archivedAt:je,employmentType:"Former",role:k.role||null,password:X,emergencyContact:k.reason?.trim()||"Not provided",educationalBackground:null,serviceRecordFile:k.serviceRecord||null,pdsFile:k.personalDataSheet||null,signatureFile:null,registeredFaceFile:k.uploadImage||null,gender:null,civilStatus:null,sssNumber:null,pagibigNumber:null,tinNumber:null})});if(!Ie.ok){const _e=await Ie.json().catch(()=>({}));throw new Error(_e.message||"Failed to add inactive employee")}const We=await Ie.json().catch(()=>({}));await fe(),R(Su),H({}),_(!1),te({title:"Success",description:`Inactive employee "${oe} ${we}" (${ne}) has been successfully saved to the database.`})}catch(ne){console.error(ne),te({variant:"destructive",title:"Error",description:ne instanceof Error?ne.message:"Unable to add inactive employee. Please try again."})}finally{W(!1)}},ue=async(U,K)=>{if(!K||!K[0]){const ie=`${U}Preview`;R(je=>({...je,[U]:"",[ie]:""}));return}const ne=K[0],oe=ne.name,we=`${U}Preview`,X=new FileReader;X.onloadend=()=>{const ie=X.result;R(je=>({...je,[U]:ie,[we]:ie}))},X.onerror=()=>{te({variant:"destructive",title:"Error",description:`Failed to read file: ${oe}`})},X.readAsDataURL(ne)};C.useEffect(()=>{fe(),G(),J()},[]);const ge=e.filter(U=>U.fullName.toLowerCase().includes(v.toLowerCase())||U.employeeId.toLowerCase().includes(v.toLowerCase())),re=async()=>{if(E)try{W(!0);const U=await fetch(`${Sc}/employees/${E.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"active"})});if(!U.ok){const K=await U.json().catch(()=>({}));throw new Error(K.message||"Failed to restore employee")}await fe(),y(!1),I(null),te({title:"Success",description:"Employee restored successfully. They will now appear in the active employees list."})}catch(U){console.error(U),te({variant:"destructive",title:"Error",description:U instanceof Error?U.message:"Unable to restore employee. Please try again."})}finally{W(!1)}},q=U=>new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r.jsxs(ar,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Inactive Employees"}),r.jsx("p",{className:"text-muted-foreground",children:"View and manage inactive employee records"})]}),r.jsxs(Se,{className:"gap-2",onClick:()=>_(!0),children:[r.jsx(Pu,{className:"w-4 h-4"}),"Add Inactive Employee"]})]}),r.jsxs(Ye,{className:"shadow-sm",children:[r.jsxs(rr,{className:"border-b bg-gradient-to-r from-muted/30 to-muted/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:r.jsx(Fs,{className:"w-5 h-5 text-muted-foreground"})}),r.jsx(Bn,{className:"text-xl",children:"Inactive Employees List"})]}),r.jsxs("div",{className:"relative mt-4",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(Te,{placeholder:"Search...",value:v,onChange:U=>N(U.target.value),className:"pl-10 h-11"})]})]}),r.jsx(Gt,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ef,{children:[r.jsx(Sf,{children:r.jsxs(ga,{className:"bg-muted/50",children:[r.jsx(cr,{className:"font-semibold",children:"Employee Name"}),r.jsx(cr,{className:"font-semibold",children:"Employee ID"}),r.jsx(cr,{className:"font-semibold",children:"Deactivation Date"}),r.jsx(cr,{className:"font-semibold",children:"Designation"}),r.jsx(cr,{className:"font-semibold",children:"Status"}),r.jsx(cr,{className:"font-semibold",children:"Role"}),r.jsx(cr,{className:"font-semibold text-center",children:"Action"})]})}),r.jsx(Af,{children:ge.length===0?r.jsx(ga,{children:r.jsx($n,{colSpan:7,className:"text-center text-muted-foreground py-12",children:"No inactive employees found"})}):ge.map(U=>r.jsxs(ga,{className:"hover:bg-muted/30 transition-colors",children:[r.jsx($n,{className:"font-medium",children:U.fullName}),r.jsx($n,{className:"text-muted-foreground",children:U.employeeId}),r.jsx($n,{children:U.archivedDate?q(U.archivedDate):"N/A"}),r.jsx($n,{children:U.position}),r.jsx($n,{children:r.jsx($r,{variant:"secondary",children:"Inactive"})}),r.jsx($n,{children:"FORMER EMPLOYEE"}),r.jsx($n,{children:r.jsx("div",{className:"flex justify-center",children:r.jsx(Se,{size:"sm",className:"bg-primary hover:bg-primary/90 gap-2",onClick:()=>{I(U),y(!0)},children:"Reactivate"})})})]},U.id))})]})})})]})]}),r.jsx(kn,{open:O,onOpenChange:U=>{_(U),U||(R(Su),H({}))},children:r.jsxs(An,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Pn,{children:[r.jsx(In,{className:"text-2xl font-semibold",children:"Add Inactive Employee"}),r.jsx(dr,{children:"Fill out the details to log a former employee"})]}),r.jsxs("form",{onSubmit:U=>{U.preventDefault(),Ee(U)},className:"space-y-6",children:[r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsx(zr,{label:"First Name *",error:P.firstName,children:r.jsx(Te,{value:k.firstName,onChange:U=>R({...k,firstName:U.target.value}),placeholder:"Employee's First Name"})}),r.jsx(zr,{label:"Last Name *",error:P.lastName,children:r.jsx(Te,{value:k.lastName,onChange:U=>R({...k,lastName:U.target.value}),placeholder:"Employee's Last Name"})}),r.jsx(zr,{label:"Employee ID *",error:P.employeeId,children:r.jsx(Te,{value:k.employeeId,onChange:U=>R({...k,employeeId:U.target.value}),placeholder:"Example: 25-GPC-0357"})})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsx(zr,{label:"Department *",error:P.department,children:r.jsxs(En,{value:k.department,onValueChange:U=>R({...k,department:U}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Department"})}),r.jsx(yn,{children:s.map(U=>r.jsx(nt,{value:U.name,children:U.name},U.id))})]})}),r.jsx(zr,{label:"Designation *",error:P.designation,children:r.jsxs(En,{value:k.designation,onValueChange:U=>R({...k,designation:U}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Designation"})}),r.jsx(yn,{children:f.map(U=>r.jsx(nt,{value:U.name,children:U.name},U.id))})]})}),r.jsx(zr,{label:"Role",children:r.jsxs(En,{value:k.role,onValueChange:U=>R({...k,role:U}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select Role"})}),r.jsx(yn,{children:$T.map(U=>r.jsx(nt,{value:U,children:U},U))})]})})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(zr,{label:"Date of Joining",children:r.jsx(Te,{type:"date",value:k.dateOfJoining,onChange:U=>R({...k,dateOfJoining:U.target.value})})}),r.jsx(zr,{label:"Date of Leaving",children:r.jsx(Te,{type:"date",value:k.dateOfLeaving,onChange:U=>R({...k,dateOfLeaving:U.target.value})})}),r.jsx(zr,{label:"Deactivation Date",children:r.jsx(Te,{type:"date",value:k.deactivationDate,onChange:U=>R({...k,deactivationDate:U.target.value})})}),r.jsx(zr,{label:"Reactivation Date",children:r.jsx(Te,{type:"date",value:k.reactivationDate,onChange:U=>R({...k,reactivationDate:U.target.value})})}),r.jsx(zr,{label:"Reason",className:"lg:col-span-2",children:r.jsx(Te,{value:k.reason,onChange:U=>R({...k,reason:U.target.value}),placeholder:"Reason of employee"})}),r.jsx(zr,{label:"Retire?",children:r.jsxs(En,{value:k.retire,onValueChange:U=>R({...k,retire:U}),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Yes / No"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"yes",children:"Yes"}),r.jsx(nt,{value:"no",children:"No"})]})]})})]}),r.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(zr,{label:"Upload Image",children:r.jsxs("div",{className:"space-y-2",children:[k.uploadImagePreview?r.jsxs("div",{className:"space-y-2",children:[r.jsx("img",{src:k.uploadImagePreview,alt:"Uploaded image preview",className:"w-full h-40 object-cover rounded-xl border border-border/70"}),r.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Image uploaded"})]}):r.jsxs("div",{className:"w-full h-40 border-2 border-dashed border-border/60 rounded-xl flex flex-col items-center justify-center text-sm text-muted-foreground bg-muted/30",children:[r.jsx(Fs,{className:"w-8 h-8 mb-2 text-muted-foreground/50"}),r.jsx("p",{children:"No image uploaded"})]}),r.jsx(Te,{type:"file",accept:"image/*",onChange:U=>ue("uploadImage",U.target.files)})]})}),r.jsx(zr,{label:"Service Record",children:r.jsxs("div",{className:"space-y-2",children:[k.serviceRecordPreview?r.jsx("div",{className:"space-y-2",children:k.serviceRecordPreview.startsWith("data:image")?r.jsx("img",{src:k.serviceRecordPreview,alt:"Service record preview",className:"w-full h-40 object-contain rounded-xl border border-border/70"}):r.jsx("div",{className:"w-full h-40 border-2 border-primary/20 rounded-xl flex flex-col items-center justify-center bg-muted/30",children:r.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Service record file uploaded"})})}):r.jsx("div",{className:"w-full h-40 border-2 border-dashed border-border/60 rounded-xl flex flex-col items-center justify-center text-sm text-muted-foreground bg-muted/30",children:r.jsx("p",{children:"No file uploaded"})}),r.jsx(Te,{type:"file",accept:".pdf,.doc,.docx,image/*",onChange:U=>ue("serviceRecord",U.target.files)})]})}),r.jsx(zr,{label:"Personal Data Sheet",children:r.jsxs("div",{className:"space-y-2",children:[k.personalDataSheetPreview?r.jsx("div",{className:"space-y-2",children:k.personalDataSheetPreview.startsWith("data:image")?r.jsx("img",{src:k.personalDataSheetPreview,alt:"Personal data sheet preview",className:"w-full h-40 object-contain rounded-xl border border-border/70"}):r.jsx("div",{className:"w-full h-40 border-2 border-primary/20 rounded-xl flex flex-col items-center justify-center bg-muted/30",children:r.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Personal data sheet file uploaded"})})}):r.jsx("div",{className:"w-full h-40 border-2 border-dashed border-border/60 rounded-xl flex flex-col items-center justify-center text-sm text-muted-foreground bg-muted/30",children:r.jsx("p",{children:"No file uploaded"})}),r.jsx(Te,{type:"file",accept:".pdf,.doc,.docx,image/*",onChange:U=>ue("personalDataSheet",U.target.files)})]})}),r.jsx(zr,{label:"Employment Record",children:r.jsxs("div",{className:"space-y-2",children:[k.employmentRecordPreview?r.jsx("div",{className:"space-y-2",children:k.employmentRecordPreview.startsWith("data:image")?r.jsx("img",{src:k.employmentRecordPreview,alt:"Employment record preview",className:"w-full h-40 object-contain rounded-xl border border-border/70"}):r.jsx("div",{className:"w-full h-40 border-2 border-primary/20 rounded-xl flex flex-col items-center justify-center bg-muted/30",children:r.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Employment record file uploaded"})})}):r.jsx("div",{className:"w-full h-40 border-2 border-dashed border-border/60 rounded-xl flex flex-col items-center justify-center text-sm text-muted-foreground bg-muted/30",children:r.jsx("p",{children:"No file uploaded"})}),r.jsx(Te,{type:"file",accept:".pdf,.doc,.docx,image/*",onChange:U=>ue("employmentRecord",U.target.files)})]})})]}),r.jsxs(pa,{children:[r.jsx(Se,{type:"button",variant:"outline",onClick:()=>{_(!1),R(Su),H({})},disabled:Z,children:"Cancel"}),r.jsx(Se,{type:"submit",disabled:Z,children:Z?"Saving...":"Save Record"})]})]})]})}),r.jsx(kn,{open:w,onOpenChange:y,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Restore Employee"}),r.jsxs(dr,{children:["Are you sure you want to restore ",E?.fullName,"? They will be moved back to the active employees list."]})]}),E&&r.jsxs("div",{className:"py-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Employee ID:"}),r.jsx("span",{className:"font-medium",children:E.employeeId})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Department:"}),r.jsx("span",{className:"font-medium",children:E.department})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Archived Reason:"}),r.jsx("span",{className:"font-medium",children:E.archivedReason||"N/A"})]})]}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:()=>{y(!1),I(null)},children:"Cancel"}),r.jsxs(Se,{onClick:re,disabled:Z,children:[r.jsx(xE,{className:"w-4 h-4 mr-2"}),Z?"Restoring...":"Restore Employee"]})]})]})})]})},Au="https://bbaec9682261.ngrok-free.app",XT=()=>{const[e,n]=C.useState([]),[s,c]=C.useState(""),[f,m]=C.useState(null),[v,N]=C.useState(""),[w,y]=C.useState(!0),[E,I]=C.useState(!1),{toast:O}=Un(),_=async()=>{try{y(!0);const F=await St(`${Au}/departments`);if(!F.ok)throw new Error("Failed to fetch departments");const Z=await F.json();n(Z.data)}catch(F){console.error(F),O({variant:"destructive",title:"Error",description:"Unable to load departments. Please try again."})}finally{y(!1)}};C.useEffect(()=>{_()},[]);const k=async()=>{if(!s.trim()){O({variant:"destructive",title:"Error",description:"Department name is required"});return}try{I(!0);const F=f?`${Au}/departments/${f}`:`${Au}/departments`,W=await fetch(F,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.trim()})});if(!W.ok){const te=await W.json();throw new Error(te.message||"Failed to save department")}O({title:"Success",description:f?"Department updated successfully":"Department added successfully"}),c(""),m(null),await _()}catch(F){console.error(F),O({variant:"destructive",title:"Error",description:F.message||"Unable to save department. Please try again."})}finally{I(!1)}},R=F=>{c(F.name),m(F.id)},P=async F=>{if(confirm("Are you sure you want to delete this department?"))try{if(!(await St(`${Au}/departments/${F}`,{method:"DELETE"})).ok)throw new Error("Failed to delete department");O({title:"Success",description:"Department deleted successfully"}),await _()}catch(Z){console.error(Z),O({variant:"destructive",title:"Error",description:"Unable to delete department. Please try again."})}},H=()=>{c(""),m(null)},z=e.filter(F=>F.name.toLowerCase().includes(v.toLowerCase()));return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Department Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage and organize company departments"})]}),r.jsxs(Ye,{className:"border-2 shadow-lg",children:[r.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-transparent p-6 border-b",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary rounded-lg",children:r.jsx(Rm,{className:"h-6 w-6 text-primary-foreground"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:f?"Edit Department":"Add New Department"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:f?"Update department information":"Create a new department"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-2xl space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"departmentName",className:"text-base font-semibold",children:"Department Name"}),r.jsx(Te,{id:"departmentName",placeholder:"e.g., Human Resources, IT Department",value:s,onChange:F=>c(F.target.value),className:"h-11"})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Se,{onClick:k,disabled:E,className:"px-8 h-11 bg-green-600 hover:bg-green-700",children:E?"Saving...":f?"Update Department":"Add Department"}),f&&r.jsx(Se,{variant:"outline",onClick:H,className:"px-8 h-11",children:"Cancel"})]})]})})]}),r.jsxs(Ye,{className:"border-2 shadow-lg",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-950/30 p-6 border-b",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:r.jsx(Xy,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Department List"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",z.length," departments"]})]})]}),r.jsxs("div",{className:"relative w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search departments...",value:v,onChange:F=>N(F.target.value),className:"pl-9 h-10"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"rounded-lg border overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-muted/50",children:[r.jsx("th",{className:"text-left py-4 px-6 font-semibold text-sm",children:"S.No"}),r.jsx("th",{className:"text-left py-4 px-6 font-semibold text-sm",children:"Department Name"}),r.jsx("th",{className:"text-left py-4 px-6 font-semibold text-sm",children:"Created Date"}),r.jsx("th",{className:"text-center py-4 px-6 font-semibold text-sm",children:"Actions"})]})}),r.jsx("tbody",{children:w?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-12 text-center text-muted-foreground",children:"Loading departments..."})}):z.length>0?z.map((F,Z)=>r.jsxs("tr",{className:"border-t hover:bg-muted/30 transition-colors",children:[r.jsx("td",{className:"py-4 px-6 font-medium text-muted-foreground",children:Z+1}),r.jsx("td",{className:"py-4 px-6 font-medium",children:F.name}),r.jsx("td",{className:"py-4 px-6 text-sm text-muted-foreground",children:new Date(F.createdAt).toLocaleDateString()}),r.jsx("td",{className:"py-4 px-6",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>R(F),className:"h-9 gap-2 border-blue-200 text-blue-600 hover:bg-blue-50 hover:text-blue-700",children:[r.jsx(Yy,{className:"h-4 w-4"}),"Edit"]}),r.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>P(F.id),className:"h-9 gap-2 border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700",children:[r.jsx(pl,{className:"h-4 w-4"}),"Delete"]})]})})]},F.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-12 text-center text-muted-foreground",children:"No departments found"})})})]})})})]})]})})},Iu="https://bbaec9682261.ngrok-free.app",YT=()=>{const[e,n]=C.useState([]),[s,c]=C.useState(""),[f,m]=C.useState(null),[v,N]=C.useState(""),[w,y]=C.useState(!0),[E,I]=C.useState(!1),{toast:O}=Un(),_=async()=>{try{y(!0);const F=await St(`${Iu}/designations`);if(!F.ok)throw new Error("Failed to fetch designations");const Z=await F.json();n(Z.data)}catch(F){console.error(F),O({variant:"destructive",title:"Error",description:"Unable to load designations. Please try again."})}finally{y(!1)}};C.useEffect(()=>{_()},[]);const k=async()=>{if(!s.trim()){O({variant:"destructive",title:"Error",description:"Designation name is required"});return}try{I(!0);const F=f?`${Iu}/designations/${f}`:`${Iu}/designations`,W=await fetch(F,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.trim()})});if(!W.ok){const te=await W.json();throw new Error(te.message||"Failed to save designation")}O({title:"Success",description:f?"Designation updated successfully":"Designation added successfully"}),c(""),m(null),await _()}catch(F){console.error(F),O({variant:"destructive",title:"Error",description:F.message||"Unable to save designation. Please try again."})}finally{I(!1)}},R=F=>{c(F.name),m(F.id)},P=async F=>{if(confirm("Are you sure you want to delete this designation?"))try{if(!(await St(`${Iu}/designations/${F}`,{method:"DELETE"})).ok)throw new Error("Failed to delete designation");O({title:"Success",description:"Designation deleted successfully"}),await _()}catch(Z){console.error(Z),O({variant:"destructive",title:"Error",description:"Unable to delete designation. Please try again."})}},H=()=>{c(""),m(null)},z=e.filter(F=>F.name.toLowerCase().includes(v.toLowerCase()));return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Designation Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage job titles and positions"})]}),r.jsxs(Ye,{className:"border-2 shadow-lg",children:[r.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-transparent p-6 border-b",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary rounded-lg",children:r.jsx(_c,{className:"h-6 w-6 text-primary-foreground"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:f?"Edit Designation":"Add New Designation"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:f?"Update designation information":"Create a new job designation"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-2xl space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"designationName",className:"text-base font-semibold",children:"Designation Name"}),r.jsx(Te,{id:"designationName",placeholder:"e.g., Software Engineer, Manager, Team Lead",value:s,onChange:F=>c(F.target.value),className:"h-11"})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Se,{onClick:k,disabled:E,className:"px-8 h-11 bg-green-600 hover:bg-green-700",children:E?"Saving...":f?"Update Designation":"Add Designation"}),f&&r.jsx(Se,{variant:"outline",onClick:H,className:"px-8 h-11",children:"Cancel"})]})]})})]}),r.jsxs(Ye,{className:"border-2 shadow-lg",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-transparent dark:from-purple-950/30 p-6 border-b",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:r.jsx(Xy,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Designation List"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",z.length," designations"]})]})]}),r.jsxs("div",{className:"relative w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search designations...",value:v,onChange:F=>N(F.target.value),className:"pl-9 h-10"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"rounded-lg border overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-muted/50",children:[r.jsx("th",{className:"text-left py-4 px-6 font-semibold text-sm",children:"S.No"}),r.jsx("th",{className:"text-left py-4 px-6 font-semibold text-sm",children:"Designation Name"}),r.jsx("th",{className:"text-left py-4 px-6 font-semibold text-sm",children:"Created Date"}),r.jsx("th",{className:"text-center py-4 px-6 font-semibold text-sm",children:"Actions"})]})}),r.jsx("tbody",{children:w?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-12 text-center text-muted-foreground",children:"Loading designations..."})}):z.length>0?z.map((F,Z)=>r.jsxs("tr",{className:"border-t hover:bg-muted/30 transition-colors",children:[r.jsx("td",{className:"py-4 px-6 font-medium text-muted-foreground",children:Z+1}),r.jsx("td",{className:"py-4 px-6 font-medium",children:F.name}),r.jsx("td",{className:"py-4 px-6 text-sm text-muted-foreground",children:new Date(F.createdAt).toLocaleDateString()}),r.jsx("td",{className:"py-4 px-6",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>R(F),className:"h-9 gap-2 border-blue-200 text-blue-600 hover:bg-blue-50 hover:text-blue-700",children:[r.jsx(Yy,{className:"h-4 w-4"}),"Edit"]}),r.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>P(F.id),className:"h-9 gap-2 border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700",children:[r.jsx(pl,{className:"h-4 w-4"}),"Delete"]})]})})]},F.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-12 text-center text-muted-foreground",children:"No designations found"})})})]})})})]})]})})},Cm="https://bbaec9682261.ngrok-free.app",ZT=[{id:"sample-ana",employeeId:"25-GPC-0001",fullName:"Ana Dela Cruz",department:"HR Department",position:"HR Specialist"},{id:"sample-mark",employeeId:"25-GPC-0002",fullName:"Mark Reyes",department:"Finance Department",position:"Accountant"},{id:"sample-lea",employeeId:"25-GPC-0003",fullName:"Lea Santos",department:"IT Department",position:"IT Coordinator"},{id:"sample-jose",employeeId:"25-GPC-0004",fullName:"Jose Ramirez",department:"Elementary Department",position:"Teacher"}],qT=()=>{const e=c=>c.toISOString().split("T")[0],n=new Date,s=new Date;return s.setDate(n.getDate()-1),[{id:"sample-att-1",employeeId:"25-GPC-0001",employeeName:"Ana Dela Cruz",date:e(n),checkIn:"08:04",checkOut:"17:02",status:"present",notes:"Arrived early for morning briefing",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"sample-att-2",employeeId:"25-GPC-0002",employeeName:"Mark Reyes",date:e(n),checkIn:"08:28",checkOut:"17:41",status:"late",notes:"Traffic delay due to heavy rain",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"sample-att-3",employeeId:"25-GPC-0003",employeeName:"Lea Santos",date:e(n),status:"leave",notes:"Approved vacation leave",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"sample-att-4",employeeId:"25-GPC-0004",employeeName:"Jose Ramirez",date:e(s),checkIn:"08:10",checkOut:"16:55",status:"present",notes:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]},QT=()=>{const[e,n]=C.useState(""),[s,c]=C.useState([]),[f,m]=C.useState([]),[v,N]=C.useState(!0),[w,y]=C.useState(!1),{toast:E}=Un(),{user:I}=Vs(),[O,_]=C.useState(!1),[k,R]=C.useState(null),[P,H]=C.useState("present"),[z,F]=C.useState(""),[Z,W]=C.useState(""),[te,G]=C.useState(""),[J,se]=C.useState(!1),fe=()=>{c(qT()),m(ZT),y(!0)};C.useEffect(()=>{const re=async()=>{try{N(!0);const[U,K]=await Promise.all([St(`${Cm}/attendance`),St(`${Cm}/employees?status=active`)]);if(!U.ok||!K.ok){fe();return}let oe=(await U.json()).data||[];const X=(await K.json()).data||[];if(oe.length===0||X.length===0){fe();return}const ie=new Date().toISOString().split("T")[0];if(new Date().getHours()>=17){const We=oe.filter(Ae=>Ae.date===ie),_e=new Set(We.map(Ae=>Ae.employeeId));X.forEach(Ae=>{_e.has(Ae.employeeId)||oe.find(qe=>qe.employeeId===Ae.employeeId&&qe.date===ie&&qe.status==="absent")||oe.push({id:`absent-${Ae.employeeId}-${ie}`,employeeId:Ae.employeeId,employeeName:Ae.fullName,date:ie,checkIn:void 0,checkOut:void 0,status:"absent",notes:"Auto-marked absent - no attendance by 5 PM",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})})}c(oe),m(X),y(!1)}catch(U){console.error("Error fetching data",U),fe(),w||E({variant:"destructive",title:"Error",description:"Unable to load attendance data. Showing sample data instead."})}finally{N(!1)}};re();const q=setInterval(re,3e5);return()=>clearInterval(q)},[E,w]);const Ee=C.useMemo(()=>{const re=new Map(f.map(K=>[K.employeeId,K])),q=new Map;s.forEach(K=>{const ne=re.get(K.employeeId),oe=ne?.department||"Unassigned",we=K.date;q.has(oe)||q.set(oe,new Map);const X=q.get(oe);X.has(we)||X.set(we,[]);const ie={present:"Present",absent:"Absent",late:"Late","half-day":"Half Day",leave:"Leave"},je=We=>{if(!We)return"-";const[_e,Ae]=We.split(":"),Ue=parseInt(_e,10),qe=Ue>=12?"PM":"AM";return`${Ue%12||12}:${Ae} ${qe}`};let Ie=ie[K.status]||K.status;if(K.checkIn&&(K.status==="late"||K.status==="present")){const We=new Date(`2000-01-01T${K.checkIn}`),_e=new Date("2000-01-01T08:11"),Ae=Math.floor((We.getTime()-_e.getTime())/6e4);Ae>0?Ie=`Late (${Ae} mins)`:K.status==="late"&&(Ie="Late")}X.get(we).push({name:K.employeeName||ne?.fullName||"Unknown",type:ne?.position||"Regular",signIn:je(K.checkIn||""),signOut:je(K.checkOut||""),status:Ie,employeeId:K.employeeId,attendanceId:K.id,rawStatus:K.status,rawCheckIn:K.checkIn||"",rawCheckOut:K.checkOut||""})});const U=[];return q.forEach((K,ne)=>{K.forEach((oe,we)=>{const X=oe.filter(ie=>ie.name.toLowerCase().includes(e.toLowerCase())||ie.employeeId.toLowerCase().includes(e.toLowerCase()));X.length>0&&U.push({department:ne,date:we,records:X})})}),U.sort((K,ne)=>new Date(ne.date).getTime()-new Date(K.date).getTime()),U},[e,s,f]),ue=(re,q)=>{if(I?.role!=="admin"){E({variant:"destructive",title:"Access Denied",description:"Only admins can edit attendance records."});return}const U=s.find(K=>K.id===re.attendanceId);U?(R({record:re,date:q}),H(U.status),F(U.checkIn||""),W(U.checkOut||""),G(U.notes||""),_(!0)):E({variant:"destructive",title:"Error",description:"Attendance record not found."})},ge=async()=>{if(!k||!k.record.attendanceId){E({variant:"destructive",title:"Error",description:"Cannot save: attendance record not found."});return}se(!0);try{let re;if(/^\d{4}-\d{2}-\d{2}$/.test(k.date))re=k.date;else{const X=new Date(k.date);if(isNaN(X.getTime()))throw new Error("Invalid date format");re=X.toISOString().split("T")[0]}const q=X=>X?/^\d{2}:\d{2}$/.test(X)?X:/^\d{2}:\d{2}:\d{2}$/.test(X)?X.substring(0,5):null:null,U=q(z),K=q(Z),ne=await fetch(`${Cm}/attendance/${k.record.attendanceId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:k.record.employeeId,employeeName:k.record.name,date:re,status:P,checkIn:U,checkOut:K,notes:te||null,updatedBy:I?.fullName||"Admin"})});if(!ne.ok){const X=await ne.json().catch(()=>({}));throw new Error(X.message||"Failed to update attendance record")}const we=(await ne.json()).data;c(X=>X.map(ie=>ie.id===we.id?we:ie)),E({title:"Success",description:"Attendance record updated successfully."}),_(!1),R(null)}catch(re){console.error("Error updating attendance",re),E({variant:"destructive",title:"Error",description:re instanceof Error?re.message:"Unable to update attendance record. Please try again."})}finally{se(!1)}};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ye,{className:"shadow-sm border-border",children:r.jsxs(rr,{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between bg-card rounded-t-xl",children:[r.jsx("div",{children:r.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-[0.3em]",children:"Attendance"})}),r.jsx("div",{className:"bg-primary/10 rounded-full p-3 text-primary",children:r.jsx(oE,{className:"w-6 h-6"})})]})}),r.jsxs(Ye,{className:"shadow-sm border-border",children:[r.jsxs(rr,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fs,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx(Bn,{className:"text-xl",children:"Attendance List"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily summary per department"})]})]}),r.jsxs("div",{className:"relative w-full sm:w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search by name or ID",value:e,onChange:re=>n(re.target.value),className:"pl-9"})]})]}),w&&r.jsx("div",{className:"px-6 pb-2 -mt-2",children:r.jsx($r,{variant:"outline",className:"rounded-full px-3",children:"Sample data preview"})}),r.jsx("div",{className:"divide-y",children:Ee.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("p",{className:"text-muted-foreground",children:"No attendance records found."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Add attendance records to see them here."})]}):Ee.map((re,q)=>r.jsxs("div",{className:"py-6 px-0 space-y-4",children:[r.jsxs("div",{className:"px-6 flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"uppercase text-xs font-semibold text-muted-foreground",children:re.department}),r.jsx("p",{className:"text-sm font-semibold text-foreground",children:new Date(re.date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})})]}),r.jsxs(Se,{className:"rounded-full px-5",onClick:()=>{const U=[];U.push("Employee Name,Employee ID,Employee Type,Date,Sign In Time,Sign Out Time,Attendance Status"),re.records.forEach(X=>{U.push(`"${X.name}","${X.employeeId}","${X.type}","${new Date(re.date).toLocaleDateString()}","${X.signIn}","${X.signOut}","${X.status}"`)});const K=U.join(`
`),ne=new Blob([K],{type:"text/csv;charset=utf-8;"}),oe=document.createElement("a"),we=URL.createObjectURL(ne);oe.setAttribute("href",we),oe.setAttribute("download",`attendance_${re.department.replace(/\s+/g,"_")}_${re.date}.csv`),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),E({title:"Report Generated",description:`CSV exported for ${re.department}`})},children:[r.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm border-t border-border/60",children:[r.jsx("thead",{className:"bg-primary text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Type"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Date"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Sign In Time"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Sign Out Time"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Attendance Status"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Action"})]})}),r.jsx("tbody",{children:re.records.map((U,K)=>r.jsxs("tr",{className:K%2===0?"bg-[#eef3ff]":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:U.name}),r.jsx("td",{className:"py-3 px-4",children:U.type}),r.jsx("td",{className:"py-3 px-4",children:new Date(re.date).toLocaleDateString()}),r.jsx("td",{className:"py-3 px-4",children:U.signIn}),r.jsx("td",{className:"py-3 px-4",children:U.signOut}),r.jsx("td",{className:"py-3 px-4",children:r.jsx($r,{variant:"secondary",className:"rounded-full px-3 bg-primary/10 text-primary",children:U.status})}),r.jsx("td",{className:"py-3 px-4",children:r.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>ue(U,re.date),className:"text-primary hover:text-primary/80 hover:bg-primary/10",disabled:I?.role!=="admin",children:[r.jsx(ll,{className:"w-4 h-4 mr-1"}),"Edit"]})})]},`${U.employeeId}-${re.date}-${K}`))})]})})]},`${re.department}-${re.date}-${q}`))})]}),r.jsx(kn,{open:O,onOpenChange:_,children:r.jsxs(An,{className:"max-w-2xl",children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Edit Attendance"}),r.jsx(dr,{children:k&&`Update attendance for ${k.record.name} on ${new Date(k.date).toLocaleDateString()}`})]}),k&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Employee Name"}),r.jsx(Te,{value:k.record.name,disabled:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Employee ID"}),r.jsx(Te,{value:k.record.employeeId,disabled:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Date"}),r.jsx(Te,{value:new Date(k.date).toLocaleDateString(),disabled:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Sign In Time"}),r.jsx(Te,{type:"time",value:z,onChange:re=>F(re.target.value),disabled:P==="leave"||P==="absent"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Sign Out Time"}),r.jsx(Te,{type:"time",value:Z,onChange:re=>W(re.target.value),disabled:P==="leave"||P==="absent"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Attendance Status"}),r.jsxs(En,{value:P,onValueChange:re=>{H(re),(re==="leave"||re==="absent")&&(F(""),W(""))},children:[r.jsx(xn,{children:r.jsx(Sn,{})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"present",children:"Present"}),r.jsx(nt,{value:"absent",children:"Absent"}),r.jsx(nt,{value:"late",children:"Late"}),r.jsx(nt,{value:"half-day",children:"Half Day"}),r.jsx(nt,{value:"leave",children:"Leave"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Notes (Optional)"}),r.jsx(yl,{value:te,onChange:re=>G(re.target.value),placeholder:"Add notes about this attendance record...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(Se,{variant:"outline",onClick:()=>{_(!1),R(null)},disabled:J,children:"Cancel"}),r.jsx(Se,{onClick:ge,disabled:J,children:J?"Saving...":"Save Changes"})]})]})]})})]})})},KT="https://bbaec9682261.ngrok-free.app",JT=()=>{const[e,n]=C.useState([]),[s,c]=C.useState(!0),{toast:f}=Un(),{user:m}=Vs();C.useEffect(()=>{(async()=>{if(!m?.employeeId){c(!1);return}try{c(!0);const E=await fetch(`${KT}/attendance?employeeId=${m.employeeId}`);if(!E.ok)throw new Error("Failed to fetch attendance");const O=(await E.json()).data||[];O.sort((_,k)=>new Date(k.date).getTime()-new Date(_.date).getTime()),n(O)}catch(E){console.error("Error fetching attendance",E),f({variant:"destructive",title:"Error",description:"Unable to load attendance records. Please try again."})}finally{c(!1)}})()},[m,f]);const v=y=>{if(!y)return"---------";const[E,I]=y.split(":"),O=parseInt(E,10),_=O>=12?"PM":"AM";return`${O%12||12}:${I} ${_}`},N=y=>new Date(y).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),w=y=>{const I={present:{label:"Present",variant:"default"},late:{label:"Late",variant:"secondary"},absent:{label:"Absent",variant:"destructive"},"half-day":{label:"Half Day",variant:"outline"},leave:{label:"Leave",variant:"outline"}}[y]||{label:y,variant:"outline"};return r.jsx($r,{variant:I.variant,children:I.label})};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Attendance History"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"View your attendance records (Read-only)"})]}),r.jsxs(Ye,{children:[r.jsx(rr,{children:r.jsxs(Bn,{className:"flex items-center gap-2",children:[r.jsx(Gy,{className:"w-5 h-5"}),"My Attendance Records"]})}),r.jsx(Gt,{children:s?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading attendance records..."})}):e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[r.jsx(cs,{className:"w-12 h-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No attendance records found."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ef,{children:[r.jsx(Sf,{children:r.jsxs(ga,{children:[r.jsx(cr,{children:"Date"}),r.jsx(cr,{children:"Check In"}),r.jsx(cr,{children:"Check Out"}),r.jsx(cr,{children:"Status"}),r.jsx(cr,{children:"Notes"})]})}),r.jsx(Af,{children:e.map(y=>r.jsxs(ga,{children:[r.jsx($n,{className:"font-medium",children:N(y.date)}),r.jsx($n,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cs,{className:"w-4 h-4 text-muted-foreground"}),v(y.checkIn)]})}),r.jsx($n,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cs,{className:"w-4 h-4 text-muted-foreground"}),v(y.checkOut)]})}),r.jsx($n,{children:w(y.status)}),r.jsx($n,{className:"text-muted-foreground",children:y.notes||"-"})]},y.id))})]})})})]})]})})},Vx="https://bbaec9682261.ngrok-free.app",tl=({label:e,children:n})=>r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{className:"text-sm text-muted-foreground uppercase tracking-widest",children:e}),n]}),eR=()=>{const[e,n]=C.useState(""),[s,c]=C.useState(""),[f,m]=C.useState(new Date().toISOString().split("T")[0]),[v,N]=C.useState(""),[w,y]=C.useState(""),[E,I]=C.useState("present"),[O,_]=C.useState(""),[k,R]=C.useState(!1),[P,H]=C.useState(0),{toast:z}=Un();C.useEffect(()=>{const Ee=setTimeout(async()=>{if(!e.trim()){c("");return}try{R(!0);const ue=await St(`${Vx}/employees?employeeId=${e}`);if(!ue.ok){c("");return}const ge=await ue.json();ge.data&&ge.data.length>0?c(ge.data[0].fullName||""):(c(""),z({variant:"destructive",title:"Employee not found",description:"No employee found with this ID."}))}catch(ue){console.error("Error fetching employee",ue),c("")}finally{R(!1)}},500);return()=>clearTimeout(Ee)},[e,z]);const F=async fe=>{if(fe.preventDefault(),!e.trim()||!s.trim()){z({variant:"destructive",title:"Missing information",description:"Employee ID and name are required."});return}const Ee=new Date,ue=Ee.getHours(),ge=Ee.getMinutes(),re=19;if(ue>re||ue===re&&ge>0){z({variant:"destructive",title:"Attendance Closed",description:"Attendance can only be recorded until 7:00 PM."});return}let U=E,K=0;if(v&&(E==="present"||E==="late"))try{const[oe,we]=v.split(":").map(Number);K=oe*60+we-491,K>0&&(U="late",H(K))}catch(oe){console.error("Error calculating late minutes:",oe)}const ne={employeeId:e.trim().toUpperCase(),employeeName:s.trim(),date:f,checkIn:v||null,checkOut:w||null,status:U,notes:O.trim()||null,qrVerified:!1,verificationMethod:"manual",lateMinutes:K>0?K:null,undertimeMinutes:null,overtimeMinutes:null};try{const oe=await St(`${Vx}/attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});if(!oe.ok){const we=await oe.json().catch(()=>({}));throw new Error(we.message||"Failed to add attendance")}z({title:"Success",description:`Attendance recorded for ${s}${K>0?` (${K} minutes late)`:""}`}),n(""),c(""),m(new Date().toISOString().split("T")[0]),N(""),y(""),I("present"),_(""),H(0)}catch(oe){console.error("Error adding attendance",oe),z({variant:"destructive",title:"Error",description:oe instanceof Error?oe.message:"Unable to add attendance record. Please try again."})}},Z=new Date,W=Z.getHours(),te=Z.getMinutes(),G=19,se=W>G||W===G&&te>0;return r.jsx(ar,{children:r.jsxs(Ye,{className:"p-6 shadow-lg border-border/70",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Add Attendance"}),se&&r.jsx($r,{variant:"destructive",className:"px-3 py-1",children:"Attendance Closed (After 7:00 PM)"})]}),r.jsxs("form",{onSubmit:F,className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs(tl,{label:"Employee ID",children:[r.jsx(Te,{placeholder:"Example: 25-GPC-12345",value:e,onChange:fe=>n(fe.target.value.toUpperCase()),className:"h-12 rounded-xl",required:!0,disabled:k}),s&&r.jsx("p",{className:"text-sm text-green-600 font-medium",children:s})]}),r.jsx(tl,{label:"Date",children:r.jsx(Te,{type:"date",value:f,onChange:fe=>m(fe.target.value),className:"h-12 rounded-xl",required:!0})}),r.jsx(tl,{label:"Check In Time",children:r.jsx(Te,{type:"time",value:v,onChange:fe=>N(fe.target.value),className:"h-12 rounded-xl"})}),r.jsx(tl,{label:"Check Out Time",children:r.jsx(Te,{type:"time",value:w,onChange:fe=>y(fe.target.value),className:"h-12 rounded-xl"})}),r.jsx(tl,{label:"Status",children:r.jsxs(En,{value:E,onValueChange:fe=>I(fe),children:[r.jsx(xn,{className:"h-12 rounded-xl",children:r.jsx(Sn,{})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"present",children:"Present"}),r.jsx(nt,{value:"absent",children:"Absent"}),r.jsx(nt,{value:"late",children:"Late"}),r.jsx(nt,{value:"half-day",children:"Half Day"}),r.jsx(nt,{value:"leave",children:"Leave"})]})]})}),r.jsx(tl,{label:"Notes (Optional)",children:r.jsx(Te,{placeholder:"Additional notes",value:O,onChange:fe=>_(fe.target.value),className:"h-12 rounded-xl"})})]}),P>0&&r.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4",children:r.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx(cs,{className:"inline w-4 h-4 mr-1"}),r.jsx("strong",{children:"Late Check-In:"})," Employee is ",P," minute",P!==1?"s":""," late."]})}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:r.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200 flex items-center gap-2",children:[r.jsx(Bc,{className:"w-4 h-4"}),r.jsx("strong",{children:"Tip:"})," For faster attendance, use QR code scanning from Guard Dashboard or Employee Dashboard."]})}),r.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[r.jsx(Se,{type:"button",variant:"outline",onClick:()=>window.history.back(),className:"rounded-full px-8",children:"Cancel"}),r.jsx(Se,{type:"submit",className:"rounded-full px-8",disabled:se||!s,children:"Submit Attendance"})]})]})]})})},tR=()=>{const e=new Date().toISOString().split("T")[0],[n,s]=C.useState(e),[c,f]=C.useState(""),[m,v]=C.useState([]),[N,w]=C.useState([]),[y,E]=C.useState(!0),[I,O]=C.useState(!1),[_,k]=C.useState(!1),[R,P]=C.useState(null),[H,z]=C.useState({status:"present",checkIn:"",checkOut:"",notes:""}),[F,Z]=C.useState(!1),{toast:W}=Un(),te="https://bbaec9682261.ngrok-free.app",G=[{id:"sample-1",employeeId:"25-GPC-0001",fullName:"Ana Dela Cruz",department:"HR Department",position:"HR Specialist",employmentType:"Regular"},{id:"sample-2",employeeId:"25-GPC-0002",fullName:"Mark Reyes",department:"Finance Department",position:"Accountant",employmentType:"Regular"},{id:"sample-3",employeeId:"25-GPC-0003",fullName:"Lea Santos",department:"IT Department",position:"IT Coordinator",employmentType:"Project-Based"}],J=[{id:"att-sample-1",employeeId:"25-GPC-0001",employeeName:"Ana Dela Cruz",date:e,checkIn:"08:05",checkOut:"17:02",status:"present",notes:"On time",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"att-sample-2",employeeId:"25-GPC-0002",employeeName:"Mark Reyes",date:e,checkIn:"08:25",checkOut:"17:45",status:"late",notes:"On Leave",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"att-sample-3",employeeId:"25-GPC-0003",employeeName:"Lea Santos",date:e,status:"absent",notes:"Filed leave",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],se=()=>{v(J),w(G),O(!0)},fe=C.useCallback(async()=>{try{E(!0);const[U,K]=await Promise.all([St(`${te}/attendance`),St(`${te}/employees?status=active`)]),ne=U.ok?(await U.json()).data||[]:[],oe=K.ok?(await K.json()).data||[]:[];ne.length===0||oe.length===0?se():(v(ne),w(oe),O(!1))}catch(U){console.error("Error fetching data",U),se(),W({variant:"destructive",title:"Error",description:"Unable to load attendance data. Showing sample data instead."})}finally{E(!1)}},[te,W]);C.useEffect(()=>{fe()},[fe]);const Ee=C.useMemo(()=>{let U=m;n&&c?U=m.filter(X=>{const ie=new Date(X.date),je=new Date(n),Ie=new Date(c);return ie>=je&&ie<=Ie}):n&&(U=m.filter(X=>X.date===n));const K=new Map(N.map(X=>[X.employeeId,X])),ne=new Map;U.forEach(X=>{const ie=K.get(X.employeeId);if(!ie)return;const je=ie.department||"Unassigned",Ie=X.date;ne.has(je)||ne.set(je,new Map);const We=ne.get(je);We.has(Ie)||We.set(Ie,[]);const _e={present:"Present",absent:"Absent",late:"Late","half-day":"Half Day",leave:"Leave"},Ae=Ze=>{if(!Ze)return"---------";const[Xe,ct]=Ze.split(":"),Yt=parseInt(Xe,10),on=Yt>=12?"PM":"AM";return`${Yt%12||12}:${ct} ${on}`};let Ue=_e[X.status]||X.status;if(X.checkIn&&(X.status==="late"||X.status==="present")){const Ze=new Date(`2000-01-01T${X.checkIn}`),Xe=new Date("2000-01-01T08:11"),ct=Math.floor((Ze.getTime()-Xe.getTime())/6e4);ct>0?Ue=`Late (${ct} mins)`:X.status==="late"&&(Ue="Late")}const qe=ie.employmentType||"Regular",me=["Regular","Contractual","Probationary","Project-Based"].includes(qe)?qe:"Regular";We.get(Ie).push({name:ie.fullName,type:me,date:new Date(Ie).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(/\//g,"-"),signIn:Ae(X.checkIn),signOut:Ae(X.checkOut||""),status:Ue,employeeId:X.employeeId,attendanceId:X.id})});const oe=[];return ne.forEach((X,ie)=>{X.forEach((je,Ie)=>{oe.push({department:ie,date:Ie,rows:je})})}),oe.sort((X,ie)=>new Date(ie.date).getTime()-new Date(X.date).getTime()),oe.filter(X=>X.rows.length>0)},[n,c,m,N]),ue=()=>{if(!n){W({variant:"destructive",title:"Date Required",description:"Please select at least a start date to generate a report."});return}const U=n,K=c||n;if(Ee.length===0){W({variant:"destructive",title:"No Data",description:"No attendance records found for the selected date(s)."});return}const ne=[];ne.push("Department,Date,Employee Name,Employee ID,Employee Type,Sign In Time,Sign Out Time,Attendance Status"),Ee.forEach(Ie=>{Ie.rows.forEach(We=>{ne.push(`"${Ie.department}","${Ie.date}","${We.name}","${We.employeeId}","${We.type}","${We.signIn}","${We.signOut}","${We.status}"`)})});const oe=ne.join(`
`),we=new Blob([oe],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a"),ie=URL.createObjectURL(we);X.setAttribute("href",ie);const je=c&&c!==n?`attendance_report_${U}_to_${K}.csv`:`attendance_report_${U}.csv`;X.setAttribute("download",je),X.style.visibility="hidden",document.body.appendChild(X),X.click(),document.body.removeChild(X),W({title:"Report Generated",description:c&&c!==n?`Attendance report exported successfully for ${U} to ${K}.`:`Attendance report exported successfully for ${U}.`})},ge=U=>{const K=m.find(ne=>ne.id===U);K&&(P(K),z({status:K.status,checkIn:K.checkIn||"",checkOut:K.checkOut||"",notes:K.notes||""}),k(!0))},re=()=>{k(!1),P(null)},q=async()=>{if(R)try{Z(!0);const U=await fetch(`${te}/attendance/${R.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:R.employeeId,employeeName:R.employeeName,date:R.date,status:H.status,checkIn:H.checkIn||null,checkOut:H.checkOut||null,notes:H.notes||null})});if(!U.ok){const K=await U.json().catch(()=>({}));throw new Error(K.message||"Failed to update attendance")}W({title:"Attendance updated",description:"Record saved successfully."}),await fe(),re()}catch(U){console.error("Error updating attendance",U),W({variant:"destructive",title:"Error",description:U instanceof Error?U.message:"Unable to update attendance. Please try again."})}finally{Z(!1)}};return r.jsxs(ar,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Ye,{className:"shadow-sm border-border",children:[r.jsxs(rr,{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[r.jsxs("div",{children:[r.jsx(Bn,{className:"text-2xl",children:"Attendance Report"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate custom date-range summaries"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[r.jsx(yi,{label:"Date",children:r.jsx(Te,{type:"date",value:n,onChange:U=>{s(U.target.value)},max:new Date().toISOString().split("T")[0]})}),r.jsx(yi,{label:"End Date (Optional)",children:r.jsx(Te,{type:"date",value:c,onChange:U=>f(U.target.value),min:n||void 0,max:new Date().toISOString().split("T")[0],placeholder:"Leave empty for single day report"})}),r.jsx("div",{className:"flex items-end",children:r.jsxs(Se,{onClick:ue,className:"w-full",disabled:y,children:[r.jsx(Wr,{className:"w-4 h-4 mr-2"}),y?"Loading...":"Generate Report"]})})]})]}),I&&r.jsx(Gt,{className:"pt-0",children:r.jsx($r,{variant:"outline",className:"rounded-full px-3",children:"Sample data preview"})})]}),r.jsx(Ye,{className:"shadow-sm border-border",children:r.jsx("div",{className:"divide-y",children:Ee.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("p",{className:"text-muted-foreground",children:"No attendance records found."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:n&&c?"Try adjusting the date range.":"Add attendance records or adjust your filters."})]}):Ee.map((U,K)=>r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"px-6 flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"uppercase text-xs font-semibold text-muted-foreground",children:U.department}),r.jsx("p",{className:"text-sm font-semibold text-foreground",children:new Date(U.date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})})]}),r.jsxs(Se,{variant:"outline",className:"rounded-full px-5",onClick:()=>{const ne=[];ne.push("Employee Name,Employee ID,Employee Type,Date,Sign In Time,Sign Out Time,Attendance Status"),U.rows.forEach(je=>{ne.push(`"${je.name}","${je.employeeId}","${je.type}","${je.date}","${je.signIn}","${je.signOut}","${je.status}"`)});const oe=ne.join(`
`),we=new Blob([oe],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a"),ie=URL.createObjectURL(we);X.setAttribute("href",ie),X.setAttribute("download",`attendance_${U.department.replace(/\s+/g,"_")}_${U.date}.csv`),X.style.visibility="hidden",document.body.appendChild(X),X.click(),document.body.removeChild(X),W({title:"Export Successful",description:`CSV exported for ${U.department}`})},children:[r.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),r.jsx("div",{className:"mt-3 overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm border border-border/60 rounded-xl",children:[r.jsx("thead",{className:"bg-primary text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Type"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Date"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Sign In Time"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Sign Out Time"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Attendance Status"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Action"})]})}),r.jsx("tbody",{children:U.rows.map((ne,oe)=>r.jsxs("tr",{className:oe%2===0?"bg-[#eef3ff]":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:ne.name}),r.jsx("td",{className:"py-3 px-4",children:ne.type}),r.jsx("td",{className:"py-3 px-4",children:ne.date}),r.jsx("td",{className:"py-3 px-4",children:ne.signIn}),r.jsx("td",{className:"py-3 px-4",children:ne.signOut}),r.jsx("td",{className:"py-3 px-4",children:r.jsx($r,{variant:"secondary",className:"rounded-full px-3 bg-primary/10 text-primary",children:ne.status})}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(Se,{variant:"outline",size:"sm",className:"rounded-full px-4",onClick:()=>ge(ne.attendanceId),children:"Edit"})})]},`${ne.employeeId}-${ne.date}-${oe}`))})]})})]},`${U.department}-${U.date}-${K}`))})})]}),r.jsx(kn,{open:_,onOpenChange:U=>{k(U),U||re()},children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Edit Attendance Record"}),r.jsxs(dr,{children:["Update the status or time entries for"," ",R?.employeeName??"the selected employee","."]})]}),r.jsxs("div",{className:"space-y-4 py-2",children:[r.jsx(yi,{label:"Employee",children:r.jsx(Te,{value:R?.employeeName??"",readOnly:!0})}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsx(yi,{label:"Status",children:r.jsxs(En,{value:H.status,onValueChange:U=>z(K=>({...K,status:U})),children:[r.jsx(xn,{children:r.jsx(Sn,{placeholder:"Select status"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"present",children:"Present"}),r.jsx(nt,{value:"late",children:"Late"}),r.jsx(nt,{value:"absent",children:"Absent"}),r.jsx(nt,{value:"half-day",children:"Half Day"}),r.jsx(nt,{value:"leave",children:"Leave"})]})]})}),r.jsx(yi,{label:"Date",children:r.jsx(Te,{value:R?.date??"",readOnly:!0})})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsx(yi,{label:"Check In",children:r.jsx(Te,{type:"time",value:H.checkIn,onChange:U=>z(K=>({...K,checkIn:U.target.value}))})}),r.jsx(yi,{label:"Check Out",children:r.jsx(Te,{type:"time",value:H.checkOut,onChange:U=>z(K=>({...K,checkOut:U.target.value}))})})]}),r.jsx(yi,{label:"Notes",children:r.jsx(yl,{rows:3,value:H.notes,onChange:U=>z(K=>({...K,notes:U.target.value})),placeholder:"Reason for adjustment or remarks"})})]}),r.jsxs(pa,{children:[r.jsx(Se,{variant:"outline",onClick:re,children:"Cancel"}),r.jsx(Se,{onClick:q,disabled:F,children:F?"Saving...":"Save Changes"})]})]})})]})},yi=({label:e,children:n})=>r.jsxs("div",{className:"space-y-2 w-full",children:[r.jsx(gt,{className:"text-sm font-semibold text-muted-foreground",children:e}),n]}),ls=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return e}},Hx=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return e}},If=`
  @page { size: letter; margin: 0.75in; }
  * { box-sizing: border-box; }
  body { 
    font-family: 'Arial', 'Helvetica Neue', sans-serif; 
    line-height: 1.5; 
    color: #1a1a1a; 
    font-size: 11px;
    margin: 0;
    padding: 0;
  }
  h1, h2, h3 { margin: 0; }
  .header { 
    text-align: center; 
    margin-bottom: 20px; 
    border-bottom: 2px solid #1e40af;
    padding-bottom: 15px;
  }
  .header h1 { 
    font-size: 18px; 
    font-weight: bold; 
    color: #1e40af;
    letter-spacing: 1px;
    margin-bottom: 4px;
  }
  .header p { 
    margin: 2px 0; 
    font-size: 10px; 
    color: #4b5563;
  }
  .section { 
    margin-top: 16px; 
    page-break-inside: avoid;
  }
  .section-title { 
    background: #1e40af; 
    color: white; 
    padding: 6px 12px; 
    font-size: 11px; 
    font-weight: bold; 
    text-transform: uppercase; 
    letter-spacing: 0.5px;
    margin-bottom: 0;
  }
  table { 
    width: 100%; 
    border-collapse: collapse; 
    font-size: 10px; 
  }
  th, td { 
    border: 1px solid #d1d5db; 
    padding: 6px 8px; 
    text-align: left; 
    vertical-align: top;
  }
  th { 
    background: #f3f4f6; 
    font-weight: 600; 
    color: #374151;
    width: 30%;
  }
  td {
    background: white;
  }
  .signature-section { 
    margin-top: 40px; 
    display: flex; 
    justify-content: space-between; 
    page-break-inside: avoid;
  }
  .signature-box { 
    width: 45%; 
    text-align: center; 
  }
  .signature-line { 
    border-top: 1px solid #1a1a1a; 
    margin-top: 50px; 
    padding-top: 4px; 
    font-size: 10px;
    font-weight: 600;
  }
  .signature-title {
    font-size: 9px;
    color: #6b7280;
  }
  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
  }
  .grid-2 > div {
    border: 1px solid #d1d5db;
    border-top: none;
  }
  .grid-2 > div:nth-child(odd) {
    border-right: none;
  }
  .label {
    font-size: 9px;
    color: #6b7280;
    text-transform: uppercase;
    font-weight: 600;
    display: block;
    margin-bottom: 2px;
  }
  .value {
    font-size: 11px;
    color: #1a1a1a;
    padding: 4px 8px;
  }
  .note {
    font-size: 9px;
    color: #6b7280;
    font-style: italic;
    margin-top: 8px;
  }
  @media print {
    body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  }
`,nR=e=>{const n=ls(new Date().toISOString());return`
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Certificate of Employment - ${e.fullName}</title>
    <style>
      ${If}
      .coe-content { 
        text-align: justify; 
        line-height: 2; 
        margin-top: 30px; 
        font-size: 12px;
      }
      .coe-content p { 
        margin: 0 0 20px; 
        text-indent: 40px; 
      }
      .document-title {
        text-align: center;
        margin: 30px 0;
        font-size: 16px;
        font-weight: bold;
        text-decoration: underline;
        letter-spacing: 2px;
      }
      .to-whom {
        margin: 30px 0;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>THE GREAT PLEBEIAN COLLEGE</h1>
      <p>General Pedro Corpus, San Vicente, Palawan</p>
      <p>Email: info@gpcc.edu.ph | Tel: (048) 123-4567</p>
    </div>

    <div class="document-title">CERTIFICATE OF EMPLOYMENT</div>

    <div class="to-whom">TO WHOM IT MAY CONCERN:</div>

    <div class="coe-content">
      <p>
        This is to certify that <strong>${e.fullName.toUpperCase()}</strong>, 
        with Employee ID <strong>${e.employeeId}</strong>, 
        ${e.status==="inactive"?"was formerly":"is presently"} employed at 
        <strong>The Great Plebeian College</strong>${e.position?` as <strong>${e.position}</strong>`:""}${e.department?` under the <strong>${e.department}</strong> Department`:""}.
      </p>
      <p>
        ${e.dateHired?`${e.status==="inactive"?"He/She served":"He/She has been serving"} the institution since <strong>${ls(e.dateHired)}</strong>${e.dateOfLeaving?` until <strong>${ls(e.dateOfLeaving)}</strong>`:""}.`:"He/She is in good standing with the institution."}
      </p>
      <p>
        This certificate is issued upon the request of the above-named individual for whatever legal purpose it may serve.
      </p>
      <p>
        Issued this <strong>${n}</strong> at San Vicente, Palawan.
      </p>
    </div>

    <div class="signature-section">
      <div class="signature-box">
        <div class="signature-line">
          <strong>HR MANAGER</strong>
          <div class="signature-title">Human Resources Department</div>
        </div>
      </div>
      <div class="signature-box">
        <div class="signature-line">
          <strong>SCHOOL ADMINISTRATOR</strong>
          <div class="signature-title">Office of the Administrator</div>
        </div>
      </div>
    </div>
  </body>
</html>
`},zb=e=>`
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Personal Data Sheet - ${e.fullName}</title>
    <style>
      ${If}
      .pds-photo {
        width: 120px;
        height: 120px;
        border: 1px solid #d1d5db;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 9px;
        color: #9ca3af;
        background: #f9fafb;
      }
      .form-row {
        display: flex;
        border: 1px solid #d1d5db;
        border-top: none;
      }
      .form-row:first-child {
        border-top: 1px solid #d1d5db;
      }
      .form-cell {
        flex: 1;
        padding: 6px 8px;
        border-right: 1px solid #d1d5db;
      }
      .form-cell:last-child {
        border-right: none;
      }
      .form-cell.small {
        flex: 0.5;
      }
      .form-cell.large {
        flex: 2;
      }
      .instructions {
        background: #fef3c7;
        border: 1px solid #f59e0b;
        padding: 8px 12px;
        font-size: 9px;
        margin-bottom: 15px;
      }
      .cs-form-no {
        text-align: right;
        font-size: 9px;
        color: #6b7280;
        margin-bottom: 5px;
      }
    </style>
  </head>
  <body>
    <div class="cs-form-no">CS Form No. 212<br/>Revised 2017</div>
    
    <div class="header">
      <h1>PERSONAL DATA SHEET</h1>
      <p style="font-size: 9px; margin-top: 5px;">WARNING: Any misrepresentation made in the Personal Data Sheet and the Work Experience Sheet shall cause the filing of administrative/criminal case/s against the person concerned.</p>
    </div>

    <div class="instructions">
      <strong>INSTRUCTIONS:</strong> Print all entries clearly using black ink. Do not abbreviate. Mark appropriate boxes with an "X".
    </div>

    <div class="section">
      <div class="section-title">I. PERSONAL INFORMATION</div>
      <table>
        <tr>
          <th style="width: 25%;">Full Name</th>
          <td colspan="3"><strong>${e.fullName||"N/A"}</strong></td>
        </tr>
        <tr>
          <th>Surname</th>
          <td>${e.lastName||"N/A"}</td>
          <th style="width: 15%;">First Name</th>
          <td>${e.firstName||"N/A"}</td>
        </tr>
        <tr>
          <th>Middle Name</th>
          <td>${e.middleName||"N/A"}</td>
          <th>Name Extension</th>
          <td>${e.suffixName||"N/A"}</td>
        </tr>
        <tr>
          <th>Date of Birth</th>
          <td>${ls(e.dateOfBirth)}</td>
          <th>Gender</th>
          <td>${e.gender||"N/A"}</td>
        </tr>
        <tr>
          <th>Civil Status</th>
          <td>${e.civilStatus||"N/A"}</td>
          <th>Citizenship</th>
          <td>Filipino</td>
        </tr>
        <tr>
          <th>Residential Address</th>
          <td colspan="3">${e.address||"N/A"}</td>
        </tr>
        <tr>
          <th>Email Address</th>
          <td>${e.email||"N/A"}</td>
          <th>Mobile No.</th>
          <td>${e.phone||"N/A"}</td>
        </tr>
        <tr>
          <th>Emergency Contact</th>
          <td colspan="3">${e.emergencyContact||"N/A"}</td>
        </tr>
      </table>
    </div>

    <div class="section">
      <div class="section-title">II. EMPLOYMENT INFORMATION</div>
      <table>
        <tr>
          <th>Employee ID</th>
          <td><strong>${e.employeeId}</strong></td>
          <th style="width: 15%;">Status</th>
          <td>${e.status==="active"?"ACTIVE":"INACTIVE"}</td>
        </tr>
        <tr>
          <th>Department</th>
          <td>${e.department||"N/A"}</td>
          <th>Position</th>
          <td>${e.position||"N/A"}</td>
        </tr>
        <tr>
          <th>Employment Type</th>
          <td>${e.employmentType||"N/A"}</td>
          <th>Role</th>
          <td>${e.role||"N/A"}</td>
        </tr>
        <tr>
          <th>Date Hired</th>
          <td>${ls(e.dateHired)}</td>
          <th>Date of Leaving</th>
          <td>${e.dateOfLeaving?ls(e.dateOfLeaving):"N/A"}</td>
        </tr>
      </table>
    </div>

    <div class="section">
      <div class="section-title">III. GOVERNMENT ID NUMBERS</div>
      <table>
        <tr>
          <th>SSS Number</th>
          <td>${e.sssNumber||"N/A"}</td>
          <th style="width: 15%;">TIN</th>
          <td>${e.tinNumber||"N/A"}</td>
        </tr>
        <tr>
          <th>Pag-IBIG MID No.</th>
          <td>${e.pagibigNumber||"N/A"}</td>
          <th>PhilHealth No.</th>
          <td>N/A</td>
        </tr>
      </table>
    </div>

    <div class="section">
      <div class="section-title">IV. EDUCATIONAL BACKGROUND</div>
      <table>
        <tr>
          <th>Educational Attainment</th>
          <td colspan="3">${e.educationalBackground||"N/A"}</td>
        </tr>
      </table>
    </div>

    <div style="margin-top: 30px; font-size: 10px;">
      <p>I declare under oath that I have personally accomplished this Personal Data Sheet which is a true, correct, and complete statement pursuant to the provisions of pertinent laws, rules and regulations of the Republic of the Philippines.</p>
    </div>

    <div class="signature-section">
      <div class="signature-box">
        <div class="signature-line">
          <strong>Signature</strong>
          <div class="signature-title">Date: ${ls(new Date().toISOString())}</div>
        </div>
      </div>
      <div class="signature-box">
        <div style="width: 100px; height: 100px; border: 1px solid #d1d5db; margin: 0 auto; display: flex; align-items: center; justify-content: center; font-size: 8px; color: #9ca3af;">
          ID Picture<br/>(Passport Size)
        </div>
      </div>
    </div>
  </body>
</html>
`,Vb=e=>`
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Service Record - ${e.fullName}</title>
    <style>
      ${If}
      .sr-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-bottom: 20px;
        font-size: 11px;
      }
      .sr-info-item {
        display: flex;
      }
      .sr-info-label {
        font-weight: 600;
        min-width: 120px;
        color: #4b5563;
      }
      .sr-info-value {
        color: #1a1a1a;
      }
      .record-table th {
        background: #1e40af;
        color: white;
        text-align: center;
        font-size: 9px;
      }
      .record-table td {
        text-align: center;
        font-size: 10px;
      }
      .certification-text {
        margin-top: 30px;
        font-size: 10px;
        text-align: justify;
        line-height: 1.8;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>THE GREAT PLEBEIAN COLLEGE</h1>
      <p>General Pedro Corpus, San Vicente, Palawan</p>
    </div>

    <div style="text-align: center; margin: 25px 0;">
      <h2 style="font-size: 16px; text-decoration: underline; letter-spacing: 2px;">SERVICE RECORD</h2>
    </div>

    <div class="sr-info">
      <div class="sr-info-item">
        <span class="sr-info-label">Employee Name:</span>
        <span class="sr-info-value"><strong>${e.fullName}</strong></span>
      </div>
      <div class="sr-info-item">
        <span class="sr-info-label">Employee ID:</span>
        <span class="sr-info-value"><strong>${e.employeeId}</strong></span>
      </div>
      <div class="sr-info-item">
        <span class="sr-info-label">Date of Birth:</span>
        <span class="sr-info-value">${ls(e.dateOfBirth)}</span>
      </div>
      <div class="sr-info-item">
        <span class="sr-info-label">Place of Birth:</span>
        <span class="sr-info-value">N/A</span>
      </div>
    </div>

    <div class="section">
      <table class="record-table">
        <thead>
          <tr>
            <th rowspan="2" style="width: 25%;">SERVICE<br/>(Inclusive Dates)</th>
            <th colspan="2">RECORD OF APPOINTMENT</th>
            <th rowspan="2" style="width: 12%;">SALARY</th>
            <th rowspan="2" style="width: 15%;">STATION/<br/>PLACE</th>
            <th rowspan="2" style="width: 10%;">BRANCH</th>
            <th rowspan="2" style="width: 12%;">L/A/W/P</th>
          </tr>
          <tr>
            <th style="width: 18%;">Designation</th>
            <th style="width: 10%;">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              ${Hx(e.dateHired)} - ${e.dateOfLeaving?Hx(e.dateOfLeaving):"PRESENT"}
            </td>
            <td>${e.position||"N/A"}</td>
            <td>${e.employmentType||"Regular"}</td>
            <td>-</td>
            <td>Main Campus</td>
            <td>${e.department||"N/A"}</td>
            <td>-</td>
          </tr>
          <tr>
            <td colspan="7" style="height: 30px;"></td>
          </tr>
          <tr>
            <td colspan="7" style="height: 30px;"></td>
          </tr>
          <tr>
            <td colspan="7" style="height: 30px;"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="certification-text">
      <p>
        <strong>CERTIFICATION:</strong> This is to certify that the above service record is a true and correct account of the services rendered by 
        <strong>${e.fullName}</strong> as shown by the records on file in this office.
      </p>
    </div>

    <div class="signature-section" style="margin-top: 50px;">
      <div class="signature-box">
        <div class="signature-line">
          <strong>PREPARED BY</strong>
          <div class="signature-title">HR Staff</div>
        </div>
      </div>
      <div class="signature-box">
        <div class="signature-line">
          <strong>CERTIFIED CORRECT</strong>
          <div class="signature-title">HR Manager</div>
        </div>
      </div>
    </div>

    <p class="note" style="margin-top: 30px; text-align: center;">
      Generated on ${ls(new Date().toISOString())} | Document ID: SR-${e.employeeId}-${Date.now().toString(36).toUpperCase()}
    </p>
  </body>
</html>
`,rR=e=>`
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>201 File - ${e.fullName}</title>
    <style>
      ${If}
      .summary-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }
      .summary-card {
        border: 1px solid #d1d5db;
        border-radius: 4px;
        overflow: hidden;
      }
      .summary-card-header {
        background: #f3f4f6;
        padding: 8px 12px;
        font-weight: 600;
        font-size: 10px;
        text-transform: uppercase;
        color: #374151;
        border-bottom: 1px solid #d1d5db;
      }
      .summary-card-content {
        padding: 12px;
        font-size: 11px;
      }
      .summary-card-content p {
        margin: 4px 0;
      }
      .status-badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 9px;
        font-weight: 600;
        text-transform: uppercase;
      }
      .status-active {
        background: #dcfce7;
        color: #166534;
      }
      .status-inactive {
        background: #fee2e2;
        color: #991b1b;
      }
      .status-complete {
        background: #dbeafe;
        color: #1e40af;
      }
      .status-pending {
        background: #fef3c7;
        color: #92400e;
      }
      .checklist-item {
        display: flex;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #f3f4f6;
      }
      .checklist-item:last-child {
        border-bottom: none;
      }
      .checklist-icon {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 10px;
        font-size: 10px;
      }
      .checklist-icon.complete {
        background: #dcfce7;
        color: #166534;
      }
      .checklist-icon.pending {
        background: #fef3c7;
        color: #92400e;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>THE GREAT PLEBEIAN COLLEGE</h1>
      <p>Human Resources Department</p>
    </div>

    <div style="text-align: center; margin: 20px 0;">
      <h2 style="font-size: 16px; letter-spacing: 1px;">201 FILE SUMMARY</h2>
      <p style="font-size: 10px; color: #6b7280;">Employee Records Summary Document</p>
    </div>

    <div class="summary-grid">
      <div class="summary-card">
        <div class="summary-card-header">Employee Information</div>
        <div class="summary-card-content">
          <p><strong>Name:</strong> ${e.fullName}</p>
          <p><strong>Employee ID:</strong> ${e.employeeId}</p>
          <p><strong>Position:</strong> ${e.position||"N/A"}</p>
          <p><strong>Department:</strong> ${e.department||"N/A"}</p>
        </div>
      </div>
      <div class="summary-card">
        <div class="summary-card-header">Employment Details</div>
        <div class="summary-card-content">
          <p><strong>Date Hired:</strong> ${ls(e.dateHired)}</p>
          <p><strong>Employment Type:</strong> ${e.employmentType||"N/A"}</p>
          <p><strong>Status:</strong> <span class="status-badge ${e.status==="active"?"status-active":"status-inactive"}">${e.status?.toUpperCase()||"N/A"}</span></p>
          ${e.dateOfLeaving?`<p><strong>Date of Leaving:</strong> ${ls(e.dateOfLeaving)}</p>`:""}
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-title">Contact Information</div>
      <table>
        <tr>
          <th style="width: 25%;">Email Address</th>
          <td>${e.email||"N/A"}</td>
          <th style="width: 20%;">Phone Number</th>
          <td>${e.phone||"N/A"}</td>
        </tr>
        <tr>
          <th>Address</th>
          <td colspan="3">${e.address||"N/A"}</td>
        </tr>
        <tr>
          <th>Emergency Contact</th>
          <td colspan="3">${e.emergencyContact||"N/A"}</td>
        </tr>
      </table>
    </div>

    <div class="section">
      <div class="section-title">Government IDs</div>
      <table>
        <tr>
          <th style="width: 25%;">SSS Number</th>
          <td>${e.sssNumber||"N/A"}</td>
          <th style="width: 20%;">TIN</th>
          <td>${e.tinNumber||"N/A"}</td>
        </tr>
        <tr>
          <th>Pag-IBIG Number</th>
          <td colspan="3">${e.pagibigNumber||"N/A"}</td>
        </tr>
      </table>
    </div>

    <div class="section">
      <div class="section-title">Document Compliance Checklist</div>
      <div style="padding: 12px; border: 1px solid #d1d5db; border-top: none;">
        <div class="checklist-item">
          <div class="checklist-icon ${e.pdsFile?"complete":"pending"}">${e.pdsFile?"":""}</div>
          <div style="flex: 1;">Personal Data Sheet (PDS)</div>
          <span class="status-badge ${e.pdsFile?"status-complete":"status-pending"}">${e.pdsFile?"On File":"Pending"}</span>
        </div>
        <div class="checklist-item">
          <div class="checklist-icon ${e.serviceRecordFile?"complete":"pending"}">${e.serviceRecordFile?"":""}</div>
          <div style="flex: 1;">Service Record</div>
          <span class="status-badge ${e.serviceRecordFile?"status-complete":"status-pending"}">${e.serviceRecordFile?"On File":"Pending"}</span>
        </div>
        <div class="checklist-item">
          <div class="checklist-icon ${e.signatureFile?"complete":"pending"}">${e.signatureFile?"":""}</div>
          <div style="flex: 1;">Signature Specimen</div>
          <span class="status-badge ${e.signatureFile?"status-complete":"status-pending"}">${e.signatureFile?"On File":"Pending"}</span>
        </div>
        <div class="checklist-item">
          <div class="checklist-icon ${e.registeredFaceFile?"complete":"pending"}">${e.registeredFaceFile?"":""}</div>
          <div style="flex: 1;">Face Registration (Biometric)</div>
          <span class="status-badge ${e.registeredFaceFile?"status-complete":"status-pending"}">${e.registeredFaceFile?"Completed":"Pending"}</span>
        </div>
        <div class="checklist-item">
          <div class="checklist-icon ${e.sssNumber?"complete":"pending"}">${e.sssNumber?"":""}</div>
          <div style="flex: 1;">SSS Registration</div>
          <span class="status-badge ${e.sssNumber?"status-complete":"status-pending"}">${e.sssNumber?"Submitted":"Pending"}</span>
        </div>
        <div class="checklist-item">
          <div class="checklist-icon ${e.pagibigNumber?"complete":"pending"}">${e.pagibigNumber?"":""}</div>
          <div style="flex: 1;">Pag-IBIG Registration</div>
          <span class="status-badge ${e.pagibigNumber?"status-complete":"status-pending"}">${e.pagibigNumber?"Submitted":"Pending"}</span>
        </div>
        <div class="checklist-item">
          <div class="checklist-icon ${e.tinNumber?"complete":"pending"}">${e.tinNumber?"":""}</div>
          <div style="flex: 1;">TIN Registration</div>
          <span class="status-badge ${e.tinNumber?"status-complete":"status-pending"}">${e.tinNumber?"Submitted":"Pending"}</span>
        </div>
      </div>
    </div>

    ${e.archivedReason?`
    <div class="section">
      <div class="section-title" style="background: #991b1b;">Separation Information</div>
      <table>
        <tr>
          <th style="width: 25%;">Date of Leaving</th>
          <td>${ls(e.dateOfLeaving)}</td>
        </tr>
        <tr>
          <th>Reason for Separation</th>
          <td>${e.archivedReason}</td>
        </tr>
        <tr>
          <th>Archived Date</th>
          <td>${ls(e.archivedDate)}</td>
        </tr>
      </table>
    </div>
    `:""}

    <div class="signature-section" style="margin-top: 40px;">
      <div class="signature-box">
        <div class="signature-line">
          <strong>PREPARED BY</strong>
          <div class="signature-title">HR Staff</div>
        </div>
      </div>
      <div class="signature-box">
        <div class="signature-line">
          <strong>NOTED BY</strong>
          <div class="signature-title">HR Manager</div>
        </div>
      </div>
    </div>

    <p class="note" style="margin-top: 25px; text-align: center;">
      Generated on ${ls(new Date().toISOString())} | Document ID: 201-${e.employeeId}-${Date.now().toString(36).toUpperCase()}
    </p>
  </body>
</html>
`,Hb=(e,n)=>{switch(e){case"pds":return zb(n);case"file201":return rR(n);case"serviceRecord":return Vb(n);case"coe":default:return nR(n)}},sn="https://bbaec9682261.ngrok-free.app",vi={documents:{title:"Add Document",description:"Upload employee documents with description and owner.",fields:[{name:"documentTitle",placeholder:"Document title"},{name:"documentDescription",placeholder:"Document description"},{name:"documentFile",placeholder:"Choose file",type:"file"}],cta:"Upload Document",successMessage:"Document uploaded successfully."},templates:{title:"Add Template",description:"Create a reusable document template.",fields:[{name:"templateName",placeholder:"Template name"},{name:"templateCategory",placeholder:"Category"},{name:"templateFile",placeholder:"Upload template",type:"file"}],cta:"Save Template",successMessage:"Template saved and ready to use."},employeeReports:{title:"Generate Employee Report",description:"Configure and download employee report files.",fields:[{name:"reportName",placeholder:"Report name"},{name:"reportFilter",placeholder:"Filter (e.g. Department, Status)"}],cta:"Generate Report",successMessage:"Employee report is being generated."},attendanceReports:{title:"Generate Attendance Report",description:"Set filters to export attendance reports.",fields:[{name:"attendanceRange",placeholder:"Date range (e.g. Jan 1 - 15)"},{name:"attendanceFilter",placeholder:"Department or shift"}],cta:"Generate Attendance Report",successMessage:"Attendance report queued successfully."}},sR=()=>{const[e,n]=C.useState(""),[s,c]=C.useState(""),[f,m]=C.useState(null),[v,N]=C.useState(!1),[w,y]=C.useState(null),[E,I]=C.useState({}),[O,_]=C.useState([]),[k,R]=C.useState([]),[P,H]=C.useState([]),[z,F]=C.useState([]),[Z,W]=C.useState(!0),{toast:te}=Un(),{user:G}=Vs(),J=Na(),se=Ao(),[fe,Ee]=C.useState(!1),[ue,ge]=C.useState(null),[re,q]=C.useState(!1),[U,K]=C.useState(null),[ne,oe]=C.useState(null),[we,X]=C.useState([]),[ie,je]=C.useState(""),[Ie,We]=C.useState(""),[_e,Ae]=C.useState(!1),[Ue,qe]=C.useState(null),st=(T,Re)=>{const Be=new Map(T.map(pe=>[pe.employeeId,pe])),ee=new Map;return T.forEach(pe=>{if(pe.employeeId&&!ee.has(pe.employeeId))ee.set(pe.employeeId,{id:pe.employeeId,name:pe.fullName||"",employeeId:pe.employeeId,pds:pe.pdsFile?pe.pdsFile.startsWith("data:")?pe.pdsFile:`/uploads/${pe.pdsFile}`:null,sr:pe.serviceRecordFile?pe.serviceRecordFile.startsWith("data:")?pe.serviceRecordFile:`/uploads/${pe.serviceRecordFile}`:null,coe:null,date:pe.createdAt||new Date().toISOString()});else if(pe.employeeId){const at=ee.get(pe.employeeId);pe.pdsFile&&!at.pds&&(at.pds=pe.pdsFile.startsWith("data:")?pe.pdsFile:`/uploads/${pe.pdsFile}`),pe.serviceRecordFile&&!at.sr&&(at.sr=pe.serviceRecordFile.startsWith("data:")?pe.serviceRecordFile:`/uploads/${pe.serviceRecordFile}`)}}),Re.forEach(pe=>{if(pe.employeeId&&Be.has(pe.employeeId)){if(!ee.has(pe.employeeId)){const Bt=Be.get(pe.employeeId);ee.set(pe.employeeId,{id:pe.employeeId,name:Bt?.fullName||"",employeeId:pe.employeeId,pds:null,sr:null,coe:null,date:pe.createdAt||pe.uploadedAt})}const at=ee.get(pe.employeeId),dt=pe.documentType?.toLowerCase()||"";dt==="pds"||pe.name.toLowerCase().includes("pds")||pe.name.toLowerCase().includes("personal data")?at.pds=pe.fileUrl:dt==="sr"||pe.name.toLowerCase().includes("service")?at.sr=pe.fileUrl:(dt==="coe"||pe.name.toLowerCase().includes("certificate"))&&(at.coe=pe.fileUrl)}}),Array.from(ee.values())},me=async()=>{try{const[T,Re,Be]=await Promise.all([St(`${sn}/documents?type=employee-doc`),St(`${sn}/employees?status=active`),St(`${sn}/employees?status=inactive`)]);if(!T.ok)throw new Error("Failed to fetch documents");const ee=await T.json();let pe=[],at=[];Re.ok&&(pe=(await Re.json()).data||[],H(pe)),Be.ok&&(at=(await Be.json()).data||[],F(at));const dt=st(pe,ee.data||[]);_(dt);const Bt=st(at,ee.data||[]);R(Bt)}catch(T){throw console.error("Error fetching documents",T),T}};C.useEffect(()=>{(async()=>{try{W(!0),await me()}catch(Re){console.error("Error fetching documents",Re),te({variant:"destructive",title:"Error",description:"Failed to load documents"})}finally{W(!1)}})()},[te]),C.useEffect(()=>{se.state?.openDialog&&J(se.pathname,{replace:!0,state:{}})},[se,J]);const Ze=(T,Re)=>{I(Be=>({...Be,[T]:Re}))},Xe=async()=>{if(w)try{if(w==="documents"||w==="templates"){const Re=document.querySelector('input[type="file"]')?.files?.[0];if(!Re){te({variant:"destructive",title:"Error",description:"Please select a file to upload"});return}const Be=new FormData;if(Be.append("file",Re),Be.append("name",E.documentTitle||E.templateName||Re.name),Be.append("type",w==="templates"?"template":"other"),Be.append("category",E.templateCategory||""),Be.append("description",E.documentDescription||""),Be.append("uploadedBy",G?.fullName||"System"),!(await St(`${sn}/documents`,{method:"POST",body:Be})).ok)throw new Error("Failed to upload document");te({title:vi[w].title,description:vi[w].successMessage}),w==="documents"&&await me()}else te({title:vi[w].title,description:vi[w].successMessage});y(null),I({})}catch(T){console.error("Error submitting form",T),te({variant:"destructive",title:"Error",description:"Failed to upload document. Please try again."})}},ct=O.filter(T=>[T.name,T.employeeId,T.pds,T.sr,T.coe].some(Re=>Re?.toLowerCase().includes(e.toLowerCase()))),Yt=k.filter(T=>[T.name,T.employeeId,T.pds,T.sr,T.coe].some(Re=>Re?.toLowerCase().includes(s.toLowerCase()))),on=T=>!(!T||T===`${sn}/`||T===sn||T.trim()==="");return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Ye,{className:"p-6 border-dashed border-primary/40 space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Generate Employee Documents"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Type the employee ID then choose which template to merge automatically."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Te,{value:Ie,onChange:T=>We(T.target.value.toUpperCase()),placeholder:"25-GPC-12345",className:"w-full sm:w-64"}),r.jsx(Se,{variant:"outline",onClick:()=>We(""),children:"Clear"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[{key:"pds",label:"Personal Data Sheet",description:"Auto-fill PDS template"},{key:"file201",label:"201 File Summary",description:"Snapshot of employee records"},{key:"serviceRecord",label:"Service Record",description:"Employment history overview"},{key:"coe",label:"Certificate of Employment",description:"COE ready for printing"}].map(T=>{const Re=Ue===T.key;return r.jsxs(Ye,{className:"p-4 flex flex-col gap-2 border border-border/70",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:T.label}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.description})]}),r.jsx(Se,{size:"sm",onClick:async()=>{if(!Ie.trim()){te({variant:"destructive",title:"Employee ID required",description:"Please type an employee ID before generating a document."});return}Ae(!0),qe(T.key);try{const Be=await fetch(`${sn}/employees?employeeId=${Ie}`);if(!Be.ok)throw new Error("Failed to fetch employee");const pe=(await Be.json()).data?.[0];if(!pe){te({variant:"destructive",title:"Employee not found",description:`No employee matched the ID ${Ie.trim()}.`});return}const at=Hb(T.key,pe),dt=window.open("","_blank");dt&&(dt.document.write(at),dt.document.close(),dt.focus(),setTimeout(()=>{try{dt.focus(),dt.print()}catch(Bt){console.error("Unable to trigger print automatically",Bt)}},400)),te({title:"Document ready",description:`${T.label} generated for ${pe.fullName}.`})}catch(Be){console.error("Document generation failed",Be),te({variant:"destructive",title:"Generation failed",description:"Unable to generate the selected document. Please try again."})}finally{Ae(!1),qe(null)}},disabled:!Ie.trim()||_e,children:Re&&_e?"Generating":"Generate"})]},T.key)})})]}),r.jsxs(Ye,{className:"shadow-sm border-border",children:[r.jsxs(rr,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[r.jsx(Bn,{className:"text-xl",children:"Active Employee Documents"}),r.jsxs("div",{className:"relative w-full sm:w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search active employees...",value:e,onChange:T=>n(T.target.value),className:"pl-9 rounded-full"})]})]}),r.jsx(Gt,{className:"px-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-primary text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee ID"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Personal Data Sheet"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Service Records"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Certificate of Employments"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Date"})]})}),r.jsx("tbody",{children:Z?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"Loading documents..."})}):ct.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No documents found"})}):ct.map((T,Re)=>r.jsxs("tr",{className:Re%2===0?"bg-[#eef3ff]":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:T.name||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:T.employeeId||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:T.pds?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:underline h-auto p-1",onClick:()=>{if(!T.pds||!on(T.pds)){te({variant:"destructive",title:"Error",description:"No document file available or invalid URL."});return}const Be=T.pds.startsWith("data:");let ee;Be?ee=T.pds:T.pds.startsWith("/uploads/")?ee=`${sn}${T.pds}`:T.pds.startsWith("http")?ee=T.pds:ee=`${sn}/documents/file/${T.employeeId}/pds`,K({url:ee,title:`Personal Data Sheet - ${T.employeeId}`,type:"pds",isBase64:Be}),q(!0)},children:"View"}),r.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{ge({employeeId:T.employeeId,type:"pds",currentUrl:T.pds}),Ee(!0)},title:"Edit PDS",children:r.jsx(ll,{className:"h-3 w-3"})})]}):r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{ge({employeeId:T.employeeId,type:"pds",currentUrl:null}),Ee(!0)},children:[r.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Upload"]})}),r.jsx("td",{className:"py-3 px-4",children:T.sr?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:underline h-auto p-1",onClick:()=>{if(!T.sr||!on(T.sr)){te({variant:"destructive",title:"Error",description:"No document file available or invalid URL."});return}const Be=T.sr.startsWith("data:");let ee;Be?ee=T.sr:T.sr.startsWith("/uploads/")?ee=`${sn}${T.sr}`:T.sr.startsWith("http")?ee=T.sr:ee=`${sn}/documents/file/${T.employeeId}/sr`,K({url:ee,title:`Service Record - ${T.employeeId}`,type:"sr",isBase64:Be}),q(!0)},children:"View"}),r.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{ge({employeeId:T.employeeId,type:"sr",currentUrl:T.sr}),Ee(!0)},title:"Edit Service Records",children:r.jsx(ll,{className:"h-3 w-3"})})]}):r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{ge({employeeId:T.employeeId,type:"sr",currentUrl:null}),Ee(!0)},children:[r.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Upload"]})}),r.jsx("td",{className:"py-3 px-4",children:T.coe?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:underline h-auto p-1",onClick:()=>{if(!T.coe||!on(T.coe)){te({variant:"destructive",title:"Error",description:"No document file available or invalid URL."});return}const Be=T.coe.startsWith("data:");let ee;if(Be)ee=T.coe;else if(T.coe.startsWith("/uploads/"))ee=`${sn}${T.coe}`;else if(T.coe.startsWith("http"))ee=T.coe;else if(T.coe.startsWith("/")&&T.employeeId)ee=`${sn}${T.coe}`;else if(T.employeeId)ee=`${sn}/documents/file/${T.employeeId}/coe`;else{te({variant:"destructive",title:"Error",description:"Invalid document URL. Please contact administrator."});return}if(!ee||ee.trim()===""||ee===`${sn}/`||ee===sn||ee.endsWith("/")){console.error("Invalid fileUrl:",ee),te({variant:"destructive",title:"Error",description:"Invalid document URL. Please contact administrator."});return}console.log("Setting viewingDoc URL:",ee,"from doc.coe:",T.coe),K({url:ee,title:`Certificate of Employment - ${T.employeeId}`,type:"coe",isBase64:Be}),q(!0)},children:"View"}),r.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{ge({employeeId:T.employeeId,type:"coe",currentUrl:T.coe}),Ee(!0)},title:"Edit COE",children:r.jsx(ll,{className:"h-3 w-3"})})]}):r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{ge({employeeId:T.employeeId,type:"coe",currentUrl:null}),Ee(!0)},children:[r.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Upload"]})}),r.jsx("td",{className:"py-3 px-4",children:new Date(T.date).toLocaleDateString()})]},T.id||Re))})]})})})]}),r.jsxs(Ye,{className:"shadow-sm border-border",children:[r.jsxs(rr,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[r.jsx(Bn,{className:"text-xl",children:"Former Employee Documents"}),r.jsxs("div",{className:"relative w-full sm:w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search former employees...",value:s,onChange:T=>c(T.target.value),className:"pl-9 rounded-full"})]})]}),r.jsx(Gt,{className:"px-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-600 text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee ID"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Personal Data Sheet"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Service Records"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Certificate of Employment"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Date"})]})}),r.jsx("tbody",{children:Z?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"Loading documents..."})}):Yt.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No former employee documents found"})}):Yt.map((T,Re)=>r.jsxs("tr",{className:Re%2===0?"bg-gray-100":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:T.name||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:T.employeeId||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:T.pds?r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:underline h-auto p-1",onClick:()=>{if(!T.pds||!on(T.pds))return;const Be=T.pds.startsWith("data:");let ee;if(Be)ee=T.pds;else if(T.pds.startsWith("/uploads/"))ee=`${sn}${T.pds}`;else if(T.pds.startsWith("http"))ee=T.pds;else if(T.employeeId)ee=`${sn}/documents/file/${T.employeeId}/pds`;else return;K({url:ee,title:`Personal Data Sheet - ${T.employeeId}`,type:"pds",isBase64:Be}),q(!0)},children:"View"})}):r.jsx("span",{className:"text-muted-foreground text-xs",children:"No file"})}),r.jsx("td",{className:"py-3 px-4",children:T.sr?r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:underline h-auto p-1",onClick:()=>{if(!T.sr||!on(T.sr))return;const Be=T.sr.startsWith("data:");let ee;if(Be)ee=T.sr;else if(T.sr.startsWith("/uploads/"))ee=`${sn}${T.sr}`;else if(T.sr.startsWith("http"))ee=T.sr;else if(T.employeeId)ee=`${sn}/documents/file/${T.employeeId}/sr`;else return;K({url:ee,title:`Service Record - ${T.employeeId}`,type:"sr",isBase64:Be}),q(!0)},children:"View"})}):r.jsx("span",{className:"text-muted-foreground text-xs",children:"No file"})}),r.jsx("td",{className:"py-3 px-4",children:T.coe?r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:underline h-auto p-1",onClick:()=>{if(!T.coe||!on(T.coe))return;const Be=T.coe.startsWith("data:");let ee;if(Be)ee=T.coe;else if(T.coe.startsWith("/uploads/"))ee=`${sn}${T.coe}`;else if(T.coe.startsWith("http"))ee=T.coe;else if(T.employeeId)ee=`${sn}/documents/file/${T.employeeId}/coe`;else return;K({url:ee,title:`Certificate of Employment - ${T.employeeId}`,type:"coe",isBase64:Be}),q(!0)},children:"View"})}):r.jsx("span",{className:"text-muted-foreground text-xs",children:"No file"})}),r.jsx("td",{className:"py-3 px-4",children:new Date(T.date).toLocaleDateString()})]},T.id||Re))})]})})})]}),r.jsx(kn,{open:v,onOpenChange:N,children:r.jsxs(An,{className:"max-w-3xl w-full",children:[r.jsx(Pn,{children:r.jsxs(In,{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded flex items-center justify-center",children:r.jsx(Cs,{className:"w-4 h-4 text-primary"})}),f?.title]})}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"relative w-full sm:w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search",className:"pl-9 rounded-full",value:ie,onChange:T=>je(T.target.value)})]}),r.jsx("div",{className:"overflow-x-auto border rounded-lg",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-primary text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee ID"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"File"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Size"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Date Created"})]})}),r.jsx("tbody",{children:we.filter(T=>!ie||T.name?.toLowerCase().includes(ie.toLowerCase())||T.employeeId?.toLowerCase().includes(ie.toLowerCase())).length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"py-8 text-center text-muted-foreground",children:"No documents found"})}):we.filter(T=>!ie||T.name?.toLowerCase().includes(ie.toLowerCase())||T.employeeId?.toLowerCase().includes(ie.toLowerCase())).map((T,Re)=>r.jsxs("tr",{className:Re%2===0?"bg-[#eef3ff]":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:T.name||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:T.employeeId||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("a",{href:`${sn}${T.fileUrl}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"View"})}),r.jsx("td",{className:"py-3 px-4",children:T.fileSize||"N/A"}),r.jsx("td",{className:"py-3 px-4",children:new Date(T.uploadedAt||T.createdAt).toLocaleDateString()})]},T.id||Re))})]})})]})]})}),r.jsx(kn,{open:!!w,onOpenChange:T=>!T&&y(null),children:r.jsx(An,{className:"max-w-lg",children:w&&r.jsxs(r.Fragment,{children:[r.jsxs(Pn,{children:[r.jsx(In,{className:"text-xl",children:vi[w].title}),r.jsx(dr,{children:vi[w].description})]}),r.jsxs("div",{className:"space-y-4",children:[vi[w].fields.map(T=>r.jsx(Te,{placeholder:T.placeholder,type:T.type??"text",value:T.type==="file"?void 0:E[T.name]??"",onChange:Re=>{if(T.type==="file"){const Be=Re.target.files?.[0]?.name??"";Ze(T.name,Be)}else Ze(T.name,Re.target.value)}},T.name)),r.jsx(Se,{onClick:Xe,children:vi[w].cta})]})]})})}),r.jsx(kn,{open:fe,onOpenChange:Ee,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:ue&&`Edit ${ue.type.toUpperCase()} - ${ue.employeeId}`}),r.jsx(dr,{children:ue?.currentUrl?"Replace the current document or download it.":"Upload a new document."})]}),ue&&r.jsxs("div",{className:"space-y-4",children:[ue.currentUrl&&r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Se,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{if(ue.currentUrl?.startsWith("data:")){const T=`${sn}/documents/file/${ue.employeeId}/${ue.type}`,Re=document.createElement("a");Re.href=T,Re.download=`${ue.type}_${ue.employeeId}.pdf`,Re.target="_blank",document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)}else{const T=ue.currentUrl.startsWith("/")?`${sn}${ue.currentUrl}`:`${sn}/uploads/${ue.currentUrl}`,Re=document.createElement("a");Re.href=T,Re.download=`${ue.type}_${ue.employeeId}.pdf`,Re.target="_blank",document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)}},children:[r.jsx(Wr,{className:"h-4 w-4"}),"Download Current Document"]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Upload New Document (PDF/DOC)"}),r.jsx(Te,{type:"file",accept:".pdf,.doc,.docx",onChange:T=>oe(T.target.files?.[0]||null)})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Se,{variant:"outline",onClick:()=>{Ee(!1),ge(null),oe(null)},children:"Cancel"}),r.jsx(Se,{onClick:async()=>{if(!ne&&!ue.currentUrl){te({variant:"destructive",title:"Error",description:"Please select a file to upload"});return}try{if(ne){const T=new FormData;T.append("file",ne),T.append("name",`${ue.type}_${ue.employeeId}`),T.append("type","employee-doc"),T.append("employeeId",ue.employeeId),T.append("documentType",ue.type),T.append("uploadedBy",G?.fullName||"System");let Re=null;if(ue.currentUrl)try{const at=await fetch(`${sn}/documents?employeeId=${ue.employeeId}&documentType=${ue.type}&type=employee-doc`);if(at.ok){const dt=await at.json();dt.data&&dt.data.length>0&&(Re=dt.data[0].id)}}catch(at){console.error("Error checking existing document",at)}const Be=Re?"PUT":"POST",ee=Re?`${sn}/documents/${Re}`:`${sn}/documents`,pe=await fetch(ee,{method:Be,body:T});if(!pe.ok){const at=await pe.json().catch(()=>({}));throw new Error(at.message||"Failed to upload document")}te({title:"Success",description:Re?"Document replaced successfully":"Document uploaded successfully"}),await me()}Ee(!1),ge(null),oe(null)}catch(T){console.error("Error uploading document",T),te({variant:"destructive",title:"Error",description:T instanceof Error?T.message:"Failed to upload document. Please try again."})}},children:ue.currentUrl?"Replace":"Upload"})]})]})]})}),r.jsx(kn,{open:re,onOpenChange:q,children:r.jsxs(An,{className:"max-w-6xl max-h-[90vh] w-full",children:[r.jsxs(Pn,{children:[r.jsx(In,{children:U?.title||"View Document"}),r.jsx(dr,{children:"View the document in the viewer below"})]}),U&&U.url&&U.url!==`${sn}/`&&U.url!==sn?r.jsx("div",{className:"w-full h-[75vh] border rounded-lg overflow-hidden bg-gray-100 relative",children:U.isBase64?r.jsx("object",{data:U.url,type:"application/pdf",className:"w-full h-full","aria-label":U.title,children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[r.jsx("p",{className:"text-muted-foreground text-center",children:"PDF viewer not supported in this browser."}),r.jsxs(Se,{onClick:()=>{const T=document.createElement("a");T.href=U.url,T.download=`${U.type}_${U.title.split(" - ")[1]||"document"}.pdf`,T.target="_blank",document.body.appendChild(T),T.click(),document.body.removeChild(T)},children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]})}):r.jsxs(r.Fragment,{children:[r.jsx("iframe",{src:U.url,className:"w-full h-full border-0",title:U.title,onError:()=>{te({variant:"destructive",title:"Error",description:"Failed to load document. Please try downloading instead."})},onLoad:T=>{try{const Re=T.target;console.log("Document iframe loaded:",U.url),Re.contentWindow}catch(Re){console.warn("Iframe load check failed (likely CORS):",Re)}}}),r.jsx("div",{className:"absolute bottom-4 right-4",children:r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{const T=document.createElement("a");T.href=U.url,T.download=`${U.type}_${U.title.split(" - ")[1]||"document"}.pdf`,T.target="_blank",document.body.appendChild(T),T.click(),document.body.removeChild(T)},children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Download if viewer fails"]})})]})}):U?r.jsx("div",{className:"w-full h-[75vh] border rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("p",{className:"text-muted-foreground",children:"Document URL is invalid or missing."}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Please contact administrator or try uploading the document again."})]})}):null,r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Se,{variant:"outline",onClick:()=>{q(!1),K(null)},children:"Close"}),U&&r.jsxs(Se,{onClick:()=>{const T=document.createElement("a");T.href=U.url,T.download=`${U.type}_${U.title.split(" - ")[1]||"document"}.pdf`,T.target="_blank",document.body.appendChild(T),T.click(),document.body.removeChild(T)},children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})},aR=()=>{const[e,n]=C.useState(""),[s,c]=C.useState(!1),[f,m]=C.useState(!1),[v,N]=C.useState(null),[w,y]=C.useState(!1),[E,I]=C.useState(null),[O,_]=C.useState(""),[k,R]=C.useState(""),[P,H]=C.useState(""),[z,F]=C.useState(""),[Z,W]=C.useState(""),[te,G]=C.useState(""),[J,se]=C.useState(!1),[fe,Ee]=C.useState(null),{toast:ue}=Un(),ge="https://bbaec9682261.ngrok-free.app",re=C.useMemo(()=>Ou.getActive(),[]),q=C.useMemo(()=>[{key:"pds",label:"Personal Data Sheet",description:"Auto-fill PDS template"},{key:"file201",label:"201 File Summary",description:"Snapshot of employee records"},{key:"serviceRecord",label:"Service Record",description:"Employment history overview"},{key:"coe",label:"Certificate of Employment",description:"COE ready for printing"}],[]),U=C.useMemo(()=>re.map(me=>({employeeId:me.employeeId,employeeName:me.fullName,personalDataSheet:null,serviceRecords:null,contractOfEmployment:null,certificateOfEmployment:null,date:me.dateHired})),[re]),K=[{id:"documents",name:"Documents",icon:Hr,action:"Add"},{id:"templates",name:"Templates",icon:Hr,action:"Add"},{id:"employee-reports",name:"Employee Reports",icon:Hr,action:""},{id:"attendance-reports",name:"Attendance Reports",icon:Hr,action:""}],ne=[{id:"personal-data",name:"Personal Data Sheet",count:0},{id:"service-records",name:"Service Records",count:0},{id:"certificate",name:"Certificate of Employment",count:0},{id:"contract",name:"Contract of Employment",count:0}],oe=me=>me.trim().toUpperCase(),we=async me=>{const Ze=oe(me);if(!Ze)return null;const Xe=re.find(ct=>ct.employeeId.toUpperCase()===Ze);if(Xe)return Xe;try{const ct=await St(`${ge}/employees`);return ct.ok&&(await ct.json()).data?.find(T=>(T.employeeId||T.employee_id)?.toUpperCase()===Ze)||null}catch(ct){return console.error("Error fetching employee for template generation",ct),null}},X=me=>{const Ze=window.open("","_blank");Ze&&(Ze.document.write(me),Ze.document.close(),Ze.focus(),setTimeout(()=>{try{Ze.focus(),Ze.print()}catch(Xe){console.error("Unable to trigger print automatically",Xe)}},400))},ie=async me=>{if(!te.trim()){ue({variant:"destructive",title:"Employee ID required",description:"Please type an employee ID before generating a document."});return}se(!0),Ee(me);try{const Ze=await we(te);if(!Ze){ue({variant:"destructive",title:"Employee not found",description:`No employee matched the ID ${te.trim()}.`});return}const Xe=Hb(me,Ze),ct=q.find(Yt=>Yt.key===me)?.label||"Document";X(Xe),ue({title:"Document ready",description:`${ct} generated for ${Ze.fullName}.`})}catch(Ze){console.error("Document generation failed",Ze),ue({variant:"destructive",title:"Generation failed",description:"Unable to generate the selected document. Please try again."})}finally{se(!1),Ee(null)}},je=async me=>{if(me.preventDefault(),!O.trim()||!k){ue({variant:"destructive",title:"Missing fields",description:"Please type the employee ID and choose a document type."});return}const Xe=me.currentTarget.querySelector('input[type="file"]')?.files?.[0];if(!Xe){ue({variant:"destructive",title:"No file selected",description:"Please choose a file to upload."});return}try{const ct=new FormData;if(ct.append("file",Xe),ct.append("name",Xe.name),ct.append("type","employee-doc"),ct.append("employeeId",oe(O)),ct.append("documentType",k),ct.append("uploadedBy","System"),!(await St(`${ge}/documents`,{method:"POST",body:ct})).ok)throw new Error("Failed to upload document");ue({title:"Success",description:"Document uploaded successfully"}),c(!1),_(""),R("")}catch(ct){console.error("Error uploading document",ct),ue({variant:"destructive",title:"Error",description:"Failed to upload document. Please try again."})}},Ie=U.filter(me=>me.employeeName.toLowerCase().includes(e.toLowerCase())||me.employeeId.toLowerCase().includes(e.toLowerCase())),We=me=>{switch(me){case"documents":c(!0);break;case"templates":m(!0);break;case"employee-reports":N("employee");break;case"attendance-reports":N("attendance");break}},_e=async me=>{if(me.preventDefault(),!P.trim()||!z.trim()){ue({variant:"destructive",title:"Missing fields",description:"Please provide a template name and category."});return}const Xe=me.currentTarget.querySelector('input[type="file"]')?.files?.[0];if(!Xe){ue({variant:"destructive",title:"Error",description:"Please select a file to upload"});return}try{const ct=new FormData;if(ct.append("file",Xe),ct.append("name",P),ct.append("type","template"),ct.append("category",z),ct.append("uploadedBy","System"),!(await St("https://bbaec9682261.ngrok-free.app/documents",{method:"POST",body:ct})).ok)throw new Error("Failed to upload template");ue({title:"Template saved",description:"Your template is now available for use."}),m(!1),H(""),F("")}catch(ct){console.error("Error uploading template",ct),ue({variant:"destructive",title:"Error",description:"Failed to upload template. Please try again."})}},Ae=[{id:"sample-1",employeeId:"25-GPC-0001",fullName:"Ana Dela Cruz",department:"HR Department",position:"HR Specialist"},{id:"sample-2",employeeId:"25-GPC-0002",fullName:"Mark Reyes",department:"Finance Department",position:"Accountant"},{id:"sample-3",employeeId:"25-GPC-0003",fullName:"Lea Santos",department:"IT Department",position:"IT Coordinator"},{id:"sample-4",employeeId:"25-GPC-0004",fullName:"Jose Ramirez",department:"Administration",position:"Admin Assistant"}],Ue=re.length>0?re.map(me=>({id:me.id,employeeId:me.employeeId,fullName:me.fullName,department:me.department,position:me.position})):Ae,qe=v==="employee"?Ue.filter(me=>me.employeeId.toUpperCase().includes(Z.toUpperCase())||me.fullName.toLowerCase().includes(Z.toLowerCase())):[],st=()=>{N(null),W("")};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ye,{className:"p-4 bg-sidebar border-sidebar-border",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hr,{className:"h-6 w-6 text-sidebar-foreground"}),r.jsx("h2",{className:"text-xl font-semibold text-sidebar-foreground",children:"Documents"})]})}),r.jsx(Ye,{className:"p-4 bg-sidebar border-sidebar-border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(uE,{className:"h-6 w-6 text-sidebar-foreground"}),r.jsx("h2",{className:"text-xl font-semibold text-sidebar-foreground",children:"Upload/Store Documents"})]}),r.jsxs(kn,{open:s,onOpenChange:c,children:[r.jsx(n8,{asChild:!0,children:r.jsxs(Se,{className:"gap-2",children:[r.jsx(bE,{className:"h-4 w-4"}),"Upload Document"]})}),r.jsxs(An,{children:[r.jsx(Pn,{children:r.jsx(In,{children:"Upload Employee Document"})}),r.jsxs("form",{onSubmit:je,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Employee ID"}),r.jsx(Te,{value:O,onChange:me=>_(me.target.value.toUpperCase()),placeholder:"Type Employee ID (e.g., 25-GPC-12345)",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Document Type"}),r.jsxs("select",{value:k,onChange:me=>R(me.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[r.jsx("option",{value:"",children:"Select Document Type"}),r.jsx("option",{value:"personal-data",children:"Personal Data Sheet"}),r.jsx("option",{value:"service-records",children:"Service Records"}),r.jsx("option",{value:"certificate",children:"Certificate of Employment"}),r.jsx("option",{value:"contract",children:"Contract of Employment"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Upload File"}),r.jsx(Te,{type:"file",required:!0})]}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx(Se,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),r.jsx(Se,{type:"submit",children:"Upload"})]})]})]})]})]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:K.map(me=>r.jsx(Ye,{className:"p-4 hover:shadow-lg transition-shadow cursor-pointer border-2",onClick:()=>We(me.id),children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:r.jsx(me.icon,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold",children:me.name}),me.action&&r.jsx("p",{className:"text-sm text-muted-foreground",children:me.action})]})]})},me.id))}),r.jsxs(Ye,{className:"p-6 border-dashed border-primary/40 space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Generate Employee Documents"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Type the employee ID then choose which template to merge automatically."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Te,{value:te,onChange:me=>G(me.target.value.toUpperCase()),placeholder:"Enter Employee ID",className:"w-full sm:w-64"}),r.jsx(Se,{variant:"outline",onClick:()=>G(""),children:"Clear"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:q.map(me=>{const Ze=fe===me.key;return r.jsxs(Ye,{className:"p-4 flex flex-col gap-2 border border-border/70",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:me.label}),r.jsx("p",{className:"text-sm text-muted-foreground",children:me.description})]}),r.jsx(Se,{size:"sm",onClick:()=>ie(me.key),disabled:!te.trim()||J,children:Ze&&J?"Generating":"Generate"})]},me.key)})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ne.map(me=>r.jsxs(Ye,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer text-center",onClick:()=>{I(me),y(!0)},children:[r.jsx(sm,{className:"h-16 w-16 mx-auto mb-3 text-blue-400"}),r.jsx("h3",{className:"font-semibold mb-1",children:me.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[me.count," files"]})]},me.id))}),r.jsxs(Ye,{className:"p-6 bg-blue-50 dark:bg-blue-950/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sm,{className:"h-5 w-5 text-primary"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Documents"})]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search",value:e,onChange:me=>n(me.target.value),className:"pl-9"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Employee Name"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Employee ID"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Personal Data Sheet"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Service Records"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Contract of Employment"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Certificate of Employment"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Date"})]})}),r.jsx("tbody",{children:Ie.map(me=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-4",children:me.employeeName}),r.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:me.employeeId}),r.jsx("td",{className:"py-3 px-4",children:me.personalDataSheet?r.jsx(Se,{size:"sm",variant:"ghost",className:"text-blue-500",children:r.jsx(Wr,{className:"h-4 w-4"})}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Not uploaded"})}),r.jsx("td",{className:"py-3 px-4",children:me.serviceRecords?r.jsx(Se,{size:"sm",variant:"ghost",className:"text-blue-500",children:r.jsx(Wr,{className:"h-4 w-4"})}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Not uploaded"})}),r.jsx("td",{className:"py-3 px-4",children:me.contractOfEmployment?r.jsx(Se,{size:"sm",variant:"ghost",className:"text-blue-500",children:r.jsx(Wr,{className:"h-4 w-4"})}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Not uploaded"})}),r.jsx("td",{className:"py-3 px-4",children:me.certificateOfEmployment?r.jsx(Se,{size:"sm",variant:"ghost",className:"text-blue-500",children:r.jsx(Wr,{className:"h-4 w-4"})}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Not uploaded"})}),r.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(me.date).toLocaleDateString()})]},me.employeeId))})]})})]}),r.jsx(kn,{open:w,onOpenChange:y,children:r.jsxs(An,{className:"max-w-5xl w-full",children:[r.jsx(Pn,{children:r.jsxs(In,{className:"flex items-center gap-2",children:[r.jsx(sm,{className:"h-5 w-5 text-primary"}),E?.name||"Folder"]})}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"relative w-full sm:w-72",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search",className:"pl-9 rounded-full"})]}),r.jsx("div",{className:"overflow-x-auto border rounded-lg",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-primary text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Files"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Size"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Date Created"})]})}),r.jsx("tbody",{children:U.slice(0,4).map((me,Ze)=>r.jsxs("tr",{className:Ze%2===0?"bg-[#eef3ff]":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:me.employeeName}),r.jsx("td",{className:"py-3 px-4 text-blue-600 underline",children:"PersonalDataSheet.docx"}),r.jsx("td",{className:"py-3 px-4",children:"65 KB"}),r.jsx("td",{className:"py-3 px-4",children:me.date?new Date(me.date).toLocaleDateString():"02-25-2025"})]},me.employeeId))})]})})]})]})}),r.jsx(kn,{open:f,onOpenChange:m,children:r.jsxs(An,{children:[r.jsx(Pn,{children:r.jsx(In,{children:"Create Template"})}),r.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Template Name"}),r.jsx(Te,{value:P,onChange:me=>H(me.target.value),placeholder:"e.g. Contract of Employment",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Category"}),r.jsx(Te,{value:z,onChange:me=>F(me.target.value),placeholder:"e.g. HR / Finance",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Upload Template"}),r.jsx(Te,{type:"file",required:!0})]}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx(Se,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),r.jsx(Se,{type:"submit",children:"Save Template"})]})]})]})}),r.jsx(kn,{open:!!v,onOpenChange:me=>!me&&st(),children:r.jsxs(An,{className:"max-w-3xl w-full",children:[r.jsx(Pn,{children:r.jsxs(In,{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"h-5 w-5 text-primary"}),v==="attendance"?"Attendance Reports":"Employee Reports"]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative w-full sm:w-80",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search by Employee ID (e.g., 25-GPC-0001)",value:Z,onChange:me=>W(me.target.value.toUpperCase()),className:"pl-10 rounded-full"})]}),r.jsx("div",{className:"overflow-x-auto border rounded-lg shadow-sm",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-primary text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee Name"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Department"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Employee ID"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Position"}),r.jsx("th",{className:"py-3 px-4 text-left font-medium text-center",children:"Action"})]})}),r.jsx("tbody",{children:qe.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"py-8 text-center text-muted-foreground",children:"No employees found. Try searching by Employee ID."})}):qe.map((me,Ze)=>r.jsxs("tr",{className:Ze%2===0?"bg-[#eef3ff]":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:me.fullName}),r.jsx("td",{className:"py-3 px-4",children:me.department}),r.jsx("td",{className:"py-3 px-4",children:me.employeeId}),r.jsx("td",{className:"py-3 px-4",children:me.position}),r.jsx("td",{className:"py-3 px-4 text-center",children:r.jsx(Se,{size:"sm",variant:"outline",className:"rounded-full px-4",onClick:()=>{G(me.employeeId),N(null),ue({title:"Employee selected",description:`Ready to generate reports for ${me.fullName}. Use the document generator below.`})},children:"Generate Report"})})]},me.id))})]})})]})]})})]})})},nl="https://bbaec9682261.ngrok-free.app",iR=()=>{const[e,n]=C.useState([]),[s,c]=C.useState(!0),[f,m]=C.useState(null),[v,N]=C.useState(""),[w,y]=C.useState(""),[E,I]=C.useState(""),[O,_]=C.useState(null),[k,R]=C.useState(!1),{toast:P}=Un();C.useEffect(()=>{(async()=>{try{c(!0);const te=await St(`${nl}/documents?type=template`);if(!te.ok)throw new Error("Failed to fetch templates");const J=(await te.json()).data.map(se=>({id:se.id,name:se.name,category:se.category||"Uncategorized",fileUrl:se.fileUrl,description:se.description||void 0,uploadedAt:se.uploadedAt}));n(J)}catch(te){console.error("Error fetching templates",te)}finally{c(!1)}})()},[]);const H=async W=>{try{const te=await St(`${nl}${W.fileUrl}`);if(!te.ok)throw new Error("Failed to download file");const G=await te.blob(),J=window.URL.createObjectURL(G),se=document.createElement("a");se.href=J,se.download=W.name||"template",document.body.appendChild(se),se.click(),window.URL.revokeObjectURL(J),document.body.removeChild(se),P({title:"Success",description:"Template downloaded successfully"})}catch(te){console.error("Download error",te),P({variant:"destructive",title:"Error",description:"Failed to download template. Please try again."})}},z=W=>{m(W),N(W.name),y(W.category),I(W.description||""),_(null),R(!0)},F=async()=>{if(f)try{const W=new FormData;O&&W.append("file",O),W.append("name",v),W.append("category",w),W.append("description",E);const te=await St(`${nl}/documents/${f.id}`,{method:"PUT",body:W});if(!te.ok){const J=await te.json().catch(()=>({}));throw new Error(J.message||"Failed to update template")}P({title:"Success",description:"Template updated successfully"}),R(!1),m(null);const G=await St(`${nl}/documents?type=template`);if(G.ok){const se=(await G.json()).data.map(fe=>({id:fe.id,name:fe.name,category:fe.category||"Uncategorized",fileUrl:fe.fileUrl,description:fe.description||void 0,uploadedAt:fe.uploadedAt}));n(se)}}catch(W){console.error("Update error",W),P({variant:"destructive",title:"Error",description:"Failed to update template. Please try again."})}},Z=async W=>{if(confirm(`Are you sure you want to delete "${W.name}"?`))try{if(!(await St(`${nl}/documents/${W.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete template");P({title:"Success",description:"Template deleted successfully"});const G=await St(`${nl}/documents?type=template`);if(G.ok){const se=(await G.json()).data.map(fe=>({id:fe.id,name:fe.name,category:fe.category||"Uncategorized",fileUrl:fe.fileUrl,description:fe.description||void 0,uploadedAt:fe.uploadedAt}));n(se)}}catch(te){console.error("Delete error",te),P({variant:"destructive",title:"Error",description:"Failed to delete template. Please try again."})}};return r.jsxs(ar,{children:[r.jsxs(Ye,{className:"p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Document Templates"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s?r.jsx("p",{className:"text-muted-foreground col-span-full text-center py-8",children:"Loading templates..."}):e.length===0?r.jsx("p",{className:"text-muted-foreground col-span-full text-center py-8",children:"No templates available yet"}):e.map(W=>r.jsx(Ye,{className:"p-4 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Hr,{className:"h-8 w-8 text-blue-500 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold truncate",children:W.name}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:W.category}),W.description&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:W.description}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsxs(Se,{size:"sm",className:"flex-1",variant:"outline",onClick:()=>H(W),children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Download"]}),r.jsx(Se,{size:"sm",variant:"outline",onClick:()=>z(W),children:r.jsx(ll,{className:"h-4 w-4"})}),r.jsx(Se,{size:"sm",variant:"destructive",onClick:()=>Z(W),children:r.jsx(pl,{className:"h-4 w-4"})})]})]})]})},W.id))})]}),r.jsx(kn,{open:k,onOpenChange:R,children:r.jsxs(An,{children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Edit Template"}),r.jsx(dr,{children:"Update template information"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(gt,{children:"Template Name"}),r.jsx(Te,{value:v,onChange:W=>N(W.target.value),placeholder:"Template name"})]}),r.jsxs("div",{children:[r.jsx(gt,{children:"Category"}),r.jsx(Te,{value:w,onChange:W=>y(W.target.value),placeholder:"Category"})]}),r.jsxs("div",{children:[r.jsx(gt,{children:"Description"}),r.jsx(Te,{value:E,onChange:W=>I(W.target.value),placeholder:"Description"})]}),r.jsxs("div",{children:[r.jsx(gt,{children:"Replace File (Optional)"}),r.jsx(Te,{type:"file",accept:".pdf,.doc,.docx",onChange:W=>_(W.target.files?.[0]||null)})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Se,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),r.jsx(Se,{onClick:F,children:"Save Changes"})]})]})]})})]})},Ac="https://bbaec9682261.ngrok-free.app",oR=()=>{const[e,n]=C.useState("HRMS  The Great Plebeian College"),[s,c]=C.useState("A Web-based Human Resource Management System of The Great Plebeian College."),[f,m]=C.useState(""),[v,N]=C.useState("+63 9837562539"),[w,y]=C.useState("hrmsgpcalaminos@gmail.com"),[E,I]=C.useState("Gen. Montemayor St. Alaminos City Pangasinan"),[O,_]=C.useState(null),[k,R]=C.useState(null),[P,H]=C.useState(!0),[z,F]=C.useState(!1),{toast:Z}=Un();C.useEffect(()=>{(async()=>{try{H(!0);const G=await St(`${Ac}/settings`);if(G.ok){const se=(await G.json()).data||{};se.siteTitle&&n(se.siteTitle),se.description&&c(se.description),se.copyright!==void 0&&m(se.copyright||""),se.contactNumber&&N(se.contactNumber),se.systemEmail&&y(se.systemEmail),se.address&&I(se.address),se.logoUrl&&_(`${Ac}${se.logoUrl}`)}}catch(G){console.error("Error fetching settings",G)}finally{H(!1)}})()},[]);const W=async()=>{try{F(!0);const te=new FormData;if(k&&te.append("logo",k),te.append("siteTitle",e),te.append("description",s),te.append("copyright",""),te.append("contactNumber",v),te.append("systemEmail",w),te.append("address",E),!(await St(`${Ac}/settings`,{method:"PUT",body:te})).ok)throw new Error("Failed to save settings");Z({title:"Success",description:"Settings saved successfully"});const J=await St(`${Ac}/settings`);if(J.ok){const fe=(await J.json()).data||{};fe.logoUrl&&_(`${Ac}${fe.logoUrl}`)}}catch(te){console.error("Error saving settings",te),Z({variant:"destructive",title:"Error",description:"Failed to save settings. Please try again."})}finally{F(!1)}};return r.jsx(ar,{children:r.jsxs(Ye,{className:"max-w-3xl p-6 shadow-sm border-border space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ic,{label:"Site Title",children:r.jsx(Te,{value:e,onChange:te=>n(te.target.value)})}),r.jsx(Ic,{label:"Description",children:r.jsx(Te,{value:s,onChange:te=>c(te.target.value)})}),r.jsx(Ic,{label:"Contact Number",children:r.jsx(Te,{value:v,onChange:te=>N(te.target.value)})}),r.jsx(Ic,{label:"System Email",children:r.jsx(Te,{type:"email",value:w,onChange:te=>y(te.target.value)})}),r.jsx(Ic,{label:"Address",children:r.jsx(Te,{value:E,onChange:te=>I(te.target.value)})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx(Se,{variant:"destructive",className:"px-6 rounded-full",children:"Cancel"}),r.jsx(Se,{onClick:W,className:"px-6 rounded-full bg-green-600 hover:bg-green-700",disabled:z||P,children:z?"Saving...":"Save"})]})]})})},Ic=({label:e,children:n})=>r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{className:"text-sm font-semibold text-muted-foreground",children:e}),n]}),lR="https://bbaec9682261.ngrok-free.app",cR=()=>{const[e,n]=C.useState(""),[s,c]=C.useState("all"),[f,m]=C.useState("all"),[v,N]=C.useState([]),[w,y]=C.useState(!0),{toast:E}=Un();C.useEffect(()=>{(async()=>{try{y(!0);const R=new URLSearchParams;s!=="all"&&R.append("actionType",s),f!=="all"&&R.append("status",f),R.append("limit","100");const P=await St(`${lR}/activity-logs?${R.toString()}`);if(!P.ok)throw new Error("Failed to fetch audit logs");const z=(await P.json()).data.map(F=>({id:F.id,timestamp:F.createdAt,user:F.userName,action:F.actionType,resource:F.resourceType,status:F.status,ipAddress:F.ipAddress||void 0,details:F.description||`${F.actionType} ${F.resourceType}`}));N(z)}catch(R){console.error("Error fetching audit logs",R)}finally{y(!1)}})()},[s,f]);const I=v.filter(k=>{const R=k.user.toLowerCase().includes(e.toLowerCase())||k.action.toLowerCase().includes(e.toLowerCase())||k.resource.toLowerCase().includes(e.toLowerCase())||k.details.toLowerCase().includes(e.toLowerCase()),P=s==="all"||k.action===s,H=f==="all"||k.status===f;return R&&P&&H}),O=k=>{switch(k){case"success":return"bg-green-500";case"failed":return"bg-red-500";case"warning":return"bg-yellow-500";default:return"bg-gray-500"}},_=()=>{try{if(I.length===0){E({variant:"destructive",title:"No Logs to Export",description:"There are no audit logs to export with the current filters."});return}const P=[["Timestamp","User","Action","Resource","Status","IP Address","Details"].join(","),...I.map(J=>[new Date(J.timestamp).toLocaleString(),`"${J.user}"`,`"${J.action}"`,`"${J.resource}"`,`"${J.status}"`,`"${J.ipAddress||"N/A"}"`,`"${J.details.replace(/"/g,'""')}"`].join(","))].join(`
`),H=new Blob([P],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a"),F=URL.createObjectURL(H),Z=new Date,W=Z.toISOString().split("T")[0],te=Z.toTimeString().split(" ")[0].replace(/:/g,"-"),G=`audit_logs_${W}_${te}.csv`;z.setAttribute("href",F),z.setAttribute("download",G),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(F),E({title:"Export Successful",description:`Audit logs exported successfully. ${I.length} log(s) exported.`})}catch(k){console.error("Error exporting audit logs",k),E({variant:"destructive",title:"Export Failed",description:"Failed to export audit logs. Please try again."})}};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Audit Logs"}),r.jsxs(Se,{onClick:_,className:"gap-2",children:[r.jsx(Wr,{className:"h-4 w-4"}),"Export Logs"]})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Te,{placeholder:"Search logs...",value:e,onChange:k=>n(k.target.value),className:"pl-9"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(En,{value:s,onValueChange:c,children:[r.jsx(xn,{className:"w-40",children:r.jsx(Sn,{placeholder:"Action"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"all",children:"All Actions"}),r.jsx(nt,{value:"LOGIN",children:"Login"}),r.jsx(nt,{value:"CREATE",children:"Create"}),r.jsx(nt,{value:"UPDATE",children:"Update"}),r.jsx(nt,{value:"DELETE",children:"Delete"})]})]}),r.jsxs(En,{value:f,onValueChange:m,children:[r.jsx(xn,{className:"w-40",children:r.jsx(Sn,{placeholder:"Status"})}),r.jsxs(yn,{children:[r.jsx(nt,{value:"all",children:"All Status"}),r.jsx(nt,{value:"success",children:"Success"}),r.jsx(nt,{value:"failed",children:"Failed"}),r.jsx(nt,{value:"warning",children:"Warning"})]})]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:w?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading audit logs..."}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Timestamp"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"User"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Action"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Resource"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Status"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"IP Address"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Details"})]})}),r.jsx("tbody",{children:I.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No audit logs found"})}):I.map(k=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(k.timestamp).toLocaleString()}),r.jsx("td",{className:"py-3 px-4 font-medium",children:k.user}),r.jsx("td",{className:"py-3 px-4",children:r.jsx($r,{variant:"outline",children:k.action})}),r.jsx("td",{className:"py-3 px-4",children:k.resource}),r.jsx("td",{className:"py-3 px-4",children:r.jsx($r,{className:O(k.status),children:k.status})}),r.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:k.ipAddress||"N/A"}),r.jsx("td",{className:"py-3 px-4 text-sm",children:k.details})]},k.id))})]})}),r.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",I.length," of ",v.length," logs"]})]})]})})};var jf="Switch",[dR]=zs(jf),[uR,fR]=dR(jf),Wb=C.forwardRef((e,n)=>{const{__scopeSwitch:s,name:c,checked:f,defaultChecked:m,required:v,disabled:N,value:w="on",onCheckedChange:y,form:E,...I}=e,[O,_]=C.useState(null),k=an(n,F=>_(F)),R=C.useRef(!1),P=O?E||!!O.closest("form"):!0,[H,z]=_i({prop:f,defaultProp:m??!1,onChange:y,caller:jf});return r.jsxs(uR,{scope:s,checked:H,disabled:N,children:[r.jsx(jt.button,{type:"button",role:"switch","aria-checked":H,"aria-required":v,"data-state":Yb(H),"data-disabled":N?"":void 0,disabled:N,value:w,...I,ref:k,onClick:yt(e.onClick,F=>{z(Z=>!Z),P&&(R.current=F.isPropagationStopped(),R.current||F.stopPropagation())})}),P&&r.jsx(Xb,{control:O,bubbles:!R.current,name:c,value:w,checked:H,required:v,disabled:N,form:E,style:{transform:"translateX(-100%)"}})]})});Wb.displayName=jf;var $b="SwitchThumb",Gb=C.forwardRef((e,n)=>{const{__scopeSwitch:s,...c}=e,f=fR($b,s);return r.jsx(jt.span,{"data-state":Yb(f.checked),"data-disabled":f.disabled?"":void 0,...c,ref:n})});Gb.displayName=$b;var hR="SwitchBubbleInput",Xb=C.forwardRef(({__scopeSwitch:e,control:n,checked:s,bubbles:c=!0,...f},m)=>{const v=C.useRef(null),N=an(v,m),w=j2(s),y=xv(n);return C.useEffect(()=>{const E=v.current;if(!E)return;const I=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(I,"checked").set;if(w!==s&&_){const k=new Event("click",{bubbles:c});_.call(E,s),E.dispatchEvent(k)}},[w,s,c]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...f,tabIndex:-1,ref:N,style:{...f.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Xb.displayName=hR;function Yb(e){return e?"checked":"unchecked"}var Zb=Wb,mR=Gb;const Ii=C.forwardRef(({className:e,...n},s)=>r.jsx(Zb,{className:Me("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...n,ref:s,children:r.jsx(mR,{className:Me("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ii.displayName=Zb.displayName;const pR=()=>{const[e,n]=C.useState(!0),[s,c]=C.useState(!0),[f,m]=C.useState(!0),[v,N]=C.useState(!1),[w,y]=C.useState(!0),[E,I]=C.useState("This HRMS system collects and processes employee data in accordance with applicable privacy laws..."),{toast:O}=Un(),_=()=>{O({title:"Success",description:"Data privacy settings updated successfully"})};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(wE,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Data Privacy"})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Dm,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Privacy Controls"})]}),r.jsxs("div",{className:"space-y-6 max-w-3xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(gt,{className:"text-base font-semibold",children:"Data Encryption"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Encrypt sensitive data at rest and in transit using AES-256 encryption"})]}),r.jsx(Ii,{checked:e,onCheckedChange:n})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(gt,{className:"text-base font-semibold",children:"Access Logging"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track and log all access to employee personal data"})]}),r.jsx(Ii,{checked:s,onCheckedChange:c})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(gt,{className:"text-base font-semibold",children:"Data Anonymization"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Anonymize personal data for reporting and analytics"})]}),r.jsx(Ii,{checked:v,onCheckedChange:N})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(gt,{className:"text-base font-semibold",children:"GDPR Compliance Mode"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enable additional features for GDPR compliance (EU regulations)"})]}),r.jsx(Ii,{checked:w,onCheckedChange:y})]})]})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Hr,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Privacy Policy"})]}),r.jsx("div",{className:"space-y-4 max-w-3xl",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"privacyPolicy",children:"Privacy Policy Statement"}),r.jsx(yl,{id:"privacyPolicy",value:E,onChange:k=>I(k.target.value),rows:8,className:"font-mono text-sm"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"This policy will be shown to users when they access the system"})]})})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Ei,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Data Access Requests"})]}),r.jsxs("div",{className:"space-y-4 max-w-3xl",children:[r.jsx("p",{className:"text-muted-foreground",children:"Employees can request access to their personal data or request data deletion."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(Se,{variant:"outline",className:"justify-start",children:[r.jsx(Hr,{className:"mr-2 h-4 w-4"}),"Export User Data"]}),r.jsxs(Se,{variant:"outline",className:"justify-start text-red-600 hover:text-red-700",children:[r.jsx(Cg,{className:"mr-2 h-4 w-4"}),"Delete User Data"]})]})]})]}),r.jsx(Ye,{className:"p-6 bg-amber-50 dark:bg-amber-950 border-amber-200 dark:border-amber-800",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Cg,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-100 mb-2",children:"Important Privacy Notice"}),r.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Ensure all privacy settings comply with local data protection regulations. Changes to these settings may have legal implications. Consult with your legal team before making significant modifications."})]})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Se,{onClick:_,className:"px-8",children:"Save Privacy Settings"}),r.jsx(Se,{variant:"outline",children:"Reset to Defaults"})]})]})})};var s0="Progress",a0=100,[gR]=zs(s0),[xR,yR]=gR(s0),qb=C.forwardRef((e,n)=>{const{__scopeProgress:s,value:c=null,max:f,getValueLabel:m=vR,...v}=e;(f||f===0)&&!Wx(f)&&console.error(wR(`${f}`,"Progress"));const N=Wx(f)?f:a0;c!==null&&!$x(c,N)&&console.error(bR(`${c}`,"Progress"));const w=$x(c,N)?c:null,y=Ku(w)?m(w,N):void 0;return r.jsx(xR,{scope:s,value:w,max:N,children:r.jsx(jt.div,{"aria-valuemax":N,"aria-valuemin":0,"aria-valuenow":Ku(w)?w:void 0,"aria-valuetext":y,role:"progressbar","data-state":Jb(w,N),"data-value":w??void 0,"data-max":N,...v,ref:n})})});qb.displayName=s0;var Qb="ProgressIndicator",Kb=C.forwardRef((e,n)=>{const{__scopeProgress:s,...c}=e,f=yR(Qb,s);return r.jsx(jt.div,{"data-state":Jb(f.value,f.max),"data-value":f.value??void 0,"data-max":f.max,...c,ref:n})});Kb.displayName=Qb;function vR(e,n){return`${Math.round(e/n*100)}%`}function Jb(e,n){return e==null?"indeterminate":e===n?"complete":"loading"}function Ku(e){return typeof e=="number"}function Wx(e){return Ku(e)&&!isNaN(e)&&e>0}function $x(e,n){return Ku(e)&&!isNaN(e)&&e<=n&&e>=0}function wR(e,n){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${n}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${a0}\`.`}function bR(e,n){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${n}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${a0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var eN=qb,NR=Kb;const tN=C.forwardRef(({className:e,value:n,...s},c)=>r.jsx(eN,{ref:c,className:Me("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:r.jsx(NR,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`}})}));tN.displayName=eN.displayName;const CR=()=>{const[e,n]=C.useState(!1),[s,c]=C.useState(0),[f,m]=C.useState(new Date().toISOString()),{toast:v}=Un(),N=[{id:1,name:"Database Consistency Check",status:"passed",lastRun:new Date().toISOString(),description:"Validates referential integrity and data consistency",issues:0},{id:2,name:"Data Duplication Check",status:"passed",lastRun:new Date().toISOString(),description:"Scans for duplicate employee records",issues:0},{id:3,name:"Data Format Validation",status:"passed",lastRun:new Date().toISOString(),description:"Validates data format compliance",issues:0},{id:4,name:"Foreign Key Integrity",status:"passed",lastRun:new Date().toISOString(),description:"Checks all foreign key relationships",issues:0},{id:5,name:"Orphaned Records Check",status:"passed",lastRun:new Date().toISOString(),description:"Identifies records without parent relationships",issues:0}],w=()=>{n(!0),c(0);const I=setInterval(()=>{c(O=>O>=100?(clearInterval(I),n(!1),m(new Date().toISOString()),v({title:"Scan Complete",description:"Data integrity scan completed successfully"}),100):O+10)},300)},y=I=>{switch(I){case"passed":return"bg-green-500";case"warning":return"bg-yellow-500";case"failed":return"bg-red-500";default:return"bg-gray-500"}},E=I=>{switch(I){case"passed":return r.jsx(Mc,{className:"h-5 w-5 text-green-500"});case"warning":return r.jsx(ho,{className:"h-5 w-5 text-yellow-500"});case"failed":return r.jsx(ho,{className:"h-5 w-5 text-red-500"});default:return null}};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(vE,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Data Integrity"})]}),r.jsxs(Se,{onClick:w,disabled:e,className:"gap-2",children:[r.jsx(Om,{className:`h-4 w-4 ${e?"animate-spin":""}`}),e?"Scanning...":"Run Integrity Scan"]})]}),e&&r.jsx(Ye,{className:"p-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"Scanning data integrity..."}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[s,"%"]})]}),r.jsx(tN,{value:s})]})}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"System Overview"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Last scan: ",new Date(f).toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:N.filter(I=>I.status==="passed").length}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Passed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:N.filter(I=>I.status==="warning").length}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Warnings"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-red-600",children:N.filter(I=>I.status==="failed").length}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Failed"})]})]})]}),r.jsx("div",{className:"space-y-4",children:N.map(I=>r.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:E(I.status)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("h3",{className:"font-semibold",children:I.name}),r.jsx($r,{className:y(I.status),children:I.status})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:I.description}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Last run: ",new Date(I.lastRun).toLocaleString()]})]}),r.jsx("div",{className:"flex-shrink-0 text-right",children:I.issues>0?r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:I.issues}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Issues Found"})]}):r.jsx(Mc,{className:"h-8 w-8 text-green-500"})})]},I.id))})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(vg,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Integrity Actions"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-2xl",children:[r.jsxs(Se,{variant:"outline",className:"justify-start",children:[r.jsx(Rm,{className:"mr-2 h-4 w-4"}),"Repair Database"]}),r.jsxs(Se,{variant:"outline",className:"justify-start",children:[r.jsx(Om,{className:"mr-2 h-4 w-4"}),"Rebuild Indexes"]}),r.jsxs(Se,{variant:"outline",className:"justify-start",children:[r.jsx(Mc,{className:"mr-2 h-4 w-4"}),"Validate All Records"]}),r.jsxs(Se,{variant:"outline",className:"justify-start",children:[r.jsx(vg,{className:"mr-2 h-4 w-4"}),"Export Integrity Report"]})]})]}),r.jsx(Ye,{className:"p-6 bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Rm,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"About Data Integrity"}),r.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Data integrity ensures the accuracy and consistency of data throughout its lifecycle. Regular integrity checks help prevent data corruption, maintain system reliability, and ensure compliance with data management policies."})]})]})})]})})},ER=()=>{const[e,n]=C.useState(!0),[s,c]=C.useState(!0),[f,m]=C.useState(!0),{toast:v}=Un(),N=[{id:"1",action:"Employee Data Update",user:"admin",timestamp:new Date().toISOString(),signature:"8A3F9D2E...4B7C1A6D",verified:!0},{id:"2",action:"Salary Modification",user:"hr_manager",timestamp:new Date(Date.now()-36e5).toISOString(),signature:"5F2A8B9C...1E4D6A7B",verified:!0},{id:"3",action:"Document Upload",user:"admin",timestamp:new Date(Date.now()-72e5).toISOString(),signature:"9D3E5A2F...7B8C4A1D",verified:!0}],w=()=>{v({title:"Success",description:"Non-repudiation settings updated successfully"})};return r.jsx(ar,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ng,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Non-Repudiation"})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Dm,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Security Features"})]}),r.jsxs("div",{className:"space-y-6 max-w-3xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(wg,{className:"h-4 w-4 text-primary"}),r.jsx(gt,{className:"text-base font-semibold",children:"Digital Signatures"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"All critical operations are digitally signed to ensure authenticity and prevent repudiation"})]}),r.jsx(Ii,{checked:e,onCheckedChange:n})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(cs,{className:"h-4 w-4 text-primary"}),r.jsx(gt,{className:"text-base font-semibold",children:"Trusted Timestamping"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Add cryptographically secure timestamps to all transactions"})]}),r.jsx(Ii,{checked:s,onCheckedChange:c})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(NE,{className:"h-4 w-4 text-primary"}),r.jsx(gt,{className:"text-base font-semibold",children:"Transaction Logging"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Maintain immutable logs of all user actions and system transactions"})]}),r.jsx(Ii,{checked:f,onCheckedChange:m})]})]})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(wg,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Recent Signed Transactions"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Action"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"User"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Timestamp"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Digital Signature"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Status"})]})}),r.jsx("tbody",{children:N.map(y=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-4 font-medium",children:y.action}),r.jsx("td",{className:"py-3 px-4",children:y.user}),r.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(y.timestamp).toLocaleString()}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded font-mono",children:y.signature})}),r.jsx("td",{className:"py-3 px-4",children:y.verified?r.jsxs($r,{className:"bg-green-500 gap-1",children:[r.jsx(Mc,{className:"h-3 w-3"}),"Verified"]}):r.jsx($r,{variant:"destructive",children:"Unverified"})})]},y.id))})]})})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Dm,{className:"h-5 w-5 text-primary"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Certificate Management"})]}),r.jsxs("div",{className:"space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Certificate Issuer"}),r.jsx(Te,{value:"HRMS Certificate Authority",disabled:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Certificate Valid Until"}),r.jsx(Te,{value:"2026-12-31",disabled:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{children:"Certificate Fingerprint"}),r.jsx(Te,{value:"SHA256: A1:B2:C3:D4:E5:F6:07:08:09:10:11:12:13:14:15:16",className:"font-mono text-sm",disabled:!0})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Se,{variant:"outline",children:"Renew Certificate"}),r.jsx(Se,{variant:"outline",children:"Export Certificate"})]})]})]}),r.jsx(Ye,{className:"p-6 bg-purple-50 dark:bg-purple-950 border-purple-200 dark:border-purple-800",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Ng,{className:"h-5 w-5 text-purple-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"About Non-Repudiation"}),r.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Non-repudiation ensures that a party cannot deny having performed an action. This is achieved through digital signatures, timestamps, and immutable audit trails. These mechanisms provide legal proof of data origin and integrity, essential for compliance and security."})]})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Se,{onClick:w,className:"px-8",children:"Save Settings"}),r.jsx(Se,{variant:"outline",children:"View Security Report"})]})]})})},jc="https://bbaec9682261.ngrok-free.app",SR=()=>{const{user:e}=Vs(),{toast:n}=Un(),[s,c]=lw(),f=s.get("changePassword")==="true"||e?.passwordResetRequired,[m,v]=C.useState(e?.fullName||""),[N,w]=C.useState(e?.email||""),[y,E]=C.useState(""),[I,O]=C.useState(""),[_,k]=C.useState(""),[R,P]=C.useState(""),[H,z]=C.useState(""),[F,Z]=C.useState(""),[W,te]=C.useState(null),[G,J]=C.useState(!1),se=()=>{const ge=new Date().toISOString().split("T")[0];return{id:String(W?.id||"sample-employee"),employeeId:W?.employeeId||e?.employeeId||"25-GPC-0000",firstName:W?.firstName||"",middleName:W?.middleName||"",lastName:W?.lastName||"",suffixName:W?.suffixName||"",fullName:W?.fullName||e?.fullName||"Sample Employee",department:W?.department||"Human Resources",position:W?.position||"Staff",email:W?.email||e?.email||"sample@gpc.edu.ph",phone:W?.phone||"N/A",dateOfBirth:W?.dateOfBirth||"1990-01-01",address:W?.address||"San Vicente, Palawan",gender:W?.gender||"N/A",civilStatus:W?.civilStatus||"N/A",dateHired:W?.dateHired||ge,dateOfLeaving:W?.dateOfLeaving||"",employmentType:W?.employmentType||"Regular",role:W?.role||e?.role,sssNumber:W?.sssNumber||"",pagibigNumber:W?.pagibigNumber||"",tinNumber:W?.tinNumber||"",emergencyContact:W?.emergencyContact||"",educationalBackground:W?.educationalBackground||"",signatureFile:W?.signatureFile||"",pdsFile:W?.pdsFile||"",serviceRecordFile:W?.serviceRecordFile||"",registeredFaceFile:W?.registeredFaceFile||"",status:W?.status||"active",archivedReason:W?.archivedReason,archivedDate:W?.archivedDate,createdAt:W?.createdAt||new Date().toISOString(),updatedAt:W?.updatedAt||new Date().toISOString()}},fe=ge=>{if(!e)return;const re=se(),q=ge==="pds"?zb(re):Vb(re),U=window.open("","_blank");U&&(U.document.write(q),U.document.close(),U.focus(),setTimeout(()=>{try{U.print()}catch(K){console.error("Unable to open print dialog",K)}},400))};C.useEffect(()=>{(async()=>{if(e?.employeeId)try{const re=await St(`${jc}/employees?employeeId=${e.employeeId}`);if(re.ok){const q=await re.json();if(q.data&&q.data.length>0){const U=q.data[0];te(U),E(U.phone||""),O(U.address||""),v(U.fullName||e.fullName||""),w(U.email||e.email||"")}}}catch(re){console.error("Error fetching employee data",re)}})()},[e]),C.useEffect(()=>{e&&(v(e.fullName||""),w(e.email||""))},[e]);const Ee=ge=>{ge.preventDefault(),n({title:"Success",description:"Profile updated successfully"})},ue=async ge=>{if(ge.preventDefault(),H!==F){n({variant:"destructive",title:"Error",description:"New passwords do not match"});return}if(H.length<6){n({variant:"destructive",title:"Error",description:"Password must be at least 6 characters"});return}try{const re="https://bbaec9682261.ngrok-free.app",q=localStorage.getItem("hrms_token")||localStorage.getItem("token"),U=await St(`${re}/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({currentPassword:R,newPassword:H})}),K=await U.json();if(!U.ok)throw new Error(K.message||"Failed to change password");if(n({title:"Success",description:"Password changed successfully"}),P(""),z(""),Z(""),e?.passwordResetRequired){const ne=localStorage.getItem("hrms_user");if(ne)try{const oe=JSON.parse(ne);oe.passwordResetRequired=!1,localStorage.setItem("hrms_user",JSON.stringify(oe))}catch(oe){console.error("Failed to update stored user",oe)}c({}),setTimeout(()=>{window.location.reload()},1e3)}}catch(re){console.error("Change password error",re),n({variant:"destructive",title:"Error",description:re instanceof Error?re.message:"Unable to change password. Please try again."})}};return r.jsxs(ar,{children:[r.jsx(kn,{open:f,onOpenChange:ge=>{!ge&&e?.passwordResetRequired||c({})},children:r.jsxs(An,{className:"sm:max-w-md",onPointerDownOutside:ge=>{e?.passwordResetRequired&&ge.preventDefault()},children:[r.jsxs(Pn,{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:r.jsx(ho,{className:"h-5 w-5 text-orange-600"})}),r.jsx(In,{children:"Password Change Required"})]}),r.jsx(dr,{children:"Your password has been reset by an administrator. Please change your password to continue."})]}),r.jsxs("form",{onSubmit:ue,className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"forceCurrentPassword",children:"Current Password"}),r.jsx(Te,{id:"forceCurrentPassword",type:"password",value:R,onChange:ge=>P(ge.target.value),placeholder:"Enter temporary password",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"forceNewPassword",children:"New Password"}),r.jsx(Te,{id:"forceNewPassword",type:"password",value:H,onChange:ge=>z(ge.target.value),placeholder:"Enter new password (min. 6 characters)",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"forceConfirmPassword",children:"Confirm New Password"}),r.jsx(Te,{id:"forceConfirmPassword",type:"password",value:F,onChange:ge=>Z(ge.target.value),placeholder:"Confirm new password",required:!0})]}),r.jsx(Se,{type:"submit",className:"w-full",disabled:!R||!H||!F,children:"Change Password"})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Lc,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Profile"})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[r.jsx("div",{className:"flex flex-col items-center gap-3",children:W?.qrCodeData?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-primary cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>J(!0),title:"Click to view fullscreen",children:r.jsx(Gc,{id:"employee-qr-code",value:W.qrCodeData,size:150,level:"H",includeMargin:!0})}),r.jsx(Se,{size:"sm",variant:"outline",className:"w-full",onClick:()=>{const ge=document.getElementById("employee-qr-code");if(!ge)return;const re=new XMLSerializer().serializeToString(ge),q=document.createElement("canvas"),U=q.getContext("2d"),K=new Image;K.onload=()=>{q.width=300,q.height=300,U?.drawImage(K,0,0,300,300);const ne=q.toDataURL("image/png"),oe=document.createElement("a");oe.download=`QR-${W.employeeId}.png`,oe.href=ne,oe.click()},K.src="data:image/svg+xml;base64,"+btoa(re)},children:"Download QR"})]}):r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(n0,{className:"w-24 h-24",children:r.jsx(r0,{className:"text-2xl bg-primary text-primary-foreground",children:e?.fullName?.charAt(0)||"A"})}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"No QR Code"})]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-1",children:W?.fullName||e?.fullName}),r.jsx("p",{className:"text-muted-foreground capitalize mb-1",children:e?.role}),W?.department&&r.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:["Department: ",W.department]}),W?.position&&r.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Position: ",W.position]})]})]}),r.jsxs("form",{onSubmit:Ee,className:"space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"fullName",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lc,{className:"h-4 w-4"}),"Full Name"]})}),r.jsx(Te,{id:"fullName",value:m,onChange:ge=>v(ge.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"email",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hE,{className:"h-4 w-4"}),"Email"]})}),r.jsx(Te,{id:"email",type:"email",value:N,onChange:ge=>w(ge.target.value),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"phone",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gE,{className:"h-4 w-4"}),"Phone"]})}),r.jsx(Te,{id:"phone",type:"tel",value:y,onChange:ge=>E(ge.target.value),placeholder:"e.g., +63 912 345 6789"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"role",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_c,{className:"h-4 w-4"}),"Role"]})}),r.jsx(Te,{id:"role",value:e?.role,disabled:!0,className:"capitalize"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"address",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mE,{className:"h-4 w-4"}),"Address"]})}),r.jsx(Te,{id:"address",value:I,onChange:ge=>O(ge.target.value),placeholder:"e.g., San Vicente, Palawan"})]})]})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Change Password"}),r.jsxs("form",{onSubmit:ue,className:"space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"currentPassword",children:"Current Password"}),r.jsx(Te,{id:"currentPassword",type:"password",value:R,onChange:ge=>P(ge.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"newPassword",children:"New Password"}),r.jsx(Te,{id:"newPassword",type:"password",value:H,onChange:ge=>z(ge.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(gt,{htmlFor:"confirmPassword",children:"Confirm New Password"}),r.jsx(Te,{id:"confirmPassword",type:"password",value:F,onChange:ge=>Z(ge.target.value),required:!0})]}),r.jsx(Se,{type:"submit",className:"px-8",children:"Change Password"})]})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"My Documents"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"h-5 w-5 text-primary"}),r.jsx("h3",{className:"font-medium",children:"Personal Data Sheet (PDS)"})]})}),W?.pdsFile?r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{const ge=`${jc}/uploads/${W.pdsFile}`;window.open(ge,"_blank")},children:[r.jsx(Ei,{className:"h-4 w-4 mr-2"}),"View"]}),r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{const ge=`${jc}/uploads/${W.pdsFile}`,re=document.createElement("a");re.href=ge,re.download=`PDS_${W.employeeId||"document"}.pdf`,document.body.appendChild(re),re.click(),document.body.removeChild(re)},children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Download"]})]}):r.jsx("div",{className:"space-y-2",children:r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>fe("pds"),children:[r.jsx(Ei,{className:"h-4 w-4 mr-2"}),"View"]})})]}),r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"h-5 w-5 text-primary"}),r.jsx("h3",{className:"font-medium",children:"Service Record"})]})}),W?.serviceRecordFile?r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{const ge=`${jc}/uploads/${W.serviceRecordFile}`;window.open(ge,"_blank")},children:[r.jsx(Ei,{className:"h-4 w-4 mr-2"}),"View"]}),r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{const ge=`${jc}/uploads/${W.serviceRecordFile}`,re=document.createElement("a");re.href=ge,re.download=`ServiceRecord_${W.employeeId||"document"}.pdf`,document.body.appendChild(re),re.click(),document.body.removeChild(re)},children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Download"]})]}):r.jsx("div",{className:"space-y-2",children:r.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>fe("serviceRecord"),children:[r.jsx(Ei,{className:"h-4 w-4 mr-2"}),"View"]})})]})]})]}),r.jsxs(Ye,{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Account Information"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gy,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:"Member since:"}),r.jsx("span",{className:"font-medium",children:W?.createdAt?new Date(W.createdAt).toLocaleDateString():new Date().toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lc,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),r.jsx("span",{className:"font-medium",children:e?.id})]}),e?.employeeId&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_c,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:"Employee ID:"}),r.jsx("span",{className:"font-medium",children:e.employeeId})]}),W?.department&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_c,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:"Department:"}),r.jsx("span",{className:"font-medium",children:W.department})]}),W?.position&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_c,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:"Designation:"}),r.jsx("span",{className:"font-medium",children:W.position})]})]})]})]}),r.jsx(kn,{open:G,onOpenChange:J,children:r.jsxs(An,{className:"max-w-md",children:[r.jsxs(Pn,{children:[r.jsx(In,{children:"Employee QR Code"}),r.jsx(dr,{children:"Scan this QR code for attendance"})]}),r.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg",children:W?.qrCodeData&&r.jsx(Gc,{value:W.qrCodeData,size:350,level:"H",includeMargin:!0})}),r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"font-semibold text-lg",children:W?.fullName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",W?.employeeId]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:W?.position})]}),r.jsx(Se,{variant:"outline",className:"w-full",onClick:()=>{const ge=document.querySelector(".bg-white svg");if(!ge)return;const re=new XMLSerializer().serializeToString(ge),q=document.createElement("canvas"),U=q.getContext("2d"),K=new Image;K.onload=()=>{q.width=400,q.height=400,U?.drawImage(K,0,0,400,400);const ne=q.toDataURL("image/png"),oe=document.createElement("a");oe.download=`QR-${W.employeeId}-${W.fullName}.png`,oe.href=ne,oe.click()},K.src="data:image/svg+xml;base64,"+btoa(re)},children:"Download QR Code"})]})]})})]})},AR=()=>{const e=Ao();return C.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),r.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),r.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},IR=()=>{const{user:e,isAuthenticated:n}=Vs();if(!n||!e)return r.jsx(Fc,{to:"/login",replace:!0});let s="/employee/dashboard";return e.role==="admin"?s="/dashboard":e.role==="guard"&&(s="/guard/dashboard"),r.jsx(Fc,{to:s,replace:!0})};var et;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var Gx=new Map([[et.QR_CODE,"QR_CODE"],[et.AZTEC,"AZTEC"],[et.CODABAR,"CODABAR"],[et.CODE_39,"CODE_39"],[et.CODE_93,"CODE_93"],[et.CODE_128,"CODE_128"],[et.DATA_MATRIX,"DATA_MATRIX"],[et.MAXICODE,"MAXICODE"],[et.ITF,"ITF"],[et.EAN_13,"EAN_13"],[et.EAN_8,"EAN_8"],[et.PDF_417,"PDF_417"],[et.RSS_14,"RSS_14"],[et.RSS_EXPANDED,"RSS_EXPANDED"],[et.UPC_A,"UPC_A"],[et.UPC_E,"UPC_E"],[et.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Xx;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Xx||(Xx={}));function jR(e){return Object.values(et).includes(e)}var Ju;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ju||(Ju={}));var TR=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Ju.SCAN_TYPE_CAMERA,Ju.SCAN_TYPE_FILE],e})(),nN=(function(){function e(n,s){this.format=n,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!Gx.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,Gx.get(n))},e})(),Yx=(function(){function e(){}return e.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e})(),fp;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(fp||(fp={}));var RR=(function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:fp.UNKWOWN_ERROR}},e})(),_R=(function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e})();function za(e){return typeof e>"u"||e===null}var ol=(function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),rN=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var c=typeof n;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var f=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(f),v=Object.keys(n),N=0,w=v;N<w.length;N++){var y=w[N];if(m.has(y))return s.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e})(),kc={exports:{}},DR=kc.exports,Zx;function OR(){return Zx||(Zx=1,(function(e,n){(function(s,c){c(n)})(DR,(function(s){function c(M){return M==null}var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,t){M.__proto__=t}||function(M,t){for(var i in t)t.hasOwnProperty(i)&&(M[i]=t[i])};function m(M,t){f(M,t);function i(){this.constructor=M}M.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function v(M,t){var i=Object.setPrototypeOf;i?i(M,t):M.__proto__=t}function N(M,t){t===void 0&&(t=M.constructor);var i=Error.captureStackTrace;i&&i(M,t)}var w=(function(M){m(t,M);function t(i){var o=this.constructor,d=M.call(this,i)||this;return Object.defineProperty(d,"name",{value:o.name,enumerable:!1}),v(d,o.prototype),N(d),d}return t})(Error);class y extends w{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}y.kind="Exception";class E extends y{}E.kind="ArgumentException";class I extends y{}I.kind="IllegalArgumentException";class O{constructor(t){if(this.binarizer=t,t===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,o,d){const u=this.binarizer.getLuminanceSource().crop(t,i,o,d);return new O(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class _ extends y{static getChecksumInstance(){return new _}}_.kind="ChecksumException";class k{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(t,i,o,d,u){for(;u--;)o[d++]=t[i++]}static currentTimeMillis(){return Date.now()}}class P extends y{}P.kind="IndexOutOfBoundsException";class H extends P{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}H.kind="ArrayIndexOutOfBoundsException";class z{static fill(t,i){for(let o=0,d=t.length;o<d;o++)t[o]=i}static fillWithin(t,i,o,d){z.rangeCheck(t.length,i,o);for(let u=i;u<o;u++)t[u]=d}static rangeCheck(t,i,o){if(i>o)throw new I("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new H(i);if(o>t)throw new H(o)}static asList(...t){return t}static create(t,i,o){return Array.from({length:t}).map(u=>Array.from({length:i}).fill(o))}static createInt32Array(t,i,o){return Array.from({length:t}).map(u=>Int32Array.from({length:i}).fill(o))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let o=0,d=t.length;o<d;o++)if(t[o]!==i[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const o of t)i=31*i+o;return i}static fillUint8Array(t,i){for(let o=0;o!==t.length;o++)t[o]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const o=new Uint8Array(i);return o.set(t),o}return t.slice(0,i)}static copyOfRange(t,i,o){const d=o-i,u=new Int32Array(d);return R.arraycopy(t,i,u,0,d),u}static binarySearch(t,i,o){o===void 0&&(o=z.numberComparator);let d=0,u=t.length-1;for(;d<=u;){const h=u+d>>1,g=o(i,t[h]);if(g>0)d=h+1;else if(g<0)u=h-1;else return h}return-d-1}static numberComparator(t,i){return t-i}}class F{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let o=31;return i=t<<16,i!==0&&(o-=16,t=i),i=t<<8,i!==0&&(o-=8,t=i),i=t<<4,i!==0&&(o-=4,t=i),i=t<<2,i!==0&&(o-=2,t=i),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Z{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=Z.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=Z.makeArray(t);R.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const o=this.bits;let d=Math.floor(t/32),u=o[d];u&=~((1<<(t&31))-1);const h=o.length;for(;u===0;){if(++d===h)return i;u=o[d]}const g=d*32+F.numberOfTrailingZeros(u);return g>i?i:g}getNextUnset(t){const i=this.size;if(t>=i)return i;const o=this.bits;let d=Math.floor(t/32),u=~o[d];u&=~((1<<(t&31))-1);const h=o.length;for(;u===0;){if(++d===h)return i;u=~o[d]}const g=d*32+F.numberOfTrailingZeros(u);return g>i?i:g}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new I;if(i===t)return;i--;const o=Math.floor(t/32),d=Math.floor(i/32),u=this.bits;for(let h=o;h<=d;h++){const g=h>o?0:t&31,S=(2<<(h<d?31:i&31))-(1<<g);u[h]|=S}}clear(){const t=this.bits.length,i=this.bits;for(let o=0;o<t;o++)i[o]=0}isRange(t,i,o){if(i<t||t<0||i>this.size)throw new I;if(i===t)return!0;i--;const d=Math.floor(t/32),u=Math.floor(i/32),h=this.bits;for(let g=d;g<=u;g++){const b=g>d?0:t&31,D=(2<<(g<u?31:i&31))-(1<<b)&4294967295;if((h[g]&D)!==(o?D:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new I("Sizes don't match");const i=this.bits;for(let o=0,d=i.length;o<d;o++)i[o]^=t.bits[o]}toBytes(t,i,o,d){for(let u=0;u<d;u++){let h=0;for(let g=0;g<8;g++)this.get(t)&&(h|=1<<7-g),t++;i[o+u]=h}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,d=this.bits;for(let u=0;u<o;u++){let h=d[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,t[i-u]=h}if(this.size!==o*32){const u=o*32-this.size;let h=t[0]>>>u;for(let g=1;g<o;g++){const b=t[g];h|=b<<32-u,t[g-1]=h,h=b>>>u}t[o-1]=h}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof Z))return!1;const i=t;return this.size===i.size&&z.equals(this.bits,i.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let t="";for(let i=0,o=this.size;i<o;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new Z(this.size,this.bits.slice())}}var W;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));var te=W;class G extends y{static getFormatInstance(){return new G}}G.kind="FormatException";var J;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(J||(J={}));class se{constructor(t,i,o,...d){this.valueIdentifier=t,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=d,se.VALUE_IDENTIFIER_TO_ECI.set(t,this),se.NAME_TO_ECI.set(o,this);const u=this.values;for(let h=0,g=u.length;h!==g;h++){const b=u[h];se.VALUES_TO_ECI.set(b,this)}for(const h of d)se.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new G("incorect value");const i=se.VALUES_TO_ECI.get(t);if(i===void 0)throw new G("incorect value");return i}static getCharacterSetECIByName(t){const i=se.NAME_TO_ECI.get(t);if(i===void 0)throw new G("incorect value");return i}equals(t){if(!(t instanceof se))return!1;const i=t;return this.getName()===i.getName()}}se.VALUE_IDENTIFIER_TO_ECI=new Map,se.VALUES_TO_ECI=new Map,se.NAME_TO_ECI=new Map,se.Cp437=new se(J.Cp437,Int32Array.from([0,2]),"Cp437"),se.ISO8859_1=new se(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),se.ISO8859_2=new se(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),se.ISO8859_3=new se(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),se.ISO8859_4=new se(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),se.ISO8859_5=new se(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),se.ISO8859_6=new se(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),se.ISO8859_7=new se(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),se.ISO8859_8=new se(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),se.ISO8859_9=new se(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),se.ISO8859_10=new se(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),se.ISO8859_11=new se(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),se.ISO8859_13=new se(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),se.ISO8859_14=new se(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),se.ISO8859_15=new se(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),se.ISO8859_16=new se(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),se.SJIS=new se(J.SJIS,20,"SJIS","Shift_JIS"),se.Cp1250=new se(J.Cp1250,21,"Cp1250","windows-1250"),se.Cp1251=new se(J.Cp1251,22,"Cp1251","windows-1251"),se.Cp1252=new se(J.Cp1252,23,"Cp1252","windows-1252"),se.Cp1256=new se(J.Cp1256,24,"Cp1256","windows-1256"),se.UnicodeBigUnmarked=new se(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),se.UTF8=new se(J.UTF8,26,"UTF8","UTF-8"),se.ASCII=new se(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),se.Big5=new se(J.Big5,28,"Big5"),se.GB18030=new se(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),se.EUC_KR=new se(J.EUC_KR,30,"EUC_KR","EUC-KR");class fe extends y{}fe.kind="UnsupportedOperationException";class Ee{static decode(t,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!Ee.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof se?t:se.getCharacterSetECIByName(t)}static decodeFallback(t,i){const o=this.encodingCharacterSet(i);if(Ee.isDecodeFallbackSupported(o)){let d="";for(let u=0,h=t.length;u<h;u++){let g=t[u].toString(16);g.length<2&&(g="0"+g),d+="%"+g}return decodeURIComponent(d)}if(o.equals(se.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new fe(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(se.UTF8)||t.equals(se.ISO8859_1)||t.equals(se.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),d=[];for(let u=0;u<o.length;u++)d.push(o[u].charCodeAt(0));return new Uint8Array(d)}}class ue{static castAsNonUtf8Char(t,i=null){const o=i?i.getName():this.ISO88591;return Ee.decode(new Uint8Array([t]),o)}static guessEncoding(t,i){if(i!=null&&i.get(te.CHARACTER_SET)!==void 0)return i.get(te.CHARACTER_SET).toString();const o=t.length;let d=!0,u=!0,h=!0,g=0,b=0,S=0,D=0,L=0,V=0,Y=0,ae=0,ce=0,he=0,be=0;const Ve=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let He=0;He<o&&(d||u||h);He++){const Le=t[He]&255;h&&(g>0?(Le&128)===0?h=!1:g--:(Le&128)!==0&&((Le&64)===0?h=!1:(g++,(Le&32)===0?b++:(g++,(Le&16)===0?S++:(g++,(Le&8)===0?D++:h=!1))))),d&&(Le>127&&Le<160?d=!1:Le>159&&(Le<192||Le===215||Le===247)&&be++),u&&(L>0?Le<64||Le===127||Le>252?u=!1:L--:Le===128||Le===160||Le>239?u=!1:Le>160&&Le<224?(V++,ae=0,Y++,Y>ce&&(ce=Y)):Le>127?(L++,Y=0,ae++,ae>he&&(he=ae)):(Y=0,ae=0))}return h&&g>0&&(h=!1),u&&L>0&&(u=!1),h&&(Ve||b+S+D>0)?ue.UTF8:u&&(ue.ASSUME_SHIFT_JIS||ce>=3||he>=3)?ue.SHIFT_JIS:d&&u?ce===2&&V===2||be*10>=o?ue.SHIFT_JIS:ue.ISO88591:d?ue.ISO88591:u?ue.SHIFT_JIS:h?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let o=-1;function d(h,g,b,S,D,L){if(h==="%%")return"%";if(i[++o]===void 0)return;h=S?parseInt(S.substr(1)):void 0;let V=D?parseInt(D.substr(1)):void 0,Y;switch(L){case"s":Y=i[o];break;case"c":Y=i[o][0];break;case"f":Y=parseFloat(i[o]).toFixed(h);break;case"p":Y=parseFloat(i[o]).toPrecision(h);break;case"e":Y=parseFloat(i[o]).toExponential(h);break;case"x":Y=parseInt(i[o]).toString(V||16);break;case"d":Y=parseFloat(parseInt(i[o],V||10).toPrecision(h)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(V);let ae=parseInt(b),ce=b&&b[0]+""=="0"?"0":" ";for(;Y.length<ae;)Y=g!==void 0?Y+ce:ce+Y;return Y}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,d)}static getBytes(t,i){return Ee.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}ue.SHIFT_JIS=se.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=se.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=se.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class ge{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,o){for(let d=i;i<i+o;d++)this.append(t[d]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class re{constructor(t,i,o,d){if(this.width=t,this.height=i,this.rowSize=o,this.bits=d,i==null&&(i=t),this.height=i,t<1||i<1)throw new I("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,o=t[0].length,d=new re(o,i);for(let u=0;u<i;u++){const h=t[u];for(let g=0;g<o;g++)h[g]&&d.set(g,u)}return d}static parseFromString(t,i,o){if(t===null)throw new I("stringRepresentation cannot be null");const d=new Array(t.length);let u=0,h=0,g=-1,b=0,S=0;for(;S<t.length;)if(t.charAt(S)===`
`||t.charAt(S)==="\r"){if(u>h){if(g===-1)g=u-h;else if(u-h!==g)throw new I("row lengths do not match");h=u,b++}S++}else if(t.substring(S,S+i.length)===i)S+=i.length,d[u]=!0,u++;else if(t.substring(S,S+o.length)===o)S+=o.length,d[u]=!1,u++;else throw new I("illegal character encountered: "+t.substring(S));if(u>h){if(g===-1)g=u-h;else if(u-h!==g)throw new I("row lengths do not match");b++}const D=new re(g,b);for(let L=0;L<u;L++)d[L]&&D.set(Math.floor(L%g),Math.floor(L/g));return D}get(t,i){const o=i*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new I("input matrix dimensions do not match");const i=new Z(Math.floor(this.width/32)+1),o=this.rowSize,d=this.bits;for(let u=0,h=this.height;u<h;u++){const g=u*o,b=t.getRow(u,i).getBitArray();for(let S=0;S<o;S++)d[g+S]^=b[S]}}clear(){const t=this.bits,i=t.length;for(let o=0;o<i;o++)t[o]=0}setRegion(t,i,o,d){if(i<0||t<0)throw new I("Left and top must be nonnegative");if(d<1||o<1)throw new I("Height and width must be at least 1");const u=t+o,h=i+d;if(h>this.height||u>this.width)throw new I("The region must fit inside the matrix");const g=this.rowSize,b=this.bits;for(let S=i;S<h;S++){const D=S*g;for(let L=t;L<u;L++)b[D+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new Z(this.width):i.clear();const o=this.rowSize,d=this.bits,u=t*o;for(let h=0;h<o;h++)i.setBulk(h*32,d[u+h]);return i}setRow(t,i){R.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let o=new Z(t),d=new Z(t);for(let u=0,h=Math.floor((i+1)/2);u<h;u++)o=this.getRow(u,o),d=this.getRow(i-1-u,d),o.reverse(),d.reverse(),this.setRow(u,d),this.setRow(i-1-u,o)}getEnclosingRectangle(){const t=this.width,i=this.height,o=this.rowSize,d=this.bits;let u=t,h=i,g=-1,b=-1;for(let S=0;S<i;S++)for(let D=0;D<o;D++){const L=d[S*o+D];if(L!==0){if(S<h&&(h=S),S>b&&(b=S),D*32<u){let V=0;for(;(L<<31-V&4294967295)===0;)V++;D*32+V<u&&(u=D*32+V)}if(D*32+31>g){let V=31;for(;!(L>>>V);)V--;D*32+V>g&&(g=D*32+V)}}}return g<u||b<h?null:Int32Array.from([u,h,g-u+1,b-h+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const d=o/t;let u=o%t*32;const h=i[o];let g=0;for(;(h<<31-g&4294967295)===0;)g++;return u+=g,Int32Array.from([u,d])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const d=Math.floor(o/t);let u=Math.floor(o%t)*32;const h=i[o];let g=31;for(;!(h>>>g);)g--;return u+=g,Int32Array.from([u,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof re))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&z.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+z.hashCode(this.bits),t}toString(t="X ",i="  ",o=`
`){return this.buildToString(t,i,o)}buildToString(t,i,o){let d=new ge;for(let u=0,h=this.height;u<h;u++){for(let g=0,b=this.width;g<b;g++)d.append(this.get(g,u)?t:i);d.append(o)}return d.toString()}clone(){return new re(this.width,this.height,this.rowSize,this.bits.slice())}}class q extends y{static getNotFoundInstance(){return new q}}q.kind="NotFoundException";class U extends k{constructor(t){super(t),this.luminances=U.EMPTY,this.buckets=new Int32Array(U.LUMINANCE_BUCKETS)}getBlackRow(t,i){const o=this.getLuminanceSource(),d=o.getWidth();i==null||i.getSize()<d?i=new Z(d):i.clear(),this.initArrays(d);const u=o.getRow(t,this.luminances),h=this.buckets;for(let b=0;b<d;b++)h[(u[b]&255)>>U.LUMINANCE_SHIFT]++;const g=U.estimateBlackPoint(h);if(d<3)for(let b=0;b<d;b++)(u[b]&255)<g&&i.set(b);else{let b=u[0]&255,S=u[1]&255;for(let D=1;D<d-1;D++){const L=u[D+1]&255;(S*4-b-L)/2<g&&i.set(D),b=S,S=L}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),o=t.getHeight(),d=new re(i,o);this.initArrays(i);const u=this.buckets;for(let b=1;b<5;b++){const S=Math.floor(o*b/5),D=t.getRow(S,this.luminances),L=Math.floor(i*4/5);for(let V=Math.floor(i/5);V<L;V++){const Y=D[V]&255;u[Y>>U.LUMINANCE_SHIFT]++}}const h=U.estimateBlackPoint(u),g=t.getMatrix();for(let b=0;b<o;b++){const S=b*i;for(let D=0;D<i;D++)(g[S+D]&255)<h&&d.set(D,b)}return d}createBinarizer(t){return new U(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let o=0;o<U.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(t){const i=t.length;let o=0,d=0,u=0;for(let D=0;D<i;D++)t[D]>u&&(d=D,u=t[D]),t[D]>o&&(o=t[D]);let h=0,g=0;for(let D=0;D<i;D++){const L=D-d,V=t[D]*L*L;V>g&&(h=D,g=V)}if(d>h){const D=d;d=h,h=D}if(h-d<=i/16)throw new q;let b=h-1,S=-1;for(let D=h-1;D>d;D--){const L=D-d,V=L*L*(h-D)*(o-t[D]);V>S&&(b=D,S=V)}return b<<U.LUMINANCE_SHIFT}}U.LUMINANCE_BITS=5,U.LUMINANCE_SHIFT=8-U.LUMINANCE_BITS,U.LUMINANCE_BUCKETS=1<<U.LUMINANCE_BITS,U.EMPTY=Uint8ClampedArray.from([0]);class K extends U{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),o=t.getHeight();if(i>=K.MINIMUM_DIMENSION&&o>=K.MINIMUM_DIMENSION){const d=t.getMatrix();let u=i>>K.BLOCK_SIZE_POWER;(i&K.BLOCK_SIZE_MASK)!==0&&u++;let h=o>>K.BLOCK_SIZE_POWER;(o&K.BLOCK_SIZE_MASK)!==0&&h++;const g=K.calculateBlackPoints(d,u,h,i,o),b=new re(i,o);K.calculateThresholdForBlock(d,u,h,i,o,g,b),this.matrix=b}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new K(t)}static calculateThresholdForBlock(t,i,o,d,u,h,g){const b=u-K.BLOCK_SIZE,S=d-K.BLOCK_SIZE;for(let D=0;D<o;D++){let L=D<<K.BLOCK_SIZE_POWER;L>b&&(L=b);const V=K.cap(D,2,o-3);for(let Y=0;Y<i;Y++){let ae=Y<<K.BLOCK_SIZE_POWER;ae>S&&(ae=S);const ce=K.cap(Y,2,i-3);let he=0;for(let Ve=-2;Ve<=2;Ve++){const He=h[V+Ve];he+=He[ce-2]+He[ce-1]+He[ce]+He[ce+1]+He[ce+2]}const be=he/25;K.thresholdBlock(t,ae,L,be,d,g)}}}static cap(t,i,o){return t<i?i:t>o?o:t}static thresholdBlock(t,i,o,d,u,h){for(let g=0,b=o*u+i;g<K.BLOCK_SIZE;g++,b+=u)for(let S=0;S<K.BLOCK_SIZE;S++)(t[b+S]&255)<=d&&h.set(i+S,o+g)}static calculateBlackPoints(t,i,o,d,u){const h=u-K.BLOCK_SIZE,g=d-K.BLOCK_SIZE,b=new Array(o);for(let S=0;S<o;S++){b[S]=new Int32Array(i);let D=S<<K.BLOCK_SIZE_POWER;D>h&&(D=h);for(let L=0;L<i;L++){let V=L<<K.BLOCK_SIZE_POWER;V>g&&(V=g);let Y=0,ae=255,ce=0;for(let be=0,Ve=D*d+V;be<K.BLOCK_SIZE;be++,Ve+=d){for(let He=0;He<K.BLOCK_SIZE;He++){const Le=t[Ve+He]&255;Y+=Le,Le<ae&&(ae=Le),Le>ce&&(ce=Le)}if(ce-ae>K.MIN_DYNAMIC_RANGE)for(be++,Ve+=d;be<K.BLOCK_SIZE;be++,Ve+=d)for(let He=0;He<K.BLOCK_SIZE;He++)Y+=t[Ve+He]&255}let he=Y>>K.BLOCK_SIZE_POWER*2;if(ce-ae<=K.MIN_DYNAMIC_RANGE&&(he=ae/2,S>0&&L>0)){const be=(b[S-1][L]+2*b[S][L-1]+b[S-1][L-1])/4;ae<be&&(he=be)}b[S][L]=he}}return b}}K.BLOCK_SIZE_POWER=3,K.BLOCK_SIZE=1<<K.BLOCK_SIZE_POWER,K.BLOCK_SIZE_MASK=K.BLOCK_SIZE-1,K.MINIMUM_DIMENSION=K.BLOCK_SIZE*5,K.MIN_DYNAMIC_RANGE=24;class ne{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,o,d){throw new fe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new fe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new fe("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new ge;for(let o=0;o<this.height;o++){const d=this.getRow(o,t);for(let u=0;u<this.width;u++){const h=d[u]&255;let g;h<64?g="#":h<128?g="+":h<192?g=".":g=" ",i.append(g)}i.append(`
`)}return i.toString()}}class oe extends ne{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const o=this.delegate.getRow(t,i),d=this.getWidth();for(let u=0;u<d;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let d=0;d<i;d++)o[d]=255-(t[d]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,o,d){return new oe(this.delegate.crop(t,i,o,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new oe(this.delegate.rotateCounterClockwise45())}}class we extends ne{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return we.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,o){const d=new Uint8ClampedArray(i*o);for(let u=0,h=0,g=t.length;u<g;u+=4,h++){let b;if(t[u+3]===0)b=255;else{const D=t[u],L=t[u+1],V=t[u+2];b=306*D+601*L+117*V+512>>10}d[h]=b}return d}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth(),d=t*o;return i===null?i=this.buffer.slice(d,d+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(d,d+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,o,d){return super.crop(t,i,o,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),o=i.getContext("2d"),d=t*we.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(d))*u+Math.abs(Math.sin(d))*h),b=Math.ceil(Math.abs(Math.sin(d))*u+Math.abs(Math.cos(d))*h);return i.width=g,i.height=b,o.translate(g/2,b/2),o.rotate(d),o.drawImage(this.canvas,u/-2,h/-2),this.buffer=we.makeBufferFromCanvasImageData(i),this}invert(){return new oe(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(t,i,o){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ie=(globalThis||fu||self||window||void 0)&&(globalThis||fu||self||window||void 0).__awaiter||function(M,t,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(D){try{S(o.next(D))}catch(L){h(L)}}function b(D){try{S(o.throw(D))}catch(L){h(L)}}function S(D){D.done?u(D.value):d(D.value).then(g,b)}S((o=o.apply(M,t||[])).next())})};class je{constructor(t,i=500,o){this.reader=t,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ie(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of t){const d=o.kind==="video"?"videoinput":o.kind;if(d!=="videoinput")continue;const u=o.deviceId||o.id,h=o.label||`Video device ${i.length+1}`,g=o.groupId,b={deviceId:u,label:h,kind:d,groupId:g};i.push(b)}return i})}getVideoInputDevices(){return ie(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new X(i.deviceId,i.label))})}findDeviceById(t){return ie(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return ie(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return ie(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const d={video:o};return yield this.decodeOnceFromConstraints(d,i)})}decodeOnceFromConstraints(t,i){return ie(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(t,i){return ie(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,i,o){return ie(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,o)})}decodeFromVideoDevice(t,i,o){return ie(this,void 0,void 0,function*(){let d;t?d={deviceId:{exact:t}}:d={facingMode:"environment"};const u={video:d};return yield this.decodeFromConstraints(u,i,o)})}decodeFromConstraints(t,i,o){return ie(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(d,i,o)})}decodeFromStream(t,i,o){return ie(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(d,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return ie(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((i,o)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ie(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const o=document.getElementById(t);if(!o)throw new E(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new E(`element with id '${t}' must be an ${i} element`);return o}decodeFromImage(t,i){if(!t&&!i)throw new E("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new E("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,o){if(t===void 0&&i===void 0)throw new E("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new E("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(t){if(!t)throw new E("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new E("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=t,o}decodeFromVideoUrl(t){if(!t)throw new E("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=t,o}decodeFromVideoUrlContinuously(t,i){if(!t)throw new E("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(o,i);return o.src=t,d}_decodeOnLoadImage(t){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ie(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return ie(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,o=!0){this._stopAsyncDecode=!1;const d=(u,h)=>{if(this._stopAsyncDecode){h(new q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(t);u(g)}catch(g){const b=i&&g instanceof q,D=(g instanceof _||g instanceof G)&&o;if(b||D)return setTimeout(d,this._timeBetweenDecodingAttempts,u,h);h(g)}};return new Promise((u,h)=>d(u,h))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(t);i(d,null),setTimeout(o,this.timeBetweenScansMillis)}catch(d){i(null,d);const u=d instanceof _||d instanceof G,h=d instanceof q;(u||h)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,o){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),o=new we(i),d=new K(o);return new O(d)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,d;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,d=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,d=t.naturalHeight||t.height)),i.style.width=o+"px",i.style.height=d+"px",i.width=o,i.height=d,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ie{constructor(t,i,o=i==null?0:8*i.length,d,u,h=R.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=o,this.resultPoints=d,this.format=u,this.timestamp=h,this.text=t,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=d,this.format=u,this.resultMetadata=null,h==null?this.timestamp=R.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(i.length+t.length);R.arraycopy(i,0,o,0,i.length),R.arraycopy(t,0,o,i.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var We;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(We||(We={}));var _e=We,Ae;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ae||(Ae={}));var Ue=Ae;class qe{constructor(t,i,o,d,u=-1,h=-1){this.rawBytes=t,this.text=i,this.byteSegments=o,this.ecLevel=d,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class st{exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class me{constructor(t,i){if(i.length===0)throw new I;this.field=t;const o=i.length;if(o>1&&i[0]===0){let d=1;for(;d<o&&i[d]===0;)d++;d===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-d),R.arraycopy(i,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(t===1){o=0;for(let h=0,g=i.length;h!==g;h++){const b=i[h];o=st.addOrSubtract(o,b)}return o}o=i[0];const d=i.length,u=this.field;for(let h=1;h<d;h++)o=st.addOrSubtract(u.multiply(t,o),i[h]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,o=t.coefficients;if(i.length>o.length){const h=i;i=o,o=h}let d=new Int32Array(o.length);const u=o.length-i.length;R.arraycopy(o,0,d,0,u);for(let h=u;h<o.length;h++)d[h]=st.addOrSubtract(i[h-u],o[h]);return new me(this.field,d)}multiply(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,d=t.coefficients,u=d.length,h=new Int32Array(o+u-1),g=this.field;for(let b=0;b<o;b++){const S=i[b];for(let D=0;D<u;D++)h[b+D]=st.addOrSubtract(h[b+D],g.multiply(S,d[D]))}return new me(g,h)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,o=this.field,d=new Int32Array(i),u=this.coefficients;for(let h=0;h<i;h++)d[h]=o.multiply(u[h],t);return new me(o,d)}multiplyByMonomial(t,i){if(t<0)throw new I;if(i===0)return this.field.getZero();const o=this.coefficients,d=o.length,u=new Int32Array(d+t),h=this.field;for(let g=0;g<d;g++)u[g]=h.multiply(o[g],i);return new me(h,u)}divide(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new I("Divide by 0");const i=this.field;let o=i.getZero(),d=this;const u=t.getCoefficient(t.getDegree()),h=i.inverse(u);for(;d.getDegree()>=t.getDegree()&&!d.isZero();){const g=d.getDegree()-t.getDegree(),b=i.multiply(d.getCoefficient(d.getDegree()),h),S=t.multiplyByMonomial(g,b),D=i.buildMonomial(g,b);o=o.addOrSubtract(D),d=d.addOrSubtract(S)}return[o,d]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),i===0||o!==1){const d=this.field.log(o);d===0?t+="1":d===1?t+="a":(t+="a^",t+=d)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class Ze extends y{}Ze.kind="ArithmeticException";class Xe extends st{constructor(t,i,o){super(),this.primitive=t,this.size=i,this.generatorBase=o;const d=new Int32Array(i);let u=1;for(let g=0;g<i;g++)d[g]=u,u*=2,u>=i&&(u^=t,u&=i-1);this.expTable=d;const h=new Int32Array(i);for(let g=0;g<i-1;g++)h[d[g]]=g;this.logTable=h,this.zero=new me(this,Int32Array.from([0])),this.one=new me(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new I;if(i===0)return this.zero;const o=new Int32Array(t+1);return o[0]=i,new me(this,o)}inverse(t){if(t===0)throw new Ze;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Xe.AZTEC_DATA_12=new Xe(4201,4096,1),Xe.AZTEC_DATA_10=new Xe(1033,1024,1),Xe.AZTEC_DATA_6=new Xe(67,64,1),Xe.AZTEC_PARAM=new Xe(19,16,1),Xe.QR_CODE_FIELD_256=new Xe(285,256,0),Xe.DATA_MATRIX_FIELD_256=new Xe(301,256,1),Xe.AZTEC_DATA_8=Xe.DATA_MATRIX_FIELD_256,Xe.MAXICODE_FIELD_64=Xe.AZTEC_DATA_6;class ct extends y{}ct.kind="ReedSolomonException";class Yt extends y{}Yt.kind="IllegalStateException";class on{constructor(t){this.field=t}decode(t,i){const o=this.field,d=new me(o,t),u=new Int32Array(i);let h=!0;for(let Y=0;Y<i;Y++){const ae=d.evaluateAt(o.exp(Y+o.getGeneratorBase()));u[u.length-1-Y]=ae,ae!==0&&(h=!1)}if(h)return;const g=new me(o,u),b=this.runEuclideanAlgorithm(o.buildMonomial(i,1),g,i),S=b[0],D=b[1],L=this.findErrorLocations(S),V=this.findErrorMagnitudes(D,L);for(let Y=0;Y<L.length;Y++){const ae=t.length-1-o.log(L[Y]);if(ae<0)throw new ct("Bad error location");t[ae]=Xe.addOrSubtract(t[ae],V[Y])}}runEuclideanAlgorithm(t,i,o){if(t.getDegree()<i.getDegree()){const Y=t;t=i,i=Y}const d=this.field;let u=t,h=i,g=d.getZero(),b=d.getOne();for(;h.getDegree()>=(o/2|0);){let Y=u,ae=g;if(u=h,g=b,u.isZero())throw new ct("r_{i-1} was zero");h=Y;let ce=d.getZero();const he=u.getCoefficient(u.getDegree()),be=d.inverse(he);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const Ve=h.getDegree()-u.getDegree(),He=d.multiply(h.getCoefficient(h.getDegree()),be);ce=ce.addOrSubtract(d.buildMonomial(Ve,He)),h=h.addOrSubtract(u.multiplyByMonomial(Ve,He))}if(b=ce.multiply(g).addOrSubtract(ae),h.getDegree()>=u.getDegree())throw new Yt("Division algorithm failed to reduce polynomial?")}const S=b.getCoefficient(0);if(S===0)throw new ct("sigmaTilde(0) was zero");const D=d.inverse(S),L=b.multiplyScalar(D),V=h.multiplyScalar(D);return[L,V]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(i);let d=0;const u=this.field;for(let h=1;h<u.getSize()&&d<i;h++)t.evaluateAt(h)===0&&(o[d]=u.inverse(h),d++);if(d!==i)throw new ct("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,i){const o=i.length,d=new Int32Array(o),u=this.field;for(let h=0;h<o;h++){const g=u.inverse(i[h]);let b=1;for(let S=0;S<o;S++)if(h!==S){const D=u.multiply(i[S],g),L=(D&1)===0?D|1:D&-2;b=u.multiply(b,L)}d[h]=u.multiply(t.evaluateAt(g),u.inverse(b)),u.getGeneratorBase()!==0&&(d[h]=u.multiply(d[h],g))}return d}}var T;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(T||(T={}));class Re{decode(t){this.ddata=t;let i=t.getBits(),o=this.extractBits(i),d=this.correctBits(o),u=Re.convertBoolArrayToByteArray(d),h=Re.getEncodedData(d),g=new qe(u,h,null,null);return g.setNumBits(d.length),g}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,o=T.UPPER,d=T.UPPER,u="",h=0;for(;h<i;)if(d===T.BINARY){if(i-h<5)break;let g=Re.readCode(t,h,5);if(h+=5,g===0){if(i-h<11)break;g=Re.readCode(t,h,11)+31,h+=11}for(let b=0;b<g;b++){if(i-h<8){h=i;break}const S=Re.readCode(t,h,8);u+=ue.castAsNonUtf8Char(S),h+=8}d=o}else{let g=d===T.DIGIT?4:5;if(i-h<g)break;let b=Re.readCode(t,h,g);h+=g;let S=Re.getCharacter(d,b);S.startsWith("CTRL_")?(o=d,d=Re.getTable(S.charAt(5)),S.charAt(6)==="L"&&(o=d)):(u+=S,d=o)}return u}static getTable(t){switch(t){case"L":return T.LOWER;case"P":return T.PUNCT;case"M":return T.MIXED;case"D":return T.DIGIT;case"B":return T.BINARY;case"U":default:return T.UPPER}}static getCharacter(t,i){switch(t){case T.UPPER:return Re.UPPER_TABLE[i];case T.LOWER:return Re.LOWER_TABLE[i];case T.MIXED:return Re.MIXED_TABLE[i];case T.PUNCT:return Re.PUNCT_TABLE[i];case T.DIGIT:return Re.DIGIT_TABLE[i];default:throw new Yt("Bad table")}}correctBits(t){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Xe.AZTEC_DATA_10):(o=12,i=Xe.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),u=t.length/o;if(u<d)throw new G;let h=t.length%o,g=new Int32Array(u);for(let V=0;V<u;V++,h+=o)g[V]=Re.readCode(t,h,o);try{new on(i).decode(g,u-d)}catch(V){throw new G(V)}let b=(1<<o)-1,S=0;for(let V=0;V<d;V++){let Y=g[V];if(Y===0||Y===b)throw new G;(Y===1||Y===b-1)&&S++}let D=new Array(d*o-S),L=0;for(let V=0;V<d;V++){let Y=g[V];if(Y===1||Y===b-1)D.fill(Y>1,L,L+o-1),L+=o-1;else for(let ae=o-1;ae>=0;--ae)D[L++]=(Y&1<<ae)!==0}return D}extractBits(t){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),d=(i?11:14)+o*4,u=new Int32Array(d),h=new Array(this.totalBitsInLayer(o,i));if(i)for(let g=0;g<u.length;g++)u[g]=g;else{let g=d+1+2*F.truncDivision(F.truncDivision(d,2)-1,15),b=d/2,S=F.truncDivision(g,2);for(let D=0;D<b;D++){let L=D+F.truncDivision(D,15);u[b-D-1]=S-L-1,u[b+D]=S+L+1}}for(let g=0,b=0;g<o;g++){let S=(o-g)*4+(i?9:12),D=g*2,L=d-1-D;for(let V=0;V<S;V++){let Y=V*2;for(let ae=0;ae<2;ae++)h[b+Y+ae]=t.get(u[D+ae],u[D+V]),h[b+2*S+Y+ae]=t.get(u[D+V],u[L-ae]),h[b+4*S+Y+ae]=t.get(u[L-ae],u[L-V]),h[b+6*S+Y+ae]=t.get(u[L-V],u[D+ae])}b+=S*8}return h}static readCode(t,i,o){let d=0;for(let u=i;u<i+o;u++)d<<=1,t[u]&&(d|=1);return d}static readByte(t,i){let o=t.length-i;return o>=8?Re.readCode(t,i,8):Re.readCode(t,i,o)<<8-o}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let o=0;o<i.length;o++)i[o]=Re.readByte(t,8*o);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Re.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Re.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Re.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Re.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Re.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Be{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,o,d){const u=t-o,h=i-d;return Math.sqrt(u*u+h*h)}static sum(t){let i=0;for(let o=0,d=t.length;o!==d;o++){const u=t[o];i+=u}return i}}class ee{static floatToIntBits(t){return t}}ee.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof pe){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*ee.floatToIntBits(this.x)+ee.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),d=this.distance(t[0],t[2]);let u,h,g;if(o>=i&&o>=d?(h=t[0],u=t[1],g=t[2]):d>=o&&d>=i?(h=t[1],u=t[0],g=t[2]):(h=t[2],u=t[0],g=t[1]),this.crossProductZ(u,h,g)<0){const b=u;u=g,g=b}t[0]=u,t[1]=h,t[2]=g}static distance(t,i){return Be.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,o){const d=i.x,u=i.y;return(o.x-d)*(t.y-u)-(o.y-u)*(t.x-d)}}class at{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class dt extends at{constructor(t,i,o,d,u){super(t,i),this.compact=o,this.nbDatablocks=d,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bt{constructor(t,i,o,d){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Bt.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),d==null&&(d=t.getHeight()/2|0);const u=i/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=d-u,this.downInit=d+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new q}detect(){let t=this.leftInit,i=this.rightInit,o=this.upInit,d=this.downInit,u=!1,h=!0,g=!1,b=!1,S=!1,D=!1,L=!1;const V=this.width,Y=this.height;for(;h;){h=!1;let ae=!0;for(;(ae||!b)&&i<V;)ae=this.containsBlackPoint(o,d,i,!1),ae?(i++,h=!0,b=!0):b||i++;if(i>=V){u=!0;break}let ce=!0;for(;(ce||!S)&&d<Y;)ce=this.containsBlackPoint(t,i,d,!0),ce?(d++,h=!0,S=!0):S||d++;if(d>=Y){u=!0;break}let he=!0;for(;(he||!D)&&t>=0;)he=this.containsBlackPoint(o,d,t,!1),he?(t--,h=!0,D=!0):D||t--;if(t<0){u=!0;break}let be=!0;for(;(be||!L)&&o>=0;)be=this.containsBlackPoint(t,i,o,!0),be?(o--,h=!0,L=!0):L||o--;if(o<0){u=!0;break}h&&(g=!0)}if(!u&&g){const ae=i-t;let ce=null;for(let He=1;ce===null&&He<ae;He++)ce=this.getBlackPointOnSegment(t,d-He,t+He,d);if(ce==null)throw new q;let he=null;for(let He=1;he===null&&He<ae;He++)he=this.getBlackPointOnSegment(t,o+He,t+He,o);if(he==null)throw new q;let be=null;for(let He=1;be===null&&He<ae;He++)be=this.getBlackPointOnSegment(i,o+He,i-He,o);if(be==null)throw new q;let Ve=null;for(let He=1;Ve===null&&He<ae;He++)Ve=this.getBlackPointOnSegment(i,d-He,i-He,d);if(Ve==null)throw new q;return this.centerEdges(Ve,ce,be,he)}else throw new q}getBlackPointOnSegment(t,i,o,d){const u=Be.round(Be.distance(t,i,o,d)),h=(o-t)/u,g=(d-i)/u,b=this.image;for(let S=0;S<u;S++){const D=Be.round(t+S*h),L=Be.round(i+S*g);if(b.get(D,L))return new pe(D,L)}return null}centerEdges(t,i,o,d){const u=t.getX(),h=t.getY(),g=i.getX(),b=i.getY(),S=o.getX(),D=o.getY(),L=d.getX(),V=d.getY(),Y=Bt.CORR;return u<this.width/2?[new pe(L-Y,V+Y),new pe(g+Y,b+Y),new pe(S-Y,D-Y),new pe(u+Y,h-Y)]:[new pe(L+Y,V+Y),new pe(g+Y,b-Y),new pe(S-Y,D+Y),new pe(u-Y,h-Y)]}containsBlackPoint(t,i,o,d){const u=this.image;if(d){for(let h=t;h<=i;h++)if(u.get(h,o))return!0}else for(let h=t;h<=i;h++)if(u.get(o,h))return!0;return!1}}Bt.INIT_SIZE=10,Bt.CORR=1;class Mn{static checkAndNudgePoints(t,i){const o=t.getWidth(),d=t.getHeight();let u=!0;for(let h=0;h<i.length&&u;h+=2){const g=Math.floor(i[h]),b=Math.floor(i[h+1]);if(g<-1||g>o||b<-1||b>d)throw new q;u=!1,g===-1?(i[h]=0,u=!0):g===o&&(i[h]=o-1,u=!0),b===-1?(i[h+1]=0,u=!0):b===d&&(i[h+1]=d-1,u=!0)}u=!0;for(let h=i.length-2;h>=0&&u;h-=2){const g=Math.floor(i[h]),b=Math.floor(i[h+1]);if(g<-1||g>o||b<-1||b>d)throw new q;u=!1,g===-1?(i[h]=0,u=!0):g===o&&(i[h]=o-1,u=!0),b===-1?(i[h+1]=0,u=!0):b===d&&(i[h+1]=d-1,u=!0)}}}class Pt{constructor(t,i,o,d,u,h,g,b,S){this.a11=t,this.a21=i,this.a31=o,this.a12=d,this.a22=u,this.a32=h,this.a13=g,this.a23=b,this.a33=S}static quadrilateralToQuadrilateral(t,i,o,d,u,h,g,b,S,D,L,V,Y,ae,ce,he){const be=Pt.quadrilateralToSquare(t,i,o,d,u,h,g,b);return Pt.squareToQuadrilateral(S,D,L,V,Y,ae,ce,he).times(be)}transformPoints(t){const i=t.length,o=this.a11,d=this.a12,u=this.a13,h=this.a21,g=this.a22,b=this.a23,S=this.a31,D=this.a32,L=this.a33;for(let V=0;V<i;V+=2){const Y=t[V],ae=t[V+1],ce=u*Y+b*ae+L;t[V]=(o*Y+h*ae+S)/ce,t[V+1]=(d*Y+g*ae+D)/ce}}transformPointsWithValues(t,i){const o=this.a11,d=this.a12,u=this.a13,h=this.a21,g=this.a22,b=this.a23,S=this.a31,D=this.a32,L=this.a33,V=t.length;for(let Y=0;Y<V;Y++){const ae=t[Y],ce=i[Y],he=u*ae+b*ce+L;t[Y]=(o*ae+h*ce+S)/he,i[Y]=(d*ae+g*ce+D)/he}}static squareToQuadrilateral(t,i,o,d,u,h,g,b){const S=t-o+u-g,D=i-d+h-b;if(S===0&&D===0)return new Pt(o-t,u-o,t,d-i,h-d,i,0,0,1);{const L=o-u,V=g-u,Y=d-h,ae=b-h,ce=L*ae-V*Y,he=(S*ae-V*D)/ce,be=(L*D-S*Y)/ce;return new Pt(o-t+he*o,g-t+be*g,t,d-i+he*d,b-i+be*b,i,he,be,1)}}static quadrilateralToSquare(t,i,o,d,u,h,g,b){return Pt.squareToQuadrilateral(t,i,o,d,u,h,g,b).buildAdjoint()}buildAdjoint(){return new Pt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Pt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class it extends Mn{sampleGrid(t,i,o,d,u,h,g,b,S,D,L,V,Y,ae,ce,he,be,Ve,He){const Le=Pt.quadrilateralToQuadrilateral(d,u,h,g,b,S,D,L,V,Y,ae,ce,he,be,Ve,He);return this.sampleGridWithTransform(t,i,o,Le)}sampleGridWithTransform(t,i,o,d){if(i<=0||o<=0)throw new q;const u=new re(i,o),h=new Float32Array(2*i);for(let g=0;g<o;g++){const b=h.length,S=g+.5;for(let D=0;D<b;D+=2)h[D]=D/2+.5,h[D+1]=S;d.transformPoints(h),Mn.checkAndNudgePoints(t,h);try{for(let D=0;D<b;D+=2)t.get(Math.floor(h[D]),Math.floor(h[D+1]))&&u.set(D/2,g)}catch{throw new q}}return u}}class vn{static setGridSampler(t){vn.gridSampler=t}static getInstance(){return vn.gridSampler}}vn.gridSampler=new it;class zn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class fr{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(t){let h=o[0];o[0]=o[2],o[2]=h}this.extractParameters(o);let d=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new dt(d,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new q;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(o,i);let d=0;for(let h=0;h<4;h++){let g=o[(this.shift+h)%4];this.compact?(d<<=7,d+=g>>1&127):(d<<=10,d+=(g>>2&992)+(g>>1&31))}let u=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,i){let o=0;t.forEach((d,u,h)=>{let g=(d>>i-2<<1)+(d&1);o=(o<<3)+g}),o=((o&1)<<11)+(o>>1);for(let d=0;d<4;d++)if(F.bitCount(o^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new q}getCorrectedParameterData(t,i){let o,d;i?(o=7,d=2):(o=10,d=4);let u=o-d,h=new Int32Array(o);for(let b=o-1;b>=0;--b)h[b]=t&15,t>>=4;try{new on(Xe.AZTEC_PARAM).decode(h,u)}catch{throw new q}let g=0;for(let b=0;b<d;b++)g=(g<<4)+h[b];return g}getBullsEyeCorners(t){let i=t,o=t,d=t,u=t,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(i,h,1,-1),V=this.getFirstDifferent(o,h,1,1),Y=this.getFirstDifferent(d,h,-1,1),ae=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let ce=this.distancePoint(ae,L)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(ce<.75||ce>1.25||!this.isWhiteOrBlackRectangle(L,V,Y,ae))break}i=L,o=V,d=Y,u=ae,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new q;this.compact=this.nbCenterLayers===5;let g=new pe(i.getX()+.5,i.getY()-.5),b=new pe(o.getX()+.5,o.getY()+.5),S=new pe(d.getX()-.5,d.getY()+.5),D=new pe(u.getX()-.5,u.getY()-.5);return this.expandSquare([g,b,S,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,o,d;try{let g=new Bt(this.image).detect();t=g[0],i=g[1],o=g[2],d=g[3]}catch{let b=this.image.getWidth()/2,S=this.image.getHeight()/2;t=this.getFirstDifferent(new zn(b+7,S-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new zn(b+7,S+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new zn(b-7,S+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new zn(b-7,S-7),!1,-1,-1).toResultPoint()}let u=Be.round((t.getX()+d.getX()+i.getX()+o.getX())/4),h=Be.round((t.getY()+d.getY()+i.getY()+o.getY())/4);try{let g=new Bt(this.image,15,u,h).detect();t=g[0],i=g[1],o=g[2],d=g[3]}catch{t=this.getFirstDifferent(new zn(u+7,h-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new zn(u+7,h+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new zn(u-7,h+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new zn(u-7,h-7),!1,-1,-1).toResultPoint()}return u=Be.round((t.getX()+d.getX()+i.getX()+o.getX())/4),h=Be.round((t.getY()+d.getY()+i.getY()+o.getY())/4),new zn(u,h)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,o,d,u){let h=vn.getInstance(),g=this.getDimension(),b=g/2-this.nbCenterLayers,S=g/2+this.nbCenterLayers;return h.sampleGrid(t,g,g,b,b,S,b,S,S,b,S,i.getX(),i.getY(),o.getX(),o.getY(),d.getX(),d.getY(),u.getX(),u.getY())}sampleLine(t,i,o){let d=0,u=this.distanceResultPoint(t,i),h=u/o,g=t.getX(),b=t.getY(),S=h*(i.getX()-t.getX())/u,D=h*(i.getY()-t.getY())/u;for(let L=0;L<o;L++)this.image.get(Be.round(g+L*S),Be.round(b+L*D))&&(d|=1<<o-L-1);return d}isWhiteOrBlackRectangle(t,i,o,d){let u=3;t=new zn(t.getX()-u,t.getY()+u),i=new zn(i.getX()-u,i.getY()-u),o=new zn(o.getX()+u,o.getY()-u),d=new zn(d.getX()+u,d.getY()+u);let h=this.getColor(d,t);if(h===0)return!1;let g=this.getColor(t,i);return g!==h||(g=this.getColor(i,o),g!==h)?!1:(g=this.getColor(o,d),g===h)}getColor(t,i){let o=this.distancePoint(t,i),d=(i.getX()-t.getX())/o,u=(i.getY()-t.getY())/o,h=0,g=t.getX(),b=t.getY(),S=this.image.get(t.getX(),t.getY()),D=Math.ceil(o);for(let V=0;V<D;V++)g+=d,b+=u,this.image.get(Be.round(g),Be.round(b))!==S&&h++;let L=h/o;return L>.1&&L<.9?0:L<=.1===S?1:-1}getFirstDifferent(t,i,o,d){let u=t.getX()+o,h=t.getY()+d;for(;this.isValid(u,h)&&this.image.get(u,h)===i;)u+=o,h+=d;for(u-=o,h-=d;this.isValid(u,h)&&this.image.get(u,h)===i;)u+=o;for(u-=o;this.isValid(u,h)&&this.image.get(u,h)===i;)h+=d;return h-=d,new zn(u,h)}expandSquare(t,i,o){let d=o/(2*i),u=t[0].getX()-t[2].getX(),h=t[0].getY()-t[2].getY(),g=(t[0].getX()+t[2].getX())/2,b=(t[0].getY()+t[2].getY())/2,S=new pe(g+d*u,b+d*h),D=new pe(g-d*u,b-d*h);u=t[1].getX()-t[3].getX(),h=t[1].getY()-t[3].getY(),g=(t[1].getX()+t[3].getX())/2,b=(t[1].getY()+t[3].getY())/2;let L=new pe(g+d*u,b+d*h),V=new pe(g-d*u,b-d*h);return[S,L,D,V]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=Be.round(t.getX()),o=Be.round(t.getY());return this.isValid(i,o)}distancePoint(t,i){return Be.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return Be.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Ir{decode(t,i=null){let o=null,d=new fr(t.getBlackMatrix()),u=null,h=null;try{let D=d.detectMirror(!1);u=D.getPoints(),this.reportFoundResultPoints(i,u),h=new Re().decode(D)}catch(D){o=D}if(h==null)try{let D=d.detectMirror(!0);u=D.getPoints(),this.reportFoundResultPoints(i,u),h=new Re().decode(D)}catch(D){throw o??D}let g=new Ie(h.getText(),h.getRawBytes(),h.getNumBits(),u,_e.AZTEC,R.currentTimeMillis()),b=h.getByteSegments();b!=null&&g.putMetadata(Ue.BYTE_SEGMENTS,b);let S=h.getECLevel();return S!=null&&g.putMetadata(Ue.ERROR_CORRECTION_LEVEL,S),g}reportFoundResultPoints(t,i){if(t!=null){let o=t.get(te.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((d,u,h)=>{o.foundPossibleResultPoint(d)})}}reset(){}}class As extends je{constructor(t=500){super(new Ir,t)}}class zt{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(te.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),h=this.doDecode(u,i),g=h.getResultMetadata();let b=270;g!==null&&g.get(Ue.ORIENTATION)===!0&&(b=b+g.get(Ue.ORIENTATION)%360),h.putMetadata(Ue.ORIENTATION,b);const S=h.getResultPoints();if(S!==null){const D=u.getHeight();for(let L=0;L<S.length;L++)S[L]=new pe(D-S[L].getY()-1,S[L].getX())}return h}else throw new q}}reset(){}doDecode(t,i){const o=t.getWidth(),d=t.getHeight();let u=new Z(o);const h=i&&i.get(te.TRY_HARDER)===!0,g=Math.max(1,d>>(h?8:5));let b;h?b=d:b=15;const S=Math.trunc(d/2);for(let D=0;D<b;D++){const L=Math.trunc((D+1)/2),V=(D&1)===0,Y=S+g*(V?L:-L);if(Y<0||Y>=d)break;try{u=t.getBlackRow(Y,u)}catch{continue}for(let ae=0;ae<2;ae++){if(ae===1&&(u.reverse(),i&&i.get(te.NEED_RESULT_POINT_CALLBACK)===!0)){const ce=new Map;i.forEach((he,be)=>ce.set(be,he)),ce.delete(te.NEED_RESULT_POINT_CALLBACK),i=ce}try{const ce=this.decodeRow(Y,u,i);if(ae===1){ce.putMetadata(Ue.ORIENTATION,180);const he=ce.getResultPoints();he!==null&&(he[0]=new pe(o-he[0].getX()-1,he[0].getY()),he[1]=new pe(o-he[1].getX()-1,he[1].getY()))}return ce}catch{}}}throw new q}static recordPattern(t,i,o){const d=o.length;for(let S=0;S<d;S++)o[S]=0;const u=t.getSize();if(i>=u)throw new q;let h=!t.get(i),g=0,b=i;for(;b<u;){if(t.get(b)!==h)o[g]++;else{if(++g===d)break;o[g]=1,h=!h}b++}if(!(g===d||g===d-1&&b===u))throw new q}static recordPatternInReverse(t,i,o){let d=o.length,u=t.get(i);for(;i>0&&d>=0;)t.get(--i)!==u&&(d--,u=!u);if(d>=0)throw new q;zt.recordPattern(t,i+1,o)}static patternMatchVariance(t,i,o){const d=t.length;let u=0,h=0;for(let S=0;S<d;S++)u+=t[S],h+=i[S];if(u<h)return Number.POSITIVE_INFINITY;const g=u/h;o*=g;let b=0;for(let S=0;S<d;S++){const D=t[S],L=i[S]*g,V=D>L?D-L:L-D;if(V>o)return Number.POSITIVE_INFINITY;b+=V}return b/u}}class ke extends zt{static findStartPattern(t){const i=t.getSize(),o=t.getNextSet(0);let d=0,u=Int32Array.from([0,0,0,0,0,0]),h=o,g=!1;const b=6;for(let S=o;S<i;S++)if(t.get(S)!==g)u[d]++;else{if(d===b-1){let D=ke.MAX_AVG_VARIANCE,L=-1;for(let V=ke.CODE_START_A;V<=ke.CODE_START_C;V++){const Y=zt.patternMatchVariance(u,ke.CODE_PATTERNS[V],ke.MAX_INDIVIDUAL_VARIANCE);Y<D&&(D=Y,L=V)}if(L>=0&&t.isRange(Math.max(0,h-(S-h)/2),h,!1))return Int32Array.from([h,S,L]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,g=!g}throw new q}static decodeCode(t,i,o){zt.recordPattern(t,o,i);let d=ke.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<ke.CODE_PATTERNS.length;h++){const g=ke.CODE_PATTERNS[h],b=this.patternMatchVariance(i,g,ke.MAX_INDIVIDUAL_VARIANCE);b<d&&(d=b,u=h)}if(u>=0)return u;throw new q}decodeRow(t,i,o){const d=o&&o.get(te.ASSUME_GS1)===!0,u=ke.findStartPattern(i),h=u[2];let g=0;const b=new Uint8Array(20);b[g++]=h;let S;switch(h){case ke.CODE_START_A:S=ke.CODE_CODE_A;break;case ke.CODE_START_B:S=ke.CODE_CODE_B;break;case ke.CODE_START_C:S=ke.CODE_CODE_C;break;default:throw new G}let D=!1,L=!1,V="",Y=u[0],ae=u[1];const ce=Int32Array.from([0,0,0,0,0,0]);let he=0,be=0,Ve=h,He=0,Le=!0,Ut=!1,It=!1;for(;!D;){const Xs=L;switch(L=!1,he=be,be=ke.decodeCode(i,ce,ae),b[g++]=be,be!==ke.CODE_STOP&&(Le=!0),be!==ke.CODE_STOP&&(He++,Ve+=He*be),Y=ae,ae+=ce.reduce((ti,Zl)=>ti+Zl,0),be){case ke.CODE_START_A:case ke.CODE_START_B:case ke.CODE_START_C:throw new G}switch(S){case ke.CODE_CODE_A:if(be<64)It===Ut?V+=String.fromCharCode(32+be):V+=String.fromCharCode(32+be+128),It=!1;else if(be<96)It===Ut?V+=String.fromCharCode(be-64):V+=String.fromCharCode(be+64),It=!1;else switch(be!==ke.CODE_STOP&&(Le=!1),be){case ke.CODE_FNC_1:d&&(V.length===0?V+="]C1":V+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_A:!Ut&&It?(Ut=!0,It=!1):Ut&&It?(Ut=!1,It=!1):It=!0;break;case ke.CODE_SHIFT:L=!0,S=ke.CODE_CODE_B;break;case ke.CODE_CODE_B:S=ke.CODE_CODE_B;break;case ke.CODE_CODE_C:S=ke.CODE_CODE_C;break;case ke.CODE_STOP:D=!0;break}break;case ke.CODE_CODE_B:if(be<96)It===Ut?V+=String.fromCharCode(32+be):V+=String.fromCharCode(32+be+128),It=!1;else switch(be!==ke.CODE_STOP&&(Le=!1),be){case ke.CODE_FNC_1:d&&(V.length===0?V+="]C1":V+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_B:!Ut&&It?(Ut=!0,It=!1):Ut&&It?(Ut=!1,It=!1):It=!0;break;case ke.CODE_SHIFT:L=!0,S=ke.CODE_CODE_A;break;case ke.CODE_CODE_A:S=ke.CODE_CODE_A;break;case ke.CODE_CODE_C:S=ke.CODE_CODE_C;break;case ke.CODE_STOP:D=!0;break}break;case ke.CODE_CODE_C:if(be<100)be<10&&(V+="0"),V+=be;else switch(be!==ke.CODE_STOP&&(Le=!1),be){case ke.CODE_FNC_1:d&&(V.length===0?V+="]C1":V+="");break;case ke.CODE_CODE_A:S=ke.CODE_CODE_A;break;case ke.CODE_CODE_B:S=ke.CODE_CODE_B;break;case ke.CODE_STOP:D=!0;break}break}Xs&&(S=S===ke.CODE_CODE_A?ke.CODE_CODE_B:ke.CODE_CODE_A)}const Mr=ae-Y;if(ae=i.getNextUnset(ae),!i.isRange(ae,Math.min(i.getSize(),ae+(ae-Y)/2),!1))throw new q;if(Ve-=He*he,Ve%103!==he)throw new _;const xs=V.length;if(xs===0)throw new q;xs>0&&Le&&(S===ke.CODE_CODE_C?V=V.substring(0,xs-2):V=V.substring(0,xs-1));const tr=(u[1]+u[0])/2,rn=Y+Mr/2,Vn=b.length,_r=new Uint8Array(Vn);for(let Xs=0;Xs<Vn;Xs++)_r[Xs]=b[Xs];const ja=[new pe(tr,t),new pe(rn,t)];return new Ie(V,_r,0,ja,_e.CODE_128,new Date().getTime())}}ke.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ke.MAX_AVG_VARIANCE=.25,ke.MAX_INDIVIDUAL_VARIANCE=.7,ke.CODE_SHIFT=98,ke.CODE_CODE_C=99,ke.CODE_CODE_B=100,ke.CODE_CODE_A=101,ke.CODE_FNC_1=102,ke.CODE_FNC_2=97,ke.CODE_FNC_3=96,ke.CODE_FNC_4_A=101,ke.CODE_FNC_4_B=100,ke.CODE_START_A=103,ke.CODE_START_B=104,ke.CODE_START_C=105,ke.CODE_STOP=106;class fn extends zt{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,o){let d=this.counters;d.fill(0),this.decodeRowResult="";let u=fn.findAsteriskPattern(i,d),h=i.getNextSet(u[1]),g=i.getSize(),b,S;do{fn.recordPattern(i,h,d);let ce=fn.toNarrowWidePattern(d);if(ce<0)throw new q;b=fn.patternToChar(ce),this.decodeRowResult+=b,S=h;for(let he of d)h+=he;h=i.getNextSet(h)}while(b!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let ce of d)D+=ce;let L=h-S-D;if(h!==g&&L*2<D)throw new q;if(this.usingCheckDigit){let ce=this.decodeRowResult.length-1,he=0;for(let be=0;be<ce;be++)he+=fn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(be));if(this.decodeRowResult.charAt(ce)!==fn.ALPHABET_STRING.charAt(he%43))throw new _;this.decodeRowResult=this.decodeRowResult.substring(0,ce)}if(this.decodeRowResult.length===0)throw new q;let V;this.extendedMode?V=fn.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;let Y=(u[1]+u[0])/2,ae=S+D/2;return new Ie(V,null,0,[new pe(Y,t),new pe(ae,t)],_e.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let o=t.getSize(),d=t.getNextSet(0),u=0,h=d,g=!1,b=i.length;for(let S=d;S<o;S++)if(t.get(S)!==g)i[u]++;else{if(u===b-1){if(this.toNarrowWidePattern(i)===fn.ASTERISK_ENCODING&&t.isRange(Math.max(0,h-Math.floor((S-h)/2)),h,!1))return[h,S];h+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,g=!g}throw new q}static toNarrowWidePattern(t){let i=t.length,o=0,d;do{let u=2147483647;for(let b of t)b<u&&b>o&&(u=b);o=u,d=0;let h=0,g=0;for(let b=0;b<i;b++){let S=t[b];S>o&&(g|=1<<i-1-b,d++,h+=S)}if(d===3){for(let b=0;b<i&&d>0;b++){let S=t[b];if(S>o&&(d--,S*2>=h))return-1}return g}}while(d>3);return-1}static patternToChar(t){for(let i=0;i<fn.CHARACTER_ENCODINGS.length;i++)if(fn.CHARACTER_ENCODINGS[i]===t)return fn.ALPHABET_STRING.charAt(i);if(t===fn.ASTERISK_ENCODING)return"*";throw new q}static decodeExtended(t){let i=t.length,o="";for(let d=0;d<i;d++){let u=t.charAt(d);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=t.charAt(d+1),g="\0";switch(u){case"+":if(h>="A"&&h<="Z")g=String.fromCharCode(h.charCodeAt(0)+32);else throw new G;break;case"$":if(h>="A"&&h<="Z")g=String.fromCharCode(h.charCodeAt(0)-64);else throw new G;break;case"%":if(h>="A"&&h<="E")g=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")g=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")g=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")g=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")g="\0";else if(h==="V")g="@";else if(h==="W")g="`";else if(h==="X"||h==="Y"||h==="Z")g="";else throw new G;break;case"/":if(h>="A"&&h<="O")g=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")g=":";else throw new G;break}o+=g,d++}else o+=u}return o}}fn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",fn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],fn.ASTERISK_ENCODING=148;class Lt extends zt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,o){let d=this.decodeStart(i),u=this.decodeEnd(i),h=new ge;Lt.decodeMiddle(i,d[1],u[0],h);let g=h.toString(),b=null;o!=null&&(b=o.get(te.ALLOWED_LENGTHS)),b==null&&(b=Lt.DEFAULT_ALLOWED_LENGTHS);let S=g.length,D=!1,L=0;for(let ae of b){if(S===ae){D=!0;break}ae>L&&(L=ae)}if(!D&&S>L&&(D=!0),!D)throw new G;const V=[new pe(d[1],t),new pe(u[0],t)];return new Ie(g,null,0,V,_e.ITF,new Date().getTime())}static decodeMiddle(t,i,o,d){let u=new Int32Array(10),h=new Int32Array(5),g=new Int32Array(5);for(u.fill(0),h.fill(0),g.fill(0);i<o;){zt.recordPattern(t,i,u);for(let S=0;S<5;S++){let D=2*S;h[S]=u[D],g[S]=u[D+1]}let b=Lt.decodeDigit(h);d.append(b.toString()),b=this.decodeDigit(g),d.append(b.toString()),u.forEach(function(S){i+=S})}}decodeStart(t){let i=Lt.skipWhiteSpace(t),o=Lt.findGuardPattern(t,i,Lt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let d=i-1;o>0&&d>=0&&!t.get(d);d--)o--;if(o!==0)throw new q}static skipWhiteSpace(t){const i=t.getSize(),o=t.getNextSet(0);if(o===i)throw new q;return o}decodeEnd(t){t.reverse();try{let i=Lt.skipWhiteSpace(t),o;try{o=Lt.findGuardPattern(t,i,Lt.END_PATTERN_REVERSED[0])}catch(u){u instanceof q&&(o=Lt.findGuardPattern(t,i,Lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let d=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-d,o}finally{t.reverse()}}static findGuardPattern(t,i,o){let d=o.length,u=new Int32Array(d),h=t.getSize(),g=!1,b=0,S=i;u.fill(0);for(let D=i;D<h;D++)if(t.get(D)!==g)u[b]++;else{if(b===d-1){if(zt.patternMatchVariance(u,o,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return[S,D];S+=u[0]+u[1],R.arraycopy(u,2,u,0,b-1),u[b-1]=0,u[b]=0,b--}else b++;u[b]=1,g=!g}throw new q}static decodeDigit(t){let i=Lt.MAX_AVG_VARIANCE,o=-1,d=Lt.PATTERNS.length;for(let u=0;u<d;u++){let h=Lt.PATTERNS[u],g=zt.patternMatchVariance(t,h,Lt.MAX_INDIVIDUAL_VARIANCE);g<i?(i=g,o=u):g===i&&(o=-1)}if(o>=0)return o%10;throw new q}}Lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Lt.MAX_AVG_VARIANCE=.38,Lt.MAX_INDIVIDUAL_VARIANCE=.5,Lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Lt.START_PATTERN=Int32Array.from([1,1,1,1]),Lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nn extends zt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,o,d=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),o=nn.findGuardPattern(t,d,!1,this.START_END_PATTERN,u);let h=o[0];d=o[1];let g=h-(d-h);g>=0&&(i=t.isRange(g,h,!1))}return o}static checkChecksum(t){return nn.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let o=parseInt(t.charAt(i-1),10);return nn.getStandardUPCEANChecksum(t.substring(0,i-1))===o}static getStandardUPCEANChecksum(t){let i=t.length,o=0;for(let d=i-1;d>=0;d-=2){let u=t.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new G;o+=u}o*=3;for(let d=i-2;d>=0;d-=2){let u=t.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new G;o+=u}return(1e3-o)%10}static decodeEnd(t,i){return nn.findGuardPattern(t,i,!1,nn.START_END_PATTERN,new Int32Array(nn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,o,d){return this.findGuardPattern(t,i,o,d,new Int32Array(d.length))}static findGuardPattern(t,i,o,d,u){let h=t.getSize();i=o?t.getNextUnset(i):t.getNextSet(i);let g=0,b=i,S=d.length,D=o;for(let L=i;L<h;L++)if(t.get(L)!==D)u[g]++;else{if(g===S-1){if(zt.patternMatchVariance(u,d,nn.MAX_INDIVIDUAL_VARIANCE)<nn.MAX_AVG_VARIANCE)return Int32Array.from([b,L]);b+=u[0]+u[1];let V=u.slice(2,u.length-1);for(let Y=0;Y<g-1;Y++)u[Y]=V[Y];u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,D=!D}throw new q}static decodeDigit(t,i,o,d){this.recordPattern(t,o,i);let u=this.MAX_AVG_VARIANCE,h=-1,g=d.length;for(let b=0;b<g;b++){let S=d[b],D=zt.patternMatchVariance(i,S,nn.MAX_INDIVIDUAL_VARIANCE);D<u&&(u=D,h=b)}if(h>=0)return h;throw new q}}nn.MAX_AVG_VARIANCE=.48,nn.MAX_INDIVIDUAL_VARIANCE=.7,nn.START_END_PATTERN=Int32Array.from([1,1,1]),nn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ds{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,o){let d=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,d),h=d.toString(),g=ds.parseExtensionString(h),b=[new pe((o[0]+o[1])/2,t),new pe(u,t)],S=new Ie(h,null,0,b,_e.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&S.putAllMetadata(g),S}decodeMiddle(t,i,o){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=t.getSize(),h=i[1],g=0;for(let S=0;S<5&&h<u;S++){let D=nn.decodeDigit(t,d,h,nn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+D%10);for(let L of d)h+=L;D>=10&&(g|=1<<4-S),S!==4&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==5)throw new q;let b=this.determineCheckDigit(g);if(ds.extensionChecksum(o.toString())!==b)throw new q;return h}static extensionChecksum(t){let i=t.length,o=0;for(let d=i-2;d>=0;d-=2)o+=t.charAt(d).charCodeAt(0)-48;o*=3;for(let d=i-1;d>=0;d-=2)o+=t.charAt(d).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new q}static parseExtensionString(t){if(t.length!==5)return null;let i=ds.parseExtension5String(t);return i==null?null:new Map([[Ue.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(t.substring(1)),d=(o/100).toString(),u=o%100,h=u<10?"0"+u:u.toString();return i+d+"."+h}}class aa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,o){let d=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,d),h=d.toString(),g=aa.parseExtensionString(h),b=[new pe((o[0]+o[1])/2,t),new pe(u,t)],S=new Ie(h,null,0,b,_e.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&S.putAllMetadata(g),S}decodeMiddle(t,i,o){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=t.getSize(),h=i[1],g=0;for(let b=0;b<2&&h<u;b++){let S=nn.decodeDigit(t,d,h,nn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+S%10);for(let D of d)h+=D;S>=10&&(g|=1<<1-b),b!==1&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==2)throw new q;if(parseInt(o.toString())%4!==g)throw new q;return h}static parseExtensionString(t){return t.length!==2?null:new Map([[Ue.ISSUE_NUMBER,parseInt(t)]])}}class Ca{static decodeRow(t,i,o){let d=nn.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ds().decodeRow(t,i,d)}catch{return new aa().decodeRow(t,i,d)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ft extends nn{constructor(){super(),this.decodeRowStringBuffer="",Ft.L_AND_G_PATTERNS=Ft.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=Ft.L_PATTERNS[t-10],o=new Int32Array(i.length);for(let d=0;d<i.length;d++)o[d]=i[i.length-d-1];Ft.L_AND_G_PATTERNS[t]=o}}decodeRow(t,i,o){let d=Ft.findStartGuardPattern(i),u=o==null?null:o.get(te.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Le=new pe((d[0]+d[1])/2,t);u.foundPossibleResultPoint(Le)}let h=this.decodeMiddle(i,d,this.decodeRowStringBuffer),g=h.rowOffset,b=h.resultString;if(u!=null){const Le=new pe(g,t);u.foundPossibleResultPoint(Le)}let S=this.decodeEnd(i,g);if(u!=null){const Le=new pe((S[0]+S[1])/2,t);u.foundPossibleResultPoint(Le)}let D=S[1],L=D+(D-S[0]);if(L>=i.getSize()||!i.isRange(D,L,!1))throw new q;let V=b.toString();if(V.length<8)throw new G;if(!Ft.checkChecksum(V))throw new _;let Y=(d[1]+d[0])/2,ae=(S[1]+S[0])/2,ce=this.getBarcodeFormat(),he=[new pe(Y,t),new pe(ae,t)],be=new Ie(V,null,0,he,ce,new Date().getTime()),Ve=0;try{let Le=Ca.decodeRow(t,i,S[1]);be.putMetadata(Ue.UPC_EAN_EXTENSION,Le.getText()),be.putAllMetadata(Le.getResultMetadata()),be.addResultPoints(Le.getResultPoints()),Ve=Le.getText().length}catch{}let He=o==null?null:o.get(te.ALLOWED_EAN_EXTENSIONS);if(He!=null){let Le=!1;for(let Ut in He)if(Ve.toString()===Ut){Le=!0;break}if(!Le)throw new q}return be}decodeEnd(t,i){return Ft.findGuardPattern(t,i,!1,Ft.START_END_PATTERN,new Int32Array(Ft.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Ft.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let o=parseInt(t.charAt(i-1),10);return Ft.getStandardUPCEANChecksum(t.substring(0,i-1))===o}static getStandardUPCEANChecksum(t){let i=t.length,o=0;for(let d=i-1;d>=0;d-=2){let u=t.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new G;o+=u}o*=3;for(let d=i-2;d>=0;d-=2){let u=t.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new G;o+=u}return(1e3-o)%10}}class br extends Ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,o){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=t.getSize(),h=i[1],g=0;for(let S=0;S<6&&h<u;S++){let D=Ft.decodeDigit(t,d,h,Ft.L_AND_G_PATTERNS);o+=String.fromCharCode(48+D%10);for(let L of d)h+=L;D>=10&&(g|=1<<5-S)}o=br.determineFirstDigit(o,g),h=Ft.findGuardPattern(t,h,!0,Ft.MIDDLE_PATTERN,new Int32Array(Ft.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&h<u;S++){let D=Ft.decodeDigit(t,d,h,Ft.L_PATTERNS);o+=String.fromCharCode(48+D);for(let L of d)h+=L}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return _e.EAN_13}static determineFirstDigit(t,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new q}}br.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Qr extends Ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,o){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=t.getSize(),h=i[1];for(let b=0;b<4&&h<u;b++){let S=Ft.decodeDigit(t,d,h,Ft.L_PATTERNS);o+=String.fromCharCode(48+S);for(let D of d)h+=D}h=Ft.findGuardPattern(t,h,!0,Ft.MIDDLE_PATTERN,new Int32Array(Ft.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<4&&h<u;b++){let S=Ft.decodeDigit(t,d,h,Ft.L_PATTERNS);o+=String.fromCharCode(48+S);for(let D of d)h+=D}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return _e.EAN_8}}class Bi extends Ft{constructor(){super(...arguments),this.ean13Reader=new br}getBarcodeFormat(){return _e.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,o))}decodeMiddle(t,i,o){return this.ean13Reader.decodeMiddle(t,i,o)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let o=new Ie(i.substring(1),null,null,t.getResultPoints(),_e.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new q}reset(){this.ean13Reader.reset()}}class ht extends Ft{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,o){const d=this.decodeMiddleCounters.map(S=>S);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const u=t.getSize();let h=i[1],g=0;for(let S=0;S<6&&h<u;S++){const D=ht.decodeDigit(t,d,h,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+D%10);for(let L of d)h+=L;D>=10&&(g|=1<<5-S)}let b=ht.determineNumSysAndCheckDigit(o,g);return{rowOffset:h,resultString:b}}decodeEnd(t,i){return ht.findGuardPatternWithoutCounters(t,i,!0,ht.MIDDLE_END_PATTERN)}checkChecksum(t){return Ft.checkChecksum(ht.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let o=0;o<=1;o++)for(let d=0;d<10;d++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][d]){let u=String.fromCharCode(48+o),h=String.fromCharCode(48+d);return u+t+h}throw q.getNotFoundInstance()}getBarcodeFormat(){return _e.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new ge;o.append(t.charAt(0));let d=i[5];switch(d){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(d),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(d);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}ht.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ht.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Zt extends zt{constructor(t){super();let i=t==null?null:t.get(te.POSSIBLE_FORMATS),o=[];c(i)?(o.push(new br),o.push(new Bi),o.push(new Qr),o.push(new ht)):(i.indexOf(_e.EAN_13)>-1&&o.push(new br),i.indexOf(_e.UPC_A)>-1&&o.push(new Bi),i.indexOf(_e.EAN_8)>-1&&o.push(new Qr),i.indexOf(_e.UPC_E)>-1&&o.push(new ht)),this.readers=o}decodeRow(t,i,o){for(let d of this.readers)try{const u=d.decodeRow(t,i,o),h=u.getBarcodeFormat()===_e.EAN_13&&u.getText().charAt(0)==="0",g=o==null?null:o.get(te.POSSIBLE_FORMATS),b=g==null||g.includes(_e.UPC_A);if(h&&b){const S=u.getRawBytes(),D=new Ie(u.getText().substring(1),S,S?S.length:null,u.getResultPoints(),_e.UPC_A);return D.putAllMetadata(u.getResultMetadata()),D}return u}catch{}throw new q}reset(){for(let t of this.readers)t.reset()}}class Rt extends zt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let o=0;o<i.length;o++)if(zt.patternMatchVariance(t,i[o],Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return o;throw new q}static count(t){return Be.sum(new Int32Array(t))}static increment(t,i){let o=0,d=i[0];for(let u=1;u<t.length;u++)i[u]>d&&(d=i[u],o=u);t[o]++}static decrement(t,i){let o=0,d=i[0];for(let u=1;u<t.length;u++)i[u]<d&&(d=i[u],o=u);t[o]--}static isFinderPattern(t){let i=t[0]+t[1],o=i+t[2]+t[3],d=i/o;if(d>=Rt.MIN_FINDER_PATTERN_RATIO&&d<=Rt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let g of t)g>h&&(h=g),g<u&&(u=g);return h<10*u}return!1}}Rt.MAX_AVG_VARIANCE=.2,Rt.MAX_INDIVIDUAL_VARIANCE=.45,Rt.MIN_FINDER_PATTERN_RATIO=9.5/12,Rt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gn{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Gn))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class hr{constructor(t,i,o,d,u){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new pe(o,u)),this.resultPoints.push(new pe(d,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof hr))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class jn{constructor(){}static getRSSvalue(t,i,o){let d=0;for(let b of t)d+=b;let u=0,h=0,g=t.length;for(let b=0;b<g-1;b++){let S;for(S=1,h|=1<<b;S<t[b];S++,h&=~(1<<b)){let D=jn.combins(d-S-1,g-b-2);if(o&&h===0&&d-S-(g-b-1)>=g-b-1&&(D-=jn.combins(d-S-(g-b),g-b-2)),g-b-1>1){let L=0;for(let V=d-S-(g-b-2);V>i;V--)L+=jn.combins(d-S-V-1,g-b-3);D-=L*(g-1-b)}else d-S>i&&D--;u+=D}d-=S}return u}static combins(t,i){let o,d;t-i>i?(d=i,o=t-i):(d=t-i,o=i);let u=1,h=1;for(let g=t;g>o;g--)u*=g,h<=d&&(u/=h,h++);for(;h<=d;)u/=h,h++;return u}}class us{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let o=12*i,d=new Z(o),u=0,g=t[0].getRightChar().getValue();for(let b=11;b>=0;--b)(g&1<<b)!=0&&d.set(u),u++;for(let b=1;b<t.length;++b){let S=t[b],D=S.getLeftChar().getValue();for(let L=11;L>=0;--L)(D&1<<L)!=0&&d.set(u),u++;if(S.getRightChar()!=null){let L=S.getRightChar().getValue();for(let V=11;V>=0;--V)(L&1<<V)!=0&&d.set(u),u++}}return d}}class Tn{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Kr{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class ir extends Kr{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===ir.FNC1}}ir.FNC1="$";class Is extends Kr{constructor(t,i,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class jr extends Kr{constructor(t,i,o){if(super(t),i<0||i>10||o<0||o>10)throw new G;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===jr.FNC1}isSecondDigitFNC1(){return this.secondDigit===jr.FNC1}isAnyFNC1(){return this.firstDigit===jr.FNC1||this.secondDigit===jr.FNC1}}jr.FNC1=10;class Qe{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new q;let i=t.substring(0,2);for(let u of Qe.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(2,u[2],t):Qe.processFixedAI(2,u[1],t);if(t.length<3)throw new q;let o=t.substring(0,3);for(let u of Qe.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(3,u[2],t):Qe.processFixedAI(3,u[1],t);for(let u of Qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(4,u[2],t):Qe.processFixedAI(4,u[1],t);if(t.length<4)throw new q;let d=t.substring(0,4);for(let u of Qe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===d)return u[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(4,u[2],t):Qe.processFixedAI(4,u[1],t);throw new q}static processFixedAI(t,i,o){if(o.length<t)throw new q;let d=o.substring(0,t);if(o.length<t+i)throw new q;let u=o.substring(t,t+i),h=o.substring(t+i),g="("+d+")"+u,b=Qe.parseFieldsInGeneralPurpose(h);return b==null?g:g+b}static processVariableAI(t,i,o){let d=o.substring(0,t),u;o.length<t+i?u=o.length:u=t+i;let h=o.substring(t,u),g=o.substring(u),b="("+d+")"+h,S=Qe.parseFieldsInGeneralPurpose(g);return S==null?b:b+S}}Qe.VARIABLE_LENGTH=[],Qe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Qe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Qe.VARIABLE_LENGTH,20],["22",Qe.VARIABLE_LENGTH,29],["30",Qe.VARIABLE_LENGTH,8],["37",Qe.VARIABLE_LENGTH,8],["90",Qe.VARIABLE_LENGTH,30],["91",Qe.VARIABLE_LENGTH,30],["92",Qe.VARIABLE_LENGTH,30],["93",Qe.VARIABLE_LENGTH,30],["94",Qe.VARIABLE_LENGTH,30],["95",Qe.VARIABLE_LENGTH,30],["96",Qe.VARIABLE_LENGTH,30],["97",Qe.VARIABLE_LENGTH,3],["98",Qe.VARIABLE_LENGTH,30],["99",Qe.VARIABLE_LENGTH,30]],Qe.THREE_DIGIT_DATA_LENGTH=[["240",Qe.VARIABLE_LENGTH,30],["241",Qe.VARIABLE_LENGTH,30],["242",Qe.VARIABLE_LENGTH,6],["250",Qe.VARIABLE_LENGTH,30],["251",Qe.VARIABLE_LENGTH,30],["253",Qe.VARIABLE_LENGTH,17],["254",Qe.VARIABLE_LENGTH,20],["400",Qe.VARIABLE_LENGTH,30],["401",Qe.VARIABLE_LENGTH,30],["402",17],["403",Qe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Qe.VARIABLE_LENGTH,20],["421",Qe.VARIABLE_LENGTH,15],["422",3],["423",Qe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Qe.VARIABLE_LENGTH,15],["391",Qe.VARIABLE_LENGTH,18],["392",Qe.VARIABLE_LENGTH,15],["393",Qe.VARIABLE_LENGTH,18],["703",Qe.VARIABLE_LENGTH,30]],Qe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Qe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Qe.VARIABLE_LENGTH,20],["8003",Qe.VARIABLE_LENGTH,30],["8004",Qe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Qe.VARIABLE_LENGTH,30],["8008",Qe.VARIABLE_LENGTH,12],["8018",18],["8020",Qe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Qe.VARIABLE_LENGTH,70],["8200",Qe.VARIABLE_LENGTH,70]];class $a{constructor(t){this.buffer=new ge,this.information=t}decodeAllCodes(t,i){let o=i,d=null;do{let u=this.decodeGeneralPurposeField(o,d),h=Qe.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&t.append(h),u.isRemaining()?d=""+u.getRemainingValue():d=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new jr(this.information.getSize(),jr.FNC1,jr.FNC1):new jr(this.information.getSize(),u-1,jr.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),o=(i-8)/11,d=(i-8)%11;return new jr(t+7,o,d)}extractNumericValueFromBitArray(t,i){return $a.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,o){let d=0;for(let u=0;u<o;++u)t.get(i+u)&&(d|=1<<o-u-1);return d}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Is(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Is(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Is(this.current.getPosition(),this.buffer.toString()):i=new Is(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Tn(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Is(this.current.getPosition(),this.buffer.toString());return new Tn(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Tn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Is(this.current.getPosition(),this.buffer.toString());return new Tn(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Tn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Is(this.current.getPosition(),this.buffer.toString());return new Tn(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Tn(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(t,8);return d>=232&&d<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new ir(t+5,ir.FNC1);if(i>=5&&i<15)return new ir(t+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new ir(t+7,""+(o+1));if(o>=90&&o<116)return new ir(t+7,""+(o+7));let d=this.extractNumericValueFromBitArray(t,8),u;switch(d){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new G}return new ir(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new ir(t+5,ir.FNC1);if(i>=5&&i<15)return new ir(t+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new ir(t+6,""+(o+33));let d;switch(o){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new Yt("Decoding invalid alphanumeric value: "+o)}return new ir(t+6,d)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class Ol{constructor(t){this.information=t,this.generalDecoder=new $a(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class kr extends Ol{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,o)}encodeCompressedGtinWithoutAI(t,i,o){for(let d=0;d<4;++d){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*d,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}kr.appendCheckDigit(t,o)}static appendCheckDigit(t,i){let o=0;for(let d=0;d<13;d++){let u=t.charAt(d+i).charCodeAt(0)-48;o+=(d&1)===0?3*u:u}o=10-o%10,o===10&&(o=0),t.append(o)}}kr.GTIN_SIZE=40;class Jr extends kr{constructor(t){super(t)}parseInformation(){let t=new ge;t.append("(01)");let i=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Jr.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,Jr.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,Jr.HEADER_SIZE+44)}}Jr.HEADER_SIZE=4;class Ui extends Ol{constructor(t){super(t)}parseInformation(){let t=new ge;return this.getGeneralDecoder().decodeAllCodes(t,Ui.HEADER_SIZE)}}Ui.HEADER_SIZE=5;class zi extends kr{constructor(t){super(t)}encodeCompressedWeight(t,i,o){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(t,d);let u=this.checkWeight(d),h=1e5;for(let g=0;g<5;++g)u/h===0&&t.append("0"),h/=10;t.append(u)}}class js extends zi{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=js.HEADER_SIZE+zi.GTIN_SIZE+js.WEIGHT_SIZE)throw new q;let t=new ge;return this.encodeCompressedGtin(t,js.HEADER_SIZE),this.encodeCompressedWeight(t,js.HEADER_SIZE+zi.GTIN_SIZE,js.WEIGHT_SIZE),t.toString()}}js.HEADER_SIZE=5,js.WEIGHT_SIZE=15;class id extends js{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class od extends js{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class fs extends kr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<fs.HEADER_SIZE+kr.GTIN_SIZE)throw new q;let t=new ge;this.encodeCompressedGtin(t,fs.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(fs.HEADER_SIZE+kr.GTIN_SIZE,fs.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(fs.HEADER_SIZE+kr.GTIN_SIZE+fs.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}fs.HEADER_SIZE=8,fs.LAST_DIGIT_SIZE=2;class Nr extends kr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Nr.HEADER_SIZE+kr.GTIN_SIZE)throw new q;let t=new ge;this.encodeCompressedGtin(t,Nr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE+kr.GTIN_SIZE,Nr.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE+kr.GTIN_SIZE+Nr.LAST_DIGIT_SIZE,Nr.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let d=this.getGeneralDecoder().decodeGeneralPurposeField(Nr.HEADER_SIZE+kr.GTIN_SIZE+Nr.LAST_DIGIT_SIZE+Nr.FIRST_THREE_DIGITS_SIZE,null);return t.append(d.getNewString()),t.toString()}}Nr.HEADER_SIZE=8,Nr.LAST_DIGIT_SIZE=2,Nr.FIRST_THREE_DIGITS_SIZE=10;class wn extends zi{constructor(t,i,o){super(t),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=wn.HEADER_SIZE+wn.GTIN_SIZE+wn.WEIGHT_SIZE+wn.DATE_SIZE)throw new q;let t=new ge;return this.encodeCompressedGtin(t,wn.HEADER_SIZE),this.encodeCompressedWeight(t,wn.HEADER_SIZE+wn.GTIN_SIZE,wn.WEIGHT_SIZE),this.encodeCompressedDate(t,wn.HEADER_SIZE+wn.GTIN_SIZE+wn.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,wn.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let d=o%32;o/=32;let u=o%12+1;o/=12;let h=o;h/10==0&&t.append("0"),t.append(h),u/10==0&&t.append("0"),t.append(u),d/10==0&&t.append("0"),t.append(d)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}wn.HEADER_SIZE=8,wn.WEIGHT_SIZE=20,wn.DATE_SIZE=16;function ld(M){try{if(M.get(1))return new Jr(M);if(!M.get(2))return new Ui(M);switch($a.extractNumericValueFromBitArray(M,1,4)){case 4:return new id(M);case 5:return new od(M)}switch($a.extractNumericValueFromBitArray(M,1,5)){case 12:return new fs(M);case 13:return new Nr(M)}switch($a.extractNumericValueFromBitArray(M,1,7)){case 56:return new wn(M,"310","11");case 57:return new wn(M,"320","11");case 58:return new wn(M,"310","13");case 59:return new wn(M,"320","13");case 60:return new wn(M,"310","15");case 61:return new wn(M,"320","15");case 62:return new wn(M,"310","17");case 63:return new wn(M,"320","17")}}catch(t){throw console.log(t),new Yt("unknown decoder: "+M)}}class ln{constructor(t,i,o,d){this.leftchar=t,this.rightchar=i,this.finderpattern=o,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof ln?ln.equalsOrNull(t.leftchar,i.leftchar)&&ln.equalsOrNull(t.rightchar,i.rightchar)&&ln.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:ln.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class kl{constructor(t,i,o){this.pairs=t,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof kl?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let o;return t.forEach((d,u)=>{i.forEach(h=>{d.getLeftChar().getValue()===h.getLeftChar().getValue()&&d.getRightChar().getValue()===h.getRightChar().getValue()&&d.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(o=!0)})}),o}}class De extends Rt{constructor(t){super(...arguments),this.pairs=new Array(De.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,o){this.pairs.length=0,this.startFromEven=!1;try{return De.constructResult(this.decodeRow2pairs(t,i))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,De.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(u){if(u instanceof q){if(!this.pairs.length)throw new q;o=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(t,!1),d){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new q}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let o=i;o<this.rows.length;o++){let d=this.rows[o];this.pairs.length=0;for(let h of t)this.pairs.push(h.getPairs());if(this.pairs.push(d.getPairs()),!De.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(d);try{return this.checkRows(u,o+1)}catch(h){this.verbose&&console.log(h)}}throw new q}static isValidSequence(t){for(let i of De.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let o=!0;for(let d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!=i[d]){o=!1;break}if(o)return!0}return!1}storeRow(t,i){let o=0,d=!1,u=!1;for(;o<this.rows.length;){let h=this.rows[o];if(h.getRowNumber()>t){u=h.isEquivalent(this.pairs);break}d=h.isEquivalent(this.pairs),o++}u||d||De.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new kl(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let o of i)if(o.getPairs().length!==t.length){for(let d of o.getPairs())for(let u of t)if(ln.equals(d,u))break}}static isPartialRow(t,i){for(let o of i){let d=!0;for(let u of t){let h=!1;for(let g of o.getPairs())if(u.equals(g)){h=!0;break}if(!h){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=us.buildBitArray(t),d=ld(i).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),h=t[t.length-1].getFinderPattern().getResultPoints(),g=[u[0],u[1],h[0],h[1]];return new Ie(d,null,null,g,_e.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let d=o.getChecksumPortion(),u=2;for(let g=1;g<this.pairs.size();++g){let b=this.pairs.get(g);d+=b.getLeftChar().getChecksumPortion(),u++;let S=b.getRightChar();S!=null&&(d+=S.getChecksumPortion(),u++)}return d%=211,211*(u-4)+d==i.getValue()}static getNextSecondBar(t,i){let o;return t.get(i)?(o=t.getNextUnset(i),o=t.getNextSet(o)):(o=t.getNextSet(i),o=t.getNextUnset(o)),o}retrieveNextPair(t,i,o){let d=i.length%2==0;this.startFromEven&&(d=!d);let u,h=!0,g=-1;do this.findNextPair(t,i,g),u=this.parseFoundFinderPattern(t,o,d),u==null?g=De.getNextSecondBar(t,this.startEnd[0]):h=!1;while(h);let b=this.decodeDataCharacter(t,u,d,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new q;let S;try{S=this.decodeDataCharacter(t,u,d,!1)}catch(D){S=null,this.verbose&&console.log(D)}return new ln(b,S,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,o){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=t.getSize(),h;o>=0?h=o:this.isEmptyPair(i)?h=0:h=i[i.length-1].getFinderPattern().getStartEnd()[1];let g=i.length%2!=0;this.startFromEven&&(g=!g);let b=!1;for(;h<u&&(b=!t.get(h),!!b);)h++;let S=0,D=h;for(let L=h;L<u;L++)if(t.get(L)!=b)d[S]++;else{if(S==3){if(g&&De.reverseCounters(d),De.isFinderPattern(d)){this.startEnd[0]=D,this.startEnd[1]=L;return}g&&De.reverseCounters(d),D+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,S--}else S++;d[S]=1,b=!b}throw new q}static reverseCounters(t){let i=t.length;for(let o=0;o<i/2;++o){let d=t[o];t[o]=t[i-o-1],t[i-o-1]=d}}parseFoundFinderPattern(t,i,o){let d,u,h;if(o){let S=this.startEnd[0]-1;for(;S>=0&&!t.get(S);)S--;S++,d=this.startEnd[0]-S,u=S,h=this.startEnd[1]}else u=this.startEnd[0],h=t.getNextUnset(this.startEnd[1]+1),d=h-this.startEnd[1];let g=this.getDecodeFinderCounters();R.arraycopy(g,0,g,1,g.length-1),g[0]=d;let b;try{b=this.parseFinderValue(g,De.FINDER_PATTERNS)}catch{return null}return new hr(b,[u,h],u,h,i)}decodeDataCharacter(t,i,o,d){let u=this.getDataCharacterCounters();for(let rn=0;rn<u.length;rn++)u[rn]=0;if(d)De.recordPatternInReverse(t,i.getStartEnd()[0],u);else{De.recordPattern(t,i.getStartEnd()[1],u);for(let rn=0,Vn=u.length-1;rn<Vn;rn++,Vn--){let _r=u[rn];u[rn]=u[Vn],u[Vn]=_r}}let h=17,g=Be.sum(new Int32Array(u))/h,b=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(g-b)/b>.3)throw new q;let S=this.getOddCounts(),D=this.getEvenCounts(),L=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let rn=0;rn<u.length;rn++){let Vn=1*u[rn]/g,_r=Vn+.5;if(_r<1){if(Vn<.3)throw new q;_r=1}else if(_r>8){if(Vn>8.7)throw new q;_r=8}let ja=rn/2;(rn&1)==0?(S[ja]=_r,L[ja]=Vn-_r):(D[ja]=_r,V[ja]=Vn-_r)}this.adjustOddEvenCounts(h);let Y=4*i.getValue()+(o?0:2)+(d?0:1)-1,ae=0,ce=0;for(let rn=S.length-1;rn>=0;rn--){if(De.isNotA1left(i,o,d)){let Vn=De.WEIGHTS[Y][2*rn];ce+=S[rn]*Vn}ae+=S[rn]}let he=0;for(let rn=D.length-1;rn>=0;rn--)if(De.isNotA1left(i,o,d)){let Vn=De.WEIGHTS[Y][2*rn+1];he+=D[rn]*Vn}let be=ce+he;if((ae&1)!=0||ae>13||ae<4)throw new q;let Ve=(13-ae)/2,He=De.SYMBOL_WIDEST[Ve],Le=9-He,Ut=jn.getRSSvalue(S,He,!0),It=jn.getRSSvalue(D,Le,!1),Mr=De.EVEN_TOTAL_SUBSET[Ve],xs=De.GSUM[Ve],tr=Ut*Mr+It+xs;return new Gn(tr,be)}static isNotA1left(t,i,o){return!(t.getValue()==0&&i&&o)}adjustOddEvenCounts(t){let i=Be.sum(new Int32Array(this.getOddCounts())),o=Be.sum(new Int32Array(this.getEvenCounts())),d=!1,u=!1;i>13?u=!0:i<4&&(d=!0);let h=!1,g=!1;o>13?g=!0:o<4&&(h=!0);let b=i+o-t,S=(i&1)==1,D=(o&1)==0;if(b==1)if(S){if(D)throw new q;u=!0}else{if(!D)throw new q;g=!0}else if(b==-1)if(S){if(D)throw new q;d=!0}else{if(!D)throw new q;h=!0}else if(b==0){if(S){if(!D)throw new q;i<o?(d=!0,g=!0):(u=!0,h=!0)}else if(D)throw new q}else throw new q;if(d){if(u)throw new q;De.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&De.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new q;De.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&De.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}De.SYMBOL_WIDEST=[7,5,4,3,1],De.EVEN_TOTAL_SUBSET=[4,20,52,104,204],De.GSUM=[0,348,1388,2948,3988],De.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],De.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],De.FINDER_PAT_A=0,De.FINDER_PAT_B=1,De.FINDER_PAT_C=2,De.FINDER_PAT_D=3,De.FINDER_PAT_E=4,De.FINDER_PAT_F=5,De.FINDER_PATTERN_SEQUENCES=[[De.FINDER_PAT_A,De.FINDER_PAT_A],[De.FINDER_PAT_A,De.FINDER_PAT_B,De.FINDER_PAT_B],[De.FINDER_PAT_A,De.FINDER_PAT_C,De.FINDER_PAT_B,De.FINDER_PAT_D],[De.FINDER_PAT_A,De.FINDER_PAT_E,De.FINDER_PAT_B,De.FINDER_PAT_D,De.FINDER_PAT_C],[De.FINDER_PAT_A,De.FINDER_PAT_E,De.FINDER_PAT_B,De.FINDER_PAT_D,De.FINDER_PAT_D,De.FINDER_PAT_F],[De.FINDER_PAT_A,De.FINDER_PAT_E,De.FINDER_PAT_B,De.FINDER_PAT_D,De.FINDER_PAT_E,De.FINDER_PAT_F,De.FINDER_PAT_F],[De.FINDER_PAT_A,De.FINDER_PAT_A,De.FINDER_PAT_B,De.FINDER_PAT_B,De.FINDER_PAT_C,De.FINDER_PAT_C,De.FINDER_PAT_D,De.FINDER_PAT_D],[De.FINDER_PAT_A,De.FINDER_PAT_A,De.FINDER_PAT_B,De.FINDER_PAT_B,De.FINDER_PAT_C,De.FINDER_PAT_C,De.FINDER_PAT_D,De.FINDER_PAT_E,De.FINDER_PAT_E],[De.FINDER_PAT_A,De.FINDER_PAT_A,De.FINDER_PAT_B,De.FINDER_PAT_B,De.FINDER_PAT_C,De.FINDER_PAT_C,De.FINDER_PAT_D,De.FINDER_PAT_E,De.FINDER_PAT_F,De.FINDER_PAT_F],[De.FINDER_PAT_A,De.FINDER_PAT_A,De.FINDER_PAT_B,De.FINDER_PAT_B,De.FINDER_PAT_C,De.FINDER_PAT_D,De.FINDER_PAT_D,De.FINDER_PAT_E,De.FINDER_PAT_E,De.FINDER_PAT_F,De.FINDER_PAT_F]],De.MAX_PAIRS=11;class cd extends Gn{constructor(t,i,o){super(t,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class mn extends Rt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,o){const d=this.decodePair(i,!1,t,o);mn.addOrTally(this.possibleLeftPairs,d),i.reverse();let u=this.decodePair(i,!0,t,o);mn.addOrTally(this.possibleRightPairs,u),i.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&mn.checkChecksum(h,g))return mn.constructResult(h,g)}throw new q}static addOrTally(t,i){if(i==null)return;let o=!1;for(let d of t)if(d.getValue()===i.getValue()){d.incrementCount(),o=!0;break}o||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let o=4537077*t.getValue()+i.getValue(),d=new String(o).toString(),u=new ge;for(let S=13-d.length;S>0;S--)u.append("0");u.append(d);let h=0;for(let S=0;S<13;S++){let D=u.charAt(S).charCodeAt(0)-48;h+=(S&1)===0?3*D:D}h=10-h%10,h===10&&(h=0),u.append(h.toString());let g=t.getFinderPattern().getResultPoints(),b=i.getFinderPattern().getResultPoints();return new Ie(u.toString(),null,0,[g[0],g[1],b[0],b[1]],_e.RSS_14,new Date().getTime())}static checkChecksum(t,i){let o=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,d=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,o===d}decodePair(t,i,o,d){try{let u=this.findFinderPattern(t,i),h=this.parseFoundFinderPattern(t,o,i,u),g=d==null?null:d.get(te.NEED_RESULT_POINT_CALLBACK);if(g!=null){let D=(u[0]+u[1])/2;i&&(D=t.getSize()-1-D),g.foundPossibleResultPoint(new pe(D,o))}let b=this.decodeDataCharacter(t,h,!0),S=this.decodeDataCharacter(t,h,!1);return new cd(1597*b.getValue()+S.getValue(),b.getChecksumPortion()+4*S.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(t,i,o){let d=this.getDataCharacterCounters();for(let he=0;he<d.length;he++)d[he]=0;if(o)zt.recordPatternInReverse(t,i.getStartEnd()[0],d);else{zt.recordPattern(t,i.getStartEnd()[1]+1,d);for(let he=0,be=d.length-1;he<be;he++,be--){let Ve=d[he];d[he]=d[be],d[be]=Ve}}let u=o?16:15,h=Be.sum(new Int32Array(d))/u,g=this.getOddCounts(),b=this.getEvenCounts(),S=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let he=0;he<d.length;he++){let be=d[he]/h,Ve=Math.floor(be+.5);Ve<1?Ve=1:Ve>8&&(Ve=8);let He=Math.floor(he/2);(he&1)===0?(g[He]=Ve,S[He]=be-Ve):(b[He]=Ve,D[He]=be-Ve)}this.adjustOddEvenCounts(o,u);let L=0,V=0;for(let he=g.length-1;he>=0;he--)V*=9,V+=g[he],L+=g[he];let Y=0,ae=0;for(let he=b.length-1;he>=0;he--)Y*=9,Y+=b[he],ae+=b[he];let ce=V+3*Y;if(o){if((L&1)!==0||L>12||L<4)throw new q;let he=(12-L)/2,be=mn.OUTSIDE_ODD_WIDEST[he],Ve=9-be,He=jn.getRSSvalue(g,be,!1),Le=jn.getRSSvalue(b,Ve,!0),Ut=mn.OUTSIDE_EVEN_TOTAL_SUBSET[he],It=mn.OUTSIDE_GSUM[he];return new Gn(He*Ut+Le+It,ce)}else{if((ae&1)!==0||ae>10||ae<4)throw new q;let he=(10-ae)/2,be=mn.INSIDE_ODD_WIDEST[he],Ve=9-be,He=jn.getRSSvalue(g,be,!0),Le=jn.getRSSvalue(b,Ve,!1),Ut=mn.INSIDE_ODD_TOTAL_SUBSET[he],It=mn.INSIDE_GSUM[he];return new Gn(Le*Ut+He+It,ce)}}findFinderPattern(t,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let d=t.getSize(),u=!1,h=0;for(;h<d&&(u=!t.get(h),i!==u);)h++;let g=0,b=h;for(let S=h;S<d;S++)if(t.get(S)!==u)o[g]++;else{if(g===3){if(Rt.isFinderPattern(o))return[b,S];b+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,g--}else g++;o[g]=1,u=!u}throw new q}parseFoundFinderPattern(t,i,o,d){let u=t.get(d[0]),h=d[0]-1;for(;h>=0&&u!==t.get(h);)h--;h++;const g=d[0]-h,b=this.getDecodeFinderCounters(),S=new Int32Array(b.length);R.arraycopy(b,0,S,1,b.length-1),S[0]=g;const D=this.parseFinderValue(S,mn.FINDER_PATTERNS);let L=h,V=d[1];return o&&(L=t.getSize()-1-L,V=t.getSize()-1-V),new hr(D,[h,d[1]],L,V,i)}adjustOddEvenCounts(t,i){let o=Be.sum(new Int32Array(this.getOddCounts())),d=Be.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,g=!1,b=!1;t?(o>12?h=!0:o<4&&(u=!0),d>12?b=!0:d<4&&(g=!0)):(o>11?h=!0:o<5&&(u=!0),d>10?b=!0:d<4&&(g=!0));let S=o+d-i,D=(o&1)===(t?1:0),L=(d&1)===1;if(S===1)if(D){if(L)throw new q;h=!0}else{if(!L)throw new q;b=!0}else if(S===-1)if(D){if(L)throw new q;u=!0}else{if(!L)throw new q;g=!0}else if(S===0){if(D){if(!L)throw new q;o<d?(u=!0,b=!0):(h=!0,g=!0)}else if(L)throw new q}else throw new q;if(u){if(h)throw new q;Rt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Rt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(b)throw new q;Rt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&Rt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}mn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],mn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],mn.OUTSIDE_GSUM=[0,161,961,2015,2715],mn.INSIDE_GSUM=[0,336,1036,1516],mn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],mn.INSIDE_ODD_WIDEST=[2,4,6,8],mn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ga extends zt{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const o=t?t.get(te.POSSIBLE_FORMATS):null,d=t&&t.get(te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(_e.EAN_13)||o.includes(_e.UPC_A)||o.includes(_e.EAN_8)||o.includes(_e.UPC_E))&&this.readers.push(new Zt(t)),o.includes(_e.CODE_39)&&this.readers.push(new fn(d)),o.includes(_e.CODE_128)&&this.readers.push(new ke),o.includes(_e.ITF)&&this.readers.push(new Lt),o.includes(_e.RSS_14)&&this.readers.push(new mn),o.includes(_e.RSS_EXPANDED)&&this.readers.push(new De(this.verbose))):(this.readers.push(new Zt(t)),this.readers.push(new fn),this.readers.push(new Zt(t)),this.readers.push(new ke),this.readers.push(new Lt),this.readers.push(new mn),this.readers.push(new De(this.verbose)))}decodeRow(t,i,o){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(t,i,o)}catch{}throw new q}reset(){this.readers.forEach(t=>t.reset())}}class dd extends je{constructor(t=500,i){super(new Ga(i),t,i)}}class qt{constructor(t,i,o){this.ecCodewords=t,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ot{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Wt{constructor(t,i,o,d,u,h){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=u,this.ecBlocks=h;let g=0;const b=h.getECCodewords(),S=h.getECBlocks();for(let D of S)g+=D.getCount()*(D.getDataCodewords()+b);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new G;for(let o of Wt.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===i)return o;throw new G}toString(){return""+this.versionNumber}static buildVersions(){return[new Wt(1,10,10,8,8,new qt(5,new Ot(1,3))),new Wt(2,12,12,10,10,new qt(7,new Ot(1,5))),new Wt(3,14,14,12,12,new qt(10,new Ot(1,8))),new Wt(4,16,16,14,14,new qt(12,new Ot(1,12))),new Wt(5,18,18,16,16,new qt(14,new Ot(1,18))),new Wt(6,20,20,18,18,new qt(18,new Ot(1,22))),new Wt(7,22,22,20,20,new qt(20,new Ot(1,30))),new Wt(8,24,24,22,22,new qt(24,new Ot(1,36))),new Wt(9,26,26,24,24,new qt(28,new Ot(1,44))),new Wt(10,32,32,14,14,new qt(36,new Ot(1,62))),new Wt(11,36,36,16,16,new qt(42,new Ot(1,86))),new Wt(12,40,40,18,18,new qt(48,new Ot(1,114))),new Wt(13,44,44,20,20,new qt(56,new Ot(1,144))),new Wt(14,48,48,22,22,new qt(68,new Ot(1,174))),new Wt(15,52,52,24,24,new qt(42,new Ot(2,102))),new Wt(16,64,64,14,14,new qt(56,new Ot(2,140))),new Wt(17,72,72,16,16,new qt(36,new Ot(4,92))),new Wt(18,80,80,18,18,new qt(48,new Ot(4,114))),new Wt(19,88,88,20,20,new qt(56,new Ot(4,144))),new Wt(20,96,96,22,22,new qt(68,new Ot(4,174))),new Wt(21,104,104,24,24,new qt(56,new Ot(6,136))),new Wt(22,120,120,18,18,new qt(68,new Ot(6,175))),new Wt(23,132,132,20,20,new qt(62,new Ot(8,163))),new Wt(24,144,144,22,22,new qt(62,new Ot(8,156),new Ot(2,155))),new Wt(25,8,18,6,16,new qt(7,new Ot(1,5))),new Wt(26,8,32,6,14,new qt(11,new Ot(1,10))),new Wt(27,12,26,10,24,new qt(14,new Ot(1,16))),new Wt(28,12,36,10,16,new qt(18,new Ot(1,22))),new Wt(29,16,36,14,16,new qt(24,new Ot(1,32))),new Wt(30,16,48,14,22,new qt(28,new Ot(1,49)))]}}Wt.VERSIONS=Wt.buildVersions();class Gr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new G;this.version=Gr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new re(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),o=t.getWidth();return Wt.getVersionForDimensions(i,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,d=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let g=!1,b=!1,S=!1,D=!1;do if(o===u&&d===0&&!g)t[i++]=this.readCorner1(u,h)&255,o-=2,d+=2,g=!0;else if(o===u-2&&d===0&&(h&3)!==0&&!b)t[i++]=this.readCorner2(u,h)&255,o-=2,d+=2,b=!0;else if(o===u+4&&d===2&&(h&7)===0&&!S)t[i++]=this.readCorner3(u,h)&255,o-=2,d+=2,S=!0;else if(o===u-2&&d===0&&(h&7)===4&&!D)t[i++]=this.readCorner4(u,h)&255,o-=2,d+=2,D=!0;else{do o<u&&d>=0&&!this.readMappingMatrix.get(d,o)&&(t[i++]=this.readUtah(o,d,u,h)&255),o-=2,d+=2;while(o>=0&&d<h);o+=1,d+=3;do o>=0&&d<h&&!this.readMappingMatrix.get(d,o)&&(t[i++]=this.readUtah(o,d,u,h)&255),o+=2,d-=2;while(o<u&&d>=0);o+=3,d+=1}while(o<u||d<h);if(i!==this.version.getTotalCodewords())throw new G;return t}readModule(t,i,o,d){return t<0&&(t+=o,i+=4-(o+4&7)),i<0&&(i+=d,t+=4-(d+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,o,d){let u=0;return this.readModule(t-2,i-2,o,d)&&(u|=1),u<<=1,this.readModule(t-2,i-1,o,d)&&(u|=1),u<<=1,this.readModule(t-1,i-2,o,d)&&(u|=1),u<<=1,this.readModule(t-1,i-1,o,d)&&(u|=1),u<<=1,this.readModule(t-1,i,o,d)&&(u|=1),u<<=1,this.readModule(t,i-2,o,d)&&(u|=1),u<<=1,this.readModule(t,i-1,o,d)&&(u|=1),u<<=1,this.readModule(t,i,o,d)&&(u|=1),u}readCorner1(t,i){let o=0;return this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,1,t,i)&&(o|=1),o<<=1,this.readModule(t-1,2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(2,i-1,t,i)&&(o|=1),o<<=1,this.readModule(3,i-1,t,i)&&(o|=1),o}readCorner2(t,i){let o=0;return this.readModule(t-3,0,t,i)&&(o|=1),o<<=1,this.readModule(t-2,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(0,i-4,t,i)&&(o|=1),o<<=1,this.readModule(0,i-3,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o}readCorner3(t,i){let o=0;return this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(0,i-3,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-3,t,i)&&(o|=1),o<<=1,this.readModule(1,i-2,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o}readCorner4(t,i){let o=0;return this.readModule(t-3,0,t,i)&&(o|=1),o<<=1,this.readModule(t-2,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(2,i-1,t,i)&&(o|=1),o<<=1,this.readModule(3,i-1,t,i)&&(o|=1),o}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new I("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=i/d|0,g=o/u|0,b=h*d,S=g*u,D=new re(S,b);for(let L=0;L<h;++L){const V=L*d;for(let Y=0;Y<g;++Y){const ae=Y*u;for(let ce=0;ce<d;++ce){const he=L*(d+2)+1+ce,be=V+ce;for(let Ve=0;Ve<u;++Ve){const He=Y*(u+2)+1+Ve;if(t.get(He,he)){const Le=ae+Ve;D.set(Le,be)}}}}}return D}}class Pl{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const o=i.getECBlocks();let d=0;const u=o.getECBlocks();for(let ce of u)d+=ce.getCount();const h=new Array(d);let g=0;for(let ce of u)for(let he=0;he<ce.getCount();he++){const be=ce.getDataCodewords(),Ve=o.getECCodewords()+be;h[g++]=new Pl(be,new Uint8Array(Ve))}const S=h[0].codewords.length-o.getECCodewords(),D=S-1;let L=0;for(let ce=0;ce<D;ce++)for(let he=0;he<g;he++)h[he].codewords[ce]=t[L++];const V=i.getVersionNumber()===24,Y=V?8:g;for(let ce=0;ce<Y;ce++)h[ce].codewords[S-1]=t[L++];const ae=h[0].codewords.length;for(let ce=S;ce<ae;ce++)for(let he=0;he<g;he++){const be=V?(he+8)%g:he,Ve=V&&be>7?ce-1:ce;h[be].codewords[Ve]=t[L++]}if(L!==t.length)throw new I;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ml{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new I(""+t);let i=0,o=this.bitOffset,d=this.byteOffset;const u=this.bytes;if(o>0){const h=8-o,g=t<h?t:h,b=h-g,S=255>>8-g<<b;i=(u[d]&S)>>b,t-=g,o+=g,o===8&&(o=0,d++)}if(t>0){for(;t>=8;)i=i<<8|u[d]&255,d++,t-=8;if(t>0){const h=8-t,g=255>>h<<h;i=i<<t|(u[d]&g)>>h,o+=t}}return this.bitOffset=o,this.byteOffset=d,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Jn;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(Jn||(Jn={}));class hs{static decode(t){const i=new Ml(t),o=new ge,d=new ge,u=new Array;let h=Jn.ASCII_ENCODE;do if(h===Jn.ASCII_ENCODE)h=this.decodeAsciiSegment(i,o,d);else{switch(h){case Jn.C40_ENCODE:this.decodeC40Segment(i,o);break;case Jn.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Jn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Jn.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Jn.BASE256_ENCODE:this.decodeBase256Segment(i,o,u);break;default:throw new G}h=Jn.ASCII_ENCODE}while(h!==Jn.PAD_ENCODE&&i.available()>0);return d.length()>0&&o.append(d.toString()),new qe(t,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,i,o){let d=!1;do{let u=t.readBits(8);if(u===0)throw new G;if(u<=128)return d&&(u+=128),i.append(String.fromCharCode(u-1)),Jn.ASCII_ENCODE;if(u===129)return Jn.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&i.append("0"),i.append(""+h)}else switch(u){case 230:return Jn.C40_ENCODE;case 231:return Jn.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Jn.ANSIX12_ENCODE;case 239:return Jn.TEXT_ENCODE;case 240:return Jn.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new G;break}}while(t.available()>0);return Jn.ASCII_ENCODE}static decodeC40Segment(t,i){let o=!1;const d=[];let u=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),d);for(let g=0;g<3;g++){const b=d[g];switch(u){case 0:if(b<3)u=b+1;else if(b<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[b];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else throw new G;break;case 1:o?(i.append(String.fromCharCode(b+128)),o=!1):i.append(String.fromCharCode(b)),u=0;break;case 2:if(b<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[b];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else switch(b){case 27:i.append("");break;case 30:o=!0;break;default:throw new G}u=0;break;case 3:o?(i.append(String.fromCharCode(b+224)),o=!1):i.append(String.fromCharCode(b+96)),u=0;break;default:throw new G}}}while(t.available()>0)}static decodeTextSegment(t,i){let o=!1,d=[],u=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),d);for(let g=0;g<3;g++){const b=d[g];switch(u){case 0:if(b<3)u=b+1;else if(b<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[b];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else throw new G;break;case 1:o?(i.append(String.fromCharCode(b+128)),o=!1):i.append(String.fromCharCode(b)),u=0;break;case 2:if(b<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[b];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S)}else switch(b){case 27:i.append("");break;case 30:o=!0;break;default:throw new G}u=0;break;case 3:if(b<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[b];o?(i.append(String.fromCharCode(S.charCodeAt(0)+128)),o=!1):i.append(S),u=0}else throw new G;break;default:throw new G}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const o=[];do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),o);for(let u=0;u<3;u++){const h=o[u];switch(h){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(h<14)i.append(String.fromCharCode(h+44));else if(h<40)i.append(String.fromCharCode(h+51));else throw new G;break}}}while(t.available()>0)}static parseTwoBytes(t,i,o){let d=(t<<8)+i-1,u=Math.floor(d/1600);o[0]=u,d-=u*1600,u=Math.floor(d/40),o[1]=u,o[2]=d-u*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let d=t.readBits(6);if(d===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(d&32)===0&&(d|=64),i.append(String.fromCharCode(d))}}while(t.available()>0)}static decodeBase256Segment(t,i,o){let d=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),d++);let h;if(u===0?h=t.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(t.readBits(8),d++),h<0)throw new G;const g=new Uint8Array(h);for(let b=0;b<h;b++){if(t.available()<8)throw new G;g[b]=this.unrandomize255State(t.readBits(8),d++)}o.push(g);try{i.append(Ee.decode(g,ue.ISO88591))}catch(b){throw new Yt("Platform does not support required encoding: "+b.message)}}static unrandomize255State(t,i){const o=149*i%255+1,d=t-o;return d>=0?d:d+256}}hs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],hs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],hs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],hs.TEXT_SHIFT2_SET_CHARS=hs.C40_SHIFT2_SET_CHARS,hs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Io{constructor(){this.rsDecoder=new on(Xe.DATA_MATRIX_FIELD_256)}decode(t){const i=new Gr(t),o=i.getVersion(),d=i.readCodewords(),u=Pl.getDataBlocks(d,o);let h=0;for(let S of u)h+=S.getNumDataCodewords();const g=new Uint8Array(h),b=u.length;for(let S=0;S<b;S++){const D=u[S],L=D.getCodewords(),V=D.getNumDataCodewords();this.correctErrors(L,V);for(let Y=0;Y<V;Y++)g[Y*b+S]=L[Y]}return hs.decode(g)}correctErrors(t,i){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-i)}catch{throw new _}for(let d=0;d<i;d++)t[d]=o[d]}}class pn{constructor(t){this.image=t,this.rectangleDetector=new Bt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new q;i=this.shiftToModuleCenter(i);const o=i[0],d=i[1],u=i[2],h=i[3];let g=this.transitionsBetween(o,h)+1,b=this.transitionsBetween(u,h)+1;(g&1)===1&&(g+=1),(b&1)===1&&(b+=1),4*g<7*b&&4*b<7*g&&(g=b=Math.max(g,b));let S=pn.sampleGrid(this.image,o,d,u,h,g,b);return new at(S,[o,d,u,h])}static shiftPoint(t,i,o){let d=(i.getX()-t.getX())/(o+1),u=(i.getY()-t.getY())/(o+1);return new pe(t.getX()+d,t.getY()+u)}static moveAway(t,i,o){let d=t.getX(),u=t.getY();return d<i?d-=1:d+=1,u<o?u-=1:u+=1,new pe(d,u)}detectSolid1(t){let i=t[0],o=t[1],d=t[3],u=t[2],h=this.transitionsBetween(i,o),g=this.transitionsBetween(o,d),b=this.transitionsBetween(d,u),S=this.transitionsBetween(u,i),D=h,L=[u,i,o,d];return D>g&&(D=g,L[0]=i,L[1]=o,L[2]=d,L[3]=u),D>b&&(D=b,L[0]=o,L[1]=d,L[2]=u,L[3]=i),D>S&&(L[0]=d,L[1]=u,L[2]=i,L[3]=o),L}detectSolid2(t){let i=t[0],o=t[1],d=t[2],u=t[3],h=this.transitionsBetween(i,u),g=pn.shiftPoint(o,d,(h+1)*4),b=pn.shiftPoint(d,o,(h+1)*4),S=this.transitionsBetween(g,i),D=this.transitionsBetween(b,u);return S<D?(t[0]=i,t[1]=o,t[2]=d,t[3]=u):(t[0]=o,t[1]=d,t[2]=u,t[3]=i),t}correctTopRight(t){let i=t[0],o=t[1],d=t[2],u=t[3],h=this.transitionsBetween(i,u),g=this.transitionsBetween(o,u),b=pn.shiftPoint(i,o,(g+1)*4),S=pn.shiftPoint(d,o,(h+1)*4);h=this.transitionsBetween(b,u),g=this.transitionsBetween(S,u);let D=new pe(u.getX()+(d.getX()-o.getX())/(h+1),u.getY()+(d.getY()-o.getY())/(h+1)),L=new pe(u.getX()+(i.getX()-o.getX())/(g+1),u.getY()+(i.getY()-o.getY())/(g+1));if(!this.isValid(D))return this.isValid(L)?L:null;if(!this.isValid(L))return D;let V=this.transitionsBetween(b,D)+this.transitionsBetween(S,D),Y=this.transitionsBetween(b,L)+this.transitionsBetween(S,L);return V>Y?D:L}shiftToModuleCenter(t){let i=t[0],o=t[1],d=t[2],u=t[3],h=this.transitionsBetween(i,u)+1,g=this.transitionsBetween(d,u)+1,b=pn.shiftPoint(i,o,g*4),S=pn.shiftPoint(d,o,h*4);h=this.transitionsBetween(b,u)+1,g=this.transitionsBetween(S,u)+1,(h&1)===1&&(h+=1),(g&1)===1&&(g+=1);let D=(i.getX()+o.getX()+d.getX()+u.getX())/4,L=(i.getY()+o.getY()+d.getY()+u.getY())/4;i=pn.moveAway(i,D,L),o=pn.moveAway(o,D,L),d=pn.moveAway(d,D,L),u=pn.moveAway(u,D,L);let V,Y;return b=pn.shiftPoint(i,o,g*4),b=pn.shiftPoint(b,u,h*4),V=pn.shiftPoint(o,i,g*4),V=pn.shiftPoint(V,d,h*4),S=pn.shiftPoint(d,u,g*4),S=pn.shiftPoint(S,o,h*4),Y=pn.shiftPoint(u,d,g*4),Y=pn.shiftPoint(Y,i,h*4),[b,V,S,Y]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,o,d,u,h,g){return vn.getInstance().sampleGrid(t,h,g,.5,.5,h-.5,.5,h-.5,g-.5,.5,g-.5,i.getX(),i.getY(),u.getX(),u.getY(),d.getX(),d.getY(),o.getX(),o.getY())}transitionsBetween(t,i){let o=Math.trunc(t.getX()),d=Math.trunc(t.getY()),u=Math.trunc(i.getX()),h=Math.trunc(i.getY()),g=Math.abs(h-d)>Math.abs(u-o);if(g){let ce=o;o=d,d=ce,ce=u,u=h,h=ce}let b=Math.abs(u-o),S=Math.abs(h-d),D=-b/2,L=d<h?1:-1,V=o<u?1:-1,Y=0,ae=this.image.get(g?d:o,g?o:d);for(let ce=o,he=d;ce!==u;ce+=V){let be=this.image.get(g?he:ce,g?ce:he);if(be!==ae&&(Y++,ae=be),D+=S,D>0){if(he===h)break;he+=L,D-=b}}return Y}}class ms{constructor(){this.decoder=new Io}decode(t,i=null){let o,d;if(i!=null&&i.has(te.PURE_BARCODE)){const S=ms.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(S),d=ms.NO_POINTS}else{const S=new pn(t.getBlackMatrix()).detect();o=this.decoder.decode(S.getBits()),d=S.getPoints()}const u=o.getRawBytes(),h=new Ie(o.getText(),u,8*u.length,d,_e.DATA_MATRIX,R.currentTimeMillis()),g=o.getByteSegments();g!=null&&h.putMetadata(Ue.BYTE_SEGMENTS,g);const b=o.getECLevel();return b!=null&&h.putMetadata(Ue.ERROR_CORRECTION_LEVEL,b),h}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(i==null||o==null)throw new q;const d=this.moduleSize(i,t);let u=i[1];const h=o[1];let g=i[0];const S=(o[0]-g+1)/d,D=(h-u+1)/d;if(S<=0||D<=0)throw new q;const L=d/2;u+=L,g+=L;const V=new re(S,D);for(let Y=0;Y<D;Y++){const ae=u+Y*d;for(let ce=0;ce<S;ce++)t.get(g+ce*d,ae)&&V.set(ce,Y)}return V}static moduleSize(t,i){const o=i.getWidth();let d=t[0];const u=t[1];for(;d<o&&i.get(d,u);)d++;if(d===o)throw new q;const h=d-t[0];if(h===0)throw new q;return h}}ms.NO_POINTS=[];class Rf extends je{constructor(t=500){super(new ms,t)}}var Xa;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(Xa||(Xa={}));class cn{constructor(t,i,o){this.value=t,this.stringValue=i,this.bits=o,cn.FOR_BITS.set(o,this),cn.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return cn.L;case"M":return cn.M;case"Q":return cn.Q;case"H":return cn.H;default:throw new E(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof cn))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=cn.FOR_BITS.size)throw new I;return cn.FOR_BITS.get(t)}}cn.FOR_BITS=new Map,cn.FOR_VALUE=new Map,cn.L=new cn(Xa.L,"L",1),cn.M=new cn(Xa.M,"M",0),cn.Q=new cn(Xa.Q,"Q",3),cn.H=new cn(Xa.H,"H",2);class mr{constructor(t){this.errorCorrectionLevel=cn.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return F.bitCount(t^i)}static decodeFormatInformation(t,i){const o=mr.doDecodeFormatInformation(t,i);return o!==null?o:mr.doDecodeFormatInformation(t^mr.FORMAT_INFO_MASK_QR,i^mr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let o=Number.MAX_SAFE_INTEGER,d=0;for(const u of mr.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===t||h===i)return new mr(u[1]);let g=mr.numBitsDiffering(t,h);g<o&&(d=u[1],o=g),t!==i&&(g=mr.numBitsDiffering(i,h),g<o&&(d=u[1],o=g))}return o<=3?new mr(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof mr))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}mr.FORMAT_INFO_MASK_QR=21522,mr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class xe{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const o of i)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ${constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class mt{constructor(t,i,...o){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=o;let d=0;const u=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();for(const g of h)d+=g.getCount()*(g.getDataCodewords()+u);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new G;try{return this.getVersionForNumber((t-17)/4)}catch{throw new G}}static getVersionForNumber(t){if(t<1||t>40)throw new I;return mt.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,o=0;for(let d=0;d<mt.VERSION_DECODE_INFO.length;d++){const u=mt.VERSION_DECODE_INFO[d];if(u===t)return mt.getVersionForNumber(d+7);const h=mr.numBitsDiffering(t,u);h<i&&(o=d+7,i=h)}return i<=3?mt.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new re(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let d=0;d<o;d++){const u=this.alignmentPatternCenters[d]-2;for(let h=0;h<o;h++)d===0&&(h===0||h===o-1)||d===o-1&&h===0||i.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}mt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),mt.VERSIONS=[new mt(1,new Int32Array(0),new xe(7,new $(1,19)),new xe(10,new $(1,16)),new xe(13,new $(1,13)),new xe(17,new $(1,9))),new mt(2,Int32Array.from([6,18]),new xe(10,new $(1,34)),new xe(16,new $(1,28)),new xe(22,new $(1,22)),new xe(28,new $(1,16))),new mt(3,Int32Array.from([6,22]),new xe(15,new $(1,55)),new xe(26,new $(1,44)),new xe(18,new $(2,17)),new xe(22,new $(2,13))),new mt(4,Int32Array.from([6,26]),new xe(20,new $(1,80)),new xe(18,new $(2,32)),new xe(26,new $(2,24)),new xe(16,new $(4,9))),new mt(5,Int32Array.from([6,30]),new xe(26,new $(1,108)),new xe(24,new $(2,43)),new xe(18,new $(2,15),new $(2,16)),new xe(22,new $(2,11),new $(2,12))),new mt(6,Int32Array.from([6,34]),new xe(18,new $(2,68)),new xe(16,new $(4,27)),new xe(24,new $(4,19)),new xe(28,new $(4,15))),new mt(7,Int32Array.from([6,22,38]),new xe(20,new $(2,78)),new xe(18,new $(4,31)),new xe(18,new $(2,14),new $(4,15)),new xe(26,new $(4,13),new $(1,14))),new mt(8,Int32Array.from([6,24,42]),new xe(24,new $(2,97)),new xe(22,new $(2,38),new $(2,39)),new xe(22,new $(4,18),new $(2,19)),new xe(26,new $(4,14),new $(2,15))),new mt(9,Int32Array.from([6,26,46]),new xe(30,new $(2,116)),new xe(22,new $(3,36),new $(2,37)),new xe(20,new $(4,16),new $(4,17)),new xe(24,new $(4,12),new $(4,13))),new mt(10,Int32Array.from([6,28,50]),new xe(18,new $(2,68),new $(2,69)),new xe(26,new $(4,43),new $(1,44)),new xe(24,new $(6,19),new $(2,20)),new xe(28,new $(6,15),new $(2,16))),new mt(11,Int32Array.from([6,30,54]),new xe(20,new $(4,81)),new xe(30,new $(1,50),new $(4,51)),new xe(28,new $(4,22),new $(4,23)),new xe(24,new $(3,12),new $(8,13))),new mt(12,Int32Array.from([6,32,58]),new xe(24,new $(2,92),new $(2,93)),new xe(22,new $(6,36),new $(2,37)),new xe(26,new $(4,20),new $(6,21)),new xe(28,new $(7,14),new $(4,15))),new mt(13,Int32Array.from([6,34,62]),new xe(26,new $(4,107)),new xe(22,new $(8,37),new $(1,38)),new xe(24,new $(8,20),new $(4,21)),new xe(22,new $(12,11),new $(4,12))),new mt(14,Int32Array.from([6,26,46,66]),new xe(30,new $(3,115),new $(1,116)),new xe(24,new $(4,40),new $(5,41)),new xe(20,new $(11,16),new $(5,17)),new xe(24,new $(11,12),new $(5,13))),new mt(15,Int32Array.from([6,26,48,70]),new xe(22,new $(5,87),new $(1,88)),new xe(24,new $(5,41),new $(5,42)),new xe(30,new $(5,24),new $(7,25)),new xe(24,new $(11,12),new $(7,13))),new mt(16,Int32Array.from([6,26,50,74]),new xe(24,new $(5,98),new $(1,99)),new xe(28,new $(7,45),new $(3,46)),new xe(24,new $(15,19),new $(2,20)),new xe(30,new $(3,15),new $(13,16))),new mt(17,Int32Array.from([6,30,54,78]),new xe(28,new $(1,107),new $(5,108)),new xe(28,new $(10,46),new $(1,47)),new xe(28,new $(1,22),new $(15,23)),new xe(28,new $(2,14),new $(17,15))),new mt(18,Int32Array.from([6,30,56,82]),new xe(30,new $(5,120),new $(1,121)),new xe(26,new $(9,43),new $(4,44)),new xe(28,new $(17,22),new $(1,23)),new xe(28,new $(2,14),new $(19,15))),new mt(19,Int32Array.from([6,30,58,86]),new xe(28,new $(3,113),new $(4,114)),new xe(26,new $(3,44),new $(11,45)),new xe(26,new $(17,21),new $(4,22)),new xe(26,new $(9,13),new $(16,14))),new mt(20,Int32Array.from([6,34,62,90]),new xe(28,new $(3,107),new $(5,108)),new xe(26,new $(3,41),new $(13,42)),new xe(30,new $(15,24),new $(5,25)),new xe(28,new $(15,15),new $(10,16))),new mt(21,Int32Array.from([6,28,50,72,94]),new xe(28,new $(4,116),new $(4,117)),new xe(26,new $(17,42)),new xe(28,new $(17,22),new $(6,23)),new xe(30,new $(19,16),new $(6,17))),new mt(22,Int32Array.from([6,26,50,74,98]),new xe(28,new $(2,111),new $(7,112)),new xe(28,new $(17,46)),new xe(30,new $(7,24),new $(16,25)),new xe(24,new $(34,13))),new mt(23,Int32Array.from([6,30,54,78,102]),new xe(30,new $(4,121),new $(5,122)),new xe(28,new $(4,47),new $(14,48)),new xe(30,new $(11,24),new $(14,25)),new xe(30,new $(16,15),new $(14,16))),new mt(24,Int32Array.from([6,28,54,80,106]),new xe(30,new $(6,117),new $(4,118)),new xe(28,new $(6,45),new $(14,46)),new xe(30,new $(11,24),new $(16,25)),new xe(30,new $(30,16),new $(2,17))),new mt(25,Int32Array.from([6,32,58,84,110]),new xe(26,new $(8,106),new $(4,107)),new xe(28,new $(8,47),new $(13,48)),new xe(30,new $(7,24),new $(22,25)),new xe(30,new $(22,15),new $(13,16))),new mt(26,Int32Array.from([6,30,58,86,114]),new xe(28,new $(10,114),new $(2,115)),new xe(28,new $(19,46),new $(4,47)),new xe(28,new $(28,22),new $(6,23)),new xe(30,new $(33,16),new $(4,17))),new mt(27,Int32Array.from([6,34,62,90,118]),new xe(30,new $(8,122),new $(4,123)),new xe(28,new $(22,45),new $(3,46)),new xe(30,new $(8,23),new $(26,24)),new xe(30,new $(12,15),new $(28,16))),new mt(28,Int32Array.from([6,26,50,74,98,122]),new xe(30,new $(3,117),new $(10,118)),new xe(28,new $(3,45),new $(23,46)),new xe(30,new $(4,24),new $(31,25)),new xe(30,new $(11,15),new $(31,16))),new mt(29,Int32Array.from([6,30,54,78,102,126]),new xe(30,new $(7,116),new $(7,117)),new xe(28,new $(21,45),new $(7,46)),new xe(30,new $(1,23),new $(37,24)),new xe(30,new $(19,15),new $(26,16))),new mt(30,Int32Array.from([6,26,52,78,104,130]),new xe(30,new $(5,115),new $(10,116)),new xe(28,new $(19,47),new $(10,48)),new xe(30,new $(15,24),new $(25,25)),new xe(30,new $(23,15),new $(25,16))),new mt(31,Int32Array.from([6,30,56,82,108,134]),new xe(30,new $(13,115),new $(3,116)),new xe(28,new $(2,46),new $(29,47)),new xe(30,new $(42,24),new $(1,25)),new xe(30,new $(23,15),new $(28,16))),new mt(32,Int32Array.from([6,34,60,86,112,138]),new xe(30,new $(17,115)),new xe(28,new $(10,46),new $(23,47)),new xe(30,new $(10,24),new $(35,25)),new xe(30,new $(19,15),new $(35,16))),new mt(33,Int32Array.from([6,30,58,86,114,142]),new xe(30,new $(17,115),new $(1,116)),new xe(28,new $(14,46),new $(21,47)),new xe(30,new $(29,24),new $(19,25)),new xe(30,new $(11,15),new $(46,16))),new mt(34,Int32Array.from([6,34,62,90,118,146]),new xe(30,new $(13,115),new $(6,116)),new xe(28,new $(14,46),new $(23,47)),new xe(30,new $(44,24),new $(7,25)),new xe(30,new $(59,16),new $(1,17))),new mt(35,Int32Array.from([6,30,54,78,102,126,150]),new xe(30,new $(12,121),new $(7,122)),new xe(28,new $(12,47),new $(26,48)),new xe(30,new $(39,24),new $(14,25)),new xe(30,new $(22,15),new $(41,16))),new mt(36,Int32Array.from([6,24,50,76,102,128,154]),new xe(30,new $(6,121),new $(14,122)),new xe(28,new $(6,47),new $(34,48)),new xe(30,new $(46,24),new $(10,25)),new xe(30,new $(2,15),new $(64,16))),new mt(37,Int32Array.from([6,28,54,80,106,132,158]),new xe(30,new $(17,122),new $(4,123)),new xe(28,new $(29,46),new $(14,47)),new xe(30,new $(49,24),new $(10,25)),new xe(30,new $(24,15),new $(46,16))),new mt(38,Int32Array.from([6,32,58,84,110,136,162]),new xe(30,new $(4,122),new $(18,123)),new xe(28,new $(13,46),new $(32,47)),new xe(30,new $(48,24),new $(14,25)),new xe(30,new $(42,15),new $(32,16))),new mt(39,Int32Array.from([6,26,54,82,110,138,166]),new xe(30,new $(20,117),new $(4,118)),new xe(28,new $(40,47),new $(7,48)),new xe(30,new $(43,24),new $(22,25)),new xe(30,new $(10,15),new $(67,16))),new mt(40,Int32Array.from([6,30,58,86,114,142,170]),new xe(30,new $(19,118),new $(6,119)),new xe(28,new $(18,47),new $(31,48)),new xe(30,new $(34,24),new $(34,25)),new xe(30,new $(20,15),new $(61,16)))];var Xn;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(Xn||(Xn={}));class kt{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let o=0;o<i;o++)for(let d=0;d<i;d++)this.isMasked(o,d)&&t.flip(d,o)}}kt.values=new Map([[Xn.DATA_MASK_000,new kt(Xn.DATA_MASK_000,(M,t)=>(M+t&1)===0)],[Xn.DATA_MASK_001,new kt(Xn.DATA_MASK_001,(M,t)=>(M&1)===0)],[Xn.DATA_MASK_010,new kt(Xn.DATA_MASK_010,(M,t)=>t%3===0)],[Xn.DATA_MASK_011,new kt(Xn.DATA_MASK_011,(M,t)=>(M+t)%3===0)],[Xn.DATA_MASK_100,new kt(Xn.DATA_MASK_100,(M,t)=>(Math.floor(M/2)+Math.floor(t/3)&1)===0)],[Xn.DATA_MASK_101,new kt(Xn.DATA_MASK_101,(M,t)=>M*t%6===0)],[Xn.DATA_MASK_110,new kt(Xn.DATA_MASK_110,(M,t)=>M*t%6<3)],[Xn.DATA_MASK_111,new kt(Xn.DATA_MASK_111,(M,t)=>(M+t+M*t%3&1)===0)]]);class ud{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new G;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const i=this.bitMatrix.getHeight();let o=0;const d=i-7;for(let u=i-1;u>=d;u--)o=this.copyBit(8,u,o);for(let u=i-8;u<i;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=mr.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return mt.getVersionForNumber(i);let o=0;const d=t-11;for(let h=5;h>=0;h--)for(let g=t-9;g>=d;g--)o=this.copyBit(g,h,o);let u=mt.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;o=0;for(let h=5;h>=0;h--)for(let g=t-9;g>=d;g--)o=this.copyBit(h,g,o);if(u=mt.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new G}copyBit(t,i,o){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),o=kt.values.get(t.getDataMask()),d=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,d);const u=i.buildFunctionPattern();let h=!0;const g=new Uint8Array(i.getTotalCodewords());let b=0,S=0,D=0;for(let L=d-1;L>0;L-=2){L===6&&L--;for(let V=0;V<d;V++){const Y=h?d-1-V:V;for(let ae=0;ae<2;ae++)u.get(L-ae,Y)||(D++,S<<=1,this.bitMatrix.get(L-ae,Y)&&(S|=1),D===8&&(g[b++]=S,D=0,S=0))}h=!h}if(b!==i.getTotalCodewords())throw new G;return g}remask(){if(this.parsedFormatInfo===null)return;const t=kt.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,o=t.getWidth();i<o;i++)for(let d=i+1,u=t.getHeight();d<u;d++)t.get(i,d)!==t.get(d,i)&&(t.flip(d,i),t.flip(i,d))}}class jo{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,o){if(t.length!==i.getTotalCodewords())throw new I;const d=i.getECBlocksForLevel(o);let u=0;const h=d.getECBlocks();for(const ae of h)u+=ae.getCount();const g=new Array(u);let b=0;for(const ae of h)for(let ce=0;ce<ae.getCount();ce++){const he=ae.getDataCodewords(),be=d.getECCodewordsPerBlock()+he;g[b++]=new jo(he,new Uint8Array(be))}const S=g[0].codewords.length;let D=g.length-1;for(;D>=0&&g[D].codewords.length!==S;)D--;D++;const L=S-d.getECCodewordsPerBlock();let V=0;for(let ae=0;ae<L;ae++)for(let ce=0;ce<b;ce++)g[ce].codewords[ae]=t[V++];for(let ae=D;ae<b;ae++)g[ae].codewords[L]=t[V++];const Y=g[0].codewords.length;for(let ae=L;ae<Y;ae++)for(let ce=0;ce<b;ce++){const he=ce<D?ae:ae+1;g[ce].codewords[he]=t[V++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pr;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(Pr||(Pr={}));class pt{constructor(t,i,o,d){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=d,pt.FOR_BITS.set(d,this),pt.FOR_VALUE.set(t,this)}static forBits(t){const i=pt.FOR_BITS.get(t);if(i===void 0)throw new I;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof pt))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}pt.FOR_BITS=new Map,pt.FOR_VALUE=new Map,pt.TERMINATOR=new pt(Pr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),pt.NUMERIC=new pt(Pr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),pt.ALPHANUMERIC=new pt(Pr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),pt.STRUCTURED_APPEND=new pt(Pr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),pt.BYTE=new pt(Pr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),pt.ECI=new pt(Pr.ECI,"ECI",Int32Array.from([0,0,0]),7),pt.KANJI=new pt(Pr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),pt.FNC1_FIRST_POSITION=new pt(Pr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),pt.FNC1_SECOND_POSITION=new pt(Pr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),pt.HANZI=new pt(Pr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class bn{static decode(t,i,o,d){const u=new Ml(t);let h=new ge;const g=new Array;let b=-1,S=-1;try{let D=null,L=!1,V;do{if(u.available()<4)V=pt.TERMINATOR;else{const Y=u.readBits(4);V=pt.forBits(Y)}switch(V){case pt.TERMINATOR:break;case pt.FNC1_FIRST_POSITION:case pt.FNC1_SECOND_POSITION:L=!0;break;case pt.STRUCTURED_APPEND:if(u.available()<16)throw new G;b=u.readBits(8),S=u.readBits(8);break;case pt.ECI:const Y=bn.parseECIValue(u);if(D=se.getCharacterSetECIByValue(Y),D===null)throw new G;break;case pt.HANZI:const ae=u.readBits(4),ce=u.readBits(V.getCharacterCountBits(i));ae===bn.GB2312_SUBSET&&bn.decodeHanziSegment(u,h,ce);break;default:const he=u.readBits(V.getCharacterCountBits(i));switch(V){case pt.NUMERIC:bn.decodeNumericSegment(u,h,he);break;case pt.ALPHANUMERIC:bn.decodeAlphanumericSegment(u,h,he,L);break;case pt.BYTE:bn.decodeByteSegment(u,h,he,D,g,d);break;case pt.KANJI:bn.decodeKanjiSegment(u,h,he);break;default:throw new G}break}}while(V!==pt.TERMINATOR)}catch{throw new G}return new qe(t,h.toString(),g.length===0?null:g,o===null?null:o.toString(),b,S)}static decodeHanziSegment(t,i,o){if(o*13>t.available())throw new G;const d=new Uint8Array(2*o);let u=0;for(;o>0;){const h=t.readBits(13);let g=h/96<<8&4294967295|h%96;g<959?g+=41377:g+=42657,d[u]=g>>8&255,d[u+1]=g&255,u+=2,o--}try{i.append(Ee.decode(d,ue.GB2312))}catch(h){throw new G(h)}}static decodeKanjiSegment(t,i,o){if(o*13>t.available())throw new G;const d=new Uint8Array(2*o);let u=0;for(;o>0;){const h=t.readBits(13);let g=h/192<<8&4294967295|h%192;g<7936?g+=33088:g+=49472,d[u]=g>>8,d[u+1]=g,u+=2,o--}try{i.append(Ee.decode(d,ue.SHIFT_JIS))}catch(h){throw new G(h)}}static decodeByteSegment(t,i,o,d,u,h){if(8*o>t.available())throw new G;const g=new Uint8Array(o);for(let S=0;S<o;S++)g[S]=t.readBits(8);let b;d===null?b=ue.guessEncoding(g,h):b=d.getName();try{i.append(Ee.decode(g,b))}catch(S){throw new G(S)}u.push(g)}static toAlphaNumericChar(t){if(t>=bn.ALPHANUMERIC_CHARS.length)throw new G;return bn.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,o,d){const u=i.length();for(;o>1;){if(t.available()<11)throw new G;const h=t.readBits(11);i.append(bn.toAlphaNumericChar(Math.floor(h/45))),i.append(bn.toAlphaNumericChar(h%45)),o-=2}if(o===1){if(t.available()<6)throw new G;i.append(bn.toAlphaNumericChar(t.readBits(6)))}if(d)for(let h=u;h<i.length();h++)i.charAt(h)==="%"&&(h<i.length()-1&&i.charAt(h+1)==="%"?i.deleteCharAt(h+1):i.setCharAt(h,""))}static decodeNumericSegment(t,i,o){for(;o>=3;){if(t.available()<10)throw new G;const d=t.readBits(10);if(d>=1e3)throw new G;i.append(bn.toAlphaNumericChar(Math.floor(d/100))),i.append(bn.toAlphaNumericChar(Math.floor(d/10)%10)),i.append(bn.toAlphaNumericChar(d%10)),o-=3}if(o===2){if(t.available()<7)throw new G;const d=t.readBits(7);if(d>=100)throw new G;i.append(bn.toAlphaNumericChar(Math.floor(d/10))),i.append(bn.toAlphaNumericChar(d%10))}else if(o===1){if(t.available()<4)throw new G;const d=t.readBits(4);if(d>=10)throw new G;i.append(bn.toAlphaNumericChar(d))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const o=t.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=t.readBits(16);return(i&31)<<16&4294967295|o}throw new G}}bn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",bn.GB2312_SUBSET=1;class Ll{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class Fl{constructor(){this.rsDecoder=new on(Xe.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(re.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const o=new ud(t);let d=null;try{return this.decodeBitMatrixParser(o,i)}catch(u){d=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,i);return u.setOther(new Ll(!0)),u}catch(u){throw d!==null?d:u}}decodeBitMatrixParser(t,i){const o=t.readVersion(),d=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),h=jo.getDataBlocks(u,o,d);let g=0;for(const D of h)g+=D.getNumDataCodewords();const b=new Uint8Array(g);let S=0;for(const D of h){const L=D.getCodewords(),V=D.getNumDataCodewords();this.correctErrors(L,V);for(let Y=0;Y<V;Y++)b[S++]=L[Y]}return bn.decode(b,o,d,i)}correctErrors(t,i){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-i)}catch{throw new _}for(let d=0;d<i;d++)t[d]=o[d]}}class Ya extends pe{constructor(t,i,o){super(t,i),this.estimatedModuleSize=o}aboutEquals(t,i,o){if(Math.abs(i-this.getY())<=t&&Math.abs(o-this.getX())<=t){const d=Math.abs(t-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(t,i,o){const d=(this.getX()+i)/2,u=(this.getY()+t)/2,h=(this.estimatedModuleSize+o)/2;return new Ya(d,u,h)}}class ps{constructor(t,i,o,d,u,h,g){this.image=t,this.startX=i,this.startY=o,this.width=d,this.height=u,this.moduleSize=h,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,o=this.width,d=t+o,u=this.startY+i/2,h=new Int32Array(3),g=this.image;for(let b=0;b<i;b++){const S=u+((b&1)===0?Math.floor((b+1)/2):-Math.floor((b+1)/2));h[0]=0,h[1]=0,h[2]=0;let D=t;for(;D<d&&!g.get(D,S);)D++;let L=0;for(;D<d;){if(g.get(D,S))if(L===1)h[1]++;else if(L===2){if(this.foundPatternCross(h)){const V=this.handlePossibleCenter(h,S,D);if(V!==null)return V}h[0]=h[2],h[1]=1,h[2]=0,L=1}else h[++L]++;else L===1&&L++,h[L]++;D++}if(this.foundPatternCross(h)){const V=this.handlePossibleCenter(h,S,d);if(V!==null)return V}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new q}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,o=i/2;for(let d=0;d<3;d++)if(Math.abs(i-t[d])>=o)return!1;return!0}crossCheckVertical(t,i,o,d){const u=this.image,h=u.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let b=t;for(;b>=0&&u.get(i,b)&&g[1]<=o;)g[1]++,b--;if(b<0||g[1]>o)return NaN;for(;b>=0&&!u.get(i,b)&&g[0]<=o;)g[0]++,b--;if(g[0]>o)return NaN;for(b=t+1;b<h&&u.get(i,b)&&g[1]<=o;)g[1]++,b++;if(b===h||g[1]>o)return NaN;for(;b<h&&!u.get(i,b)&&g[2]<=o;)g[2]++,b++;if(g[2]>o)return NaN;const S=g[0]+g[1]+g[2];return 5*Math.abs(S-d)>=2*d?NaN:this.foundPatternCross(g)?ps.centerFromEnd(g,b):NaN}handlePossibleCenter(t,i,o){const d=t[0]+t[1]+t[2],u=ps.centerFromEnd(t,o),h=this.crossCheckVertical(i,u,2*t[1],d);if(!isNaN(h)){const g=(t[0]+t[1]+t[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(g,h,u))return S.combineEstimate(h,u,g);const b=new Ya(u,h,g);this.possibleCenters.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return null}}class Ts extends pe{constructor(t,i,o,d){super(t,i),this.estimatedModuleSize=o,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,o){if(Math.abs(i-this.getY())<=t&&Math.abs(o-this.getX())<=t){const d=Math.abs(t-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(t,i,o){const d=this.count+1,u=(this.count*this.getX()+i)/d,h=(this.count*this.getY()+t)/d,g=(this.count*this.estimatedModuleSize+o)/d;return new Ts(u,h,g,d)}}class ia{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ln{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(te.TRY_HARDER)!==void 0,o=t!=null&&t.get(te.PURE_BARCODE)!==void 0,d=this.image,u=d.getHeight(),h=d.getWidth();let g=Math.floor(3*u/(4*Ln.MAX_MODULES));(g<Ln.MIN_SKIP||i)&&(g=Ln.MIN_SKIP);let b=!1;const S=new Int32Array(5);for(let L=g-1;L<u&&!b;L+=g){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let V=0;for(let Y=0;Y<h;Y++)if(d.get(Y,L))(V&1)===1&&V++,S[V]++;else if((V&1)===0)if(V===4)if(Ln.foundPatternCross(S)){if(this.handlePossibleCenter(S,L,Y,o)===!0)if(g=2,this.hasSkipped===!0)b=this.haveMultiplyConfirmedCenters();else{const ce=this.findRowSkip();ce>S[2]&&(L+=ce-S[2]-g,Y=h-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,V=3;continue}V=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,V=3;else S[++V]++;else S[V]++;Ln.foundPatternCross(S)&&this.handlePossibleCenter(S,L,h,o)===!0&&(g=S[0],this.hasSkipped&&(b=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return pe.orderBestPatterns(D),new ia(D)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let u=0;u<5;u++){const h=t[u];if(h===0)return!1;i+=h}if(i<7)return!1;const o=i/7,d=o/2;return Math.abs(o-t[0])<d&&Math.abs(o-t[1])<d&&Math.abs(3*o-t[2])<3*d&&Math.abs(o-t[3])<d&&Math.abs(o-t[4])<d}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,o,d){const u=this.getCrossCheckStateCount();let h=0;const g=this.image;for(;t>=h&&i>=h&&g.get(i-h,t-h);)u[2]++,h++;if(t<h||i<h)return!1;for(;t>=h&&i>=h&&!g.get(i-h,t-h)&&u[1]<=o;)u[1]++,h++;if(t<h||i<h||u[1]>o)return!1;for(;t>=h&&i>=h&&g.get(i-h,t-h)&&u[0]<=o;)u[0]++,h++;if(u[0]>o)return!1;const b=g.getHeight(),S=g.getWidth();for(h=1;t+h<b&&i+h<S&&g.get(i+h,t+h);)u[2]++,h++;if(t+h>=b||i+h>=S)return!1;for(;t+h<b&&i+h<S&&!g.get(i+h,t+h)&&u[3]<o;)u[3]++,h++;if(t+h>=b||i+h>=S||u[3]>=o)return!1;for(;t+h<b&&i+h<S&&g.get(i+h,t+h)&&u[4]<o;)u[4]++,h++;if(u[4]>=o)return!1;const D=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(D-d)<2*d&&Ln.foundPatternCross(u)}crossCheckVertical(t,i,o,d){const u=this.image,h=u.getHeight(),g=this.getCrossCheckStateCount();let b=t;for(;b>=0&&u.get(i,b);)g[2]++,b--;if(b<0)return NaN;for(;b>=0&&!u.get(i,b)&&g[1]<=o;)g[1]++,b--;if(b<0||g[1]>o)return NaN;for(;b>=0&&u.get(i,b)&&g[0]<=o;)g[0]++,b--;if(g[0]>o)return NaN;for(b=t+1;b<h&&u.get(i,b);)g[2]++,b++;if(b===h)return NaN;for(;b<h&&!u.get(i,b)&&g[3]<o;)g[3]++,b++;if(b===h||g[3]>=o)return NaN;for(;b<h&&u.get(i,b)&&g[4]<o;)g[4]++,b++;if(g[4]>=o)return NaN;const S=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(S-d)>=2*d?NaN:Ln.foundPatternCross(g)?Ln.centerFromEnd(g,b):NaN}crossCheckHorizontal(t,i,o,d){const u=this.image,h=u.getWidth(),g=this.getCrossCheckStateCount();let b=t;for(;b>=0&&u.get(b,i);)g[2]++,b--;if(b<0)return NaN;for(;b>=0&&!u.get(b,i)&&g[1]<=o;)g[1]++,b--;if(b<0||g[1]>o)return NaN;for(;b>=0&&u.get(b,i)&&g[0]<=o;)g[0]++,b--;if(g[0]>o)return NaN;for(b=t+1;b<h&&u.get(b,i);)g[2]++,b++;if(b===h)return NaN;for(;b<h&&!u.get(b,i)&&g[3]<o;)g[3]++,b++;if(b===h||g[3]>=o)return NaN;for(;b<h&&u.get(b,i)&&g[4]<o;)g[4]++,b++;if(g[4]>=o)return NaN;const S=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(S-d)>=d?NaN:Ln.foundPatternCross(g)?Ln.centerFromEnd(g,b):NaN}handlePossibleCenter(t,i,o,d){const u=t[0]+t[1]+t[2]+t[3]+t[4];let h=Ln.centerFromEnd(t,o),g=this.crossCheckVertical(i,Math.floor(h),t[2],u);if(!isNaN(g)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(g),t[2],u),!isNaN(h)&&(!d||this.crossCheckDiagonal(Math.floor(g),Math.floor(h),t[2],u)))){const b=u/7;let S=!1;const D=this.possibleCenters;for(let L=0,V=D.length;L<V;L++){const Y=D[L];if(Y.aboutEquals(b,g,h)){D[L]=Y.combineEstimate(g,h,b),S=!0;break}}if(!S){const L=new Ts(h,g,b);D.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Ln.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const o=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=Ln.CENTER_QUORUM&&(t++,i+=h.getEstimatedModuleSize());if(t<3)return!1;const d=i/o;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-d);return u<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new q;const i=this.possibleCenters;let o;if(t>3){let d=0,u=0;for(const b of this.possibleCenters){const S=b.getEstimatedModuleSize();d+=S,u+=S*S}o=d/t;let h=Math.sqrt(u/t-o*o);i.sort((b,S)=>{const D=Math.abs(S.getEstimatedModuleSize()-o),L=Math.abs(b.getEstimatedModuleSize()-o);return D<L?-1:D>L?1:0});const g=Math.max(.2*o,h);for(let b=0;b<i.length&&i.length>3;b++){const S=i[b];Math.abs(S.getEstimatedModuleSize()-o)>g&&(i.splice(b,1),b--)}}if(i.length>3){let d=0;for(const u of i)d+=u.getEstimatedModuleSize();o=d/i.length,i.sort((u,h)=>{if(h.getCount()===u.getCount()){const g=Math.abs(h.getEstimatedModuleSize()-o),b=Math.abs(u.getEstimatedModuleSize()-o);return g<b?1:g>b?-1:0}else return h.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Ln.CENTER_QUORUM=2,Ln.MIN_SKIP=3,Ln.MAX_MODULES=57;class Ws{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(te.NEED_RESULT_POINT_CALLBACK);const o=new Ln(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const i=t.getTopLeft(),o=t.getTopRight(),d=t.getBottomLeft(),u=this.calculateModuleSize(i,o,d);if(u<1)throw new q("No pattern found in proccess finder.");const h=Ws.computeDimension(i,o,d,u),g=mt.getProvisionalVersionForDimension(h),b=g.getDimensionForVersion()-7;let S=null;if(g.getAlignmentPatternCenters().length>0){const Y=o.getX()-i.getX()+d.getX(),ae=o.getY()-i.getY()+d.getY(),ce=1-3/b,he=Math.floor(i.getX()+ce*(Y-i.getX())),be=Math.floor(i.getY()+ce*(ae-i.getY()));for(let Ve=4;Ve<=16;Ve<<=1)try{S=this.findAlignmentInRegion(u,he,be,Ve);break}catch(He){if(!(He instanceof q))throw He}}const D=Ws.createTransform(i,o,d,S,h),L=Ws.sampleGrid(this.image,D,h);let V;return S===null?V=[d,i,o]:V=[d,i,o,S],new at(L,V)}static createTransform(t,i,o,d,u){const h=u-3.5;let g,b,S,D;return d!==null?(g=d.getX(),b=d.getY(),S=h-3,D=S):(g=i.getX()-t.getX()+o.getX(),b=i.getY()-t.getY()+o.getY(),S=h,D=h),Pt.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,S,D,3.5,h,t.getX(),t.getY(),i.getX(),i.getY(),g,b,o.getX(),o.getY())}static sampleGrid(t,i,o){return vn.getInstance().sampleGridWithTransform(t,o,o,i)}static computeDimension(t,i,o,d){const u=Be.round(pe.distance(t,i)/d),h=Be.round(pe.distance(t,o)/d);let g=Math.floor((u+h)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new q("Dimensions could be not found.")}return g}calculateModuleSize(t,i,o){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?d/7:isNaN(d)?o/7:(o+d)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,o,d){let u=this.sizeOfBlackWhiteBlackRun(t,i,o,d),h=1,g=t-(o-t);g<0?(h=t/(t-g),g=0):g>=this.image.getWidth()&&(h=(this.image.getWidth()-1-t)/(g-t),g=this.image.getWidth()-1);let b=Math.floor(i-(d-i)*h);return h=1,b<0?(h=i/(i-b),b=0):b>=this.image.getHeight()&&(h=(this.image.getHeight()-1-i)/(b-i),b=this.image.getHeight()-1),g=Math.floor(t+(g-t)*h),u+=this.sizeOfBlackWhiteBlackRun(t,i,g,b),u-1}sizeOfBlackWhiteBlackRun(t,i,o,d){const u=Math.abs(d-i)>Math.abs(o-t);if(u){let Y=t;t=i,i=Y,Y=o,o=d,d=Y}const h=Math.abs(o-t),g=Math.abs(d-i);let b=-h/2;const S=t<o?1:-1,D=i<d?1:-1;let L=0;const V=o+S;for(let Y=t,ae=i;Y!==V;Y+=S){const ce=u?ae:Y,he=u?Y:ae;if(L===1===this.image.get(ce,he)){if(L===2)return Be.distance(Y,ae,t,i);L++}if(b+=g,b>0){if(ae===d)break;ae+=D,b-=h}}return L===2?Be.distance(o+S,d,t,i):NaN}findAlignmentInRegion(t,i,o,d){const u=Math.floor(d*t),h=Math.max(0,i-u),g=Math.min(this.image.getWidth()-1,i+u);if(g-h<t*3)throw new q("Alignment top exceeds estimated module size.");const b=Math.max(0,o-u),S=Math.min(this.image.getHeight()-1,o+u);if(S-b<t*3)throw new q("Alignment bottom exceeds estimated module size.");return new ps(this.image,h,b,g-h,S-b,t,this.resultPointCallback).find()}}class Tr{constructor(){this.decoder=new Fl}getDecoder(){return this.decoder}decode(t,i){let o,d;if(i!=null&&i.get(te.PURE_BARCODE)!==void 0){const b=Tr.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(b,i),d=Tr.NO_POINTS}else{const b=new Ws(t.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(b.getBits(),i),d=b.getPoints()}o.getOther()instanceof Ll&&o.getOther().applyMirroredCorrection(d);const u=new Ie(o.getText(),o.getRawBytes(),void 0,d,_e.QR_CODE,void 0),h=o.getByteSegments();h!==null&&u.putMetadata(Ue.BYTE_SEGMENTS,h);const g=o.getECLevel();return g!==null&&u.putMetadata(Ue.ERROR_CORRECTION_LEVEL,g),o.hasStructuredAppend()&&(u.putMetadata(Ue.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Ue.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(i===null||o===null)throw new q;const d=this.moduleSize(i,t);let u=i[1],h=o[1],g=i[0],b=o[0];if(g>=b||u>=h)throw new q;if(h-u!==b-g&&(b=g+(h-u),b>=t.getWidth()))throw new q;const S=Math.round((b-g+1)/d),D=Math.round((h-u+1)/d);if(S<=0||D<=0)throw new q;if(D!==S)throw new q;const L=Math.floor(d/2);u+=L,g+=L;const V=g+Math.floor((S-1)*d)-b;if(V>0){if(V>L)throw new q;g-=V}const Y=u+Math.floor((D-1)*d)-h;if(Y>0){if(Y>L)throw new q;u-=Y}const ae=new re(S,D);for(let ce=0;ce<D;ce++){const he=u+Math.floor(ce*d);for(let be=0;be<S;be++)t.get(g+Math.floor(be*d),he)&&ae.set(be,ce)}return ae}static moduleSize(t,i){const o=i.getHeight(),d=i.getWidth();let u=t[0],h=t[1],g=!0,b=0;for(;u<d&&h<o;){if(g!==i.get(u,h)){if(++b===5)break;g=!g}u++,h++}if(u===d||h===o)throw new q;return(u-t[0])/7}}Tr.NO_POINTS=new Array;class Nt{PDF417Common(){}static getBitCountSum(t){return Be.sum(t)}static toIntArray(t){if(t==null||!t.length)return Nt.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let o=0;for(const d of t)i[o++]=d;return i}static getCodeword(t){const i=z.binarySearch(Nt.SYMBOL_TABLE,t&262143);return i<0?-1:(Nt.CODEWORD_TABLE[i]-1)%Nt.NUMBER_OF_CODEWORDS}}Nt.NUMBER_OF_CODEWORDS=929,Nt.MAX_CODEWORDS_IN_BARCODE=Nt.NUMBER_OF_CODEWORDS-1,Nt.MIN_ROWS_IN_BARCODE=3,Nt.MAX_ROWS_IN_BARCODE=90,Nt.MODULES_IN_CODEWORD=17,Nt.MODULES_IN_STOP_PATTERN=18,Nt.BARS_IN_MODULE=8,Nt.EMPTY_INT_ARRAY=new Int32Array([]),Nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class fd{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class At{static detectMultiple(t,i,o){let d=t.getBlackMatrix(),u=At.detect(o,d);return u.length||(d=d.clone(),d.rotate180(),u=At.detect(o,d)),new fd(d,u)}static detect(t,i){const o=new Array;let d=0,u=0,h=!1;for(;d<i.getHeight();){const g=At.findVertices(i,d,u);if(g[0]==null&&g[3]==null){if(!h)break;h=!1,u=0;for(const b of o)b[1]!=null&&(d=Math.trunc(Math.max(d,b[1].getY()))),b[3]!=null&&(d=Math.max(d,Math.trunc(b[3].getY())));d+=At.ROW_STEP;continue}if(h=!0,o.push(g),!t)break;g[2]!=null?(u=Math.trunc(g[2].getX()),d=Math.trunc(g[2].getY())):(u=Math.trunc(g[4].getX()),d=Math.trunc(g[4].getY()))}return o}static findVertices(t,i,o){const d=t.getHeight(),u=t.getWidth(),h=new Array(8);return At.copyToResult(h,At.findRowsWithPattern(t,d,u,i,o,At.START_PATTERN),At.INDEXES_START_PATTERN),h[4]!=null&&(o=Math.trunc(h[4].getX()),i=Math.trunc(h[4].getY())),At.copyToResult(h,At.findRowsWithPattern(t,d,u,i,o,At.STOP_PATTERN),At.INDEXES_STOP_PATTERN),h}static copyToResult(t,i,o){for(let d=0;d<o.length;d++)t[o[d]]=i[d]}static findRowsWithPattern(t,i,o,d,u,h){const g=new Array(4);let b=!1;const S=new Int32Array(h.length);for(;d<i;d+=At.ROW_STEP){let L=At.findGuardPattern(t,u,d,o,!1,h,S);if(L!=null){for(;d>0;){const V=At.findGuardPattern(t,u,--d,o,!1,h,S);if(V!=null)L=V;else{d++;break}}g[0]=new pe(L[0],d),g[1]=new pe(L[1],d),b=!0;break}}let D=d+1;if(b){let L=0,V=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;D<i;D++){const Y=At.findGuardPattern(t,V[0],D,o,!1,h,S);if(Y!=null&&Math.abs(V[0]-Y[0])<At.MAX_PATTERN_DRIFT&&Math.abs(V[1]-Y[1])<At.MAX_PATTERN_DRIFT)V=Y,L=0;else{if(L>At.SKIPPED_ROW_COUNT_MAX)break;L++}}D-=L+1,g[2]=new pe(V[0],D),g[3]=new pe(V[1],D)}return D-d<At.BARCODE_MIN_HEIGHT&&z.fill(g,null),g}static findGuardPattern(t,i,o,d,u,h,g){z.fillWithin(g,0,g.length,0);let b=i,S=0;for(;t.get(b,o)&&b>0&&S++<At.MAX_PIXEL_DRIFT;)b--;let D=b,L=0,V=h.length;for(let Y=u;D<d;D++)if(t.get(D,o)!==Y)g[L]++;else{if(L===V-1){if(At.patternMatchVariance(g,h,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return new Int32Array([b,D]);b+=g[0]+g[1],R.arraycopy(g,2,g,0,L-1),g[L-1]=0,g[L]=0,L--}else L++;g[L]=1,Y=!Y}return L===V-1&&At.patternMatchVariance(g,h,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE?new Int32Array([b,D-1]):null}static patternMatchVariance(t,i,o){let d=t.length,u=0,h=0;for(let S=0;S<d;S++)u+=t[S],h+=i[S];if(u<h)return 1/0;let g=u/h;o*=g;let b=0;for(let S=0;S<d;S++){let D=t[S],L=i[S]*g,V=D>L?D-L:L-D;if(V>o)return 1/0;b+=V}return b/u}}At.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),At.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),At.MAX_AVG_VARIANCE=.42,At.MAX_INDIVIDUAL_VARIANCE=.8,At.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),At.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),At.MAX_PIXEL_DRIFT=3,At.MAX_PATTERN_DRIFT=5,At.SKIPPED_ROW_COUNT_MAX=25,At.ROW_STEP=5,At.BARCODE_MIN_HEIGHT=10;class pr{constructor(t,i){if(i.length===0)throw new I;this.field=t;let o=i.length;if(o>1&&i[0]===0){let d=1;for(;d<o&&i[d]===0;)d++;d===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-d),R.arraycopy(i,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let d=0;for(let u of this.coefficients)d=this.field.add(d,u);return d}let i=this.coefficients[0],o=this.coefficients.length;for(let d=1;d<o;d++)i=this.field.add(this.field.multiply(t,i),this.coefficients[d]);return i}add(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,o=t.coefficients;if(i.length>o.length){let h=i;i=o,o=h}let d=new Int32Array(o.length),u=o.length-i.length;R.arraycopy(o,0,d,0,u);for(let h=u;h<o.length;h++)d[h]=this.field.add(i[h-u],o[h]);return new pr(this.field,d)}subtract(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof pr?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new pr(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,d=t.coefficients,u=d.length,h=new Int32Array(o+u-1);for(let g=0;g<o;g++){let b=i[g];for(let S=0;S<u;S++)h[g+S]=this.field.add(h[g+S],this.field.multiply(b,d[S]))}return new pr(this.field,h)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let o=0;o<t;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new pr(this.field,i)}multiplyScalar(t){if(t===0)return new pr(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=this.field.multiply(this.coefficients[d],t);return new pr(this.field,o)}multiplyByMonomial(t,i){if(t<0)throw new I;if(i===0)return new pr(this.field,new Int32Array([0]));let o=this.coefficients.length,d=new Int32Array(o+t);for(let u=0;u<o;u++)d[u]=this.field.multiply(this.coefficients[u],i);return new pr(this.field,d)}toString(){let t=new ge;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(i===0||o!==1)&&t.append(o),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class hd{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}inverse(t){if(t===0)throw new Ze;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Za extends hd{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let d=0;d<t;d++)this.expTable[d]=o,o=o*i%t;for(let d=0;d<t-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new pr(this,new Int32Array([0])),this.one=new pr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new I;if(i===0)return this.zero;let o=new Int32Array(t+1);return o[0]=i,new pr(this,o)}}Za.PDF417_GF=new Za(Nt.NUMBER_OF_CODEWORDS,3);class Bl{constructor(){this.field=Za.PDF417_GF}decode(t,i,o){let d=new pr(this.field,t),u=new Int32Array(i),h=!1;for(let ae=i;ae>0;ae--){let ce=d.evaluateAt(this.field.exp(ae));u[i-ae]=ce,ce!==0&&(h=!0)}if(!h)return 0;let g=this.field.getOne();if(o!=null)for(const ae of o){let ce=this.field.exp(t.length-1-ae),he=new pr(this.field,new Int32Array([this.field.subtract(0,ce),1]));g=g.multiply(he)}let b=new pr(this.field,u),S=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),b,i),D=S[0],L=S[1],V=this.findErrorLocations(D),Y=this.findErrorMagnitudes(L,D,V);for(let ae=0;ae<V.length;ae++){let ce=t.length-1-this.field.log(V[ae]);if(ce<0)throw _.getChecksumInstance();t[ce]=this.field.subtract(t[ce],Y[ae])}return V.length}runEuclideanAlgorithm(t,i,o){if(t.getDegree()<i.getDegree()){let V=t;t=i,i=V}let d=t,u=i,h=this.field.getZero(),g=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let V=d,Y=h;if(d=u,h=g,d.isZero())throw _.getChecksumInstance();u=V;let ae=this.field.getZero(),ce=d.getCoefficient(d.getDegree()),he=this.field.inverse(ce);for(;u.getDegree()>=d.getDegree()&&!u.isZero();){let be=u.getDegree()-d.getDegree(),Ve=this.field.multiply(u.getCoefficient(u.getDegree()),he);ae=ae.add(this.field.buildMonomial(be,Ve)),u=u.subtract(d.multiplyByMonomial(be,Ve))}g=ae.multiply(h).subtract(Y).negative()}let b=g.getCoefficient(0);if(b===0)throw _.getChecksumInstance();let S=this.field.inverse(b),D=g.multiply(S),L=u.multiply(S);return[D,L]}findErrorLocations(t){let i=t.getDegree(),o=new Int32Array(i),d=0;for(let u=1;u<this.field.getSize()&&d<i;u++)t.evaluateAt(u)===0&&(o[d]=this.field.inverse(u),d++);if(d!==i)throw _.getChecksumInstance();return o}findErrorMagnitudes(t,i,o){let d=i.getDegree(),u=new Int32Array(d);for(let S=1;S<=d;S++)u[d-S]=this.field.multiply(S,i.getCoefficient(S));let h=new pr(this.field,u),g=o.length,b=new Int32Array(g);for(let S=0;S<g;S++){let D=this.field.inverse(o[S]),L=this.field.subtract(0,t.evaluateAt(D)),V=this.field.inverse(h.evaluateAt(D));b[S]=this.field.multiply(L,V)}return b}}class Ea{constructor(t,i,o,d,u){t instanceof Ea?this.constructor_2(t):this.constructor_1(t,i,o,d,u)}constructor_1(t,i,o,d,u){const h=i==null||o==null,g=d==null||u==null;if(h&&g)throw new q;h?(i=new pe(0,d.getY()),o=new pe(0,u.getY())):g&&(d=new pe(t.getWidth()-1,i.getY()),u=new pe(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=i,this.bottomLeft=o,this.topRight=d,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(d.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),d.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new Ea(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,o){let d=this.topLeft,u=this.bottomLeft,h=this.topRight,g=this.bottomRight;if(t>0){let b=o?this.topLeft:this.topRight,S=Math.trunc(b.getY()-t);S<0&&(S=0);let D=new pe(b.getX(),S);o?d=D:h=D}if(i>0){let b=o?this.bottomLeft:this.bottomRight,S=Math.trunc(b.getY()+i);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let D=new pe(b.getX(),S);o?u=D:g=D}return new Ea(this.image,d,u,h,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Vi{constructor(t,i,o,d){this.columnCount=t,this.errorCorrectionLevel=d,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $s{constructor(){this.buffer=""}static form(t,i){let o=-1;function d(h,g,b,S,D,L){if(h==="%%")return"%";if(i[++o]===void 0)return;h=S?parseInt(S.substr(1)):void 0;let V=D?parseInt(D.substr(1)):void 0,Y;switch(L){case"s":Y=i[o];break;case"c":Y=i[o][0];break;case"f":Y=parseFloat(i[o]).toFixed(h);break;case"p":Y=parseFloat(i[o]).toPrecision(h);break;case"e":Y=parseFloat(i[o]).toExponential(h);break;case"x":Y=parseInt(i[o]).toString(V||16);break;case"d":Y=parseFloat(parseInt(i[o],V||10).toPrecision(h)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(V);let ae=parseInt(b),ce=b&&b[0]+""=="0"?"0":" ";for(;Y.length<ae;)Y=g!==void 0?Y+ce:ce+Y;return Y}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,d)}format(t,...i){this.buffer+=$s.form(t,i)}toString(){return this.buffer}}class Rs{constructor(t){this.boundingBox=new Ea(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let o=1;o<Rs.MAX_NEARBY_DISTANCE;o++){let d=this.imageRowToCodewordIndex(t)-o;if(d>=0&&(i=this.codewords[d],i!=null)||(d=this.imageRowToCodewordIndex(t)+o,d<this.codewords.length&&(i=this.codewords[d],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new $s;let i=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return t.toString()}}Rs.MAX_NEARBY_DISTANCE=5;class oa{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[o,d]of this.values.entries()){const u={getKey:()=>o,getValue:()=>d};u.getValue()>t?(t=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===t&&i.push(u.getKey())}return Nt.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class md extends Rs{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let o=this.getBoundingBox(),d=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),b=-1,S=1,D=0;for(let L=h;L<g;L++){if(i[L]==null)continue;let V=i[L],Y=V.getRowNumber()-b;if(Y===0)D++;else if(Y===1)S=Math.max(S,D),D=1,b=V.getRowNumber();else if(Y<0||V.getRowNumber()>=t.getRowCount()||Y>L)i[L]=null;else{let ae;S>2?ae=(S-2)*Y:ae=Y;let ce=ae>=L;for(let he=1;he<=ae&&!ce;he++)ce=i[L-he]!=null;ce?i[L]=null:(b=V.getRowNumber(),D=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let d=o.getRowNumber();if(d>=i.length)continue;i[d]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),d=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.getCodewords(),b=-1;for(let S=u;S<h;S++){if(g[S]==null)continue;let D=g[S];D.setRowNumberAsRowIndicatorColumn();let L=D.getRowNumber()-b;L===0||(L===1?b=D.getRowNumber():D.getRowNumber()>=t.getRowCount()?g[S]=null:b=D.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new oa,o=new oa,d=new oa,u=new oa;for(let g of t){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let b=g.getValue()%30,S=g.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:o.setValue(b*3+1);break;case 1:u.setValue(b/3),d.setValue(b%3);break;case 2:i.setValue(b+1);break}}if(i.getValue().length===0||o.getValue().length===0||d.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+d.getValue()[0]<Nt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+d.getValue()[0]>Nt.MAX_ROWS_IN_BARCODE)return null;let h=new Vi(i.getValue()[0],o.getValue()[0],d.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,h),h}removeIncorrectCodewords(t,i){for(let o=0;o<t.length;o++){let d=t[o];if(t[o]==null)continue;let u=d.getValue()%30,h=d.getRowNumber();if(h>i.getRowCount()){t[o]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(t[o]=null);break;case 2:u+1!==i.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Hi{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Nt.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let d=0;d<o.length;d++)o[d]!=null&&(o[d].hasValidRowNumber()||this.adjustRowNumbers(i,d,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&i[o]!=null&&t[o].getRowNumber()===i[o].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let u=this.detectionResultColumns[d].getCodewords()[o];u!=null&&(u.setRowNumber(t[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let d=i[o].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let g=this.detectionResultColumns[h].getCodewords()[o];g!=null&&(u=Hi.adjustRowNumberIfValid(d,u,g),g.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let d=i[o].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let g=this.detectionResultColumns[h].getCodewords()[o];g!=null&&(u=Hi.adjustRowNumberIfValid(d,u,g),g.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,o){if(!this.detectionResultColumns[t-1])return;let d=o[i],u=this.detectionResultColumns[t-1].getCodewords(),h=u;this.detectionResultColumns[t+1]!=null&&(h=this.detectionResultColumns[t+1].getCodewords());let g=new Array(14);g[2]=u[i],g[3]=h[i],i>0&&(g[0]=o[i-1],g[4]=u[i-1],g[5]=h[i-1]),i>1&&(g[8]=o[i-2],g[10]=u[i-2],g[11]=h[i-2]),i<o.length-1&&(g[1]=o[i+1],g[6]=u[i+1],g[7]=h[i+1]),i<o.length-2&&(g[9]=o[i+2],g[12]=u[i+2],g[13]=h[i+2]);for(let b of g)if(Hi.adjustRowNumber(d,b))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new $s;for(let o=0;o<t.getCodewords().length;o++){i.format("CW %3d:",o);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[d].getCodewords()[o];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class Sa{constructor(t,i,o,d){this.rowNumber=Sa.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Sa.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Sa.BARCODE_ROW_UNKNOWN=-1;class gr{static initialize(){for(let t=0;t<Nt.SYMBOL_TABLE.length;t++){let i=Nt.SYMBOL_TABLE[t],o=i&1;for(let d=0;d<Nt.BARS_IN_MODULE;d++){let u=0;for(;(i&1)===o;)u+=1,i>>=1;o=i&1,gr.RATIOS_TABLE[t]||(gr.RATIOS_TABLE[t]=new Array(Nt.BARS_IN_MODULE)),gr.RATIOS_TABLE[t][Nt.BARS_IN_MODULE-d-1]=Math.fround(u/Nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=gr.getDecodedCodewordValue(gr.sampleBitCounts(t));return i!==-1?i:gr.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=Be.sum(t),o=new Int32Array(Nt.BARS_IN_MODULE),d=0,u=0;for(let h=0;h<Nt.MODULES_IN_CODEWORD;h++){let g=i/(2*Nt.MODULES_IN_CODEWORD)+h*i/Nt.MODULES_IN_CODEWORD;u+t[d]<=g&&(u+=t[d],d++),o[d]++}return o}static getDecodedCodewordValue(t){let i=gr.getBitValue(t);return Nt.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let o=0;o<t.length;o++)for(let d=0;d<t[o];d++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=Be.sum(t),o=new Array(Nt.BARS_IN_MODULE);if(i>1)for(let h=0;h<o.length;h++)o[h]=Math.fround(t[h]/i);let d=ee.MAX_VALUE,u=-1;this.bSymbolTableReady||gr.initialize();for(let h=0;h<gr.RATIOS_TABLE.length;h++){let g=0,b=gr.RATIOS_TABLE[h];for(let S=0;S<Nt.BARS_IN_MODULE;S++){let D=Math.fround(b[S]-o[S]);if(g+=Math.fround(D*D),g>=d)break}g<d&&(d=g,u=Nt.SYMBOL_TABLE[h])}return u}}gr.bSymbolTableReady=!1,gr.RATIOS_TABLE=new Array(Nt.SYMBOL_TABLE.length).map(M=>new Array(Nt.BARS_IN_MODULE));class To{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Ul{static parseLong(t,i=void 0){return parseInt(t,i)}}class Gs extends y{}Gs.kind="NullPointerException";class zl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,o){if(t==null)throw new Gs;if(i<0||i>t.length||o<0||i+o>t.length||i+o<0)throw new P;if(o===0)return;for(let d=0;d<o;d++)this.write(t[i+d])}flush(){}close(){}}class Ro extends y{}class pd extends zl{constructor(t=32){if(super(),this.count=0,t<0)throw new I("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new Ro;o=F.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,o){if(i<0||i>t.length||o<0||i+o-t.length>0)throw new P;this.ensureCapacity(this.count+o),R.arraycopy(t,i,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Qt;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Qt||(Qt={}));function Wi(){if(typeof window<"u")return window.BigInt||null;if(typeof fu<"u")return fu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $i;function Yn(M){if(typeof $i>"u"&&($i=Wi()),$i===null)throw new Error("BigInt is not supported!");return $i(M)}function qa(){let M=[];M[0]=Yn(1);let t=Yn(900);M[1]=t;for(let i=2;i<16;i++)M[i]=M[i-1]*t;return M}class Ne{static decode(t,i){let o=new ge(""),d=se.ISO8859_1;o.enableDecoding(d);let u=1,h=t[u++],g=new To;for(;u<t[0];){switch(h){case Ne.TEXT_COMPACTION_MODE_LATCH:u=Ne.textCompaction(t,u,o);break;case Ne.BYTE_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH_6:u=Ne.byteCompaction(h,t,d,u,o);break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[u++]);break;case Ne.NUMERIC_COMPACTION_MODE_LATCH:u=Ne.numericCompaction(t,u,o);break;case Ne.ECI_CHARSET:se.getCharacterSetECIByValue(t[u++]);break;case Ne.ECI_GENERAL_PURPOSE:u+=2;break;case Ne.ECI_USER_DEFINED:u++;break;case Ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Ne.decodeMacroBlock(t,u,g);break;case Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ne.MACRO_PDF417_TERMINATOR:throw new G;default:u--,u=Ne.textCompaction(t,u,o);break}if(u<t.length)h=t[u++];else throw G.getFormatInstance()}if(o.length()===0)throw G.getFormatInstance();let b=new qe(null,o.toString(),null,i);return b.setOther(g),b}static decodeMacroBlock(t,i,o){if(i+Ne.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw G.getFormatInstance();let d=new Int32Array(Ne.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<Ne.NUMBER_OF_SEQUENCE_CODEWORDS;g++,i++)d[g]=t[i];o.setSegmentIndex(F.parseInt(Ne.decodeBase900toBase10(d,Ne.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ge;i=Ne.textCompaction(t,i,u),o.setFileId(u.toString());let h=-1;for(t[i]===Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=i+1);i<t[0];)switch(t[i]){case Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case Ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new ge;i=Ne.textCompaction(t,i+1,g),o.setFileName(g.toString());break;case Ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let b=new ge;i=Ne.textCompaction(t,i+1,b),o.setSender(b.toString());break;case Ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new ge;i=Ne.textCompaction(t,i+1,S),o.setAddressee(S.toString());break;case Ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new ge;i=Ne.numericCompaction(t,i+1,D),o.setSegmentCount(F.parseInt(D.toString()));break;case Ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new ge;i=Ne.numericCompaction(t,i+1,L),o.setTimestamp(Ul.parseLong(L.toString()));break;case Ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let V=new ge;i=Ne.numericCompaction(t,i+1,V),o.setChecksum(F.parseInt(V.toString()));break;case Ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new ge;i=Ne.numericCompaction(t,i+1,Y),o.setFileSize(Ul.parseLong(Y.toString()));break;default:throw G.getFormatInstance()}break;case Ne.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(h!==-1){let g=i-h;o.isLastSegment()&&g--,o.setOptionalData(z.copyOfRange(t,h,h+g))}return i}static textCompaction(t,i,o){let d=new Int32Array((t[0]-i)*2),u=new Int32Array((t[0]-i)*2),h=0,g=!1;for(;i<t[0]&&!g;){let b=t[i++];if(b<Ne.TEXT_COMPACTION_MODE_LATCH)d[h]=b/30,d[h+1]=b%30,h+=2;else switch(b){case Ne.TEXT_COMPACTION_MODE_LATCH:d[h++]=Ne.TEXT_COMPACTION_MODE_LATCH;break;case Ne.BYTE_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH_6:case Ne.NUMERIC_COMPACTION_MODE_LATCH:case Ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ne.MACRO_PDF417_TERMINATOR:i--,g=!0;break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[h]=Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,b=t[i++],u[h]=b,h++;break}}return Ne.decodeTextCompaction(d,u,h,o),i}static decodeTextCompaction(t,i,o,d){let u=Qt.ALPHA,h=Qt.ALPHA,g=0;for(;g<o;){let b=t[g],S="";switch(u){case Qt.ALPHA:if(b<26)S=String.fromCharCode(65+b);else switch(b){case 26:S=" ";break;case Ne.LL:u=Qt.LOWER;break;case Ne.ML:u=Qt.MIXED;break;case Ne.PS:h=u,u=Qt.PUNCT_SHIFT;break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[g]);break;case Ne.TEXT_COMPACTION_MODE_LATCH:u=Qt.ALPHA;break}break;case Qt.LOWER:if(b<26)S=String.fromCharCode(97+b);else switch(b){case 26:S=" ";break;case Ne.AS:h=u,u=Qt.ALPHA_SHIFT;break;case Ne.ML:u=Qt.MIXED;break;case Ne.PS:h=u,u=Qt.PUNCT_SHIFT;break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[g]);break;case Ne.TEXT_COMPACTION_MODE_LATCH:u=Qt.ALPHA;break}break;case Qt.MIXED:if(b<Ne.PL)S=Ne.MIXED_CHARS[b];else switch(b){case Ne.PL:u=Qt.PUNCT;break;case 26:S=" ";break;case Ne.LL:u=Qt.LOWER;break;case Ne.AL:u=Qt.ALPHA;break;case Ne.PS:h=u,u=Qt.PUNCT_SHIFT;break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[g]);break;case Ne.TEXT_COMPACTION_MODE_LATCH:u=Qt.ALPHA;break}break;case Qt.PUNCT:if(b<Ne.PAL)S=Ne.PUNCT_CHARS[b];else switch(b){case Ne.PAL:u=Qt.ALPHA;break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[g]);break;case Ne.TEXT_COMPACTION_MODE_LATCH:u=Qt.ALPHA;break}break;case Qt.ALPHA_SHIFT:if(u=h,b<26)S=String.fromCharCode(65+b);else switch(b){case 26:S=" ";break;case Ne.TEXT_COMPACTION_MODE_LATCH:u=Qt.ALPHA;break}break;case Qt.PUNCT_SHIFT:if(u=h,b<Ne.PAL)S=Ne.PUNCT_CHARS[b];else switch(b){case Ne.PAL:u=Qt.ALPHA;break;case Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[g]);break;case Ne.TEXT_COMPACTION_MODE_LATCH:u=Qt.ALPHA;break}break}S!==""&&d.append(S),g++}}static byteCompaction(t,i,o,d,u){let h=new pd,g=0,b=0,S=!1;switch(t){case Ne.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),L=i[d++];for(;d<i[0]&&!S;)switch(D[g++]=L,b=900*b+L,L=i[d++],L){case Ne.TEXT_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH:case Ne.NUMERIC_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH_6:case Ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ne.MACRO_PDF417_TERMINATOR:d--,S=!0;break;default:if(g%5===0&&g>0){for(let V=0;V<6;++V)h.write(Number(Yn(b)>>Yn(8*(5-V))));b=0,g=0}break}d===i[0]&&L<Ne.TEXT_COMPACTION_MODE_LATCH&&(D[g++]=L);for(let V=0;V<g;V++)h.write(D[V]);break;case Ne.BYTE_COMPACTION_MODE_LATCH_6:for(;d<i[0]&&!S;){let V=i[d++];if(V<Ne.TEXT_COMPACTION_MODE_LATCH)g++,b=900*b+V;else switch(V){case Ne.TEXT_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH:case Ne.NUMERIC_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH_6:case Ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ne.MACRO_PDF417_TERMINATOR:d--,S=!0;break}if(g%5===0&&g>0){for(let Y=0;Y<6;++Y)h.write(Number(Yn(b)>>Yn(8*(5-Y))));b=0,g=0}}break}return u.append(Ee.decode(h.toByteArray(),o)),d}static numericCompaction(t,i,o){let d=0,u=!1,h=new Int32Array(Ne.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!u;){let g=t[i++];if(i===t[0]&&(u=!0),g<Ne.TEXT_COMPACTION_MODE_LATCH)h[d]=g,d++;else switch(g){case Ne.TEXT_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH:case Ne.BYTE_COMPACTION_MODE_LATCH_6:case Ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ne.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(d%Ne.MAX_NUMERIC_CODEWORDS===0||g===Ne.NUMERIC_COMPACTION_MODE_LATCH||u)&&d>0&&(o.append(Ne.decodeBase900toBase10(h,d)),d=0)}return i}static decodeBase900toBase10(t,i){let o=Yn(0);for(let u=0;u<i;u++)o+=Ne.EXP900[i-u-1]*Yn(t[u]);let d=o.toString();if(d.charAt(0)!=="1")throw new G;return d.substring(1)}}Ne.TEXT_COMPACTION_MODE_LATCH=900,Ne.BYTE_COMPACTION_MODE_LATCH=901,Ne.NUMERIC_COMPACTION_MODE_LATCH=902,Ne.BYTE_COMPACTION_MODE_LATCH_6=924,Ne.ECI_USER_DEFINED=925,Ne.ECI_GENERAL_PURPOSE=926,Ne.ECI_CHARSET=927,Ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ne.MACRO_PDF417_TERMINATOR=922,Ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ne.MAX_NUMERIC_CODEWORDS=15,Ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ne.PL=25,Ne.LL=27,Ne.AS=27,Ne.ML=28,Ne.AL=28,Ne.PS=29,Ne.PAL=29,Ne.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ne.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ne.EXP900=Wi()?qa():[],Ne.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Tt{constructor(){}static decode(t,i,o,d,u,h,g){let b=new Ea(t,i,o,d,u),S=null,D=null,L;for(let ae=!0;;ae=!1){if(i!=null&&(S=Tt.getRowIndicatorColumn(t,b,i,!0,h,g)),d!=null&&(D=Tt.getRowIndicatorColumn(t,b,d,!1,h,g)),L=Tt.merge(S,D),L==null)throw q.getNotFoundInstance();let ce=L.getBoundingBox();if(ae&&ce!=null&&(ce.getMinY()<b.getMinY()||ce.getMaxY()>b.getMaxY()))b=ce;else break}L.setBoundingBox(b);let V=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,S),L.setDetectionResultColumn(V,D);let Y=S!=null;for(let ae=1;ae<=V;ae++){let ce=Y?ae:V-ae;if(L.getDetectionResultColumn(ce)!==void 0)continue;let he;ce===0||ce===V?he=new md(b,ce===0):he=new Rs(b),L.setDetectionResultColumn(ce,he);let be=-1,Ve=be;for(let He=b.getMinY();He<=b.getMaxY();He++){if(be=Tt.getStartColumn(L,ce,He,Y),be<0||be>b.getMaxX()){if(Ve===-1)continue;be=Ve}let Le=Tt.detectCodeword(t,b.getMinX(),b.getMaxX(),Y,be,He,h,g);Le!=null&&(he.setCodeword(He,Le),Ve=be,h=Math.min(h,Le.getWidth()),g=Math.max(g,Le.getWidth()))}}return Tt.createDecoderResult(L)}static merge(t,i){if(t==null&&i==null)return null;let o=Tt.getBarcodeMetadata(t,i);if(o==null)return null;let d=Ea.merge(Tt.adjustBoundingBox(t),Tt.adjustBoundingBox(i));return new Hi(o,d)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let o=Tt.getMax(i),d=0;for(let g of i)if(d+=o-g,g>0)break;let u=t.getCodewords();for(let g=0;d>0&&u[g]==null;g++)d--;let h=0;for(let g=i.length-1;g>=0&&(h+=o-i[g],!(i[g]>0));g--);for(let g=u.length-1;h>0&&u[g]==null;g--)h--;return t.getBoundingBox().addMissingRows(d,h,t.isLeft())}static getMax(t){let i=-1;for(let o of t)i=Math.max(i,o);return i}static getBarcodeMetadata(t,i){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let d;return i==null||(d=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==d.getColumnCount()&&o.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&o.getRowCount()!==d.getRowCount()?null:o}static getRowIndicatorColumn(t,i,o,d,u,h){let g=new md(i,d);for(let b=0;b<2;b++){let S=b===0?1:-1,D=Math.trunc(Math.trunc(o.getX()));for(let L=Math.trunc(Math.trunc(o.getY()));L<=i.getMaxY()&&L>=i.getMinY();L+=S){let V=Tt.detectCodeword(t,0,t.getWidth(),d,D,L,u,h);V!=null&&(g.setCodeword(L,V),d?D=V.getStartX():D=V.getEndX())}}return g}static adjustCodewordCount(t,i){let o=i[0][1],d=o.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Tt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(d.length===0){if(u<1||u>Nt.MAX_CODEWORDS_IN_BARCODE)throw q.getNotFoundInstance();o.setValue(u)}else d[0]!==u&&o.setValue(u)}static createDecoderResult(t){let i=Tt.createBarcodeMatrix(t);Tt.adjustCodewordCount(t,i);let o=new Array,d=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],h=new Array;for(let b=0;b<t.getBarcodeRowCount();b++)for(let S=0;S<t.getBarcodeColumnCount();S++){let D=i[b][S+1].getValue(),L=b*t.getBarcodeColumnCount()+S;D.length===0?o.push(L):D.length===1?d[L]=D[0]:(h.push(L),u.push(D))}let g=new Array(u.length);for(let b=0;b<g.length;b++)g[b]=u[b];return Tt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),d,Nt.toIntArray(o),Nt.toIntArray(h),g)}static createDecoderResultFromAmbiguousValues(t,i,o,d,u){let h=new Int32Array(d.length),g=100;for(;g-- >0;){for(let b=0;b<h.length;b++)i[d[b]]=u[b][h[b]];try{return Tt.decodeCodewords(i,t,o)}catch(b){if(!(b instanceof _))throw b}if(h.length===0)throw _.getChecksumInstance();for(let b=0;b<h.length;b++)if(h[b]<u[b].length-1){h[b]++;break}else if(h[b]=0,b===h.length-1)throw _.getChecksumInstance()}throw _.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let d=0;d<i.length;d++)for(let u=0;u<i[d].length;u++)i[d][u]=new oa;let o=0;for(let d of t.getDetectionResultColumns()){if(d!=null){for(let u of d.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=i.length)continue;i[h][o].setValue(u.getValue())}}}o++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,o,d){let u=d?1:-1,h=null;if(Tt.isValidBarcodeColumn(t,i-u)&&(h=t.getDetectionResultColumn(i-u).getCodeword(o)),h!=null)return d?h.getEndX():h.getStartX();if(h=t.getDetectionResultColumn(i).getCodewordNearby(o),h!=null)return d?h.getStartX():h.getEndX();if(Tt.isValidBarcodeColumn(t,i-u)&&(h=t.getDetectionResultColumn(i-u).getCodewordNearby(o)),h!=null)return d?h.getEndX():h.getStartX();let g=0;for(;Tt.isValidBarcodeColumn(t,i-u);){i-=u;for(let b of t.getDetectionResultColumn(i).getCodewords())if(b!=null)return(d?b.getEndX():b.getStartX())+u*g*(b.getEndX()-b.getStartX());g++}return d?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,o,d,u,h,g,b){u=Tt.adjustCodewordStartColumn(t,i,o,d,u,h);let S=Tt.getModuleBitCount(t,i,o,d,u,h);if(S==null)return null;let D,L=Be.sum(S);if(d)D=u+L;else{for(let ae=0;ae<S.length/2;ae++){let ce=S[ae];S[ae]=S[S.length-1-ae],S[S.length-1-ae]=ce}D=u,u=D-L}if(!Tt.checkCodewordSkew(L,g,b))return null;let V=gr.getDecodedValue(S),Y=Nt.getCodeword(V);return Y===-1?null:new Sa(u,D,Tt.getCodewordBucketNumber(V),Y)}static getModuleBitCount(t,i,o,d,u,h){let g=u,b=new Int32Array(8),S=0,D=d?1:-1,L=d;for(;(d?g<o:g>=i)&&S<b.length;)t.get(g,h)===L?(b[S]++,g+=D):(S++,L=!L);return S===b.length||g===(d?o:i)&&S===b.length-1?b:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,o,d,u,h){let g=u,b=d?-1:1;for(let S=0;S<2;S++){for(;(d?g>=i:g<o)&&d===t.get(g,h);){if(Math.abs(u-g)>Tt.CODEWORD_SKEW_SIZE)return u;g+=b}b=-b,d=!d}return g}static checkCodewordSkew(t,i,o){return i-Tt.CODEWORD_SKEW_SIZE<=t&&t<=o+Tt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,o){if(t.length===0)throw G.getFormatInstance();let d=1<<i+1,u=Tt.correctErrors(t,o,d);Tt.verifyCodewordCount(t,d);let h=Ne.decode(t,""+i);return h.setErrorsCorrected(u),h.setErasures(o.length),h}static correctErrors(t,i,o){if(i!=null&&i.length>o/2+Tt.MAX_ERRORS||o<0||o>Tt.MAX_EC_CODEWORDS)throw _.getChecksumInstance();return Tt.errorCorrection.decode(t,o,i)}static verifyCodewordCount(t,i){if(t.length<4)throw G.getFormatInstance();let o=t[0];if(o>t.length)throw G.getFormatInstance();if(o===0)if(i<t.length)t[0]=t.length-i;else throw G.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),o=0,d=i.length-1;for(;!((t&1)!==o&&(o=t&1,d--,d<0));)i[d]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Tt.getCodewordBucketNumber(Tt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new $s;for(let o=0;o<t.length;o++){i.format("Row %2d: ",o);for(let d=0;d<t[o].length;d++){let u=t[o][d];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}Tt.CODEWORD_SKEW_SIZE=2,Tt.MAX_ERRORS=3,Tt.MAX_EC_CODEWORDS=512,Tt.errorCorrection=new Bl;class xr{decode(t,i=null){let o=xr.decode(t,i,!1);if(o==null||o.length===0||o[0]==null)throw q.getNotFoundInstance();return o[0]}decodeMultiple(t,i=null){try{return xr.decode(t,i,!0)}catch(o){throw o instanceof G||o instanceof _?q.getNotFoundInstance():o}}static decode(t,i,o){const d=new Array,u=At.detectMultiple(t,i,o);for(const h of u.getPoints()){const g=Tt.decode(u.getBits(),h[4],h[5],h[6],h[7],xr.getMinCodewordWidth(h),xr.getMaxCodewordWidth(h)),b=new Ie(g.getText(),g.getRawBytes(),void 0,h,_e.PDF_417);b.putMetadata(Ue.ERROR_CORRECTION_LEVEL,g.getECLevel());const S=g.getOther();S!=null&&b.putMetadata(Ue.PDF417_EXTRA_METADATA,S),d.push(b)}return d.map(h=>h)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?F.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(xr.getMaxWidth(t[0],t[4]),xr.getMaxWidth(t[6],t[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.max(xr.getMaxWidth(t[1],t[5]),xr.getMaxWidth(t[7],t[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(xr.getMinWidth(t[0],t[4]),xr.getMinWidth(t[6],t[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.min(xr.getMinWidth(t[1],t[5]),xr.getMinWidth(t[7],t[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qa extends y{}Qa.kind="ReaderException";class _o{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!c(t)&&t.get(te.TRY_HARDER)===!0,o=c(t)?null:t.get(te.POSSIBLE_FORMATS),d=new Array;if(!c(o)){const u=o.some(h=>h===_e.UPC_A||h===_e.UPC_E||h===_e.EAN_13||h===_e.EAN_8||h===_e.CODABAR||h===_e.CODE_39||h===_e.CODE_93||h===_e.CODE_128||h===_e.ITF||h===_e.RSS_14||h===_e.RSS_EXPANDED);u&&!i&&d.push(new Ga(t,this.verbose)),o.includes(_e.QR_CODE)&&d.push(new Tr),o.includes(_e.DATA_MATRIX)&&d.push(new ms),o.includes(_e.AZTEC)&&d.push(new Ir),o.includes(_e.PDF_417)&&d.push(new xr),u&&i&&d.push(new Ga(t,this.verbose))}d.length===0&&(i||d.push(new Ga(t,this.verbose)),d.push(new Tr),d.push(new ms),d.push(new Ir),d.push(new xr),i&&d.push(new Ga(t,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Qa("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(o){if(o instanceof Qa)continue}throw new q("No MultiFormat Readers were able to detect the code.")}}class Gi extends je{constructor(t=null,i=500){const o=new _o;o.setHints(t),super(o,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Do extends je{constructor(t=500){super(new xr,t)}}class gd extends je{constructor(t=500){super(new Tr,t)}}var Vl;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(Vl||(Vl={}));var er=Vl;class Hl{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new me(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let o=i[i.length-1];const d=this.field;for(let u=i.length;u<=t;u++){const h=o.multiply(new me(d,Int32Array.from([1,d.exp(u-1+d.getGeneratorBase())])));i.push(h),o=h}}return i[t]}encode(t,i){if(i===0)throw new I("No error correction bytes");const o=t.length-i;if(o<=0)throw new I("No data bytes provided");const d=this.buildGenerator(i),u=new Int32Array(o);R.arraycopy(t,0,u,0,o);let h=new me(this.field,u);h=h.multiplyByMonomial(i,1);const b=h.divide(d)[1].getCoefficients(),S=i-b.length;for(let D=0;D<S;D++)t[o+D]=0;R.arraycopy(b,0,t,o+S,b.length)}}class Nn{constructor(){}static applyMaskPenaltyRule1(t){return Nn.applyMaskPenaltyRule1Internal(t,!0)+Nn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const o=t.getArray(),d=t.getWidth(),u=t.getHeight();for(let h=0;h<u-1;h++){const g=o[h];for(let b=0;b<d-1;b++){const S=g[b];S===g[b+1]&&S===o[h+1][b]&&S===o[h+1][b+1]&&i++}}return Nn.N2*i}static applyMaskPenaltyRule3(t){let i=0;const o=t.getArray(),d=t.getWidth(),u=t.getHeight();for(let h=0;h<u;h++)for(let g=0;g<d;g++){const b=o[h];g+6<d&&b[g]===1&&b[g+1]===0&&b[g+2]===1&&b[g+3]===1&&b[g+4]===1&&b[g+5]===0&&b[g+6]===1&&(Nn.isWhiteHorizontal(b,g-4,g)||Nn.isWhiteHorizontal(b,g+7,g+11))&&i++,h+6<u&&o[h][g]===1&&o[h+1][g]===0&&o[h+2][g]===1&&o[h+3][g]===1&&o[h+4][g]===1&&o[h+5][g]===0&&o[h+6][g]===1&&(Nn.isWhiteVertical(o,g,h-4,h)||Nn.isWhiteVertical(o,g,h+7,h+11))&&i++}return i*Nn.N3}static isWhiteHorizontal(t,i,o){i=Math.max(i,0),o=Math.min(o,t.length);for(let d=i;d<o;d++)if(t[d]===1)return!1;return!0}static isWhiteVertical(t,i,o,d){o=Math.max(o,0),d=Math.min(d,t.length);for(let u=o;u<d;u++)if(t[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const o=t.getArray(),d=t.getWidth(),u=t.getHeight();for(let b=0;b<u;b++){const S=o[b];for(let D=0;D<d;D++)S[D]===1&&i++}const h=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-h)*10/h)*Nn.N4}static getDataMaskBit(t,i,o){let d,u;switch(t){case 0:d=o+i&1;break;case 1:d=o&1;break;case 2:d=i%3;break;case 3:d=(o+i)%3;break;case 4:d=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:u=o*i,d=(u&1)+u%3;break;case 6:u=o*i,d=(u&1)+u%3&1;break;case 7:u=o*i,d=u%3+(o+i&1)&1;break;default:throw new I("Invalid mask pattern: "+t)}return d===0}static applyMaskPenaltyRule1Internal(t,i){let o=0;const d=i?t.getHeight():t.getWidth(),u=i?t.getWidth():t.getHeight(),h=t.getArray();for(let g=0;g<d;g++){let b=0,S=-1;for(let D=0;D<u;D++){const L=i?h[g][D]:h[D][g];L===S?b++:(b>=5&&(o+=Nn.N1+(b-5)),b=1,S=L)}b>=5&&(o+=Nn.N1+(b-5))}return o}}Nn.N1=3,Nn.N2=3,Nn.N3=40,Nn.N4=10;class Oo{constructor(t,i){this.width=t,this.height=i;const o=new Array(i);for(let d=0;d!==i;d++)o[d]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,o){this.bytes[i][t]=o}setBoolean(t,i,o){this.bytes[i][t]=o?1:0}clear(t){for(const i of this.bytes)z.fill(i,t)}equals(t){if(!(t instanceof Oo))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,d=this.height;o<d;++o){const u=this.bytes[o],h=i.bytes[o];for(let g=0,b=this.width;g<b;++g)if(u[g]!==h[g])return!1}return!0}toString(){const t=new ge;for(let i=0,o=this.height;i<o;++i){const d=this.bytes[i];for(let u=0,h=this.width;u<h;++u)switch(d[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Aa{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new ge;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Aa.NUM_MASK_PATTERNS}}Aa.NUM_MASK_PATTERNS=8;class dn extends y{}dn.kind="WriterException";class xt{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,o,d,u){xt.clearMatrix(u),xt.embedBasicPatterns(o,u),xt.embedTypeInfo(i,d,u),xt.maybeEmbedVersionInfo(o,u),xt.embedDataBits(t,d,u)}static embedBasicPatterns(t,i){xt.embedPositionDetectionPatternsAndSeparators(i),xt.embedDarkDotAtLeftBottomCorner(i),xt.maybeEmbedPositionAdjustmentPatterns(t,i),xt.embedTimingPatterns(i)}static embedTypeInfo(t,i,o){const d=new Z;xt.makeTypeInfoBits(t,i,d);for(let u=0,h=d.getSize();u<h;++u){const g=d.get(d.getSize()-1-u),b=xt.TYPE_INFO_COORDINATES[u],S=b[0],D=b[1];if(o.setBoolean(S,D,g),u<8){const L=o.getWidth()-u-1;o.setBoolean(L,8,g)}else{const V=o.getHeight()-7+(u-8);o.setBoolean(8,V,g)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const o=new Z;xt.makeVersionInfoBits(t,o);let d=17;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const g=o.get(d);d--,i.setBoolean(u,i.getHeight()-11+h,g),i.setBoolean(i.getHeight()-11+h,u,g)}}static embedDataBits(t,i,o){let d=0,u=-1,h=o.getWidth()-1,g=o.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);g>=0&&g<o.getHeight();){for(let b=0;b<2;++b){const S=h-b;if(!xt.isEmpty(o.get(S,g)))continue;let D;d<t.getSize()?(D=t.get(d),++d):D=!1,i!==255&&Nn.getDataMaskBit(i,S,g)&&(D=!D),o.setBoolean(S,g,D)}g+=u}u=-u,g+=u,h-=2}if(d!==t.getSize())throw new dn("Not all bits consumed: "+d+"/"+t.getSize())}static findMSBSet(t){return 32-F.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new I("0 polynomial");const o=xt.findMSBSet(i);for(t<<=o-1;xt.findMSBSet(t)>=o;)t^=i<<xt.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,i,o){if(!Aa.isValidMaskPattern(i))throw new dn("Invalid mask pattern");const d=t.getBits()<<3|i;o.appendBits(d,5);const u=xt.calculateBCHCode(d,xt.TYPE_INFO_POLY);o.appendBits(u,10);const h=new Z;if(h.appendBits(xt.TYPE_INFO_MASK_PATTERN,15),o.xor(h),o.getSize()!==15)throw new dn("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const o=xt.calculateBCHCode(t.getVersionNumber(),xt.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new dn("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const o=(i+1)%2;xt.isEmpty(t.get(i,6))&&t.setNumber(i,6,o),xt.isEmpty(t.get(6,i))&&t.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new dn;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,o){for(let d=0;d<8;++d){if(!xt.isEmpty(o.get(t+d,i)))throw new dn;o.setNumber(t+d,i,0)}}static embedVerticalSeparationPattern(t,i,o){for(let d=0;d<7;++d){if(!xt.isEmpty(o.get(t,i+d)))throw new dn;o.setNumber(t,i+d,0)}}static embedPositionAdjustmentPattern(t,i,o){for(let d=0;d<5;++d){const u=xt.POSITION_ADJUSTMENT_PATTERN[d];for(let h=0;h<5;++h)o.setNumber(t+h,i+d,u[h])}}static embedPositionDetectionPattern(t,i,o){for(let d=0;d<7;++d){const u=xt.POSITION_DETECTION_PATTERN[d];for(let h=0;h<7;++h)o.setNumber(t+h,i+d,u[h])}}static embedPositionDetectionPatternsAndSeparators(t){const i=xt.POSITION_DETECTION_PATTERN[0].length;xt.embedPositionDetectionPattern(0,0,t),xt.embedPositionDetectionPattern(t.getWidth()-i,0,t),xt.embedPositionDetectionPattern(0,t.getWidth()-i,t);const o=8;xt.embedHorizontalSeparationPattern(0,o-1,t),xt.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),xt.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const d=7;xt.embedVerticalSeparationPattern(d,0,t),xt.embedVerticalSeparationPattern(t.getHeight()-d-1,0,t),xt.embedVerticalSeparationPattern(d,t.getHeight()-d,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,d=xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,h=d.length;u!==h;u++){const g=d[u];if(g>=0)for(let b=0;b!==h;b++){const S=d[b];S>=0&&xt.isEmpty(i.get(S,g))&&xt.embedPositionAdjustmentPattern(S-2,g-2,i)}}}}xt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xt.VERSION_INFO_POLY=7973,xt.TYPE_INFO_POLY=1335,xt.TYPE_INFO_MASK_PATTERN=21522;class _f{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class hn{constructor(){}static calculateMaskPenalty(t){return Nn.applyMaskPenaltyRule1(t)+Nn.applyMaskPenaltyRule2(t)+Nn.applyMaskPenaltyRule3(t)+Nn.applyMaskPenaltyRule4(t)}static encode(t,i,o=null){let d=hn.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(er.CHARACTER_SET)!==void 0;u&&(d=o.get(er.CHARACTER_SET).toString());const h=this.chooseMode(t,d),g=new Z;if(h===pt.BYTE&&(u||hn.DEFAULT_BYTE_MODE_ENCODING!==d)){const He=se.getCharacterSetECIByName(d);He!==void 0&&this.appendECI(He,g)}this.appendModeInfo(h,g);const b=new Z;this.appendBytes(t,h,b,d);let S;if(o!==null&&o.get(er.QR_VERSION)!==void 0){const He=Number.parseInt(o.get(er.QR_VERSION).toString(),10);S=mt.getVersionForNumber(He);const Le=this.calculateBitsNeeded(h,g,b,S);if(!this.willFit(Le,S,i))throw new dn("Data too big for requested version")}else S=this.recommendVersion(i,h,g,b);const D=new Z;D.appendBitArray(g);const L=h===pt.BYTE?b.getSizeInBytes():t.length;this.appendLengthInfo(L,S,h,D),D.appendBitArray(b);const V=S.getECBlocksForLevel(i),Y=S.getTotalCodewords()-V.getTotalECCodewords();this.terminateBits(Y,D);const ae=this.interleaveWithECBytes(D,S.getTotalCodewords(),Y,V.getNumBlocks()),ce=new Aa;ce.setECLevel(i),ce.setMode(h),ce.setVersion(S);const he=S.getDimensionForVersion(),be=new Oo(he,he),Ve=this.chooseMaskPattern(ae,i,S,be);return ce.setMaskPattern(Ve),xt.buildMatrix(ae,i,S,Ve,be),ce.setMatrix(be),ce}static recommendVersion(t,i,o,d){const u=this.calculateBitsNeeded(i,o,d,mt.getVersionForNumber(1)),h=this.chooseVersion(u,t),g=this.calculateBitsNeeded(i,o,d,h);return this.chooseVersion(g,t)}static calculateBitsNeeded(t,i,o,d){return i.getSize()+t.getCharacterCountBits(d)+o.getSize()}static getAlphanumericCode(t){return t<hn.ALPHANUMERIC_TABLE.length?hn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(se.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return pt.KANJI;let o=!1,d=!1;for(let u=0,h=t.length;u<h;++u){const g=t.charAt(u);if(hn.isDigit(g))o=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)d=!0;else return pt.BYTE}return d?pt.ALPHANUMERIC:o?pt.NUMERIC:pt.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=Ee.encode(t,se.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let d=0;d<o;d+=2){const u=i[d]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,i,o,d){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let g=0;g<Aa.NUM_MASK_PATTERNS;g++){xt.buildMatrix(t,i,o,g,d);let b=this.calculateMaskPenalty(d);b<u&&(u=b,h=g)}return h}static chooseVersion(t,i){for(let o=1;o<=40;o++){const d=mt.getVersionForNumber(o);if(hn.willFit(t,d,i))return d}throw new dn("Data too big")}static willFit(t,i,o){const d=i.getTotalCodewords(),h=i.getECBlocksForLevel(o).getTotalECCodewords(),g=d-h,b=(t+7)/8;return g>=b}static terminateBits(t,i){const o=t*8;if(i.getSize()>o)throw new dn("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let h=0;h<4&&i.getSize()<o;++h)i.appendBit(!1);const d=i.getSize()&7;if(d>0)for(let h=d;h<8;h++)i.appendBit(!1);const u=t-i.getSizeInBytes();for(let h=0;h<u;++h)i.appendBits((h&1)===0?236:17,8);if(i.getSize()!==o)throw new dn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,o,d,u,h){if(d>=o)throw new dn("Block ID too large");const g=t%o,b=o-g,S=Math.floor(t/o),D=S+1,L=Math.floor(i/o),V=L+1,Y=S-L,ae=D-V;if(Y!==ae)throw new dn("EC bytes mismatch");if(o!==b+g)throw new dn("RS blocks mismatch");if(t!==(L+Y)*b+(V+ae)*g)throw new dn("Total bytes mismatch");d<b?(u[0]=L,h[0]=Y):(u[0]=V,h[0]=ae)}static interleaveWithECBytes(t,i,o,d){if(t.getSizeInBytes()!==o)throw new dn("Number of bits and data bytes does not match");let u=0,h=0,g=0;const b=new Array;for(let D=0;D<d;++D){const L=new Int32Array(1),V=new Int32Array(1);hn.getNumDataBytesAndNumECBytesForBlockID(i,o,d,D,L,V);const Y=L[0],ae=new Uint8Array(Y);t.toBytes(8*u,ae,0,Y);const ce=hn.generateECBytes(ae,V[0]);b.push(new _f(ae,ce)),h=Math.max(h,Y),g=Math.max(g,ce.length),u+=L[0]}if(o!==u)throw new dn("Data bytes does not match offset");const S=new Z;for(let D=0;D<h;++D)for(const L of b){const V=L.getDataBytes();D<V.length&&S.appendBits(V[D],8)}for(let D=0;D<g;++D)for(const L of b){const V=L.getErrorCorrectionBytes();D<V.length&&S.appendBits(V[D],8)}if(i!==S.getSizeInBytes())throw new dn("Interleaving error: "+i+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(t,i){const o=t.length,d=new Int32Array(o+i);for(let h=0;h<o;h++)d[h]=t[h]&255;new Hl(Xe.QR_CODE_FIELD_256).encode(d,i);const u=new Uint8Array(i);for(let h=0;h<i;h++)u[h]=d[o+h];return u}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,o,d){const u=o.getCharacterCountBits(i);if(t>=1<<u)throw new dn(t+" is bigger than "+((1<<u)-1));d.appendBits(t,u)}static appendBytes(t,i,o,d){switch(i){case pt.NUMERIC:hn.appendNumericBytes(t,o);break;case pt.ALPHANUMERIC:hn.appendAlphanumericBytes(t,o);break;case pt.BYTE:hn.append8BitBytes(t,o,d);break;case pt.KANJI:hn.appendKanjiBytes(t,o);break;default:throw new dn("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=hn.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const o=t.length;let d=0;for(;d<o;){const u=hn.getDigit(t.charAt(d));if(d+2<o){const h=hn.getDigit(t.charAt(d+1)),g=hn.getDigit(t.charAt(d+2));i.appendBits(u*100+h*10+g,10),d+=3}else if(d+1<o){const h=hn.getDigit(t.charAt(d+1));i.appendBits(u*10+h,7),d+=2}else i.appendBits(u,4),d++}}static appendAlphanumericBytes(t,i){const o=t.length;let d=0;for(;d<o;){const u=hn.getAlphanumericCode(t.charCodeAt(d));if(u===-1)throw new dn;if(d+1<o){const h=hn.getAlphanumericCode(t.charCodeAt(d+1));if(h===-1)throw new dn;i.appendBits(u*45+h,11),d+=2}else i.appendBits(u,6),d++}}static append8BitBytes(t,i,o){let d;try{d=Ee.encode(t,o)}catch(u){throw new dn(u)}for(let u=0,h=d.length;u!==h;u++){const g=d[u];i.appendBits(g,8)}}static appendKanjiBytes(t,i){let o;try{o=Ee.encode(t,se.SJIS)}catch(u){throw new dn(u)}const d=o.length;for(let u=0;u<d;u+=2){const h=o[u]&255,g=o[u+1]&255,b=h<<8&4294967295|g;let S=-1;if(b>=33088&&b<=40956?S=b-33088:b>=57408&&b<=60351&&(S=b-49472),S===-1)throw new dn("Invalid byte sequence");const D=(S>>8)*192+(S&255);i.appendBits(D,13)}}static appendECI(t,i){i.appendBits(pt.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}hn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),hn.DEFAULT_BYTE_MODE_ENCODING=se.UTF8.getName();class Ia{write(t,i,o,d=null){if(t.length===0)throw new I("Found empty contents");if(i<0||o<0)throw new I("Requested dimensions are too small: "+i+"x"+o);let u=cn.L,h=Ia.QUIET_ZONE_SIZE;d!==null&&(d.get(er.ERROR_CORRECTION)!==void 0&&(u=cn.fromString(d.get(er.ERROR_CORRECTION).toString())),d.get(er.MARGIN)!==void 0&&(h=Number.parseInt(d.get(er.MARGIN).toString(),10)));const g=hn.encode(t,u,d);return this.renderResult(g,i,o,h)}writeToDom(t,i,o,d,u=null){typeof t=="string"&&(t=document.querySelector(t));const h=this.write(i,o,d,u);t&&t.appendChild(h)}renderResult(t,i,o,d){const u=t.getMatrix();if(u===null)throw new Yt;const h=u.getWidth(),g=u.getHeight(),b=h+d*2,S=g+d*2,D=Math.max(i,b),L=Math.max(o,S),V=Math.min(Math.floor(D/b),Math.floor(L/S)),Y=Math.floor((D-h*V)/2),ae=Math.floor((L-g*V)/2),ce=this.createSVGElement(D,L);for(let he=0,be=ae;he<g;he++,be+=V)for(let Ve=0,He=Y;Ve<h;Ve++,He+=V)if(u.get(Ve,he)===1){const Le=this.createSvgRectElement(He,be,V,V);ce.appendChild(Le)}return ce}createSVGElement(t,i){const o=document.createElementNS(Ia.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(t,i,o,d){const u=document.createElementNS(Ia.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",d.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ia.QUIET_ZONE_SIZE=4,Ia.SVG_NS="http://www.w3.org/2000/svg";class Ka{encode(t,i,o,d,u){if(t.length===0)throw new I("Found empty contents");if(i!==_e.QR_CODE)throw new I("Can only encode QR_CODE, but got "+i);if(o<0||d<0)throw new I(`Requested dimensions are too small: ${o}x${d}`);let h=cn.L,g=Ka.QUIET_ZONE_SIZE;u!==null&&(u.get(er.ERROR_CORRECTION)!==void 0&&(h=cn.fromString(u.get(er.ERROR_CORRECTION).toString())),u.get(er.MARGIN)!==void 0&&(g=Number.parseInt(u.get(er.MARGIN).toString(),10)));const b=hn.encode(t,h,u);return Ka.renderResult(b,o,d,g)}static renderResult(t,i,o,d){const u=t.getMatrix();if(u===null)throw new Yt;const h=u.getWidth(),g=u.getHeight(),b=h+d*2,S=g+d*2,D=Math.max(i,b),L=Math.max(o,S),V=Math.min(Math.floor(D/b),Math.floor(L/S)),Y=Math.floor((D-h*V)/2),ae=Math.floor((L-g*V)/2),ce=new re(D,L);for(let he=0,be=ae;he<g;he++,be+=V)for(let Ve=0,He=Y;Ve<h;Ve++,He+=V)u.get(Ve,he)===1&&ce.setRegion(He,be,V,V);return ce}}Ka.QUIET_ZONE_SIZE=4;class Df{encode(t,i,o,d,u){let h;switch(i){case _e.QR_CODE:h=new Ka;break;default:throw new I("No encoder available for format "+i)}return h.encode(t,i,o,d,u)}}class _s extends ne{constructor(t,i,o,d,u,h,g,b){if(super(h,g),this.yuvData=t,this.dataWidth=i,this.dataHeight=o,this.left=d,this.top=u,d+h>i||u+g>o)throw new I("Crop rectangle does not fit within image data.");b&&this.reverseHorizontal(h,g)}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const d=(t+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,d,i,0,o),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=t*i,d=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return R.arraycopy(this.yuvData,u,d,0,o),d;for(let h=0;h<i;h++){const g=h*t;R.arraycopy(this.yuvData,u,d,g,t),u+=this.dataWidth}return d}isCropSupported(){return!0}crop(t,i,o,d){return new _s(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,o,d,!1)}renderThumbnail(){const t=this.getWidth()/_s.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/_s.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*i),d=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<i;h++){const g=h*t;for(let b=0;b<t;b++){const S=d[u+b*_s.THUMBNAIL_SCALE_FACTOR]&255;o[g+b]=4278190080|S*65793}u+=this.dataWidth*_s.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/_s.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_s.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const o=this.yuvData;for(let d=0,u=this.top*this.dataWidth+this.left;d<i;d++,u+=this.dataWidth){const h=u+t/2;for(let g=u,b=u+t-1;g<h;g++,b--){const S=o[g];o[g]=o[b],o[b]=S}}}invert(){return new oe(this)}}_s.THUMBNAIL_SCALE_FACTOR=2;class Xi extends ne{constructor(t,i,o,d,u,h,g){if(super(i,o),this.dataWidth=d,this.dataHeight=u,this.left=h,this.top=g,t.BYTES_PER_ELEMENT===4){const b=i*o,S=new Uint8ClampedArray(b);for(let D=0;D<b;D++){const L=t[D],V=L>>16&255,Y=L>>7&510,ae=L&255;S[D]=(V+Y+ae)/4&255}this.luminances=S}else this.luminances=t;if(d===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=o),h===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const d=(t+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,d,i,0,o),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=t*i,d=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return R.arraycopy(this.luminances,u,d,0,o),d;for(let h=0;h<i;h++){const g=h*t;R.arraycopy(this.luminances,u,d,g,t),u+=this.dataWidth}return d}isCropSupported(){return!0}crop(t,i,o,d){return new Xi(this.luminances,o,d,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new oe(this)}}class xd extends se{static forName(t){return this.getCharacterSetECIByName(t)}}class Wl{}Wl.ISO_8859_1=se.ISO8859_1;class yd{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class $l{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class Of{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Ja extends Of{constructor(t,i,o){super(t),this.value=i,this.bitCount=o}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new Ja(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ja(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+F.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Gl extends Ja{constructor(t,i,o){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(t,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(t,i){return new Gl(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function kf(M,t,i){return new Gl(M,t,i)}function Yi(M,t,i){return new Ja(M,t,i)}const Pf=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],la=0,ei=1,Cr=2,vd=3,gs=4,wd=new Ja(null,0,0),ko=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function bd(M){for(let t of M)z.fill(t,-1);return M[la][gs]=0,M[ei][gs]=0,M[ei][la]=28,M[vd][gs]=0,M[Cr][gs]=0,M[Cr][la]=15,M}const Xl=bd(z.createInt32Array(6,6));class Rr{constructor(t,i,o,d){this.token=t,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let o=this.bitCount,d=this.token;if(t!==this.mode){let h=ko[this.mode][t];d=Yi(d,h&65535,h>>16),o+=h>>16}let u=t===Cr?4:5;return d=Yi(d,i,u),new Rr(d,t,0,o+u)}shiftAndAppend(t,i){let o=this.token,d=this.mode===Cr?4:5;return o=Yi(o,Xl[this.mode][t],d),o=Yi(o,i,5),new Rr(o,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(t){let i=this.token,o=this.mode,d=this.bitCount;if(this.mode===gs||this.mode===Cr){let g=ko[o][la];i=Yi(i,g&65535,g>>16),d+=g>>16,o=la}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Rr(i,o,this.binaryShiftByteCount+1,d+u);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(t+1)),h}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=kf(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Rr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(ko[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=Rr.calculateBinaryShiftCost(t)-Rr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let d=this.endBinaryShift(t.length).token;d!==null;d=d.getPrevious())i.unshift(d);let o=new Z;for(const d of i)d.appendTo(o,t);return o}toString(){return ue.format("%s bits=%d bytes=%d",Pf[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Rr.INITIAL_STATE=new Rr(wd,la,0,0);function Mf(M){const t=ue.getCharCode(" "),i=ue.getCharCode("."),o=ue.getCharCode(",");M[la][t]=1;const d=ue.getCharCode("Z"),u=ue.getCharCode("A");for(let V=u;V<=d;V++)M[la][V]=V-u+2;M[ei][t]=1;const h=ue.getCharCode("z"),g=ue.getCharCode("a");for(let V=g;V<=h;V++)M[ei][V]=V-g+2;M[Cr][t]=1;const b=ue.getCharCode("9"),S=ue.getCharCode("0");for(let V=S;V<=b;V++)M[Cr][V]=V-S+2;M[Cr][o]=12,M[Cr][i]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let V=0;V<D.length;V++)M[vd][ue.getCharCode(D[V])]=V;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let V=0;V<L.length;V++)ue.getCharCode(L[V])>0&&(M[gs][ue.getCharCode(L[V])]=V);return M}const Yl=Mf(z.createInt32Array(5,256));class Zi{constructor(t){this.text=t}encode(){const t=ue.getCharCode(" "),i=ue.getCharCode(`
`);let o=$l.singletonList(Rr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,g=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ue.getCharCode("\r"):h=g===i?2:0;break;case ue.getCharCode("."):h=g===t?3:0;break;case ue.getCharCode(","):h=g===t?4:0;break;case ue.getCharCode(":"):h=g===t?5:0;break;default:h=0}h>0?(o=Zi.updateStateListForPair(o,u,h),u++):o=this.updateStateListForChar(o,u)}return $l.min(o,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const o=[];for(let d of t)this.updateStateForChar(d,i,o);return Zi.simplifyStates(o)}updateStateForChar(t,i,o){let d=this.text[i]&255,u=Yl[t.getMode()][d]>0,h=null;for(let g=0;g<=gs;g++){let b=Yl[g][d];if(b>0){if(h==null&&(h=t.endBinaryShift(i)),!u||g===t.getMode()||g===Cr){const S=h.latchAndAppend(g,b);o.push(S)}if(!u&&Xl[t.getMode()][g]>=0){const S=h.shiftAndAppend(g,b);o.push(S)}}}if(t.getBinaryShiftByteCount()>0||Yl[t.getMode()][d]===0){let g=t.addBinaryShiftChar(i);o.push(g)}}static updateStateListForPair(t,i,o){const d=[];for(let u of t)this.updateStateForPair(u,i,o,d);return this.simplifyStates(d)}static updateStateForPair(t,i,o,d){let u=t.endBinaryShift(i);if(d.push(u.latchAndAppend(gs,o)),t.getMode()!==gs&&d.push(u.shiftAndAppend(gs,o)),o===3||o===4){let h=u.latchAndAppend(Cr,16-o).latchAndAppend(Cr,1);d.push(h)}if(t.getBinaryShiftByteCount()>0){let h=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);d.push(h)}}static simplifyStates(t){let i=[];for(const o of t){let d=!0;for(const u of i){if(u.isBetterThanOrEqualTo(o)){d=!1;break}o.isBetterThanOrEqualTo(u)&&(i=i.filter(h=>h!==u))}d&&i.push(o)}return i}}class Xt{constructor(){}static encodeBytes(t){return Xt.encode(t,Xt.DEFAULT_EC_PERCENT,Xt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,o){let d=new Zi(t).encode(),u=F.truncDivision(d.getSize()*i,100)+11,h=d.getSize()+u,g,b,S,D,L;if(o!==Xt.DEFAULT_AZTEC_LAYERS){if(g=o<0,b=Math.abs(o),b>(g?Xt.MAX_NB_BITS_COMPACT:Xt.MAX_NB_BITS))throw new I(ue.format("Illegal value %s for layers",o));S=Xt.totalBitsInLayer(b,g),D=Xt.WORD_SIZE[b];let Le=S-S%D;if(L=Xt.stuffBits(d,D),L.getSize()+u>Le)throw new I("Data to large for user specified layer");if(g&&L.getSize()>D*64)throw new I("Data to large for user specified layer")}else{D=0,L=null;for(let Le=0;;Le++){if(Le>Xt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(g=Le<=3,b=g?Le+1:Le,S=Xt.totalBitsInLayer(b,g),h>S)continue;(L==null||D!==Xt.WORD_SIZE[b])&&(D=Xt.WORD_SIZE[b],L=Xt.stuffBits(d,D));let Ut=S-S%D;if(!(g&&L.getSize()>D*64)&&L.getSize()+u<=Ut)break}}let V=Xt.generateCheckWords(L,S,D),Y=L.getSize()/D,ae=Xt.generateModeMessage(g,b,Y),ce=(g?11:14)+b*4,he=new Int32Array(ce),be;if(g){be=ce;for(let Le=0;Le<he.length;Le++)he[Le]=Le}else{be=ce+1+2*F.truncDivision(F.truncDivision(ce,2)-1,15);let Le=F.truncDivision(ce,2),Ut=F.truncDivision(be,2);for(let It=0;It<Le;It++){let Mr=It+F.truncDivision(It,15);he[Le-It-1]=Ut-Mr-1,he[Le+It]=Ut+Mr+1}}let Ve=new re(be);for(let Le=0,Ut=0;Le<b;Le++){let It=(b-Le)*4+(g?9:12);for(let Mr=0;Mr<It;Mr++){let xs=Mr*2;for(let tr=0;tr<2;tr++)V.get(Ut+xs+tr)&&Ve.set(he[Le*2+tr],he[Le*2+Mr]),V.get(Ut+It*2+xs+tr)&&Ve.set(he[Le*2+Mr],he[ce-1-Le*2-tr]),V.get(Ut+It*4+xs+tr)&&Ve.set(he[ce-1-Le*2-tr],he[ce-1-Le*2-Mr]),V.get(Ut+It*6+xs+tr)&&Ve.set(he[ce-1-Le*2-Mr],he[Le*2+tr])}Ut+=It*8}if(Xt.drawModeMessage(Ve,g,be,ae),g)Xt.drawBullsEye(Ve,F.truncDivision(be,2),5);else{Xt.drawBullsEye(Ve,F.truncDivision(be,2),7);for(let Le=0,Ut=0;Le<F.truncDivision(ce,2)-1;Le+=15,Ut+=16)for(let It=F.truncDivision(be,2)&1;It<be;It+=2)Ve.set(F.truncDivision(be,2)-Ut,It),Ve.set(F.truncDivision(be,2)+Ut,It),Ve.set(It,F.truncDivision(be,2)-Ut),Ve.set(It,F.truncDivision(be,2)+Ut)}let He=new yd;return He.setCompact(g),He.setSize(be),He.setLayers(b),He.setCodeWords(Y),He.setMatrix(Ve),He}static drawBullsEye(t,i,o){for(let d=0;d<o;d+=2)for(let u=i-d;u<=i+d;u++)t.set(u,i-d),t.set(u,i+d),t.set(i-d,u),t.set(i+d,u);t.set(i-o,i-o),t.set(i-o+1,i-o),t.set(i-o,i-o+1),t.set(i+o,i-o),t.set(i+o,i-o+1),t.set(i+o,i+o-1)}static generateModeMessage(t,i,o){let d=new Z;return t?(d.appendBits(i-1,2),d.appendBits(o-1,6),d=Xt.generateCheckWords(d,28,4)):(d.appendBits(i-1,5),d.appendBits(o-1,11),d=Xt.generateCheckWords(d,40,4)),d}static drawModeMessage(t,i,o,d){let u=F.truncDivision(o,2);if(i)for(let h=0;h<7;h++){let g=u-3+h;d.get(h)&&t.set(g,u-5),d.get(h+7)&&t.set(u+5,g),d.get(20-h)&&t.set(g,u+5),d.get(27-h)&&t.set(u-5,g)}else for(let h=0;h<10;h++){let g=u-5+h+F.truncDivision(h,5);d.get(h)&&t.set(g,u-7),d.get(h+10)&&t.set(u+7,g),d.get(29-h)&&t.set(g,u+7),d.get(39-h)&&t.set(u-7,g)}}static generateCheckWords(t,i,o){let d=t.getSize()/o,u=new Hl(Xt.getGF(o)),h=F.truncDivision(i,o),g=Xt.bitsToWords(t,o,h);u.encode(g,h-d);let b=i%o,S=new Z;S.appendBits(0,b);for(const D of Array.from(g))S.appendBits(D,o);return S}static bitsToWords(t,i,o){let d=new Int32Array(o),u,h;for(u=0,h=t.getSize()/i;u<h;u++){let g=0;for(let b=0;b<i;b++)g|=t.get(u*i+b)?1<<i-b-1:0;d[u]=g}return d}static getGF(t){switch(t){case 4:return Xe.AZTEC_PARAM;case 6:return Xe.AZTEC_DATA_6;case 8:return Xe.AZTEC_DATA_8;case 10:return Xe.AZTEC_DATA_10;case 12:return Xe.AZTEC_DATA_12;default:throw new I("Unsupported word size "+t)}}static stuffBits(t,i){let o=new Z,d=t.getSize(),u=(1<<i)-2;for(let h=0;h<d;h+=i){let g=0;for(let b=0;b<i;b++)(h+b>=d||t.get(h+b))&&(g|=1<<i-1-b);(g&u)===u?(o.appendBits(g&u,i),h--):(g&u)===0?(o.appendBits(g|1,i),h--):o.appendBits(g,i)}return o}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Xt.DEFAULT_EC_PERCENT=33,Xt.DEFAULT_AZTEC_LAYERS=0,Xt.MAX_NB_BITS=32,Xt.MAX_NB_BITS_COMPACT=4,Xt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class qi{encode(t,i,o,d){return this.encodeWithHints(t,i,o,d,null)}encodeWithHints(t,i,o,d,u){let h=Wl.ISO_8859_1,g=Xt.DEFAULT_EC_PERCENT,b=Xt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(er.CHARACTER_SET)&&(h=xd.forName(u.get(er.CHARACTER_SET).toString())),u.has(er.ERROR_CORRECTION)&&(g=F.parseInt(u.get(er.ERROR_CORRECTION).toString())),u.has(er.AZTEC_LAYERS)&&(b=F.parseInt(u.get(er.AZTEC_LAYERS).toString()))),qi.encodeLayers(t,i,o,d,h,g,b)}static encodeLayers(t,i,o,d,u,h,g){if(i!==_e.AZTEC)throw new I("Can only encode AZTEC, but got "+i);let b=Xt.encode(ue.getBytes(t,u),h,g);return qi.renderResult(b,o,d)}static renderResult(t,i,o){let d=t.getMatrix();if(d==null)throw new Yt;let u=d.getWidth(),h=d.getHeight(),g=Math.max(i,u),b=Math.max(o,h),S=Math.min(g/u,b/h),D=(g-u*S)/2,L=(b-h*S)/2,V=new re(g,b);for(let Y=0,ae=L;Y<h;Y++,ae+=S)for(let ce=0,he=D;ce<u;ce++,he+=S)d.get(ce,Y)&&V.setRegion(he,ae,S,S);return V}}s.AbstractExpandedDecoder=Ol,s.ArgumentException=E,s.ArithmeticException=Ze,s.AztecCode=yd,s.AztecCodeReader=Ir,s.AztecCodeWriter=qi,s.AztecDecoder=Re,s.AztecDetector=fr,s.AztecDetectorResult=dt,s.AztecEncoder=Xt,s.AztecHighLevelEncoder=Zi,s.AztecPoint=zn,s.BarcodeFormat=_e,s.Binarizer=k,s.BinaryBitmap=O,s.BitArray=Z,s.BitMatrix=re,s.BitSource=Ml,s.BrowserAztecCodeReader=As,s.BrowserBarcodeReader=dd,s.BrowserCodeReader=je,s.BrowserDatamatrixCodeReader=Rf,s.BrowserMultiFormatReader=Gi,s.BrowserPDF417Reader=Do,s.BrowserQRCodeReader=gd,s.BrowserQRCodeSvgWriter=Ia,s.CharacterSetECI=se,s.ChecksumException=_,s.Code128Reader=ke,s.Code39Reader=fn,s.DataMatrixDecodedBitStreamParser=hs,s.DataMatrixReader=ms,s.DecodeHintType=te,s.DecoderResult=qe,s.DefaultGridSampler=it,s.DetectorResult=at,s.EAN13Reader=br,s.EncodeHintType=er,s.Exception=y,s.FormatException=G,s.GenericGF=Xe,s.GenericGFPoly=me,s.GlobalHistogramBinarizer=U,s.GridSampler=Mn,s.GridSamplerInstance=vn,s.HTMLCanvasElementLuminanceSource=we,s.HybridBinarizer=K,s.ITFReader=Lt,s.IllegalArgumentException=I,s.IllegalStateException=Yt,s.InvertedLuminanceSource=oe,s.LuminanceSource=ne,s.MathUtils=Be,s.MultiFormatOneDReader=Ga,s.MultiFormatReader=_o,s.MultiFormatWriter=Df,s.NotFoundException=q,s.OneDReader=zt,s.PDF417DecodedBitStreamParser=Ne,s.PDF417DecoderErrorCorrection=Bl,s.PDF417Reader=xr,s.PDF417ResultMetadata=To,s.PerspectiveTransform=Pt,s.PlanarYUVLuminanceSource=_s,s.QRCodeByteMatrix=Oo,s.QRCodeDataMask=kt,s.QRCodeDecodedBitStreamParser=bn,s.QRCodeDecoderErrorCorrectionLevel=cn,s.QRCodeDecoderFormatInformation=mr,s.QRCodeEncoder=hn,s.QRCodeEncoderQRCode=Aa,s.QRCodeMaskUtil=Nn,s.QRCodeMatrixUtil=xt,s.QRCodeMode=pt,s.QRCodeReader=Tr,s.QRCodeVersion=mt,s.QRCodeWriter=Ka,s.RGBLuminanceSource=Xi,s.RSS14Reader=mn,s.RSSExpandedReader=De,s.ReaderException=Qa,s.ReedSolomonDecoder=on,s.ReedSolomonEncoder=Hl,s.ReedSolomonException=ct,s.Result=Ie,s.ResultMetadataType=Ue,s.ResultPoint=pe,s.StringUtils=ue,s.UnsupportedOperationException=fe,s.VideoInputDevice=X,s.WhiteRectangleDetector=Bt,s.WriterException=dn,s.ZXingArrays=z,s.ZXingCharset=xd,s.ZXingInteger=F,s.ZXingStandardCharsets=Wl,s.ZXingStringBuilder=ge,s.ZXingStringEncoding=Ee,s.ZXingSystem=R,s.createAbstractExpandedDecoder=ld,Object.defineProperty(s,"__esModule",{value:!0})}))})(kc,kc.exports)),kc.exports}var On=OR();const kR=hp(On),PR=uy({__proto__:null,default:kR},[On]);var qx=(function(){function e(n,s,c){if(this.formatMap=new Map([[et.QR_CODE,On.BarcodeFormat.QR_CODE],[et.AZTEC,On.BarcodeFormat.AZTEC],[et.CODABAR,On.BarcodeFormat.CODABAR],[et.CODE_39,On.BarcodeFormat.CODE_39],[et.CODE_93,On.BarcodeFormat.CODE_93],[et.CODE_128,On.BarcodeFormat.CODE_128],[et.DATA_MATRIX,On.BarcodeFormat.DATA_MATRIX],[et.MAXICODE,On.BarcodeFormat.MAXICODE],[et.ITF,On.BarcodeFormat.ITF],[et.EAN_13,On.BarcodeFormat.EAN_13],[et.EAN_8,On.BarcodeFormat.EAN_8],[et.PDF_417,On.BarcodeFormat.PDF_417],[et.RSS_14,On.BarcodeFormat.RSS_14],[et.RSS_EXPANDED,On.BarcodeFormat.RSS_EXPANDED],[et.UPC_A,On.BarcodeFormat.UPC_A],[et.UPC_E,On.BarcodeFormat.UPC_E],[et.UPC_EAN_EXTENSION,On.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!PR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=c;var f=this.createZXingFormats(n),m=new Map;m.set(On.DecodeHintType.POSSIBLE_FORMATS,f),m.set(On.DecodeHintType.TRY_HARDER,!1),this.hints=m}return e.prototype.decodeAsync=function(n){var s=this;return new Promise(function(c,f){try{c(s.decode(n))}catch(m){f(m)}})},e.prototype.decode=function(n){var s=new On.MultiFormatReader(this.verbose,this.hints),c=new On.HTMLCanvasElementLuminanceSource(n),f=new On.BinaryBitmap(new On.HybridBinarizer(c)),m=s.decode(f);return{text:m.text,format:nN.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,c,f){n.set(s,c)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var s=[],c=0,f=n;c<f.length;c++){var m=f[c];this.formatMap.has(m)?s.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),MR=function(e,n,s,c){function f(m){return m instanceof s?m:new s(function(v){v(m)})}return new(s||(s=Promise))(function(m,v){function N(E){try{y(c.next(E))}catch(I){v(I)}}function w(E){try{y(c.throw(E))}catch(I){v(I)}}function y(E){E.done?m(E.value):f(E.value).then(N,w)}y((c=c.apply(e,n||[])).next())})},LR=function(e,n){var s={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,f,m,v;return v={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function N(y){return function(E){return w([y,E])}}function w(y){if(c)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(c=1,f&&(m=y[0]&2?f.return:y[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,y[1])).done)return m;switch(f=0,m&&(y=[y[0]&2,m.value]),y[0]){case 0:case 1:m=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,f=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(m=s.trys,!(m=m.length>0&&m[m.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!m||y[1]>m[0]&&y[1]<m[3])){s.label=y[1];break}if(y[0]===6&&s.label<m[1]){s.label=m[1],m=y;break}if(m&&s.label<m[2]){s.label=m[2],s.ops.push(y);break}m[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(e,s)}catch(E){y=[6,E],f=0}finally{c=m=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Qx=(function(){function e(n,s,c){if(this.formatMap=new Map([[et.QR_CODE,"qr_code"],[et.AZTEC,"aztec"],[et.CODABAR,"codabar"],[et.CODE_39,"code_39"],[et.CODE_93,"code_93"],[et.CODE_128,"code_128"],[et.DATA_MATRIX,"data_matrix"],[et.ITF,"itf"],[et.EAN_13,"ean_13"],[et.EAN_8,"ean_8"],[et.PDF_417,"pdf417"],[et.UPC_A,"upc_a"],[et.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=c;var f=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(f),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return MR(this,void 0,void 0,function(){var s,c;return LR(this,function(f){switch(f.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=f.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(s),[2,{text:c.rawValue,format:nN.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var s=null,c=0,f=0,m=n;f<m.length;f++){var v=m[f],N=v.boundingBox.width*v.boundingBox.height;N>c&&(c=N,s=v)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],c=0,f=n;c<f.length;c++){var m=f[c];this.formatMap.has(m)?s.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,c,f){n.set(s,c)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),Kx=function(e,n,s,c){function f(m){return m instanceof s?m:new s(function(v){v(m)})}return new(s||(s=Promise))(function(m,v){function N(E){try{y(c.next(E))}catch(I){v(I)}}function w(E){try{y(c.throw(E))}catch(I){v(I)}}function y(E){E.done?m(E.value):f(E.value).then(N,w)}y((c=c.apply(e,n||[])).next())})},Jx=function(e,n){var s={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,f,m,v;return v={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function N(y){return function(E){return w([y,E])}}function w(y){if(c)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(c=1,f&&(m=y[0]&2?f.return:y[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,y[1])).done)return m;switch(f=0,m&&(y=[y[0]&2,m.value]),y[0]){case 0:case 1:m=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,f=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(m=s.trys,!(m=m.length>0&&m[m.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!m||y[1]>m[0]&&y[1]<m[3])){s.label=y[1];break}if(y[0]===6&&s.label<m[1]){s.label=m[1],m=y;break}if(m&&s.label<m[2]){s.label=m[2],s.ops.push(y);break}m[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(e,s)}catch(E){y=[6,E],f=0}finally{c=m=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},FR=(function(){function e(n,s,c,f){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,s&&Qx.isSupported()?(this.primaryDecoder=new Qx(n,c,f),this.secondaryDecoder=new qx(n,c,f)):this.primaryDecoder=new qx(n,c,f)}return e.prototype.decodeAsync=function(n){return Kx(this,void 0,void 0,function(){var s;return Jx(this,function(c){switch(c.label){case 0:s=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return Kx(this,void 0,void 0,function(){var s,c;return Jx(this,function(f){switch(f.label){case 0:s=performance.now(),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,f.sent()];case 3:if(c=f.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw c;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,c=this.executionResults;s<c.length;s++){var f=c[s];n+=f}var m=n/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),i0=(function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function c(){this.constructor=n}n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}})(),ef=function(e,n,s,c){function f(m){return m instanceof s?m:new s(function(v){v(m)})}return new(s||(s=Promise))(function(m,v){function N(E){try{y(c.next(E))}catch(I){v(I)}}function w(E){try{y(c.throw(E))}catch(I){v(I)}}function y(E){E.done?m(E.value):f(E.value).then(N,w)}y((c=c.apply(e,n||[])).next())})},tf=function(e,n){var s={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,f,m,v;return v={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function N(y){return function(E){return w([y,E])}}function w(y){if(c)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(c=1,f&&(m=y[0]&2?f.return:y[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,y[1])).done)return m;switch(f=0,m&&(y=[y[0]&2,m.value]),y[0]){case 0:case 1:m=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,f=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(m=s.trys,!(m=m.length>0&&m[m.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!m||y[1]>m[0]&&y[1]<m[3])){s.label=y[1];break}if(y[0]===6&&s.label<m[1]){s.label=m[1],m=y;break}if(m&&s.label<m[2]){s.label=m[2],s.ops.push(y);break}m[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(e,s)}catch(E){y=[6,E],f=0}finally{c=m=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},sN=(function(){function e(n,s){this.name=n,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var s={};s[this.name]=n;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},e})(),BR=(function(e){i0(n,e);function n(s,c){return e.call(this,s,c)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var c={};c[this.name]=s;var f={advanced:[c]};return this.track.applyConstraints(f)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),c=s[this.name];return{min:c.min,max:c.max,step:c.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n})(sN),UR=(function(e){i0(n,e);function n(s){return e.call(this,"zoom",s)||this}return n})(BR),zR=(function(e){i0(n,e);function n(s){return e.call(this,"torch",s)||this}return n})(sN),VR=(function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new UR(this.track)},e.prototype.torchFeature=function(){return new zR(this.track)},e})(),HR=(function(){function e(n,s,c){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width="".concat(n,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var c=n.surface.clientWidth,f=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(c,f),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,s,c,f){return ef(this,void 0,void 0,function(){var m,v;return tf(this,function(N){switch(N.label){case 0:return m=new e(n,s,f),c.aspectRatio?(v={aspectRatio:c.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(v)]):[3,2];case 1:N.sent(),N.label=2;case 2:return m.setupSurface(),[2,m]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var s=this,c=function(){setTimeout(n,200),s.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return ef(this,void 0,void 0,function(){return tf(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,c){var f=n.mediaStream.getVideoTracks(),m=f.length,v=0;n.mediaStream.getVideoTracks().forEach(function(N){n.mediaStream.removeTrack(N),N.stop(),++v,v>=m&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},e.prototype.getCapabilities=function(){return new VR(this.getFirstTrackOrFail())},e})(),WR=(function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,s,c){return ef(this,void 0,void 0,function(){return tf(this,function(f){return[2,HR.create(n,this.mediaStream,s,c)]})})},e.create=function(n){return ef(this,void 0,void 0,function(){var s,c;return tf(this,function(f){switch(f.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return c=f.sent(),[2,new e(c)]}})})},e})(),ey=function(e,n,s,c){function f(m){return m instanceof s?m:new s(function(v){v(m)})}return new(s||(s=Promise))(function(m,v){function N(E){try{y(c.next(E))}catch(I){v(I)}}function w(E){try{y(c.throw(E))}catch(I){v(I)}}function y(E){E.done?m(E.value):f(E.value).then(N,w)}y((c=c.apply(e,n||[])).next())})},ty=function(e,n){var s={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,f,m,v;return v={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function N(y){return function(E){return w([y,E])}}function w(y){if(c)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(c=1,f&&(m=y[0]&2?f.return:y[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,y[1])).done)return m;switch(f=0,m&&(y=[y[0]&2,m.value]),y[0]){case 0:case 1:m=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,f=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(m=s.trys,!(m=m.length>0&&m[m.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!m||y[1]>m[0]&&y[1]<m[3])){s.label=y[1];break}if(y[0]===6&&s.label<m[1]){s.label=m[1],m=y;break}if(m&&s.label<m[2]){s.label=m[2],s.ops.push(y);break}m[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(e,s)}catch(E){y=[6,E],f=0}finally{c=m=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},$R=(function(){function e(){}return e.failIfNotSupported=function(){return ey(this,void 0,void 0,function(){return ty(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return ey(this,void 0,void 0,function(){return ty(this,function(s){return[2,WR.create(n)]})})},e})(),GR=function(e,n,s,c){function f(m){return m instanceof s?m:new s(function(v){v(m)})}return new(s||(s=Promise))(function(m,v){function N(E){try{y(c.next(E))}catch(I){v(I)}}function w(E){try{y(c.throw(E))}catch(I){v(I)}}function y(E){E.done?m(E.value):f(E.value).then(N,w)}y((c=c.apply(e,n||[])).next())})},XR=function(e,n){var s={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,f,m,v;return v={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function N(y){return function(E){return w([y,E])}}function w(y){if(c)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(c=1,f&&(m=y[0]&2?f.return:y[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,y[1])).done)return m;switch(f=0,m&&(y=[y[0]&2,m.value]),y[0]){case 0:case 1:m=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,f=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(m=s.trys,!(m=m.length>0&&m[m.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!m||y[1]>m[0]&&y[1]<m[3])){s.label=y[1];break}if(y[0]===6&&s.label<m[1]){s.label=m[1],m=y;break}if(m&&s.label<m[2]){s.label=m[2],s.ops.push(y);break}m[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(e,s)}catch(E){y=[6,E],f=0}finally{c=m=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},YR=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=ol.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=ol.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return GR(this,void 0,void 0,function(){var n,s,c,f,m,v,N;return XR(this,function(w){switch(w.label){case 0:return n=function(y){for(var E=y.getVideoTracks(),I=0,O=E;I<O.length;I++){var _=O[I];_.enabled=!1,_.stop(),y.removeTrack(_)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=w.sent(),f=[],m=0,v=c;m<v.length;m++)N=v[m],N.kind==="videoinput"&&f.push({id:N.deviceId,label:N.label});return n(s),[2,f]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var c=function(m){for(var v=[],N=0,w=m;N<w.length;N++){var y=w[N];y.kind==="video"&&v.push({id:y.id,label:y.label})}n(v)},f=MediaStreamTrack;f.getSources(c)})},e})(),Kn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Kn||(Kn={}));var ZR=(function(){function e(){this.state=Kn.NOT_STARTED,this.onGoingTransactionNewState=Kn.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Kn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Kn.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Kn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Kn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Kn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case Kn.UNKNOWN:throw"Transition from unknown is not allowed";case Kn.NOT_STARTED:this.failIfNewStateIs(n,[Kn.PAUSED]);break;case Kn.SCANNING:break;case Kn.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,s){for(var c=0,f=s;c<f.length;c++){var m=f[c];if(n===m)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e})(),qR=(function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Kn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Kn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Kn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Kn.PAUSED},e})(),QR=(function(){function e(){}return e.create=function(){return new qR(new ZR)},e})(),KR=(function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function c(){this.constructor=n}n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}})(),bs=(function(e){KR(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n})(TR),JR=(function(){function e(n,s){this.logger=s,this.fps=bs.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=bs.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?rN.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!za(this.qrbox)},e.create=function(n,s){return new e(n,s)},e})(),e6=(function(){function e(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var c;typeof s=="boolean"?this.verbose=s===!0:s&&(c=s,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new _R(this.verbose),this.qrcode=new FR(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=QR.create()}return e.prototype.start=function(n,s,c,f){var m=this;if(!n)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var v;f?v=f:v=this.verbose?this.logger.log:function(){};var N=JR.create(s,this.logger);this.clearElement();var w=!1;N.videoConstraints&&(N.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=w,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:bs.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var I=this,O=this.stateManagerProxy.startTransition(Kn.SCANNING);return new Promise(function(_,k){var R=y?N.videoConstraints:I.createVideoConstraints(n);if(!R){O.cancel(),k("videoConstraints should be defined");return}var P={};(!y||N.aspectRatio)&&(P.aspectRatio=N.aspectRatio);var H={onRenderSurfaceReady:function(z,F){I.setupUi(z,F,N),I.isScanning=!0,I.foreverScan(N,c,v)}};$R.failIfNotSupported().then(function(z){z.create(R).then(function(F){return F.render(m.element,P,H).then(function(Z){I.renderedCamera=Z,O.execute(),_(null)}).catch(function(Z){O.cancel(),k(Z)})}).catch(function(F){O.cancel(),k(ol.errorGettingUserMedia(F))})}).catch(function(z){O.cancel(),k(ol.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Kn.PAUSED),this.showPausedState(),(za(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(Kn.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(Kn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(n.element){var m=document.getElementById(bs.SHADED_REGION_ELEMENT_ID);m&&n.element.removeChild(m)}},f=this;return this.renderedCamera.close().then(function(){return f.renderedCamera=null,f.element&&(f.element.removeChild(f.canvasElement),f.canvasElement=null),c(),f.qrRegion&&(f.qrRegion=null),f.context&&(f.context=null),s.execute(),f.hidePausedState(),f.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(c){return c.decodedText})},e.prototype.scanFileV2=function(n,s){var c=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(za(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(f,m){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(n);var v=new Image;v.onload=function(){var N=v.width,w=v.height,y=document.getElementById(c.elementId),E=y.clientWidth?y.clientWidth:bs.DEFAULT_WIDTH,I=Math.max(y.clientHeight?y.clientHeight:w,bs.FILE_SCAN_MIN_HEIGHT),O=c.computeCanvasDrawConfig(N,w,E,I);if(s){var _=c.createCanvasElement(E,I,"qr-canvas-visible");_.style.display="inline-block",y.appendChild(_);var k=_.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=E,k.canvas.height=I,k.drawImage(v,0,0,N,w,O.x,O.y,O.width,O.height)}var R=bs.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(v.width,O.width),H=Math.max(v.height,O.height),z=P+2*R,F=H+2*R,Z=c.createCanvasElement(z,F);y.appendChild(Z);var W=Z.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=z,W.canvas.height=F,W.drawImage(v,0,0,N,w,R,R,P,H);try{c.qrcode.decodeRobustlyAsync(Z).then(function(te){f(Yx.createFromQrcodeResult(te))}).catch(m)}catch(te){m("QR code parse error, error = ".concat(te))}},v.onerror=m,v.onabort=m,v.onstalled=m,v.onsuspend=m,v.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return YR.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!rN.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var s=[et.QR_CODE,et.AZTEC,et.CODABAR,et.CODE_39,et.CODE_93,et.CODE_128,et.DATA_MATRIX,et.MAXICODE,et.ITF,et.EAN_13,et.EAN_8,et.PDF_417,et.RSS_14,et.RSS_EXPANDED,et.UPC_A,et.UPC_E,et.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],f=0,m=n.formatsToSupport;f<m.length;f++){var v=m[f];jR(v)?c.push(v):this.logger.warn("Invalid format: ".concat(v," passed in config, ignoring."))}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(za(n))return!0;if(!za(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(za(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return za(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,s,c){var f=this,m=c.qrbox;this.validateQrboxConfig(m);var v=this.toQrdimensions(n,s,m),N=function(y){if(y<bs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(bs.MIN_QR_BOX_SIZE,"px.")},w=function(y){return y>n&&(f.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=n),y};N(v.width),N(v.height),v.width=w(v.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,s,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(n,s)}catch(f){throw new Error("qrbox config was passed as a function but it failed with unknown error"+f)}return c},e.prototype.setupUi=function(n,s,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,c);var f=za(c.qrbox)?{width:n,height:s}:c.qrbox;this.validateQrboxConfig(f);var m=this.toQrdimensions(n,s,f);m.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var v=c.isShadedBoxEnabled()&&m.height<=s,N={x:0,y:0,width:n,height:s},w=v?this.getShadedRegionBounds(n,s,m):N,y=this.createCanvasElement(w.width,w.height),E={willReadFrequently:!0},I=y.getContext("2d",E);I.canvas.width=w.width,I.canvas.height=w.height,this.element.append(y),v&&this.possiblyInsertShadingElement(this.element,n,s,m),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=I,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText=ol.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(n,s){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(f){return n(f.text,Yx.createFromQrcodeResult(f)),c.possiblyUpdateShaders(!0),!0}).catch(function(f){c.possiblyUpdateShaders(!1);var m=ol.codeParseError(f);return s(m,RR.createFrom(m)),!1})},e.prototype.foreverScan=function(n,s,c){var f=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),v=m.videoWidth/m.clientWidth,N=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*v,y=this.qrRegion.height*N,E=this.qrRegion.x*v,I=this.qrRegion.y*N;this.context.drawImage(m,E,I,w,y,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){f.foreverScanTimeout=setTimeout(function(){f.foreverScan(n,s,c)},f.getTimeoutFps(n.fps))};this.scanContext(s,c).then(function(_){!_&&n.disableFlip!==!0?(f.context.translate(f.context.canvas.width,0),f.context.scale(-1,1),f.scanContext(s,c).finally(function(){O()})):O()}).catch(function(_){f.logger.logError("Error happend while scanning context",_),O()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",c="deviceId",f={user:!0,environment:!0},m="exact",v=function(k){if(k in f)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},N=Object.keys(n);if(N.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(N.length," keys");var w=Object.keys(n)[0];if(w!==s&&w!==c)throw"Only '".concat(s,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(w===s){var y=n.facingMode;if(typeof y=="string"){if(v(y))return{facingMode:y}}else if(typeof y=="object")if(m in y){if(v(y["".concat(m)]))return{facingMode:{exact:y["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var E=typeof y;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var I=n.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(m in I)return{deviceId:{exact:I["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var O=typeof I;throw"Invalid type of 'deviceId' = ".concat(O)}}}var _=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(_)},e.prototype.computeCanvasDrawConfig=function(n,s,c,f){if(n<=c&&s<=f){var m=(c-n)/2,v=(f-s)/2;return{x:m,y:v,width:n,height:s}}else{var N=n,w=s;return n>c&&(s=c/n*s,n=c),s>f&&(n=f/s*n,s=f),this.logger.log("Image downsampled from "+"".concat(N,"X").concat(w)+" to ".concat(n,"X").concat(s,".")),this.computeCanvasDrawConfig(n,s,c,f)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?bs.BORDER_SHADER_MATCH_COLOR:bs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,s,c){var f=n,m=s,v=document.createElement("canvas");return v.style.width="".concat(f,"px"),v.style.height="".concat(m,"px"),v.style.display="none",v.id=za(c)?"qr-canvas":c,v},e.prototype.getShadedRegionBounds=function(n,s,c){if(c.width>n||c.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-c.width)/2,y:(s-c.height)/2,width:c.width,height:c.height}},e.prototype.possiblyInsertShadingElement=function(n,s,c,f){if(!(s-f.width<1||c-f.height<1)){var m=document.createElement("div");m.style.position="absolute";var v=(s-f.width)/2,N=(c-f.height)/2;if(m.style.borderLeft="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(bs.SHADED_REGION_ELEMENT_ID),s-f.width<11||c-f.height<11)this.hasBorderShaders=!1;else{var w=5,y=40;this.insertShaderBorders(m,y,w,-w,null,0,!0),this.insertShaderBorders(m,y,w,-w,null,0,!1),this.insertShaderBorders(m,y,w,null,-w,0,!0),this.insertShaderBorders(m,y,w,null,-w,0,!1),this.insertShaderBorders(m,w,y+w,-w,null,-w,!0),this.insertShaderBorders(m,w,y+w,null,-w,-w,!0),this.insertShaderBorders(m,w,y+w,-w,null,-w,!1),this.insertShaderBorders(m,w,y+w,null,-w,-w,!1),this.hasBorderShaders=!0}n.append(m)}},e.prototype.insertShaderBorders=function(n,s,c,f,m,v,N){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=bs.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(s,"px"),w.style.height="".concat(c,"px"),f!==null&&(w.style.top="".concat(f,"px")),m!==null&&(w.style.bottom="".concat(m,"px")),N?w.style.left="".concat(v,"px"):w.style.right="".concat(v,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),n.appendChild(w)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e})(),ny;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ny||(ny={}));const t6=Eo("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o0=C.forwardRef(({className:e,variant:n,...s},c)=>r.jsx("div",{ref:c,role:"alert",className:Me(t6({variant:n}),e),...s}));o0.displayName="Alert";const n6=C.forwardRef(({className:e,...n},s)=>r.jsx("h5",{ref:s,className:Me("mb-1 font-medium leading-none tracking-tight",e),...n}));n6.displayName="AlertTitle";const l0=C.forwardRef(({className:e,...n},s)=>r.jsx("div",{ref:s,className:Me("text-sm [&_p]:leading-relaxed",e),...n}));l0.displayName="AlertDescription";function r6({onScan:e,onError:n,title:s="QR Code Scanner",description:c="Position the QR code within the frame"}){const[f,m]=C.useState(!1),[v,N]=C.useState(null),w=C.useRef(null),y=C.useRef(!1),E=async()=>{try{N(null),y.current=!1;const O=new e6("qr-reader");w.current=O,await O.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},_=>{y.current||(y.current=!0,e(_),I())},_=>{_&&!_.includes("NotFoundException")&&console.debug("QR scan error:",_)}),m(!0)}catch(O){const _=O.message||"Failed to start camera. Please ensure camera permissions are granted.";N(_),m(!1),n?.(_),console.error("Camera start error:",O)}},I=async()=>{if(w.current){try{await w.current.stop(),w.current.clear()}catch(O){console.error("Error stopping scanner:",O)}w.current=null}m(!1)};return C.useEffect(()=>()=>{w.current&&I()},[]),r.jsxs(Ye,{className:"w-full",children:[r.jsxs(rr,{children:[r.jsxs(Bn,{className:"flex items-center gap-2",children:[r.jsx(xg,{className:"h-5 w-5"}),s]}),r.jsx(ul,{children:c})]}),r.jsxs(Gt,{className:"space-y-4",children:[r.jsx("div",{id:"qr-reader",className:`w-full rounded-lg overflow-hidden border-2 ${f?"border-primary":"border-gray-300"}`,style:{minHeight:f?"300px":"0px"}}),v&&r.jsxs(o0,{variant:"destructive",children:[r.jsx(ho,{className:"h-4 w-4"}),r.jsx(l0,{children:v})]}),r.jsx("div",{className:"flex gap-2 justify-center",children:f?r.jsxs(Se,{variant:"destructive",onClick:I,className:"w-full sm:w-auto",children:[r.jsx(lE,{className:"h-4 w-4 mr-2"}),"Stop Scanning"]}):r.jsxs(Se,{onClick:E,className:"w-full sm:w-auto",children:[r.jsx(xg,{className:"h-4 w-4 mr-2"}),"Start Scanning"]})}),f&&r.jsx("div",{className:"text-sm text-muted-foreground text-center space-y-1"})]})]})}function sa(e){const n=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}function Co(e,n){return e instanceof Date?new e.constructor(n):new Date(n)}const aN=6048e5,s6=864e5;let a6={};function Tf(){return a6}function qc(e,n){const s=Tf(),c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,f=sa(e),m=f.getDay(),v=(m<c?7:0)+m-c;return f.setDate(f.getDate()-v),f.setHours(0,0,0,0),f}function nf(e){return qc(e,{weekStartsOn:1})}function iN(e){const n=sa(e),s=n.getFullYear(),c=Co(e,0);c.setFullYear(s+1,0,4),c.setHours(0,0,0,0);const f=nf(c),m=Co(e,0);m.setFullYear(s,0,4),m.setHours(0,0,0,0);const v=nf(m);return n.getTime()>=f.getTime()?s+1:n.getTime()>=v.getTime()?s:s-1}function ry(e){const n=sa(e);return n.setHours(0,0,0,0),n}function sy(e){const n=sa(e),s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),+e-+s}function i6(e,n){const s=ry(e),c=ry(n),f=+s-sy(s),m=+c-sy(c);return Math.round((f-m)/s6)}function o6(e){const n=iN(e),s=Co(e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),nf(s)}function l6(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function c6(e){if(!l6(e)&&typeof e!="number")return!1;const n=sa(e);return!isNaN(Number(n))}function d6(e){const n=sa(e),s=Co(e,0);return s.setFullYear(n.getFullYear(),0,1),s.setHours(0,0,0,0),s}const u6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},f6=(e,n,s)=>{let c;const f=u6[e];return typeof f=="string"?c=f:n===1?c=f.one:c=f.other.replace("{{count}}",n.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+c:c+" ago":c};function Em(e){return(n={})=>{const s=n.width?String(n.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const h6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},m6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},p6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g6={date:Em({formats:h6,defaultWidth:"full"}),time:Em({formats:m6,defaultWidth:"full"}),dateTime:Em({formats:p6,defaultWidth:"full"})},x6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},y6=(e,n,s,c)=>x6[e];function Tc(e){return(n,s)=>{const c=s?.context?String(s.context):"standalone";let f;if(c==="formatting"&&e.formattingValues){const v=e.defaultFormattingWidth||e.defaultWidth,N=s?.width?String(s.width):v;f=e.formattingValues[N]||e.formattingValues[v]}else{const v=e.defaultWidth,N=s?.width?String(s.width):e.defaultWidth;f=e.values[N]||e.values[v]}const m=e.argumentCallback?e.argumentCallback(n):n;return f[m]}}const v6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},w6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},b6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},N6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},C6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S6=(e,n)=>{const s=Number(e),c=s%100;if(c>20||c<10)switch(c%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},A6={ordinalNumber:S6,era:Tc({values:v6,defaultWidth:"wide"}),quarter:Tc({values:w6,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Tc({values:b6,defaultWidth:"wide"}),day:Tc({values:N6,defaultWidth:"wide"}),dayPeriod:Tc({values:C6,defaultWidth:"wide",formattingValues:E6,defaultFormattingWidth:"wide"})};function Rc(e){return(n,s={})=>{const c=s.width,f=c&&e.matchPatterns[c]||e.matchPatterns[e.defaultMatchWidth],m=n.match(f);if(!m)return null;const v=m[0],N=c&&e.parsePatterns[c]||e.parsePatterns[e.defaultParseWidth],w=Array.isArray(N)?j6(N,I=>I.test(v)):I6(N,I=>I.test(v));let y;y=e.valueCallback?e.valueCallback(w):w,y=s.valueCallback?s.valueCallback(y):y;const E=n.slice(v.length);return{value:y,rest:E}}}function I6(e,n){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n(e[s]))return s}function j6(e,n){for(let s=0;s<e.length;s++)if(n(e[s]))return s}function T6(e){return(n,s={})=>{const c=n.match(e.matchPattern);if(!c)return null;const f=c[0],m=n.match(e.parsePattern);if(!m)return null;let v=e.valueCallback?e.valueCallback(m[0]):m[0];v=s.valueCallback?s.valueCallback(v):v;const N=n.slice(f.length);return{value:v,rest:N}}}const R6=/^(\d+)(th|st|nd|rd)?/i,_6=/\d+/i,D6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},O6={any:[/^b/i,/^(a|c)/i]},k6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},P6={any:[/1/i,/2/i,/3/i,/4/i]},M6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},B6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},U6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},z6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V6={ordinalNumber:T6({matchPattern:R6,parsePattern:_6,valueCallback:e=>parseInt(e,10)}),era:Rc({matchPatterns:D6,defaultMatchWidth:"wide",parsePatterns:O6,defaultParseWidth:"any"}),quarter:Rc({matchPatterns:k6,defaultMatchWidth:"wide",parsePatterns:P6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Rc({matchPatterns:M6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any"}),day:Rc({matchPatterns:F6,defaultMatchWidth:"wide",parsePatterns:B6,defaultParseWidth:"any"}),dayPeriod:Rc({matchPatterns:U6,defaultMatchWidth:"any",parsePatterns:z6,defaultParseWidth:"any"})},H6={code:"en-US",formatDistance:f6,formatLong:g6,formatRelative:y6,localize:A6,match:V6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function W6(e){const n=sa(e);return i6(n,d6(n))+1}function $6(e){const n=sa(e),s=+nf(n)-+o6(n);return Math.round(s/aN)+1}function oN(e,n){const s=sa(e),c=s.getFullYear(),f=Tf(),m=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??f.firstWeekContainsDate??f.locale?.options?.firstWeekContainsDate??1,v=Co(e,0);v.setFullYear(c+1,0,m),v.setHours(0,0,0,0);const N=qc(v,n),w=Co(e,0);w.setFullYear(c,0,m),w.setHours(0,0,0,0);const y=qc(w,n);return s.getTime()>=N.getTime()?c+1:s.getTime()>=y.getTime()?c:c-1}function G6(e,n){const s=Tf(),c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,f=oN(e,n),m=Co(e,0);return m.setFullYear(f,0,c),m.setHours(0,0,0,0),qc(m,n)}function X6(e,n){const s=sa(e),c=+qc(s,n)-+G6(s,n);return Math.round(c/aN)+1}function un(e,n){const s=e<0?"-":"",c=Math.abs(e).toString().padStart(n,"0");return s+c}const wi={y(e,n){const s=e.getFullYear(),c=s>0?s:1-s;return un(n==="yy"?c%100:c,n.length)},M(e,n){const s=e.getMonth();return n==="M"?String(s+1):un(s+1,2)},d(e,n){return un(e.getDate(),n.length)},a(e,n){const s=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,n){return un(e.getHours()%12||12,n.length)},H(e,n){return un(e.getHours(),n.length)},m(e,n){return un(e.getMinutes(),n.length)},s(e,n){return un(e.getSeconds(),n.length)},S(e,n){const s=n.length,c=e.getMilliseconds(),f=Math.trunc(c*Math.pow(10,s-3));return un(f,n.length)}},rl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ay={G:function(e,n,s){const c=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(c,{width:"abbreviated"});case"GGGGG":return s.era(c,{width:"narrow"});case"GGGG":default:return s.era(c,{width:"wide"})}},y:function(e,n,s){if(n==="yo"){const c=e.getFullYear(),f=c>0?c:1-c;return s.ordinalNumber(f,{unit:"year"})}return wi.y(e,n)},Y:function(e,n,s,c){const f=oN(e,c),m=f>0?f:1-f;if(n==="YY"){const v=m%100;return un(v,2)}return n==="Yo"?s.ordinalNumber(m,{unit:"year"}):un(m,n.length)},R:function(e,n){const s=iN(e);return un(s,n.length)},u:function(e,n){const s=e.getFullYear();return un(s,n.length)},Q:function(e,n,s){const c=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(c);case"QQ":return un(c,2);case"Qo":return s.ordinalNumber(c,{unit:"quarter"});case"QQQ":return s.quarter(c,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(c,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(c,{width:"wide",context:"formatting"})}},q:function(e,n,s){const c=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(c);case"qq":return un(c,2);case"qo":return s.ordinalNumber(c,{unit:"quarter"});case"qqq":return s.quarter(c,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(c,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(c,{width:"wide",context:"standalone"})}},M:function(e,n,s){const c=e.getMonth();switch(n){case"M":case"MM":return wi.M(e,n);case"Mo":return s.ordinalNumber(c+1,{unit:"month"});case"MMM":return s.month(c,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(c,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(c,{width:"wide",context:"formatting"})}},L:function(e,n,s){const c=e.getMonth();switch(n){case"L":return String(c+1);case"LL":return un(c+1,2);case"Lo":return s.ordinalNumber(c+1,{unit:"month"});case"LLL":return s.month(c,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(c,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(c,{width:"wide",context:"standalone"})}},w:function(e,n,s,c){const f=X6(e,c);return n==="wo"?s.ordinalNumber(f,{unit:"week"}):un(f,n.length)},I:function(e,n,s){const c=$6(e);return n==="Io"?s.ordinalNumber(c,{unit:"week"}):un(c,n.length)},d:function(e,n,s){return n==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):wi.d(e,n)},D:function(e,n,s){const c=W6(e);return n==="Do"?s.ordinalNumber(c,{unit:"dayOfYear"}):un(c,n.length)},E:function(e,n,s){const c=e.getDay();switch(n){case"E":case"EE":case"EEE":return s.day(c,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(c,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(c,{width:"short",context:"formatting"});case"EEEE":default:return s.day(c,{width:"wide",context:"formatting"})}},e:function(e,n,s,c){const f=e.getDay(),m=(f-c.weekStartsOn+8)%7||7;switch(n){case"e":return String(m);case"ee":return un(m,2);case"eo":return s.ordinalNumber(m,{unit:"day"});case"eee":return s.day(f,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(f,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(f,{width:"short",context:"formatting"});case"eeee":default:return s.day(f,{width:"wide",context:"formatting"})}},c:function(e,n,s,c){const f=e.getDay(),m=(f-c.weekStartsOn+8)%7||7;switch(n){case"c":return String(m);case"cc":return un(m,n.length);case"co":return s.ordinalNumber(m,{unit:"day"});case"ccc":return s.day(f,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(f,{width:"narrow",context:"standalone"});case"cccccc":return s.day(f,{width:"short",context:"standalone"});case"cccc":default:return s.day(f,{width:"wide",context:"standalone"})}},i:function(e,n,s){const c=e.getDay(),f=c===0?7:c;switch(n){case"i":return String(f);case"ii":return un(f,n.length);case"io":return s.ordinalNumber(f,{unit:"day"});case"iii":return s.day(c,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(c,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(c,{width:"short",context:"formatting"});case"iiii":default:return s.day(c,{width:"wide",context:"formatting"})}},a:function(e,n,s){const f=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(f,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(f,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(f,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(f,{width:"wide",context:"formatting"})}},b:function(e,n,s){const c=e.getHours();let f;switch(c===12?f=rl.noon:c===0?f=rl.midnight:f=c/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(f,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(f,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(f,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(f,{width:"wide",context:"formatting"})}},B:function(e,n,s){const c=e.getHours();let f;switch(c>=17?f=rl.evening:c>=12?f=rl.afternoon:c>=4?f=rl.morning:f=rl.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(f,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(f,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(f,{width:"wide",context:"formatting"})}},h:function(e,n,s){if(n==="ho"){let c=e.getHours()%12;return c===0&&(c=12),s.ordinalNumber(c,{unit:"hour"})}return wi.h(e,n)},H:function(e,n,s){return n==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):wi.H(e,n)},K:function(e,n,s){const c=e.getHours()%12;return n==="Ko"?s.ordinalNumber(c,{unit:"hour"}):un(c,n.length)},k:function(e,n,s){let c=e.getHours();return c===0&&(c=24),n==="ko"?s.ordinalNumber(c,{unit:"hour"}):un(c,n.length)},m:function(e,n,s){return n==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):wi.m(e,n)},s:function(e,n,s){return n==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):wi.s(e,n)},S:function(e,n){return wi.S(e,n)},X:function(e,n,s){const c=e.getTimezoneOffset();if(c===0)return"Z";switch(n){case"X":return oy(c);case"XXXX":case"XX":return uo(c);case"XXXXX":case"XXX":default:return uo(c,":")}},x:function(e,n,s){const c=e.getTimezoneOffset();switch(n){case"x":return oy(c);case"xxxx":case"xx":return uo(c);case"xxxxx":case"xxx":default:return uo(c,":")}},O:function(e,n,s){const c=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+iy(c,":");case"OOOO":default:return"GMT"+uo(c,":")}},z:function(e,n,s){const c=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+iy(c,":");case"zzzz":default:return"GMT"+uo(c,":")}},t:function(e,n,s){const c=Math.trunc(e.getTime()/1e3);return un(c,n.length)},T:function(e,n,s){const c=e.getTime();return un(c,n.length)}};function iy(e,n=""){const s=e>0?"-":"+",c=Math.abs(e),f=Math.trunc(c/60),m=c%60;return m===0?s+String(f):s+String(f)+n+un(m,2)}function oy(e,n){return e%60===0?(e>0?"-":"+")+un(Math.abs(e)/60,2):uo(e,n)}function uo(e,n=""){const s=e>0?"-":"+",c=Math.abs(e),f=un(Math.trunc(c/60),2),m=un(c%60,2);return s+f+n+m}const ly=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},lN=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Y6=(e,n)=>{const s=e.match(/(P+)(p+)?/)||[],c=s[1],f=s[2];if(!f)return ly(e,n);let m;switch(c){case"P":m=n.dateTime({width:"short"});break;case"PP":m=n.dateTime({width:"medium"});break;case"PPP":m=n.dateTime({width:"long"});break;case"PPPP":default:m=n.dateTime({width:"full"});break}return m.replace("{{date}}",ly(c,n)).replace("{{time}}",lN(f,n))},Z6={p:lN,P:Y6},q6=/^D+$/,Q6=/^Y+$/,K6=["D","DD","YY","YYYY"];function J6(e){return q6.test(e)}function e_(e){return Q6.test(e)}function t_(e,n,s){const c=n_(e,n,s);if(console.warn(c),K6.includes(e))throw new RangeError(c)}function n_(e,n,s){const c=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${c} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const r_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,s_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a_=/^'([^]*?)'?$/,i_=/''/g,o_=/[a-zA-Z]/;function bi(e,n,s){const c=Tf(),f=c.locale??H6,m=c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,v=c.weekStartsOn??c.locale?.options?.weekStartsOn??0,N=sa(e);if(!c6(N))throw new RangeError("Invalid time value");let w=n.match(s_).map(E=>{const I=E[0];if(I==="p"||I==="P"){const O=Z6[I];return O(E,f.formatLong)}return E}).join("").match(r_).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const I=E[0];if(I==="'")return{isToken:!1,value:l_(E)};if(ay[I])return{isToken:!0,value:E};if(I.match(o_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:E}});f.localize.preprocessor&&(w=f.localize.preprocessor(N,w));const y={firstWeekContainsDate:m,weekStartsOn:v,locale:f};return w.map(E=>{if(!E.isToken)return E.value;const I=E.value;(e_(I)||J6(I))&&t_(I,n,String(e));const O=ay[I[0]];return O(N,I,f.localize,y)}).join("")}function l_(e){const n=e.match(a_);return n?n[1].replace(i_,"'"):e}const cy="https://bbaec9682261.ngrok-free.app";function c_(){const[e,n]=C.useState([]),[s,c]=C.useState(!1),{toast:f}=Un(),m=Na(),v=async I=>{if(s)return;c(!0);const O=new Date;try{const _=await St(`${cy}/attendance/verify-qr`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrToken:I,scannedBy:"Guard"})}),k=await _.json();if(!_.ok)throw new Error(k.message||"QR verification failed");const R=bi(new Date,"yyyy-MM-dd"),P=bi(new Date,"HH:mm"),H=await St(`${cy}/attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:k.employee.employeeId,employeeName:k.employee.employeeName,date:R,checkIn:P,status:"present",qrVerified:!0,verificationMethod:"guard_qr",notes:"Scanned by guard"})});if(!H.ok){const F=await H.json();throw new Error(F.message||"Failed to mark attendance")}const z={employeeId:k.employee.employeeId,employeeName:k.employee.employeeName,department:k.employee.department,position:k.employee.position,timestamp:O,status:"success"};n(F=>[z,...F.slice(0,19)]),f({title:"Attendance Recorded",description:`${k.employee.employeeName} checked in successfully at ${P}`,duration:3e3})}catch(_){const k={employeeId:"",employeeName:"Unknown",department:"",position:"",timestamp:O,status:"error",message:_.message||"QR scan failed"};n(R=>[k,...R.slice(0,19)]),f({title:"Scan Failed",description:_.message||"Unable to process QR code",variant:"destructive",duration:4e3})}finally{c(!1)}},N=()=>{localStorage.removeItem("hrms_token"),localStorage.removeItem("hrms_user"),m("/login")},w=e.filter(I=>{const O=bi(new Date,"yyyy-MM-dd");return bi(I.timestamp,"yyyy-MM-dd")===O}),y=w.filter(I=>I.status==="success").length,E=w.filter(I=>I.status==="error").length;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Guard Attendance Station"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Scan employee QR codes to mark attendance"})]}),r.jsxs(Se,{variant:"outline",onClick:N,children:[r.jsx(ku,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(yg,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Today's Check-ins"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:y})]})]})})}),r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx(Tm,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Failed Scans"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:E})]})]})})}),r.jsx(Ye,{children:r.jsx(Gt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(cs,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Current Time"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:bi(new Date,"HH:mm")})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"lg:sticky lg:top-4 h-fit",children:[r.jsx(r6,{onScan:v,onError:I=>{f({title:"Scanner Error",description:I,variant:"destructive"})},title:"Scan Employee QR Code",description:"Position the employee's QR code within the camera frame"}),s&&r.jsxs(o0,{className:"mt-4",children:[r.jsx(Om,{className:"h-4 w-4 animate-spin"}),r.jsx(l0,{children:"Processing QR code..."})]})]}),r.jsxs(Ye,{children:[r.jsxs(rr,{children:[r.jsx(Bn,{children:"Recent Scans"}),r.jsx(ul,{children:"Last 20 scan attempts (today highlighted)"})]}),r.jsxs(Gt,{children:[r.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:e.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:"No scans yet. Start scanning employee QR codes."}):e.map((I,O)=>{const _=bi(I.timestamp,"yyyy-MM-dd")===bi(new Date,"yyyy-MM-dd");return r.jsx("div",{className:`p-4 rounded-lg border ${_?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[I.status==="success"?r.jsx(yg,{className:"h-5 w-5 text-green-600"}):r.jsx(Tm,{className:"h-5 w-5 text-red-600"}),r.jsx("span",{className:"font-semibold text-gray-900",children:I.employeeName})]}),I.status==="success"?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[I.employeeId,"  ",I.department]}),r.jsx("p",{className:"text-xs text-gray-500",children:I.position})]}):r.jsx("p",{className:"text-sm text-red-600",children:I.message})]}),r.jsxs("div",{className:"text-right",children:[r.jsx($r,{variant:I.status==="success"?"default":"destructive",children:I.status}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:bi(I.timestamp,"HH:mm:ss")})]})]})},O)})}),e.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(zp,{className:"my-4"}),r.jsx("div",{className:"text-center",children:r.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>n([]),children:"Clear History"})})]})]})]})]})]})})}const dy="https://bbaec9682261.ngrok-free.app";function d_(){const{toast:e}=Un(),n=Fp(),[s,c]=C.useState(!1),[f,m]=C.useState({success:[],failed:[]}),{data:v,isLoading:N}=n4({queryKey:["employees"],queryFn:async()=>{const R=await St(`${dy}/employees`,{credentials:"include"});if(!R.ok)throw new Error("Failed to fetch employees");const P=await R.json();return P.data||P}}),w=v||[],y=r4({mutationFn:async R=>{const P=await St(`${dy}/employees/${R}/generate-qr`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({generatedBy:"Admin"})});if(!P.ok)throw new Error("Failed to generate QR code");return P.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["employees"]})}}),E=async()=>{if(!w)return;c(!0),m({success:[],failed:[]});const R=w.filter(H=>H.status==="active"),P={success:[],failed:[]};for(const H of R)try{await y.mutateAsync(H.id),P.success.push(H.fullName)}catch{P.failed.push(H.fullName)}m(P),c(!1),e({title:"QR Code Generation Complete",description:`Success: ${P.success.length}, Failed: ${P.failed.length}`})},I=(R,P)=>{const H=document.getElementById(`qr-${R}`);if(!H)return;const z=new XMLSerializer().serializeToString(H),F=document.createElement("canvas"),Z=F.getContext("2d"),W=new Image;W.onload=()=>{F.width=300,F.height=300,Z?.drawImage(W,0,0,300,300);const te=F.toDataURL("image/png"),G=document.createElement("a");G.download=`QR-${R}-${P}.png`,G.href=te,G.click()},W.src="data:image/svg+xml;base64,"+btoa(z)};if(N)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(am,{className:"w-8 h-8 animate-spin"})});const O=w?.filter(R=>R.status==="active")||[],_=O.filter(R=>R.qrCodeData),k=O.filter(R=>!R.qrCodeData);return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"QR Code Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Generate and manage employee QR codes"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Ye,{children:[r.jsx(rr,{className:"pb-3",children:r.jsx(Bn,{className:"text-sm font-medium",children:"Total Active Employees"})}),r.jsx(Gt,{children:r.jsx("div",{className:"text-2xl font-bold",children:O.length})})]}),r.jsxs(Ye,{children:[r.jsx(rr,{className:"pb-3",children:r.jsx(Bn,{className:"text-sm font-medium",children:"With QR Codes"})}),r.jsx(Gt,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.length})})]}),r.jsxs(Ye,{children:[r.jsx(rr,{className:"pb-3",children:r.jsx(Bn,{className:"text-sm font-medium",children:"Without QR Codes"})}),r.jsx(Gt,{children:r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:k.length})})]})]}),k.length>0&&r.jsxs(Ye,{children:[r.jsxs(rr,{children:[r.jsx(Bn,{children:"Bulk QR Code Generation"}),r.jsx(ul,{children:"Generate QR codes for all employees who don't have one"})]}),r.jsxs(Gt,{children:[r.jsx(Se,{onClick:E,disabled:s,size:"lg",className:"w-full md:w-auto",children:s?r.jsxs(r.Fragment,{children:[r.jsx(am,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating QR Codes..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Bc,{className:"mr-2 h-4 w-4"}),"Generate QR Codes for ",k.length," Employees"]})}),(f.success.length>0||f.failed.length>0)&&r.jsxs("div",{className:"mt-4 space-y-2",children:[f.success.length>0&&r.jsxs("div",{className:"flex items-start gap-2 text-sm text-green-600",children:[r.jsx(Mc,{className:"h-4 w-4 mt-0.5"}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:["Successfully generated (",f.success.length,"):"]}),r.jsx("div",{className:"text-xs",children:f.success.join(", ")})]})]}),f.failed.length>0&&r.jsxs("div",{className:"flex items-start gap-2 text-sm text-red-600",children:[r.jsx(Tm,{className:"h-4 w-4 mt-0.5"}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:["Failed (",f.failed.length,"):"]}),r.jsx("div",{className:"text-xs",children:f.failed.join(", ")})]})]})]})]})]}),r.jsxs(Ye,{children:[r.jsxs(rr,{children:[r.jsx(Bn,{children:"Employee QR Codes"}),r.jsx(ul,{children:"View and download employee QR codes"})]}),r.jsx(Gt,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(R=>r.jsxs(Ye,{className:"overflow-hidden",children:[r.jsxs(rr,{className:"pb-3",children:[r.jsx(Bn,{className:"text-base",children:R.fullName}),r.jsxs(ul,{className:"text-xs",children:[R.employeeId,"  ",R.position]})]}),r.jsx(Gt,{className:"space-y-3",children:R.qrCodeData?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:r.jsx(Gc,{id:`qr-${R.employeeId}`,value:R.qrCodeData,size:150,level:"H",includeMargin:!0})}),r.jsxs(Se,{variant:"outline",size:"sm",className:"w-full",onClick:()=>I(R.employeeId,R.fullName),children:[r.jsx(Wr,{className:"mr-2 h-4 w-4"}),"Download QR"]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex items-center justify-center h-[150px] bg-muted rounded-lg",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"No QR Code"})}),r.jsx(Se,{size:"sm",className:"w-full",onClick:()=>y.mutate(R.id),disabled:y.isPending,children:y.isPending?r.jsxs(r.Fragment,{children:[r.jsx(am,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Bc,{className:"mr-2 h-4 w-4"}),"Generate QR"]})})]})})]},R.id))})})]})]})}const u_=new BA,f_=()=>r.jsx(WA,{client:u_,children:r.jsx(J4,{children:r.jsxs(Pv,{children:[r.jsx(sS,{}),r.jsx(MS,{}),r.jsx(Q4,{children:r.jsxs(X4,{children:[r.jsx(gn,{path:"/",element:r.jsx(qn,{children:r.jsx(IR,{})})}),r.jsx(gn,{path:"/login",element:r.jsx(rI,{})}),r.jsx(gn,{path:"/forgot-password",element:r.jsx(sI,{})}),r.jsx(gn,{path:"/reset-password",element:r.jsx(aI,{})}),r.jsx(gn,{path:"/dashboard",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(X8,{})})}),r.jsx(gn,{path:"/employee/dashboard",element:r.jsx(qn,{allowedRoles:["employee"],children:r.jsx(rT,{})})}),r.jsx(gn,{path:"/guard/dashboard",element:r.jsx(qn,{allowedRoles:["guard"],children:r.jsx(c_,{})})}),r.jsx(gn,{path:"/generate-qr-codes",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(d_,{})})}),r.jsx(gn,{path:"/employees",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(WT,{})})}),r.jsx(gn,{path:"/employees/inactive",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(GT,{})})}),r.jsx(gn,{path:"/organization/department",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(XT,{})})}),r.jsx(gn,{path:"/organization/designation",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(YT,{})})}),r.jsx(gn,{path:"/attendance/list",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(QT,{})})}),r.jsx(gn,{path:"/attendance/history",element:r.jsx(qn,{allowedRoles:["employee"],children:r.jsx(JT,{})})}),r.jsx(gn,{path:"/attendance/add",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(eR,{})})}),r.jsx(gn,{path:"/attendance/report",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(tR,{})})}),r.jsx(gn,{path:"/documents",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(sR,{})})}),r.jsx(gn,{path:"/documents/employee",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(aR,{})})}),r.jsx(gn,{path:"/documents/templates",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(iR,{})})}),r.jsx(gn,{path:"/settings",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(oR,{})})}),r.jsx(gn,{path:"/settings/audit-logs",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(cR,{})})}),r.jsx(gn,{path:"/settings/data-privacy",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(pR,{})})}),r.jsx(gn,{path:"/settings/data-integrity",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(CR,{})})}),r.jsx(gn,{path:"/settings/non-repudiation",element:r.jsx(qn,{allowedRoles:["admin"],children:r.jsx(ER,{})})}),r.jsx(gn,{path:"/profile",element:r.jsx(qn,{children:r.jsx(SR,{})})}),r.jsx(gn,{path:"*",element:r.jsx(AR,{})})]})})]})})});class h_ extends C.Component{state={hasError:!1,error:null};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("Uncaught error:",n,s)}render(){return this.state.hasError?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[r.jsx("h1",{style:{color:"#dc2626",marginBottom:"16px"},children:"Something went wrong"}),r.jsxs("pre",{style:{backgroundColor:"#f3f4f6",padding:"16px",borderRadius:"8px",overflow:"auto",maxWidth:"800px",width:"100%"},children:[r.jsx("strong",{children:"Error:"})," ",this.state.error?.toString()]}),r.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}const cN=document.getElementById("root");if(!cN)throw new Error("Root element not found");lC.createRoot(cN).render(r.jsx(h_,{children:r.jsx(f_,{})}));
